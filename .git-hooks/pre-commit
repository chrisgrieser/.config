#!/usr/bin/env zsh
# safeguard against accidentally committing large files
#-------------------------------------------------------------------------------

# CONFIG
max_file_size=2M

#-------------------------------------------------------------------------------

large_files=$(find . -type "file" -not -path "./.git/**" -size +${max_file_size} \
	-not -name "dictcc_arm64" -not -path "*/menu/menu") # exceptions

if [[ -n "$large_files" ]]; then
	echo "‚ùå Large file(s) found. Aborting commit."
	echo "${large_files//.\//- }"
	return 1
fi

echo "Pre-Commit passed."
