selectedFiles=$(osascript -e '
	tell application "Finder" to set selectedFiles to (every item of (get selection))
	set out to ""
	repeat with theFile in selectedFiles
		set out to out & (POSIX path of (theFile as text)) & linefeed
	end repeat
	return out
')
[[ -z "$selectedFiles" ]] && return 1
echo "$selectedFiles" | while read -r item; do
        [[ ! -d "$item" ]] && continue
        echo "$item"
done
