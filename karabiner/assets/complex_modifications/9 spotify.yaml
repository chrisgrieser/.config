# yaml-language-server: $schema=./schema/karabiner-mod-schema.json
#───────────────────────────────────────────────────────────────────────────────

title: Spotify Control
anchors:
  - conditions:
      - &not-game 
        type: frontmost_application_unless
        file_paths:
          - "/Users/.*/Library/Application Support/Steam/steamapps/common/"
          - "/Applications/StarCraft II/"
#───────────────────────────────────────────────────────────────────────────────
rules:
  - description: Spotify Media Controls
    manipulators:
      - type: basic
        from: { key_code: f3 }
        to:
          - shell_command: open "https://open.spotify.com/"
        conditions: [*not-game]
      #─────────────────────────────────────────────────────────────────────────

      # until spotify-play is fixed, use `f7` to pause.
      # https://github.com/aome510/spotify-player/issues/804
      - type: basic
        from: { key_code: f7 }
        to:
          - shell_command: |
              "$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/alexa-virtual-trigger" \
                "spotify-pause"
              "$HOME/.config/karabiner/assets/notificators/spotify-notificator" \
                --title "Spotify" --message "⏸️ Pause"
        conditions: [*not-game]


      - type: basic
        from: { key_code: f8 }
        to:
          - shell_command: |
              "$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/alexa-virtual-trigger" \
                "spotify-play"
              "$HOME/.config/karabiner/assets/notificators/spotify-notificator" \
                --title "Spotify" --message "▶️ Resume"
        conditions: [*not-game]

      - type: basic
        from: { key_code: f9 }
        to:
          - shell_command: |
              "$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/alexa-virtual-trigger" \
                "spotify-next"
        conditions: [*not-game]
