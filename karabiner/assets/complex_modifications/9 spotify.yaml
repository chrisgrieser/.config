# yaml-language-server: $schema=./schema/karabiner-mod-schema.json
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

title: Spotify Control
rules:
  - description: Spotify Media Controls
    manipulators:
      - type: basic
        from: { key_code: f3 }
        to:
          - shell_command: open "https://open.spotify.com/"
      #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: basic
        from: { key_code: f4 }
        to:
          - shell_command: |
              info=$(spotify_player get key playback)
              artist=$(echo "$info" | jq ".item.artists[0].name")
              song=$(echo "$info" | jq ".item.name")
              "$HOME/.config/karabiner/assets/notificators/spotify-notificator" \
                --title "Spotify" --message "ðŸ’š $artist â€“ $song"
              spotify_player like

      # until spotify-play is fixed, use f7 to pause.
      # https://github.com/aome510/spotify-player/issues/804
      - type: basic
        from: { key_code: f7 }
        to:
          - shell_command: |
              export PATH=/usr/local/lib:/usr/local/bin:/opt/homebrew/bin/:$PATH
              spotify_player playback previous && exit 0
              # if unresponsive, trigger via virtual trigger to force playing
              "$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/alexa-virtual-trigger" "spotify-pause"

      - type: basic
        from: { key_code: f8 }
        to:
          - shell_command: |
              export PATH=/usr/local/lib:/usr/local/bin:/opt/homebrew/bin/:$PATH
              spotify_player playback play-pause && exit 0
              # if unresponsive, trigger via virtual trigger to force playing
              "$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/alexa-virtual-trigger" "spotify-play"

      - type: basic
        from: { key_code: f9 }
        to:
          - shell_command: |
              export PATH=/usr/local/lib:/usr/local/bin:/opt/homebrew/bin/:$PATH
              spotify_player playback next && exit 0
              # if unresponsive, trigger via virtual trigger to force playing
              "$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/alexa-virtual-trigger" "spotify-next"
