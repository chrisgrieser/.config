rules:
  - description: "F keys to media controls"
    # see also spotify-tui issue https://github.com/Rigellute/spotify-tui/issues/1072
    # done here to be able to quickly change it back, also using applescript
    # avoids the needs for media-key forwarding
    manipulators:
      # Open Spotify
      - type: basic
        from: { key_code: f3 }
        to:
          - shell_command: open -a "Spotify"
      # Like (only feature still working with Spotify-TUI)
      - type: basic
        from: { key_code: f4 }
        to:
          - shell_command: |
              export PATH=/usr/local/lib:/usr/local/bin:/opt/homebrew/bin/:$PATH
              spt playback --like | sed 's/üîÄ//' | sed 's/‚ñ∂Ô∏è//' |
              xargs -I {} osascript -e 'display notification "{}" with title "üéµ Spotify"'
      # Play/Pause
      - type: basic
        from: { key_code: f8 }
        to:
          - shell_command: pgrep -q "Spotify" || open -a "Spotify"
          # - consumer_key_code: play_or_pause
          - shell_command: osascript -e 'tell application "Spotify" to playpause'
      # Forward
      - type: basic
        from: { key_code: f9 }
        to:
          - shell_command: pgrep -q "Spotify" || open -a "Spotify"
          # - consumer_key_code: fast_forward
          - consumer_key_code: osascript -e 'tell application "Spotify" to next track'
      # Back
      - type: basic
        from: { key_code: f8 }
        to:
          - shell_command: pgrep -q "Spotify" || open -a "Spotify"
          # - consumer_key_code: rewind
          - consumer_key_code: osascript -e 'tell application "Spotify" to previous track'
