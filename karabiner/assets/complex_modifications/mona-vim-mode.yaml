# yaml-language-server: $schema=./schema/karabiner-mod-schema.json
#───────────────────────────────────────────────────────────────────────────────
title: Mona Vim Mode
anchors:
  - conditions:
      - &is-mona { type: frontmost_application_if, bundle_identifiers: [com.jonny.supermona] }
#-------------------------------------------------------------------------------
rules:
  - description: "Mona Vim mode"
    manipulators:
      #-------------------------------------------------------------------------
      # CAVEAT these mappings makes writing new messages not possible, it's only
      # useful for purely reading in Mona.
      #-------------------------------------------------------------------------
      # `o` to open a link in the browser
      - type: basic
        from: { key_code: o }
        to:
          - { key_code: l, modifiers: [command] }
          - { key_code: vk_none, hold_down_milliseconds: 100 }
          - { key_code: down_arrow }
          - { key_code: return_or_enter }
        conditions: [*is-mona]
      # `O` to open a the tweet in the browser
      - type: basic
        from: { key_code: o, modifiers: { mandatory: [shift] } }
        to:
          - { key_code: o, modifiers: [command, shift] }
        conditions: [*is-mona]
      # `hjkl`
      - type: basic
        from: { key_code: j }
        to: [{ key_code: down_arrow }]
        conditions: [*is-mona]
      - type: basic
        from: { key_code: k }
        to: [{ key_code: up_arrow }]
        conditions: [*is-mona]
      - type: basic
        from: { key_code: h }
        to: [{ key_code: left_arrow }]
        conditions: [*is-mona]
      - type: basic
        from: { key_code: l }
        to: [{ key_code: right_arrow }]
        conditions: [*is-mona]
