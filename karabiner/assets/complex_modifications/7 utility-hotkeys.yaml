title: ğŸ”˜ Utility Shortcuts
rules:
  - description: r-cmd, cmd-j, cmd-shift-j, cmd-e
    manipulators:
      # r-cmd (tap) -> ctrl-e
      - type: basic
        from: { key_code: right_command }
        to:
          - key_code: right_command
        to_if_alone:
          - { key_code: e, modifiers: [control] }
      # fn+space â†’ ctrl+space (for Apple Keyboards)
      - type: basic
        from: { key_code: spacebar, modifiers: { mandatory: [fn] } }
        to:
          - { key_code: spacebar, modifiers: [control] }

      #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # ğŸ”˜ âŒ˜ J â†’ Expand Word
      - type: basic
        from: { key_code: j, modifiers: { mandatory: [command] } }
        to:
          - { key_code: right_arrow, modifiers: [option] }
          - { key_code: left_arrow, modifiers: [shift, option] }
        conditions:
          - type: frontmost_application_unless
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"
      # ğŸ”˜ âŒ˜ â‡§ J â†’ Find word under cursor (similar to `*` in vim visual mode)
      - type: basic
        from: { key_code: j, modifiers: { mandatory: [command, shift] } }
        to:
          - shell_command: |
              osascript -e '
                tell application "System Events" to tell (first process where it is frontmost)
                  click menu item "Use Selection For Find" of menu of menu item "Find" of menu "Edit" of menu bar 1
                  click menu item "Find Next" of menu of menu item "Find" of menu "Edit" of menu bar 1
                end tell'
        conditions:
          - type: frontmost_application_unless
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"

      #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # inline cod[e]
      - type: basic
        from: { key_code: e, modifiers: { mandatory: [command] } }
        to:
          - shell_command: pbpaste | pbcopy -pboard ruler # move current clipboard to alt clipboard
          - { key_code: vk_none, hold_down_milliseconds: 100 }
          - shell_command: pbcopy < /dev/null # empty the standard clipboard
          - { key_code: vk_none, hold_down_milliseconds: 100 }
          - { key_code: x, modifiers: [command] }
          - { key_code: vk_none, hold_down_milliseconds: 150 }
          - { key_code: equal_sign, modifiers: [shift] }
          - { key_code: equal_sign, modifiers: [shift] }
          - key_code: left_arrow
          - { key_code: v, modifiers: [command] }
          - { key_code: vk_none, hold_down_milliseconds: 100 }
          - shell_command: pbpaste -pboard ruler | pbcopy # restore previous cb
        conditions:
          - type: frontmost_application_if
            bundle_identifiers:
              - ^com\.hnc\.Discord$
              - ^com\.tinyspeck\.slackmacgap$
              - ^com\.brave\.Browser$ 
              - ^com\.vivaldi\.Vivaldi$ # useful for reddit
              - ^com\.apptorium\.SideNotes-paddle$
  #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - description: "ğŸ”˜ Â§ â†’ |"
    manipulators:
      - type: basic
        from: { key_code: "3", modifiers: { mandatory: [shift] } }
        conditions:
          - { type: input_source_if, input_sources: [{ language: ^de$ }] }
        to:
          - { key_code: "7", modifiers: [option] }
  - description: "ğŸ”˜ Â° â†’ \\ (+ US Layout); âŒ¥^ for Â° Symbol"
    manipulators:
      - type: basic
        from: { key_code: non_us_backslash, modifiers: { mandatory: [shift] } }
        conditions:
          - type: input_source_if
            input_sources: [{ language: ^de$ }]
        to:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - key_code: non_us_pound
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }
      - type: basic
        from: { key_code: non_us_backslash, modifiers: { mandatory: [option] } }
        conditions:
          - type: input_source_if
            input_sources: [{ language: ^de$ }]
        to:
          - { key_code: non_us_backslash, modifiers: [shift] }
      - type: basic
        from: { key_code: non_us_backslash, modifiers: { mandatory: [command] } }
        conditions:
          - type: input_source_if
            input_sources: [{ language: ^de$ }]
        to:
          - { key_code: "6", modifiers: [command] }
  - description: "ğŸ”˜1ï¸âƒ£ One Stroke ^` (German Layout)"
    manipulators:
      # backtick
      - type: basic
        from: { key_code: equal_sign, modifiers: { mandatory: [shift] } }
        to:
          - { key_code: equal_sign, modifiers: [shift] }
          - key_code: spacebar
        conditions:
          - type: input_source_if
            input_sources: [{ language: ^de$ }]
      # the ^
      - type: basic
        from:
          key_code: non_us_backslash
        to:
          - key_code: non_us_backslash
          - key_code: spacebar
        conditions:
          - type: input_source_if
            input_sources: [{ language: ^de$ }]
          - type: frontmost_application_unless
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"
  #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - description: "âš’ï¸ {}@^~|: German to US layout"
    manipulators:
      # Curly Brace {
      - type: basic
        from: { key_code: "8", modifiers: { mandatory: [option] } }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - type: frontmost_application_if
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"
        to:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - { key_code: open_bracket, modifiers: [shift] }
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }
      # Curly Brace }
      - type: basic
        from: { key_code: "9", modifiers: { mandatory: [option] } }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - type: frontmost_application_if
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"
        to:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - { key_code: close_bracket, modifiers: [shift] }
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }
      # at @
      - type: basic
        from: { key_code: l, modifiers: { mandatory: [option] } }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - type: frontmost_application_if
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"
        to:
          - { select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ } }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - { key_code: "2", modifiers: [shift] }
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }
      # Grave ^ -> f1, and that in turn remapped in the app (switching keyboard layout laggy)
      - type: basic
        from: { key_code: non_us_backslash }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - type: frontmost_application_if
            file_paths:
              - ^/Applications/Obsidian\.app
              - "[Nn]eovide"
        to:
          - { key_code: f1 }
      # Tilde ~
      - type: basic
        from: { key_code: "n", modifiers: { mandatory: [option] } }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - { type: frontmost_application_unless, file_paths: [wezterm-gui$] }
        to:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - { key_code: grave_accent_and_tilde, modifiers: [shift] }
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }

  #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - description: "âš’ï¸ ÃŸÂ´ â†’ [] (+ German to US Layout), âŒ¥+ÃŸ â†’ ÃŸ"
    manipulators:
      # âŒ¥ÃŸ â†’ ÃŸ
      - type: basic
        from: { key_code: hyphen, modifiers: { mandatory: [option] } }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - type: frontmost_application_unless
            bundle_identifiers:
              - ^com\.tinyspeck\.slackmacgap$
              - ^com\.microsoft\.Word$
              - ^com\.apptorium\.SideNotes-paddle$
        to:
          - key_code: hyphen
      # ÃŸ to [
      - type: basic
        from: { key_code: hyphen }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
          - type: frontmost_application_unless
            bundle_identifiers:
              - ^com\.tinyspeck\.slackmacgap$
              - ^com\.microsoft\.Word$
              - ^com\.apptorium\.SideNotes-paddle$
        to:
          - { select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ } }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - key_code: open_bracket
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }

      # forward tick to ]
      - type: basic
        from: { key_code: equal_sign }
        conditions:
          - { type: input_source_if, input_sources: [language: ^de$] }
        to:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.US$ }
          - { key_code: vk_none, hold_down_milliseconds: 20 }
          - key_code: close_bracket
        to_after_key_up:
          - select_input_source: { input_source_id: ^com\.apple\.keylayout\.ABC-QWERTZ$ }
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
