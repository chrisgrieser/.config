{
	"running check": {
		"prefix": "running check",
		"body": "Application(\"${1:appName}\").running()"
	},
	"check frontmost": {
		"prefix": "check frontmost",
		"body": "Application(\"${1:appName}\").frontmost();"
	},
	"running apps array": {
		"prefix": "running apps array",
		"body": "Application(\"System Events\").applicationProcesses.where({ backgroundOnly: false }).displayedName();"
	},
	"online JSON": {
		"prefix": "online JSON",
		"body": "const onlineJSON = (url) => JSON.parse(app.doShellScript(`curl -s \"${url}\"`));"
	},
	"app": {
		"prefix": "app",
		"body": [
			"const app = Application.currentApplication()",
			"app.includeStandardAdditions = true;"
		]
	},
	"shell script": {
		"prefix": "shell script",
		"body": "app.doShellScript(`${1:shellscript}`);"
	},
	"open": {
		"prefix": "open",
		"body": "'app.openLocation(\"${1:url}\");"
	},
	"clipboard": {
		"prefix": "clipboard",
		"body": "app.setTheClipboardTo(\"${1:str}\");"
	},
	"home (JXA)": {
		"prefix": "home (JXA)",
		"body": "app.pathTo(\"home folder\")"
	},
	"resolve home (JXA)": {
		"prefix": "resolve home (JXA)",
		"body": "const ${1:vari} = $.getenv(\"${2:envvar}\").replace(/^~/, \"\");"
	},
	"exists (file)": {
		"prefix": "exists (file)",
		"body": "'const fileExists = (filePath) => Application(\"Finder\").exists(Path(filePath));"
	},
	"window path (Finder)": {
		"prefix": "window path (Finder)",
		"body": [
			"function finderFrontWindow(){",
			"\tconst posixPath = (finderWindow) => $.NSURL.alloc.initWithString(finderWindow.target.url()).fileSystemRepresentation;",
			"\treturn posixPath(Application(\"Finder\").finderWindows[0]);",
			"}"
		]
	},
	"selection (Finder)": {
		"prefix": "selection (Finder)",
		"body": [
			"function finderSelection () {",
			"\tconst selection = decodeURI(Application(\"Finder\").selection()[0]?.url());",
			"\tif (selection === \"undefined\") return \"\"; // no selection",
			"\treturn selection.slice(7);",
			"}"
		]
	},
	"read file": {
		"prefix": "read file",
		"body": [
			"function readFile(path) {",
			"\tconst fm = $.NSFileManager.defaultManager;",
			"\tconst data = fm.contentsAtPath(path);",
			"\tconst str = $.NSString.alloc.initWithDataEncoding(data, $.NSUTF8StringEncoding);",
			"\treturn ObjC.unwrap(str);",
			"}"
		]
	},
	"write file": {
		"prefix": "write file",
		"body": [
			"function writeToFile(file, text) {",
			"\tconst str = $.NSString.alloc.initWithUTF8String(text);",
			"\tstr.writeToFileAtomicallyEncodingError(file, true, $.NSUTF8StringEncoding, null);",
			"}"
		]
	},
	"browser URL & title (function)": {
		"prefix": "window path (Finder)",
		"body": [
			"function browserTab() {",
			"\tconst frontmostAppName = Application(\"System Events\").applicationProcesses.where({ frontmost: true }).name()[0];",
			"\tconst frontmostApp = Application(frontmostAppName);",
			"\tconst chromiumVariants = [\"Google Chrome\", \"Chromium\", \"Opera\", \"Vivaldi\", \"Brave Browser\", \"Microsoft Edge\"];",
			"\tconst webkitVariants = [\"Safari\", \"Webkit\"];",
			"\tlet title, url;",
			"\tif (chromiumVariants.some(appName => frontmostAppName.startsWith(appName))) {",
			"\t\turl = frontmostApp.windows[0].activeTab.url();",
			"\t\ttitle = frontmostApp.windows[0].activeTab.name();",
			"\t} else if (webkitVariants.some(appName => frontmostAppName.startsWith(appName))) {",
			"\t\turl = frontmostApp.documents[0].url();",
			"\t\ttitle = frontmostApp.documents[0].name();",
			"\t} else {",
			"\t\treturn \"You need a supported browser as your frontmost app\";",
			"\t}",
			"\t\treturn { \"url\": url, \"title\": title };",
			"}"
		]
	}
}
