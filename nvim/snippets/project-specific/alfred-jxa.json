{
	"Get Alfred Env": {
		"prefix": "Get Alfred Env",
		"body": "const ${1:envVar} = $.getenv(\"${2:envVar}\");"
	},
	"Get Alfred Env (+ resolve home)": {
		"prefix": "Get Alfred Env (+ resolve home)",
		"body": "const ${1:envVar} = $.getenv(\"${2:envVar}\").replace(/^~/, app.pathTo(\"home folder\"));"
	},
	"argv": {
		"prefix": "argv",
		"body": [
			"function run(argv){",
			"\tconst ${1:query} = argv[0];",
			"}"
		]
	},
	"Modifiers (Script Filter)": {
		"prefix": "Modifiers (Alfred)",
		"body": [
			"mods: {",
			"\t${1:cmd}: {",
			"\t\targ: \"${2:arg}\",",
			"\t\tsubtitle: \"${1:cmd}: ${3:text}\",",
			"\t},",
			"},"
		]
	},
	"Script Filter": {
		"prefix": "Script Filter (Alfred)",
		"body": [
			"const jsonArray = app.doShellScript(`$1`)",
			"\t.split(\"\\r\")",
			"\t.map(item => {",
			"\t\t$2",
			"\t\treturn {",
			"\t\t\ttitle: item,",
			"\t\t\tmatch: alfredMatcher(item),",
			"\t\t\tsubtitle: item,",
			"\t\t\ttype: \"file:skipcheck\",",
			"\t\t\ticon: { type: \"fileicon\", path: item },",
			"\t\t\targ: item,",
			"\t\t\tuid: item,",
			"\t\t};",
			"\t});",
			"JSON.stringify({ items: jsonArray });"
		]
	},
	"read Alfred data": {
		"prefix": "read Alfred data",
		"body": [
			"function readData (key) {",
			"\tconst fileExists = (filePath) => Application(\"Finder\").exists(Path(filePath));",
			"\tconst dataPath = $.getenv(\"alfred_workflow_data\") + \"/\" + key;",
			"\tif (!fileExists(dataPath)) return \"data does not exist.\";",
			"\tconst data = $.NSFileManager.defaultManager.contentsAtPath(dataPath);",
			"\tconst str = $.NSString.alloc.initWithDataEncoding(data, $.NSUTF8StringEncoding);",
			"\treturn ObjC.unwrap(str);",
			"}"
		]
	},
	"write Alfred data": {
		"prefix": "write Alfred data",
		"body": [
			"function writeData(key, newValue) {",
			"\tconst dataFolder = $.getenv(\"alfred_workflow_data\");",
			"\tconst fileManager = $.NSFileManager.defaultManager;",
			"\tconst folderExists = fileManager.fileExistsAtPath(dataFolder);",
			"\tif (!folderExists) fileManager.createDirectoryAtPathWithIntermediateDirectoriesAttributesError(dataFolder, false, $(), $());",
			"\tconst dataPath = dataFolder + \"/\" + key;",
			"\tconst str = $.NSString.alloc.initWithUTF8String(newValue);",
			"\tstr.writeToFileAtomicallyEncodingError(dataPath,",
			"\ttrue, $.NSUTF8StringEncoding, null);",
			"}"
		]
	}
}
