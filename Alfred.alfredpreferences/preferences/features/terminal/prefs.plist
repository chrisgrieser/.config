<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>application</key>
	<integer>1</integer>
	<key>custom</key>
	<string># INFO to be entered in the Alfred Terminal settings (Kept here just for reference.)
# alfredpreferences://navigateto/features&gt;terminal
--------------------------------------------------------------------------------
# DOCS https://wezfurlong.org/wezterm/cli/cli/send-text
--------------------------------------------------------------------------------

on alfred_script(shellCmd)
	set setPath to "export PATH=/usr/local/lib:/usr/local/bin:/opt/homebrew/bin/:$PATH ; "
	set isCd to(text 1 thru 3 of shellCmd) is "cd "
	tell application "System Events"
		set weztermRunning to (name of processes) contains "wezterm-gui"
	end tell

	if isCd and weztermRunning then
		set dir to text 4 thru -1 of shellCmd
		do shell script (setPath &amp; "wezterm start --cwd " &amp; quoted form of dir)
		return
	end

	if isCd then
		set dir to text 4 thru -1 of shellCmd
		set shellCmd to "builtin cd -q " &amp; quoted form of dir &amp; " &amp;&amp; clear"
	end if
	if not weztermRunning then
		tell application "WezTerm" to activate
		tell application "System Events"
			repeat while (name of first application process whose frontmost is true) is not "wezterm-gui"
				delay 0.05
			end repeat
		end tell
		delay 0.1
	end if

	tell application "WezTerm" to activate
	do shell script (setPath &amp; "echo " &amp; quoted form of shellCmd &amp; " | wezterm cli send-text --no-paste")
end alfred_script</string>
	<key>prefix</key>
	<integer>1</integer>
</dict>
</plist>
