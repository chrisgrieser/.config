# https://espanso.org/docs/
# ------------------------------------------

matches:
  - replace: 'osascript -e "tell application \"Drafts\" to make new draft with properties {content: \"$foo\", tags: {\"bar\"}}"'
    label: ğŸš Create Draft
  - replace: |
      file_name=$(basename "$input_path")
      ext="${file_name##*.}"
      file_without_extension="${file_name%.*}"
      file_name=$(basename "$input_path" .txt) # when extension is know, e.g. .txt
      parent_folder=$(dirname "$input_path")
    label: ğŸš Extract file name, extension or folder from path
  - replace: cd "$(dirname "$0")"
    label: ğŸš Go to directory of script (location)
  - replace: qlmanage -p "$filepath"
    label: ğŸš Quick Look file
  - replace: |
      plutil -extract name.childkey xml1 -o - example.plist | sed -n 4p | cut -d">" -f2 | cut -d"<" -f1
    label: ğŸš Read plist value
  - replace: echo | {command} 2>&1
    label: ğŸš Redirect STDERR to STDOUT
  - replace: |
      if [[ "$LONG_STRING" =~ "$SHORTSTRING" ]] ; then
      	echo "short string is part of long string"
      fi
    label: ğŸš String Includes
  - triggers: ["!zsh", "#!"]
    replace: "#!/usr/bin/env zsh\n"
    label: ğŸš zsh Shebang
  - replace: '[[ "$LONG_STRING" =~ "$SHORT_STRING" ]]'
    label: ğŸš String contains other string
  - trigger: "!sed"
    replace: "| sed 's/$|$//g' "
    label: ğŸš pipe to sed
  - trigger: "!null"
    replace: "&> /dev/null"
    label: ğŸš dev/null
  - replace: 'system_profiler SPDisplaysDataType | grep -c "Resolution"'
    label: ğŸš Screen count
  - trigger: "!resolve"
    replace: |
      resolved_path="${file_path/#\~/$HOME}"

    label: 'ğŸš Resolve ~'
  - trigger: "!hr"
    replace: "#-------------------------------------------------------------------------------"
  - label: "ğŸš Number of Displays (on macOS)"
    replace: "system_profiler SPDisplaysDataType | grep -c resolution"
  - trigger: "!gc"
    label: "ğŸš Guard Clause"
    replace: '[[ -e "$$|$" ]] && exit 1'
  - label: "ğŸš Check whether process is running"
    replace: |
      if pgrep -x "app$|$" > /dev/null; then
      	echo "Running"
      else
      	echo "Not running"
      fi
  - regex: " ?!!"  # so this works whether prepended with space or not
    replace: " {\n"
    label: ğŸ Quicker Block
