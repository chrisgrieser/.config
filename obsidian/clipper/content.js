function t(){const t=document.querySelectorAll('script[type="application/ld+json"]'),e=[];return t.forEach((t=>{let n=t.textContent||"";try{n=n.replace(/\/\*[\s\S]*?\*\/|^\s*\/\/.*$/gm,"").replace(/^\s*<!\[CDATA\[([\s\S]*?)\]\]>\s*$/,"$1").replace(/^\s*(\*\/|\/\*)\s*|\s*(\*\/|\/\*)\s*$/g,"").trim();const t=JSON.parse(n);e.push(t)}catch(t){console.error("Error parsing schema.org data:",t),console.error("Problematic JSON content:",n)}})),e}chrome.runtime.onMessage.addListener((function(e,n,r){if("getPageContent"===e.action){let e="";const n=window.getSelection();if(n&&n.rangeCount>0){const t=n.getRangeAt(0).cloneContents(),r=document.createElement("div");r.appendChild(t),e=r.innerHTML}const o={},c=t();r({content:document.documentElement.outerHTML,selectedHtml:e,extractedContent:o,schemaOrgData:c})}else"extractContent"===e.action&&r({content:function(t,e){var n;const r=document.querySelectorAll(t);return r.length>1?Array.from(r).map((t=>{var n;return e?t.getAttribute(e)||"":(null===(n=t.textContent)||void 0===n?void 0:n.trim())||""})):1===r.length?e?r[0].getAttribute(e)||"":(null===(n=r[0].textContent)||void 0===n?void 0:n.trim())||"":""}(e.selector,e.attribute),schemaOrgData:t()});return!0}));