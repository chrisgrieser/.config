/*! For license information please see popup.js.LICENSE.txt */
var e={804:e=>{var t={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function n(e){return(!e.style||"none"!=e.style.display)&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||"true"!=e.getAttribute("aria-hidden")||e.className&&e.className.indexOf&&-1!==e.className.indexOf("fallback-image"))}e.exports=function(e,r={}){"function"==typeof r&&(r={visibilityChecker:r});var i={minScore:20,minContentLength:140,visibilityChecker:n};r=Object.assign(i,r);var a=e.querySelectorAll("p, pre, article"),o=e.querySelectorAll("div > br");if(o.length){var s=new Set(a);[].forEach.call(o,(function(e){s.add(e.parentNode)})),a=Array.from(s)}var l=0;return[].some.call(a,(function(e){if(!r.visibilityChecker(e))return!1;var n=e.className+" "+e.id;if(t.unlikelyCandidates.test(n)&&!t.okMaybeItsACandidate.test(n))return!1;if(e.matches("li p"))return!1;var i=e.textContent.trim().length;return!(i<r.minContentLength)&&(l+=Math.sqrt(i-r.minContentLength))>r.minScore}))}},238:e=>{function t(e,t){if(t&&t.documentElement)e=t,t=arguments[2];else if(!e||!e.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=e,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(e){if(e.nodeType==e.TEXT_NODE)return`${e.nodeName} ("${e.textContent}")`;let t=Array.from(e.attributes||[],(function(e){return`${e.name}="${e.value}"`})).join(" ");return`<${e.localName} ${t}>`};this.log=function(){if("undefined"!=typeof console){let t=Array.from(arguments,(t=>t&&t.nodeType==this.ELEMENT_NODE?e(t):t));t.unshift("Reader: (Readability)"),console.log.apply(console,t)}else if("undefined"!=typeof dump){var t=Array.prototype.map.call(arguments,(function(t){return t&&t.nodeName?e(t):t})).join(" ");dump("Reader: (Readability) "+t+"\n")}}}else this.log=function(){}}t.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(e){this._fixRelativeUris(e),this._simplifyNestedElements(e),this._keepClasses||this._cleanClasses(e)},_removeNodes:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var n=e.length-1;n>=0;n--){var r=e[n],i=r.parentNode;i&&(t&&!t.call(this,r,n,e)||i.removeChild(r))}},_replaceNodeTags:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const n of e)this._setNodeTag(n,t)},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_findNode:function(e,t){return Array.prototype.find.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_everyNode:function(e,t){return Array.prototype.every.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments).map((function(t){return e.call(t)}));return Array.prototype.concat.apply([],t)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map((function(t){var n=e.getElementsByTagName(t);return Array.isArray(n)?n:Array.from(n)})))},_cleanClasses:function(e){var t=this._classesToPreserve,n=(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return-1!=t.indexOf(e)})).join(" ");for(n?e.setAttribute("class",n):e.removeAttribute("class"),e=e.firstElementChild;e;e=e.nextElementSibling)this._cleanClasses(e)},_fixRelativeUris:function(e){var t=this._doc.baseURI,n=this._doc.documentURI;function r(e){if(t==n&&"#"==e.charAt(0))return e;try{return new URL(e,t).href}catch(e){}return e}var i=this._getAllNodesWithTag(e,["a"]);this._forEachNode(i,(function(e){var t=e.getAttribute("href");if(t)if(0===t.indexOf("javascript:"))if(1===e.childNodes.length&&e.childNodes[0].nodeType===this.TEXT_NODE){var n=this._doc.createTextNode(e.textContent);e.parentNode.replaceChild(n,e)}else{for(var i=this._doc.createElement("span");e.firstChild;)i.appendChild(e.firstChild);e.parentNode.replaceChild(i,e)}else e.setAttribute("href",r(t))}));var a=this._getAllNodesWithTag(e,["img","picture","figure","video","audio","source"]);this._forEachNode(a,(function(e){var t=e.getAttribute("src"),n=e.getAttribute("poster"),i=e.getAttribute("srcset");if(t&&e.setAttribute("src",r(t)),n&&e.setAttribute("poster",r(n)),i){var a=i.replace(this.REGEXPS.srcsetUrl,(function(e,t,n,i){return r(t)+(n||"")+i}));e.setAttribute("srcset",a)}}))},_simplifyNestedElements:function(e){for(var t=e;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&(!t.id||!t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var n=t.children[0],r=0;r<t.attributes.length;r++)n.setAttribute(t.attributes[r].name,t.attributes[r].value);t.parentNode.replaceChild(n,t),t=n;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var e=this._doc,t="",n="";try{"string"!=typeof(t=n=e.title.trim())&&(t=n=this._getInnerText(e.getElementsByTagName("title")[0]))}catch(e){}var r=!1;function i(e){return e.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))r=/ [\\\/>»] /.test(t),i(t=n.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"))<3&&(t=n.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(-1!==t.indexOf(": ")){var a=this._concatNodeLists(e.getElementsByTagName("h1"),e.getElementsByTagName("h2")),o=t.trim();this._someNode(a,(function(e){return e.textContent.trim()===o}))||(i(t=n.substring(n.lastIndexOf(":")+1))<3?t=n.substring(n.indexOf(":")+1):i(n.substr(0,n.indexOf(":")))>5&&(t=n))}else if(t.length>150||t.length<15){var s=e.getElementsByTagName("h1");1===s.length&&(t=this._getInnerText(s[0]))}var l=i(t=t.trim().replace(this.REGEXPS.normalize," "));return l<=4&&(!r||l!=i(n.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=n),t},_prepDocument:function(){var e=this._doc;this._removeNodes(this._getAllNodesWithTag(e,["style"])),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(this._getAllNodesWithTag(e,["font"]),"SPAN")},_nextNode:function(e){for(var t=e;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),(function(e){for(var t=e.nextSibling,n=!1;(t=this._nextNode(t))&&"BR"==t.tagName;){n=!0;var r=t.nextSibling;t.parentNode.removeChild(t),t=r}if(n){var i=this._doc.createElement("p");for(e.parentNode.replaceChild(i,e),t=i.nextSibling;t;){if("BR"==t.tagName){var a=this._nextNode(t.nextSibling);if(a&&"BR"==a.tagName)break}if(!this._isPhrasingContent(t))break;var o=t.nextSibling;i.appendChild(t),t=o}for(;i.lastChild&&this._isWhitespace(i.lastChild);)i.removeChild(i.lastChild);"P"===i.parentNode.tagName&&this._setNodeTag(i.parentNode,"DIV")}}))},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),this._docJSDOMParser)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e;for(var n=e.ownerDocument.createElement(t);e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e),e.readability&&(n.readability=e.readability);for(var r=0;r<e.attributes.length;r++)try{n.setAttribute(e.attributes[r].name,e.attributes[r].value)}catch(e){}return n},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._fixLazyImages(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"footer"),this._clean(e,"link"),this._clean(e,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(e.children,(function(e){this._cleanMatchedNodes(e,(function(e,n){return this.REGEXPS.shareElements.test(n)&&e.textContent.length<t}))})),this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._replaceNodeTags(this._getAllNodesWithTag(e,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(e,["p"]),(function(e){return 0===e.getElementsByTagName("img").length+e.getElementsByTagName("embed").length+e.getElementsByTagName("object").length+e.getElementsByTagName("iframe").length&&!this._getInnerText(e,!1)})),this._forEachNode(this._getAllNodesWithTag(e,["br"]),(function(e){var t=this._nextNode(e.nextSibling);t&&"P"==t.tagName&&e.parentNode.removeChild(e)})),this._forEachNode(this._getAllNodesWithTag(e,["table"]),(function(e){var t=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(t,"TR")){var n=t.firstElementChild;if(this._hasSingleTagInsideElement(n,"TD")){var r=n.firstElementChild;r=this._setNodeTag(r,this._everyNode(r.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(r,e)}}}))},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0);return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild;if(e.nextElementSibling)return e.nextElementSibling;do{e=e.parentNode}while(e&&!e.nextElementSibling);return e&&e.nextElementSibling},_textSimilarity:function(e,t){var n=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),r=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);return n.length&&r.length?1-r.filter((e=>!n.includes(e))).join(" ").length/r.join(" ").length:0},_checkByline:function(e,t){if(this._articleByline)return!1;if(void 0!==e.getAttribute)var n=e.getAttribute("rel"),r=e.getAttribute("itemprop");return!(!("author"===n||r&&-1!==r.indexOf("author")||this.REGEXPS.byline.test(t))||!this._isValidByline(e.textContent)||(this._articleByline=e.textContent.trim(),0))},_getNodeAncestors:function(e,t){t=t||0;for(var n=0,r=[];e.parentNode&&(r.push(e.parentNode),!t||++n!==t);)e=e.parentNode;return r},_grabArticle:function(e){this.log("**** grabArticle ****");var t=this._doc,n=null!==e;if(!(e=e||this._doc.body))return this.log("No body found in document. Abort."),null;for(var r=e.innerHTML;;){this.log("Starting grabArticle loop");var i=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),a=[],o=this._doc.documentElement;let V=!0;for(;o;){"HTML"===o.tagName&&(this._articleLang=o.getAttribute("lang"));var s=o.className+" "+o.id;if(this._isProbablyVisible(o))if("true"!=o.getAttribute("aria-modal")||"dialog"!=o.getAttribute("role"))if(this._checkByline(o,s))o=this._removeAndGetNext(o);else if(V&&this._headerDuplicatesTitle(o))this.log("Removing header: ",o.textContent.trim(),this._articleTitle.trim()),V=!1,o=this._removeAndGetNext(o);else{if(i){if(this.REGEXPS.unlikelyCandidates.test(s)&&!this.REGEXPS.okMaybeItsACandidate.test(s)&&!this._hasAncestorTag(o,"table")&&!this._hasAncestorTag(o,"code")&&"BODY"!==o.tagName&&"A"!==o.tagName){this.log("Removing unlikely candidate - "+s),o=this._removeAndGetNext(o);continue}if(this.UNLIKELY_ROLES.includes(o.getAttribute("role"))){this.log("Removing content with role "+o.getAttribute("role")+" - "+s),o=this._removeAndGetNext(o);continue}}if("DIV"!==o.tagName&&"SECTION"!==o.tagName&&"HEADER"!==o.tagName&&"H1"!==o.tagName&&"H2"!==o.tagName&&"H3"!==o.tagName&&"H4"!==o.tagName&&"H5"!==o.tagName&&"H6"!==o.tagName||!this._isElementWithoutContent(o)){if(-1!==this.DEFAULT_TAGS_TO_SCORE.indexOf(o.tagName)&&a.push(o),"DIV"===o.tagName){for(var l=null,c=o.firstChild;c;){var u=c.nextSibling;if(this._isPhrasingContent(c))null!==l?l.appendChild(c):this._isWhitespace(c)||(l=t.createElement("p"),o.replaceChild(l,c),l.appendChild(c));else if(null!==l){for(;l.lastChild&&this._isWhitespace(l.lastChild);)l.removeChild(l.lastChild);l=null}c=u}if(this._hasSingleTagInsideElement(o,"P")&&this._getLinkDensity(o)<.25){var d=o.children[0];o.parentNode.replaceChild(d,o),o=d,a.push(o)}else this._hasChildBlockElement(o)||(o=this._setNodeTag(o,"P"),a.push(o))}o=this._getNextNode(o)}else o=this._removeAndGetNext(o)}else o=this._removeAndGetNext(o);else this.log("Removing hidden node - "+s),o=this._removeAndGetNext(o)}var h=[];this._forEachNode(a,(function(e){if(e.parentNode&&void 0!==e.parentNode.tagName){var t=this._getInnerText(e);if(!(t.length<25)){var n=this._getNodeAncestors(e,5);if(0!==n.length){var r=0;r+=1,r+=t.split(this.REGEXPS.commas).length,r+=Math.min(Math.floor(t.length/100),3),this._forEachNode(n,(function(e,t){if(e.tagName&&e.parentNode&&void 0!==e.parentNode.tagName){if(void 0===e.readability&&(this._initializeNode(e),h.push(e)),0===t)var n=1;else n=1===t?2:3*t;e.readability.contentScore+=r/n}}))}}}}));for(var f=[],p=0,m=h.length;p<m;p+=1){var g=h[p],v=g.readability.contentScore*(1-this._getLinkDensity(g));g.readability.contentScore=v,this.log("Candidate:",g,"with score "+v);for(var y=0;y<this._nbTopCandidates;y++){var b=f[y];if(!b||v>b.readability.contentScore){f.splice(y,0,g),f.length>this._nbTopCandidates&&f.pop();break}}}var _,N=f[0]||null,E=!1;if(null===N||"BODY"===N.tagName){for(N=t.createElement("DIV"),E=!0;e.firstChild;)this.log("Moving child out:",e.firstChild),N.appendChild(e.firstChild);e.appendChild(N),this._initializeNode(N)}else if(N){for(var A=[],T=1;T<f.length;T++)f[T].readability.contentScore/N.readability.contentScore>=.75&&A.push(this._getNodeAncestors(f[T]));if(A.length>=3)for(_=N.parentNode;"BODY"!==_.tagName;){for(var S=0,C=0;C<A.length&&S<3;C++)S+=Number(A[C].includes(_));if(S>=3){N=_;break}_=_.parentNode}N.readability||this._initializeNode(N),_=N.parentNode;for(var w=N.readability.contentScore,x=w/3;"BODY"!==_.tagName;)if(_.readability){var L=_.readability.contentScore;if(L<x)break;if(L>w){N=_;break}w=_.readability.contentScore,_=_.parentNode}else _=_.parentNode;for(_=N.parentNode;"BODY"!=_.tagName&&1==_.children.length;)_=(N=_).parentNode;N.readability||this._initializeNode(N)}var D=t.createElement("DIV");n&&(D.id="readability-content");for(var O=Math.max(10,.2*N.readability.contentScore),I=(_=N.parentNode).children,M=0,$=I.length;M<$;M++){var R=I[M],k=!1;if(this.log("Looking at sibling node:",R,R.readability?"with score "+R.readability.contentScore:""),this.log("Sibling has score",R.readability?R.readability.contentScore:"Unknown"),R===N)k=!0;else{var P=0;if(R.className===N.className&&""!==N.className&&(P+=.2*N.readability.contentScore),R.readability&&R.readability.contentScore+P>=O)k=!0;else if("P"===R.nodeName){var B=this._getLinkDensity(R),H=this._getInnerText(R),U=H.length;(U>80&&B<.25||U<80&&U>0&&0===B&&-1!==H.search(/\.( |$)/))&&(k=!0)}}k&&(this.log("Appending node:",R),-1===this.ALTER_TO_DIV_EXCEPTIONS.indexOf(R.nodeName)&&(this.log("Altering sibling:",R,"to div."),R=this._setNodeTag(R,"DIV")),D.appendChild(R),I=_.children,M-=1,$-=1)}if(this._debug&&this.log("Article content pre-prep: "+D.innerHTML),this._prepArticle(D),this._debug&&this.log("Article content post-prep: "+D.innerHTML),E)N.id="readability-page-1",N.className="page";else{var F=t.createElement("DIV");for(F.id="readability-page-1",F.className="page";D.firstChild;)F.appendChild(D.firstChild);D.appendChild(F)}this._debug&&this.log("Article content after paging: "+D.innerHTML);var j=!0,W=this._getInnerText(D,!0).length;if(W<this._charThreshold)if(j=!1,e.innerHTML=r,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:D,textLength:W});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:D,textLength:W});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:D,textLength:W});else{if(this._attempts.push({articleContent:D,textLength:W}),this._attempts.sort((function(e,t){return t.textLength-e.textLength})),!this._attempts[0].textLength)return null;D=this._attempts[0].articleContent,j=!0}if(j){var G=[_,N].concat(this._getNodeAncestors(_));return this._someNode(G,(function(e){if(!e.tagName)return!1;var t=e.getAttribute("dir");return!!t&&(this._articleDir=t,!0)})),D}}},_isValidByline:function(e){return("string"==typeof e||e instanceof String)&&(e=e.trim()).length>0&&e.length<100},_unescapeHtmlEntities:function(e){if(!e)return e;var t=this.HTML_ESCAPE_MAP;return e.replace(/&(quot|amp|apos|lt|gt);/g,(function(e,n){return t[n]})).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,(function(e,t,n){var r=parseInt(t||n,t?16:10);return String.fromCharCode(r)}))},_getJSONLD:function(e){var t,n=this._getAllNodesWithTag(e,["script"]);return this._forEachNode(n,(function(e){if(!t&&"application/ld+json"===e.getAttribute("type"))try{var n=e.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),r=JSON.parse(n);if(!r["@context"]||!r["@context"].match(/^https?\:\/\/schema\.org$/))return;if(!r["@type"]&&Array.isArray(r["@graph"])&&(r=r["@graph"].find((function(e){return(e["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)}))),!r||!r["@type"]||!r["@type"].match(this.REGEXPS.jsonLdArticleTypes))return;if(t={},"string"==typeof r.name&&"string"==typeof r.headline&&r.name!==r.headline){var i=this._getArticleTitle(),a=this._textSimilarity(r.name,i)>.75,o=this._textSimilarity(r.headline,i)>.75;t.title=o&&!a?r.headline:r.name}else"string"==typeof r.name?t.title=r.name.trim():"string"==typeof r.headline&&(t.title=r.headline.trim());return r.author&&("string"==typeof r.author.name?t.byline=r.author.name.trim():Array.isArray(r.author)&&r.author[0]&&"string"==typeof r.author[0].name&&(t.byline=r.author.filter((function(e){return e&&"string"==typeof e.name})).map((function(e){return e.name.trim()})).join(", "))),"string"==typeof r.description&&(t.excerpt=r.description.trim()),r.publisher&&"string"==typeof r.publisher.name&&(t.siteName=r.publisher.name.trim()),void("string"==typeof r.datePublished&&(t.datePublished=r.datePublished.trim()))}catch(e){this.log(e.message)}})),t||{}},_getArticleMetadata:function(e){var t={},n={},r=this._doc.getElementsByTagName("meta"),i=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,a=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(r,(function(e){var t=e.getAttribute("name"),r=e.getAttribute("property"),o=e.getAttribute("content");if(o){var s=null,l=null;r&&(s=r.match(i))&&(l=s[0].toLowerCase().replace(/\s/g,""),n[l]=o.trim()),!s&&t&&a.test(t)&&(l=t,o&&(l=l.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),n[l]=o.trim()))}})),t.title=e.title||n["dc:title"]||n["dcterm:title"]||n["og:title"]||n["weibo:article:title"]||n["weibo:webpage:title"]||n.title||n["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e.byline||n["dc:creator"]||n["dcterm:creator"]||n.author,t.excerpt=e.excerpt||n["dc:description"]||n["dcterm:description"]||n["og:description"]||n["weibo:article:description"]||n["weibo:webpage:description"]||n.description||n["twitter:description"],t.siteName=e.siteName||n["og:site_name"],t.publishedTime=e.datePublished||n["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(e){return"IMG"===e.tagName||1===e.children.length&&""===e.textContent.trim()&&this._isSingleImage(e.children[0])},_unwrapNoscriptImages:function(e){var t=Array.from(e.getElementsByTagName("img"));this._forEachNode(t,(function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t];switch(n.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(n.value))return}e.parentNode.removeChild(e)}));var n=Array.from(e.getElementsByTagName("noscript"));this._forEachNode(n,(function(t){var n=e.createElement("div");if(n.innerHTML=t.innerHTML,this._isSingleImage(n)){var r=t.previousElementSibling;if(r&&this._isSingleImage(r)){var i=r;"IMG"!==i.tagName&&(i=r.getElementsByTagName("img")[0]);for(var a=n.getElementsByTagName("img")[0],o=0;o<i.attributes.length;o++){var s=i.attributes[o];if(""!==s.value&&("src"===s.name||"srcset"===s.name||/\.(jpg|jpeg|png|webp)/i.test(s.value))){if(a.getAttribute(s.name)===s.value)continue;var l=s.name;a.hasAttribute(l)&&(l="data-old-"+l),a.setAttribute(l,s.value)}}t.parentNode.replaceChild(n.firstElementChild,r)}}}))},_removeScripts:function(e){this._removeNodes(this._getAllNodesWithTag(e,["script","noscript"]))},_hasSingleTagInsideElement:function(e,t){return 1==e.children.length&&e.children[0].tagName===t&&!this._someNode(e.childNodes,(function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)}))},_isElementWithoutContent:function(e){return e.nodeType===this.ELEMENT_NODE&&0==e.textContent.trim().length&&(0==e.children.length||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,(function(e){return this.DIV_TO_P_ELEMS.has(e.tagName)||this._hasChildBlockElement(e)}))},_isPhrasingContent:function(e){return e.nodeType===this.TEXT_NODE||-1!==this.PHRASING_ELEMS.indexOf(e.tagName)||("A"===e.tagName||"DEL"===e.tagName||"INS"===e.tagName)&&this._everyNode(e.childNodes,this._isPhrasingContent)},_isWhitespace:function(e){return e.nodeType===this.TEXT_NODE&&0===e.textContent.trim().length||e.nodeType===this.ELEMENT_NODE&&"BR"===e.tagName},_getInnerText:function(e,t){t=void 0===t||t;var n=e.textContent.trim();return t?n.replace(this.REGEXPS.normalize," "):n},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(e&&"svg"!==e.tagName.toLowerCase()){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)e.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);-1!==this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(e.tagName)&&(e.removeAttribute("width"),e.removeAttribute("height"));for(var n=e.firstElementChild;null!==n;)this._cleanStyles(n),n=n.nextElementSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length;if(0===t)return 0;var n=0;return this._forEachNode(e.getElementsByTagName("a"),(function(e){var t=e.getAttribute("href"),r=t&&this.REGEXPS.hashUrl.test(t)?.3:1;n+=this._getInnerText(e).length*r})),n/t},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return"string"==typeof e.className&&""!==e.className&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),"string"==typeof e.id&&""!==e.id&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var n=-1!==["object","embed","iframe"].indexOf(t);this._removeNodes(this._getAllNodesWithTag(e,[t]),(function(e){if(n){for(var t=0;t<e.attributes.length;t++)if(this._allowedVideoRegex.test(e.attributes[t].value))return!1;if("object"===e.tagName&&this._allowedVideoRegex.test(e.innerHTML))return!1}return!0}))},_hasAncestorTag:function(e,t,n,r){n=n||3,t=t.toUpperCase();for(var i=0;e.parentNode;){if(n>0&&i>n)return!1;if(e.parentNode.tagName===t&&(!r||r(e.parentNode)))return!0;e=e.parentNode,i++}return!1},_getRowAndColumnCount:function(e){for(var t=0,n=0,r=e.getElementsByTagName("tr"),i=0;i<r.length;i++){var a=r[i].getAttribute("rowspan")||0;a&&(a=parseInt(a,10)),t+=a||1;for(var o=0,s=r[i].getElementsByTagName("td"),l=0;l<s.length;l++){var c=s[l].getAttribute("colspan")||0;c&&(c=parseInt(c,10)),o+=c||1}n=Math.max(n,o)}return{rows:t,columns:n}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),n=0;n<t.length;n++){var r=t[n];if("presentation"!=r.getAttribute("role"))if("0"!=r.getAttribute("datatable"))if(r.getAttribute("summary"))r._readabilityDataTable=!0;else{var i=r.getElementsByTagName("caption")[0];if(i&&i.childNodes.length>0)r._readabilityDataTable=!0;else if(["col","colgroup","tfoot","thead","th"].some((function(e){return!!r.getElementsByTagName(e)[0]})))this.log("Data table because found data-y descendant"),r._readabilityDataTable=!0;else if(r.getElementsByTagName("table")[0])r._readabilityDataTable=!1;else{var a=this._getRowAndColumnCount(r);a.rows>=10||a.columns>4?r._readabilityDataTable=!0:r._readabilityDataTable=a.rows*a.columns>10}}else r._readabilityDataTable=!1;else r._readabilityDataTable=!1}},_fixLazyImages:function(e){this._forEachNode(this._getAllNodesWithTag(e,["img","picture","figure"]),(function(e){if(e.src&&this.REGEXPS.b64DataUrl.test(e.src)){if("image/svg+xml"===this.REGEXPS.b64DataUrl.exec(e.src)[1])return;for(var t=!1,n=0;n<e.attributes.length;n++){var r=e.attributes[n];if("src"!==r.name&&/\.(jpg|jpeg|png|webp)/i.test(r.value)){t=!0;break}}if(t){var i=e.src.search(/base64\s*/i)+7;e.src.length-i<133&&e.removeAttribute("src")}}if(!(e.src||e.srcset&&"null"!=e.srcset)||-1!==e.className.toLowerCase().indexOf("lazy"))for(var a=0;a<e.attributes.length;a++)if("src"!==(r=e.attributes[a]).name&&"srcset"!==r.name&&"alt"!==r.name){var o=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(r.value)?o="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(r.value)&&(o="src"),o)if("IMG"===e.tagName||"PICTURE"===e.tagName)e.setAttribute(o,r.value);else if("FIGURE"===e.tagName&&!this._getAllNodesWithTag(e,["img","picture"]).length){var s=this._doc.createElement("img");s.setAttribute(o,r.value),e.appendChild(s)}}}))},_getTextDensity:function(e,t){var n=this._getInnerText(e,!0).length;if(0===n)return 0;var r=0,i=this._getAllNodesWithTag(e,t);return this._forEachNode(i,(e=>r+=this._getInnerText(e,!0).length)),r/n},_cleanConditionally:function(e,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(e,[t]),(function(e){var n=function(e){return e._readabilityDataTable},r="ul"===t||"ol"===t;if(!r){var i=0,a=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(a,(e=>i+=this._getInnerText(e).length)),r=i/this._getInnerText(e).length>.9}if("table"===t&&n(e))return!1;if(this._hasAncestorTag(e,"table",-1,n))return!1;if(this._hasAncestorTag(e,"code"))return!1;var o=this._getClassWeight(e);if(this.log("Cleaning Conditionally",e),o+0<0)return!0;if(this._getCharCount(e,",")<10){for(var s=e.getElementsByTagName("p").length,l=e.getElementsByTagName("img").length,c=e.getElementsByTagName("li").length-100,u=e.getElementsByTagName("input").length,d=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),h=0,f=this._getAllNodesWithTag(e,["object","embed","iframe"]),p=0;p<f.length;p++){for(var m=0;m<f[p].attributes.length;m++)if(this._allowedVideoRegex.test(f[p].attributes[m].value))return!1;if("object"===f[p].tagName&&this._allowedVideoRegex.test(f[p].innerHTML))return!1;h++}var g=this._getLinkDensity(e),v=this._getInnerText(e).length,y=l>1&&s/l<.5&&!this._hasAncestorTag(e,"figure")||!r&&c>s||u>Math.floor(s/3)||!r&&d<.9&&v<25&&(0===l||l>2)&&!this._hasAncestorTag(e,"figure")||!r&&o<25&&g>.2||o>=25&&g>.5||1===h&&v<75||h>1;if(r&&y){for(var b=0;b<e.children.length;b++)if(e.children[b].children.length>1)return y;if(l==e.getElementsByTagName("li").length)return!1}return y}return!1}))},_cleanMatchedNodes:function(e,t){for(var n=this._getNextNode(e,!0),r=this._getNextNode(e);r&&r!=n;)r=t.call(this,r,r.className+" "+r.id)?this._removeAndGetNext(r):this._getNextNode(r)},_cleanHeaders:function(e){let t=this._getAllNodesWithTag(e,["h1","h2"]);this._removeNodes(t,(function(e){let t=this._getClassWeight(e)<0;return t&&this.log("Removing header with low class weight:",e),t}))},_headerDuplicatesTitle:function(e){if("H1"!=e.tagName&&"H2"!=e.tagName)return!1;var t=this._getInnerText(e,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(e){return(this._flags&e)>0},_removeFlag:function(e){this._flags=this._flags&~e},_isProbablyVisible:function(e){return(!e.style||"none"!=e.style.display)&&(!e.style||"hidden"!=e.style.visibility)&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||"true"!=e.getAttribute("aria-hidden")||e.className&&e.className.indexOf&&-1!==e.className.indexOf("fallback-image"))},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length;if(e>this._maxElemsToParse)throw new Error("Aborting parsing document; "+e+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var n=this._getArticleMetadata(t);this._articleTitle=n.title;var r=this._grabArticle();if(!r)return null;if(this.log("Grabbed: "+r.innerHTML),this._postProcessContent(r),!n.excerpt){var i=r.getElementsByTagName("p");i.length>0&&(n.excerpt=i[0].textContent.trim())}var a=r.textContent;return{title:this._articleTitle,byline:n.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(r),textContent:a,length:a.length,excerpt:n.excerpt,siteName:n.siteName||this._articleSiteName,publishedTime:n.publishedTime}}},e.exports=t},396:(e,t,n)=>{var r=n(238),i=n(804);e.exports={Readability:r,isProbablyReaderable:i}},353:function(e){e.exports=function(){var e=6e4,t=36e5,n="millisecond",r="second",i="minute",a="hour",o="day",s="week",l="month",c="quarter",u="year",d="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,l),a=n-i<0,o=t.clone().add(r+(a?-1:1),l);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:s,d:o,D:d,h:a,m:i,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=m;var _="$isDayjsObject",N=function(e){return e instanceof S||!(!e||!e[_])},E=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;b[s]=t,i=s}return!r&&i&&(y=i),i||!r&&y},A=function(e,t){if(N(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},T=v;T.l=E,T.i=N,T.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function m(e){this.$L=E(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return T},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,t){var n=A(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return A(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<A(e)},g.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,c=!!T.u(t)||t,h=T.p(e),f=function(e,t){var r=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(o)},p=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case u:return c?f(1,0):f(31,11);case l:return c?f(1,g):f(0,g+1);case s:var b=this.$locale().weekStart||0,_=(m<b?m+7:m)-b;return f(c?v-_:v+(6-_),g);case o:case d:return p(y+"Hours",0);case a:return p(y+"Minutes",1);case i:return p(y+"Seconds",2);case r:return p(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var s,c=T.p(e),h="set"+(this.$u?"UTC":""),f=(s={},s[o]=h+"Date",s[d]=h+"Date",s[l]=h+"Month",s[u]=h+"FullYear",s[a]=h+"Hours",s[i]=h+"Minutes",s[r]=h+"Seconds",s[n]=h+"Milliseconds",s)[c],p=c===o?this.$D+(t-this.$W):t;if(c===l||c===u){var m=this.clone().set(d,1);m.$d[f](p),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[T.p(e)]()},g.add=function(n,c){var d,h=this;n=Number(n);var f=T.p(c),p=function(e){var t=A(h);return T.w(t.date(t.date()+Math.round(e*n)),h)};if(f===l)return this.set(l,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===o)return p(1);if(f===s)return p(7);var m=(d={},d[i]=e,d[a]=t,d[r]=1e3,d)[f]||1,g=this.$d.getTime()+n*m;return T.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),a=this.$H,o=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},f=function(e){return T.s(a%12||12,e,"0")},m=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return s+1;case"MM":return T.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(a);case"HH":return T.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return m(a,o,!0);case"A":return m(a,o,!1);case"m":return String(o);case"mm":return T.s(o,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,h){var f,p=this,m=T.p(d),g=A(n),v=(g.utcOffset()-this.utcOffset())*e,y=this-g,b=function(){return T.m(p,g)};switch(m){case u:f=b()/12;break;case l:f=b();break;case c:f=b()/3;break;case s:f=(y-v)/6048e5;break;case o:f=(y-v)/864e5;break;case a:f=y/t;break;case i:f=y/e;break;case r:f=y/1e3;break;default:f=y}return h?f:T.a(f)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=E(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return T.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),C=S.prototype;return A.prototype=C,[["$ms",n],["$s",r],["$m",i],["$H",a],["$W",o],["$M",l],["$y",u],["$D",d]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),A.extend=function(e,t){return e.$i||(e(t,S,A),e.$i=!0),A},A.locale=E,A.isDayjs=N,A.unix=function(e){return A(1e3*e)},A.en=b[y],A.Ls=b,A.p={},A}()},992:(e,t,n)=>{var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var n=a._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":a._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var o=t.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(t){if(null==t)return a.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var o=[];return n.forEach((function(t){o.push(e(t))})),a.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return a._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,a,o={},s={},l="",c="",u="",d=2,h=3,f=2,p=[],m=0,g=0;for(a=0;a<e.length;a+=1)if(l=e.charAt(a),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=h++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,g==t-1?(g=0,p.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,f),f++),delete s[u]}else for(i=o[u],r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,f),f++),o[c]=h++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,g==t-1?(g=0,p.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,f),f++),delete s[u]}else for(i=o[u],r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){p.push(n(m));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,a,o,s,l,c,u,d=[],h=4,f=4,p=3,m="",g=[],v={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)d[i]=i;for(o=0,l=Math.pow(2,2),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*c,c<<=1;switch(o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*c,c<<=1;u=e(o);break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*c,c<<=1;u=e(o);break;case 2:return""}for(d[3]=u,a=u,g.push(u);;){if(v.index>t)return"";for(o=0,l=Math.pow(2,p),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*c,c<<=1;switch(u=o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*c,c<<=1;d[f++]=e(o),u=f-1,h--;break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),o|=(s>0?1:0)*c,c<<=1;d[f++]=e(o),u=f-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,p),p++),d[u])m=d[u];else{if(u!==f)return null;m=a+a.charAt(0)}g.push(m),d[f++]=a+m.charAt(0),a=m,0==--h&&(h=Math.pow(2,p),p++)}}};return a}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(353),i=n.n(r);function a(e){return navigator.platform.indexOf("Win")>-1?e.replace(":","").replace(/[/\\?%*|"<>]/g,"-"):e.replace(":","").replace(/[/\\]/g,"-")}function o(e,t){return Array(t+1).join(e)}var s=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function l(e){return h(e,s)}var c=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function u(e){return h(e,c)}var d=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function h(e,t){return t.indexOf(e.nodeName)>=0}function f(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var p={};function m(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function g(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function v(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(y(i,t,n))return i}}function y(e,t,n){var r=e.filter;if("string"==typeof r){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(e,t,n))return!0}}function b(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function _(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}p.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},p.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+"\n"}},p.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));return"setext"===n.headingStyle&&r<3?"\n\n"+e+"\n"+o(1===r?"=":"-",e.length)+"\n\n":"\n\n"+o("#",r)+" "+e+"\n\n"}},p.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},p.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return"LI"===n.nodeName&&n.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},p.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var r=n.bulletListMarker+"   ",i=t.parentNode;if("OL"===i.nodeName){var a=i.getAttribute("start"),o=Array.prototype.indexOf.call(i.children,t);r=(a?Number(a)+o:o+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},p.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},p.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){for(var r,i=((t.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],a=t.firstChild.textContent,s=n.fence.charAt(0),l=3,c=new RegExp("^"+s+"{3,}","gm");r=c.exec(a);)r[0].length>=l&&(l=r[0].length+1);var u=o(s,l);return"\n\n"+u+i+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}},p.horizontalRule={filter:"hr",replacement:function(e,t,n){return"\n\n"+n.hr+"\n\n"}},p.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=m(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+e+"]("+n+r+")"}},p.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,n){var r,i,a=t.getAttribute("href"),o=m(t.getAttribute("title"));switch(o&&(o=' "'+o+'"'),n.linkReferenceStyle){case"collapsed":r="["+e+"][]",i="["+e+"]: "+a+o;break;case"shortcut":r="["+e+"]",i="["+e+"]: "+a+o;break;default:var s=this.references.length+1;r="["+e+"]["+s+"]",i="["+s+"]: "+a+o}return this.references.push(i),r},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},p.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},p.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},p.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];-1!==r.indexOf(n);)n+="`";return n+t+e+t+n}},p.image={filter:"img",replacement:function(e,t){var n=m(t.getAttribute("alt")),r=t.getAttribute("src")||"",i=m(t.getAttribute("title"));return r?"!["+n+"]("+r+(i?' "'+i+'"':"")+")":""}},g.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=v(this.array,e,this.options))||(t=v(this._keep,e,this.options))||(t=v(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var N,E,A="undefined"!=typeof window?window:{},T=function(){var e=A.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(e){}return t}()?A.DOMParser:(N=function(){},function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){A.ActiveXObject&&(e=!0)}return e}()?N.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:N.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},N);function S(e,t){var n;return function(e){var t=e.element,n=e.isBlock,r=e.isVoid,i=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!i(t)){for(var a=null,o=!1,s=null,l=_(s,t,i);l!==t;){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(a&&!/ $/.test(a.data)||o||" "!==c[0]||(c=c.substr(1)),!c){l=b(l);continue}l.data=c,a=l}else{if(1!==l.nodeType){l=b(l);continue}n(l)||"BR"===l.nodeName?(a&&(a.data=a.data.replace(/ $/,"")),a=null,o=!1):r(l)||i(l)?(a=null,o=!0):a&&(o=!1)}var u=_(s,l,i);s=l,l=u}a&&(a.data=a.data.replace(/ $/,""),a.data||b(a))}}({element:n="string"==typeof e?(E=E||new T).parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):e.cloneNode(!0),isBlock:l,isVoid:u,isPre:t.preformattedCode?C:null}),n}function C(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function w(e,t){return e.isBlock=l(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=function(e){return!u(e)&&!function(e){return h(e,d)}(e)&&/^\s*$/i.test(e.textContent)&&!function(e){return f(e,c)}(e)&&!function(e){return f(e,d)}(e)}(e),e.flankingWhitespace=function(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n,r={leading:(n=e.textContent.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/))[1],leadingAscii:n[2],leadingNonAscii:n[3],trailing:n[4],trailingNonAscii:n[5],trailingAscii:n[6]};return r.leadingAscii&&x("left",e,t)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&x("right",e,t)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}(e,t),e}function x(e,t,n){var r,i,a;return"left"===e?(r=t.previousSibling,i=/ $/):(r=t.nextSibling,i=/^ /),r&&(3===r.nodeType?a=i.test(r.nodeValue):n.preformattedCode&&"CODE"===r.nodeName?a=!1:1!==r.nodeType||l(r)||(a=i.test(r.textContent))),a}var L=Array.prototype.reduce,D=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function O(e){if(!(this instanceof O))return new O(e);var t={rules:p,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}({},t,e),this.rules=new g(this.options)}function I(e){var t=this;return L.call(e.childNodes,(function(e,n){var r="";return 3===(n=new w(n,t.options)).nodeType?r=n.isCode?n.nodeValue:t.escape(n.nodeValue):1===n.nodeType&&(r=$.call(t,n)),R(e,r)}),"")}function M(e){var t=this;return this.rules.forEach((function(n){"function"==typeof n.append&&(e=R(e,n.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function $(e){var t=this.rules.forNode(e),n=I.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function R(e,t){var n=function(e){for(var t=e.length;t>0&&"\n"===e[t-1];)t--;return e.substring(0,t)}(e),r=t.replace(/^\n*/,""),i=Math.max(e.length-n.length,t.length-r.length);return n+"\n\n".substring(0,i)+r}O.prototype={turndown:function(e){if(!function(e){return null!=e&&("string"==typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=I.call(this,new S(e,this.options));return M.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!=typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return D.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}};const k=O;var P=/highlight-(?:text|source)-([a-z0-9]+)/;function B(e){e.addRule("highlightedCodeBlock",{filter:function(e){var t=e.firstChild;return"DIV"===e.nodeName&&P.test(e.className)&&t&&"PRE"===t.nodeName},replacement:function(e,t,n){var r=((t.className||"").match(P)||[null,""])[1];return"\n\n"+n.fence+r+"\n"+t.firstChild.textContent+"\n"+n.fence+"\n\n"}})}function H(e){e.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var U=Array.prototype.indexOf,F=Array.prototype.every,j={};function W(e){var t,n,r=e.parentNode;return"THEAD"===r.nodeName||r.firstChild===e&&("TABLE"===r.nodeName||(n=(t=r).previousSibling,"TBODY"===t.nodeName&&(!n||"THEAD"===n.nodeName&&/^\s*$/i.test(n.textContent))))&&F.call(e.childNodes,(function(e){return"TH"===e.nodeName}))}function G(e,t){var n=" ";return 0===U.call(t.parentNode.childNodes,t)&&(n="| "),n+e+" |"}function V(e){for(var t in e.keep((function(e){return"TABLE"===e.nodeName&&!W(e.rows[0])})),j)e.addRule(t,j[t])}function Y(e){e.addRule("taskListItems",{filter:function(e){return"checkbox"===e.type&&"LI"===e.parentNode.nodeName},replacement:function(e,t){return(t.checked?"[x]":"[ ]")+" "}})}function q(e){e.use([B,H,V,Y])}j.tableCell={filter:["th","td"],replacement:function(e,t){return G(e,t)}},j.tableRow={filter:"tr",replacement:function(e,t){var n="",r={left:":--",right:"--:",center:":-:"};if(W(t))for(var i=0;i<t.childNodes.length;i++){var a="---",o=(t.childNodes[i].getAttribute("align")||"").toLowerCase();o&&(a=r[o]||a),n+=G(a,t.childNodes[i])}return"\n"+e+(n?"\n"+n:"")}},j.table={filter:function(e){return"TABLE"===e.nodeName&&W(e.rows[0])},replacement:function(e){return"\n\n"+(e=e.replace("\n\n","\n"))+"\n\n"}},j.tableSection={filter:["thead","tbody","tfoot"],replacement:function(e){return e}};var J=n(396);const X={list:(e,t)=>{try{const n=JSON.parse(e);if(Array.isArray(n))switch(t){case"numbered":return n.map(((e,t)=>`${t+1}. ${e}`)).join("\n");case"task":return n.map((e=>`- [ ] ${e}`)).join("\n");case"numbered-task":return n.map(((e,t)=>`${t+1}. [ ] ${e}`)).join("\n");default:return n.map((e=>`- ${e}`)).join("\n")}}catch(e){console.error("Error parsing JSON for list filter:",e)}return e},camel:e=>e.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toLowerCase():e.toUpperCase())).replace(/[\s_-]+/g,""),kebab:e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),pascal:e=>e.replace(/[\s_-]+(.)/g,((e,t)=>t.toUpperCase())).replace(/^(.)/,(e=>e.toUpperCase())),snake:e=>e.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/[\s-]+/g,"_").toLowerCase(),wikilink:e=>{if(!e.trim())return"";if(e.startsWith("[")&&e.endsWith("]"))try{const t=JSON.parse(e);if(Array.isArray(t))return t.map((e=>e.trim()?`[[${e}]]`:"")).filter(Boolean).join(", ")}catch(e){console.error("wikilink error:",e)}return`[[${e}]]`},slice:(e,t)=>{if(!t)return console.error("Slice filter requires parameters"),e;const[n,r]=t.split(",").map((e=>e.trim())).map((e=>{if(""===e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}));let i;try{i=JSON.parse(e)}catch(t){console.error("Error parsing JSON in slice filter:",t),i=e}if(Array.isArray(i)){const e=i.slice(n,r);return 1===e.length?e[0].toString():JSON.stringify(e)}return e.slice(n,r)},split:(e,t)=>{if(!t)return console.error("Split filter requires a separator parameter"),JSON.stringify([e]);const n=1===(t=t.replace(/^["']|["']$/g,"")).length?t:new RegExp(t),r=e.split(n);return JSON.stringify(r)},join:(e,t)=>{let n;try{n=JSON.parse(e)}catch(t){return console.error("Error parsing JSON in join filter:",t),e}return Array.isArray(n)?n.join(t||","):e},date:(e,t)=>{const n=i()(e);return n.isValid()?t?n.format(t):n.format():(console.error("Invalid date for date filter:",e),e)},trim:e=>e.trim(),first:e=>{try{const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0)return t[0].toString()}catch(e){console.error("Error parsing JSON in first filter:",e)}return e},last:e=>{try{const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0)return t[t.length-1].toString()}catch(e){console.error("Error parsing JSON in last filter:",e)}return e},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),lower:e=>e.toLowerCase(),title:e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),upper:e=>e.toUpperCase(),quote:e=>e.split("\n").map((e=>`> ${e}`)).join("\n"),callout:(e,t)=>{let n="info",r="",i=null;if(t){const e=(t=t.replace(/^\((.*)\)$/,"$1")).split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map((e=>e.trim().replace(/^"|"$/g,"")));e.length>0&&(n=e[0]||n),e.length>1&&(r=e[1]||r),e.length>2&&("true"===e[2]?i="-":"false"===e[2]&&(i="+"))}let a=`> [!${n}]`;return i&&(a+=i),r&&(a+=` ${r}`),`${a}\n${e.split("\n").map((e=>`> ${e}`)).join("\n")}`}};function z(e,t){let n="string"==typeof e?e:JSON.stringify(e);return t.reduce(((e,t)=>{const n=t.match(/(\w+)(?::(.+)|"(.+)")?/);if(n){const[,t,r,i]=n,a=r||i?(r||i).replace(/^["']|["']$/g,""):void 0,o=X[t];if(o)return o(e,a)}else console.error(`Invalid filter format: ${t}`);return e}),n)}var K=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};function Z(e,t){return K(this,void 0,void 0,(function*(){const[,n]=e.match(/{{(.*?)}}/)||[],[r,...i]=n.split("|"),a=i.join("|");return z(t[`{{${r}}}`]||"",a.split("|").filter(Boolean))}))}function Q(e,t){return K(this,void 0,void 0,(function*(){const n=t.match(/{{selector:(.*?)(?:\|(.*?))?}}/);if(!n)return console.error("Invalid selector format:",t),t;const[,r,i]=n,{content:a}=yield function(e,t){return K(this,void 0,void 0,(function*(){return new Promise((n=>{const r=t.match(/:([a-zA-Z-]+)$/);let i,a=t;r&&(i=r[1],a=t.slice(0,-i.length-1)),chrome.tabs.sendMessage(e,{action:"extractContent",selector:a,attribute:i},(function(e){let t=e?e.content:"";Array.isArray(t)&&(t=JSON.stringify(t)),n({content:t,schemaOrgData:e?e.schemaOrgData:null})}))}))}))}(e,r),o=Array.isArray(a)?JSON.stringify(a):a;return i?z(o,i.split("|").map((e=>e.trim()))):o}))}function ee(e,t){return K(this,void 0,void 0,(function*(){const[,n]=e.match(/{{schema:(.*?)}}/)||[],[r,...i]=n.split("|"),a=i.join("|");let o="";const s=r.match(/(.*?)\.\[\*\]\.(.*)/);if(s){const[,e,n]=s,r=JSON.parse(t[`{{schema:${e}}}`]||"[]");Array.isArray(r)&&(o=JSON.stringify(r.map((e=>e[n])).filter(Boolean)))}else o=t[`{{schema:${r}}}`]||"";return z(o,a.split("|").filter(Boolean))}))}function te(e,t,n){return K(this,void 0,void 0,(function*(){const r=t.match(/{{(?:schema:)?(?:selector:)?(.*?)}}/g);if(r)for(const i of r){let r;r=i.startsWith("{{selector:")?yield Q(e,i):i.startsWith("{{schema:")?yield ee(i,n):yield Z(i,n),t=t.replace(i,r)}return t}))}function ne(e){return K(this,void 0,void 0,(function*(){return new Promise((t=>{chrome.tabs.sendMessage(e,{action:"getPageContent"},(function(e){e&&e.content?t({content:e.content,selectedHtml:e.selectedHtml,extractedContent:e.extractedContent,schemaOrgData:e.schemaOrgData}):t(null)}))}))}))}function re(e,t,n){var r,i;const a=`meta[${t}]`,o=Array.from(e.querySelectorAll(a)).find((e=>{var r;return(null===(r=e.getAttribute(t))||void 0===r?void 0:r.toLowerCase())===n.toLowerCase()}));return o&&null!==(i=null===(r=o.getAttribute("content"))||void 0===r?void 0:r.trim())&&void 0!==i?i:""}function ie(e,t,n,r,i){return K(this,void 0,void 0,(function*(){var o,s;const l=function(e){const t=(new DOMParser).parseFromString(e,"text/html");return new J.Readability(t).parse()}(e);if(!l)return console.error("Failed to parse content with Readability"),null;const c=(new DOMParser).parseFromString(e,"text/html"),u=re(c,"property","og:title")||re(c,"name","twitter:title")||re(c,"name","title")||(null===(s=null===(o=c.querySelector("title"))||void 0===o?void 0:o.textContent)||void 0===s?void 0:s.trim())||"",d=a(u),h=re(c,"name","author")||re(c,"property","author")||re(c,"name","twitter:creator")||re(c,"property","og:site_name")||re(c,"name","application-name")||re(c,"name","copyright")||"",f=re(c,"name","description")||re(c,"property","description")||re(c,"property","og:description")||re(c,"name","twitter:description")||"",p=new URL(r).hostname.replace(/^www\./,""),m=re(c,"property","og:image")||re(c,"name","twitter:image")||"",g=c.querySelector("time"),v=re(c,"property","article:published_time")||(null==g?void 0:g.getAttribute("datetime")),y=v?`${ae(new Date(v))}`:"",b=re(c,"property","og:site_name")||re(c,"name","application-name")||re(c,"name","copyright")||"",_=function(e,t,n){const r=(new DOMParser).parseFromString(e,"text/html"),i=new URL(t);function a(e,t){const n=e.getAttribute(t);if(n)if(n.startsWith("chrome-extension://")){const r=n.split("/").slice(3).join("/"),a=new URL(r,i).href;e.setAttribute(t,a)}else if(!(n.startsWith("http")||n.startsWith("data:")||n.startsWith("#")||n.startsWith("mailto:"))){const r=new URL(n,i).href;e.setAttribute(t,r)}}let o;if(n){const e=document.createElement("div");e.innerHTML=n,e.querySelectorAll("img").forEach((e=>a(e,"src"))),e.querySelectorAll("a").forEach((e=>a(e,"href"))),o=e.innerHTML}else{const e=new J.Readability(r).parse();if(!e)return console.error("Failed to parse content with Readability"),"";const{content:t}=e,n=document.createElement("div");n.innerHTML=t,n.querySelectorAll("img").forEach((e=>a(e,"src"))),n.querySelectorAll("a").forEach((e=>a(e,"href"))),o=n.innerHTML}const s=new k({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});s.use(q),s.keep(["iframe","video","audio"]),s.addRule("listItem",{filter:"li",replacement:function(e,t,n){e=e.trim();let r=n.bulletListMarker+" ",i=t.parentNode;if(i instanceof HTMLOListElement){let e=i.getAttribute("start"),n=Array.from(i.children).indexOf(t)+1;r=(e?Number(e)+n-1:n)+". "}return r+e+"\n"}}),s.addRule("embedToMarkdown",{filter:function(e){if(e instanceof HTMLIFrameElement){const t=e.getAttribute("src");return!(!t||!t.match(/(?:youtube\.com|youtu\.be)/)&&!t.match(/(?:twitter\.com|x\.com)/))}return!1},replacement:function(e,t){if(t instanceof HTMLIFrameElement){const e=t.getAttribute("src");if(e){const t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:embed\/|watch\?v=)?([a-zA-Z0-9_-]+)/);if(t&&t[1])return`![](https://www.youtube.com/watch?v=${t[1]})`;const n=e.match(/(?:twitter\.com|x\.com)\/.*?(?:status|statuses)\/(\d+)/);if(n&&n[1])return`![](https://x.com/i/status/${n[1]})`}}return e}}),s.addRule("highlight",{filter:"mark",replacement:function(e){return"=="+e+"=="}}),s.addRule("strikethrough",{filter:e=>"DEL"===e.nodeName||"S"===e.nodeName||"STRIKE"===e.nodeName,replacement:function(e){return"~~"+e+"~~"}});let l=s.turndown(o);const c=l.match(/^# .+\n+/);return c&&(l=l.slice(c[0].length)),l.trim()}(e,r,t),N={"{{author}}":h,"{{content}}":_,"{{description}}":f,"{{domain}}":p,"{{image}}":m,"{{published}}":y,"{{site}}":b,"{{title}}":u,"{{noteName}}":d,"{{date}}":ae(new Date),"{{today}}":ae(new Date),"{{url}}":r};return Object.entries(n).forEach((([e,t])=>{N[`{{${e}}}`]=t})),c.querySelectorAll("meta").forEach((e=>{const t=e.getAttribute("name"),n=e.getAttribute("property"),r=e.getAttribute("content");t&&r&&(N[`{{meta:name:${t}}}`]=r),n&&r&&(N[`{{meta:property:${n}}}`]=r)})),i&&oe(i,N),console.log("Available variables:",N),{noteName:d,currentVariables:N}}))}function ae(e){return i()(e).format("YYYY-MM-DD")}function oe(e,t,n=""){if(Array.isArray(e)){const r=`{{schema:${n.slice(0,-1)}}}`;t[r]=JSON.stringify(e),1===e.length?oe(e[0],t,n):e.forEach(((e,r)=>{oe(e,t,`${n}[${r}].`)}))}else"object"==typeof e&&null!==e&&Object.entries(e).forEach((([e,r])=>{"string"==typeof r||"number"==typeof r||"boolean"==typeof r?t[`{{schema:${n}${e}}}`]=String(r):(Array.isArray(r)||"object"==typeof r&&null!==r)&&oe(r,t,`${n}${e}.`)}))}const se={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},le=(e,t,n=[])=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach((e=>{r.setAttribute(e,String(t[e]))})),n.length&&n.forEach((e=>{const t=le(...e);r.appendChild(t)})),r},ce=e=>"string"==typeof e?e:e&&e.class?e.class&&"string"==typeof e.class?e.class.split(" "):e.class&&Array.isArray(e.class)?e.class:"":"",ue=(e,{nameAttr:t,icons:n,attrs:r})=>{const i=e.getAttribute(t);if(null==i)return;const a=n[i.replace(/(\w)(\w*)(_|-|\s*)/g,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))];if(!a)return console.warn(`${e.outerHTML} icon name was not found in the provided icons object.`);const o=(e=>Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}))(e),[s,l,c]=a,u={...l,"data-lucide":i,...r,...o},d=["lucide",`lucide-${i}`,o,r].flatMap(ce).map((e=>e.trim())).filter(Boolean).filter(((e,t,n)=>n.indexOf(e)===t)).join(" ");d&&Object.assign(u,{class:d});const h=(([e,t,n])=>le(e,t,n))([s,u,c]);return e.parentNode?.replaceChild(h,e)},de={Trash2:["svg",se,[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]]],AlignLeft:["svg",se,[["line",{x1:"21",x2:"3",y1:"6",y2:"6"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18"}]]],Binary:["svg",se,[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2"}],["path",{d:"M6 20h4"}],["path",{d:"M14 10h4"}],["path",{d:"M6 14h2v6"}],["path",{d:"M14 4h2v6"}]]],List:["svg",se,[["line",{x1:"8",x2:"21",y1:"6",y2:"6"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18"}]]],Calendar:["svg",se,[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]]],Clock:["svg",se,[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]]],Ellipsis:["svg",se,[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]]],SquareCheckBig:["svg",se,[["path",{d:"m9 11 3 3L22 4"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}]]],GripVertical:["svg",se,[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]]],Settings:["svg",se,[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]]],X:["svg",se,[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]]],ChevronRight:["svg",se,[["path",{d:"m9 18 6-6-6-6"}]]],ChevronDown:["svg",se,[["path",{d:"m6 9 6 6 6-6"}]]]};function he(e=document){(({icons:e={},nameAttr:t="data-lucide",attrs:n={}}={})=>{if(!Object.values(e).length)throw new Error("Please provide an icons object.\nIf you want to use all the icons you can import it like:\n `import { createIcons, icons } from 'lucide';\nlucide.createIcons({icons});`");if("undefined"==typeof document)throw new Error("`createIcons()` only works in a browser environment.");const r=document.querySelectorAll(`[${t}]`);if(Array.from(r).forEach((r=>ue(r,{nameAttr:t,icons:e,attrs:n}))),"data-lucide"===t){const t=document.querySelectorAll("[icon-name]");t.length>0&&(console.warn("[Lucide] Some icons were found with the now deprecated icon-name attribute. These will still be replaced for backwards compatibility, but will no longer be supported in v1.0 and you should switch to data-lucide"),Array.from(t).forEach((t=>ue(t,{nameAttr:"icon-name",icons:e,attrs:n}))))}})({icons:de,attrs:{"stroke-width":1.75,class:"lucide-icon"},nameAttr:"data-lucide"})}var fe=n(992);function pe(e,t,n){if(e.startsWith("schema:"))return function(e,t){const[,n,r]=e.match(/schema:(.+?)(?:=(.+))?$/)||[];if(!n)return!1;const i=me(t,n);return r?Array.isArray(i)?i.includes(r):i===r:!!i}(e,n);if(!e.startsWith("/")||!e.endsWith("/"))return t.startsWith(e);try{return new RegExp(e.slice(1,-1)).test(t)}catch(t){return console.error(`Invalid regex pattern: ${e}`,t),!1}}function me(e,t){if(Array.isArray(e)){for(const n of e){const e=me(n,t);if(void 0!==e)return e}return}const n=t.split(".");let r=e;for(const e of n){if(!r||"object"!=typeof r||!(e in r))return;r=r[e]}return r}let ge={showMoreActionsButton:!0,vaults:[]};function ve(e,t){return new Promise((n=>{chrome.storage.local.set({[e]:t},(()=>{n()}))}))}function ye(e){return new Promise((t=>{chrome.storage.local.get(e,(n=>{t(n[e])}))}))}function be(e){return e.replace(/\\"/g,'"').replace(/\\n/g,"\n")}function _e(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Ne=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};let Ee=[];const Ae="template_",Te="template_list",Se=8e3,Ce=6e3;function we(e){return Ne(this,void 0,void 0,(function*(){return new Promise((t=>{chrome.storage.sync.get(Ae+e,(n=>{const r=n[Ae+e];if(r){const e=(0,fe.decompressFromUTF16)(r.join(""));t(JSON.parse(e))}else t(null)}))}))}))}function xe(e){return Ne(this,void 0,void 0,(function*(){const t=(0,fe.compressToUTF16)(JSON.stringify(e)),n=[];for(let e=0;e<t.length;e+=Se)n.push(t.slice(e,e+Se));return t.length>Ce?[n,`Warning: Template "${e.name}" is ${(t.length/1024).toFixed(2)}KB, which is approaching the storage limit.`]:[n,null]}))}function Le(){return{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"Default",behavior:"create",noteNameFormat:"{{title}}",path:"Clippings",noteContentFormat:"{{content}}",properties:[{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"title",value:"{{title}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"source",value:"{{url}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"author",value:"{{author|wikilink}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"published",value:"{{published}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"created",value:"{{date}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"description",value:"{{description}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"tags",value:"clippings",type:"multitext"}],triggers:[]}}var De=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};let Oe,Ie=null,Me=[],$e={};function Re(e){const t=document.querySelector(".error-message"),n=document.querySelector(".clipper");if(t&&n){t.textContent=e,t.style.display="block",n.style.display="none";const r=document.getElementById("open-settings");r&&(r.style.display="flex")}}function ke(e,t){console.error(e,t),Re(e)}function Pe(){return De(this,void 0,void 0,(function*(){if(!Ie)return;const e=document.getElementById("vault-select"),t=document.getElementById("note-content-field"),n=document.getElementById("note-name-field"),r=document.getElementById("path-name-field");if(!(e&&t&&n&&r))return void Re("Some required fields are missing. Please try reloading the extension.");const a=Ie.vault||e.value,o=t.value,s=n.value,l=r.value,c=Array.from(document.querySelectorAll(".metadata-property input")).map((e=>({name:e.id,value:e.value,type:e.getAttribute("data-type")||"text"})));let u;if("create"===Ie.behavior){const e=yield function(e){return t=this,n=void 0,i=function*(){let t="---\n";for(const n of e)switch(t+=`${n.name}:`,n.type){case"multitext":let e;if(n.value.trim().startsWith('["')&&n.value.trim().endsWith('"]'))try{e=JSON.parse(n.value)}catch(t){e=n.value.split(",").map((e=>e.trim()))}else e=n.value.split(/,(?![^\[]*\]\])/).map((e=>e.trim()));e=e.filter((e=>""!==e)),e.length>0?(t+="\n",e.forEach((e=>{t+=`  - "${e}"\n`}))):t+="\n";break;case"number":const r=n.value.replace(/[^\d.-]/g,"");t+=r?` ${parseFloat(r)}\n`:"\n";break;case"checkbox":t+=` ${"true"===n.value.toLowerCase()||"1"===n.value}\n`;break;case"date":case"datetime":""!==n.value.trim()?t+=` "${n.value}"\n`:t+="\n";break;default:t+=""!==n.value.trim()?` "${n.value}"\n`:"\n"}return t+="---\n",t},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}l((i=i.apply(t,n||[])).next())}));var t,n,r,i}(c);u=e+o}else u=o;try{yield function(e,t,n,r,a,o,s){let l,c=e;if(n&&!n.endsWith("/")&&(n+="/"),"append-specific"===a||"append-daily"===a){let e;e="append-specific"===a?o:i()().format(s),l=`obsidian://new?file=${encodeURIComponent(n+e)}&append=true`,c="\n\n"+c}else l=`obsidian://new?file=${encodeURIComponent(n+t)}`;l+=`&content=${encodeURIComponent(c)}`;const u=r?`&vault=${encodeURIComponent(r)}`:"";l+=u,chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];t&&t.id&&chrome.tabs.update(t.id,{url:l},(function(e){chrome.notifications.create({type:"basic",iconUrl:"icon.png",title:"Obsidian Clipper",message:'If prompted, select "Always allow" to open Obsidian automatically in the future.'})}))}))}(u,s,l,a,Ie.behavior,Ie.specificNoteName,Ie.dailyNoteFormat),setTimeout((()=>window.close()),50)}catch(e){throw console.error("Error in handleClip:",e),Re("Failed to save to Obsidian. Please try again."),e}}))}chrome.runtime.onMessage.addListener(((e,t,n)=>{if("triggerQuickClip"===e.action)return Pe().then((()=>{n({success:!0})})).catch((e=>{console.error("Error in handleClip:",e),n({success:!1,error:e.message})})),!0})),document.addEventListener("DOMContentLoaded",(function(){return De(this,void 0,void 0,(function*(){he(),Oe=yield function(){return e=this,t=void 0,r=function*(){var e,t;const n=yield chrome.storage.sync.get(["general_settings","vaults"]);return ge={showMoreActionsButton:null===(t=null===(e=n.general_settings)||void 0===e?void 0:e.showMoreActionsButton)||void 0===t||t,vaults:n.vaults||[]},ge},new((n=void 0)||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}(),console.log("General settings:",Oe),yield function(){return new Promise((e=>{chrome.storage.sync.get(Te,(t=>Ne(this,void 0,void 0,(function*(){const n=t[Te]||[],r=[];for(const e of n){const t=yield we(e);t&&r.push(t)}if(0===r.length){const e=Le();r.push(e),yield function(){return new Promise(((e,t)=>Ne(this,void 0,void 0,(function*(){try{const n=Ee.map((e=>e.id)),r=[],i={};for(const e of Ee){const[t,n]=yield xe(e);i[Ae+e.id]=t,n&&r.push(n)}chrome.storage.sync.set(Object.assign(Object.assign({},i),{[Te]:n}),(()=>{chrome.runtime.lastError?(console.error("Error saving templates:",chrome.runtime.lastError),t(chrome.runtime.lastError)):(console.log("Template settings saved"),e(r))}))}catch(e){console.error("Error preparing templates for save:",e),t(e)}}))))}()}Ee=r,e(Ee)}))))}))}();const e=document.getElementById("vault-container"),t=document.getElementById("vault-select"),n=document.getElementById("template-container"),r=document.getElementById("template-select");var o;o=Oe.vaults,t.innerHTML="",o.forEach((e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})),o.length>0?(e.style.display="block",t.value=o[0]):e.style.display="none",chrome.storage.sync.get(["template_list"],(e=>De(this,void 0,void 0,(function*(){const t=e.template_list||[],i=yield Promise.all(t.map((e=>new Promise((t=>chrome.storage.sync.get(`template_${e}`,(n=>{const r=n[`template_${e}`];if(r)try{const n=(0,fe.decompressFromUTF16)(r.join("")),i=JSON.parse(n);i&&Array.isArray(i.properties)?t(i):(console.warn(`Invalid template structure for id ${e}`),t(null))}catch(n){console.error(`Error parsing template ${e}:`,n),t(null)}else t(null)})))))));Me=i.filter((e=>null!==e)),0===Me.length?(Ie=Le(),Me=[Ie]):Ie=Me[0],r.innerHTML="",Me.forEach((e=>{const t=document.createElement("option");t.value=e.name,t.textContent=e.name,r.appendChild(t)})),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){return De(this,void 0,void 0,(function*(){if(!e[0].url||e[0].url.startsWith("chrome-extension://")||e[0].url.startsWith("chrome://")||e[0].url.startsWith("about:")||e[0].url.startsWith("file://"))return void Re("This page cannot be clipped.");const t=e[0].url;if(e[0].id)try{const n=yield ne(e[0].id);if(n){const e=yield ie(n.content,n.selectedHtml,n.extractedContent,t,n.schemaOrgData);e?(Ie=function(e,t,n){return t.find((t=>t.triggers&&t.triggers.some((t=>pe(t,e,n)))))}(t,Me,n.schemaOrgData)||Me[0],Ie&&(r.value=Ie.name),yield c(Ie,e.currentVariables,e.noteName,n.schemaOrgData)):Re("Unable to initialize page content.")}else Re("Unable to get page content. Try reloading the page.")}catch(e){console.error("Error in popup initialization:",e),e instanceof Error?Re(`An error occurred: ${e.message}`):Re("An unexpected error occurred")}}))})),Me.length>1&&(n.style.display="block")})))),r.addEventListener("change",(function(){return De(this,void 0,void 0,(function*(){var e;if(Ie=Me.find((e=>e.name===this.value))||null,Ie){const t=yield chrome.tabs.query({active:!0,currentWindow:!0});if(null===(e=t[0])||void 0===e?void 0:e.id)try{const e=yield ne(t[0].id);if(e){const n=yield ie(e.content,e.selectedHtml,e.extractedContent,t[0].url,e.schemaOrgData);n?yield c(Ie,n.currentVariables,n.noteName,e.schemaOrgData):ke("Unable to initialize page content.")}else ke("Unable to retrieve page content. Try reloading the page.")}catch(e){ke("Error initializing template fields:",e)}else ke("No active tab found")}else ke("Selected template not found")}))}));const s=document.getElementById("note-name-field");function l(e){e.style.minHeight="2rem",e.style.minHeight=e.scrollHeight+"px"}function c(e,t,n,r){return De(this,void 0,void 0,(function*(){var n,o;if(!e)return void ke("No template selected");$e=t;const c=document.querySelector(".metadata-properties");c.innerHTML="";const u=yield chrome.tabs.query({active:!0,currentWindow:!0}),d=null===(n=u[0])||void 0===n?void 0:n.id,h=(null===(o=u[0])||void 0===o?void 0:o.url)||"";if(!d)return void ke("No active tab found");if(!Array.isArray(e.properties))return void ke("Template properties are not an array");for(const n of e.properties){const e=document.createElement("div");e.className="metadata-property";let r=yield te(d,be(n.value),t);switch(n.type){case"number":const e=r.replace(/[^\d.-]/g,"");r=e?parseFloat(e).toString():r;break;case"checkbox":r=("true"===r.toLowerCase()||"1"===r).toString();break;case"date":r=i()(r).isValid()?i()(r).format("YYYY-MM-DD"):r;break;case"datetime":r=i()(r).isValid()?i()(r).format("YYYY-MM-DD HH:mm:ss"):r}e.innerHTML=`\n\t\t\t\t<span class="metadata-property-icon"><i data-lucide="${p=n.type,{text:"align-left",multitext:"list",number:"binary",checkbox:"square-check-big",date:"calendar",datetime:"clock"}[p]||"align-left"}"></i></span>\n\t\t\t\t<label for="${n.name}">${n.name}</label>\n\t\t\t\t<input id="${n.name}" type="text" value="${f=r,f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}" data-type="${n.type}" />\n\t\t\t`,c.appendChild(e)}var f,p;if(s){let n=yield te(d,e.noteNameFormat,t);s.value=a(n),l(s)}const m=document.getElementById("path-name-field");m&&(m.value=e.path);const g=document.getElementById("note-content-field");if(g)if(e.noteContentFormat){let n=yield te(d,e.noteContentFormat,t);g.value=n}else g.value="";if(Object.keys(t).length>0)if(e.triggers&&e.triggers.length>0){const t=e.triggers.find((e=>pe(e,h,r)));t&&console.log(`Matched template trigger: ${t}`)}else console.log("No template triggers defined for this template");he(),function(){const e=document.querySelector(".metadata-properties-header"),t=document.querySelector(".metadata-properties");e&&t&&(e.addEventListener("click",(()=>{const n=t.classList.toggle("collapsed");e.classList.toggle("collapsed"),ve("propertiesCollapsed",n)})),ye("propertiesCollapsed").then((n=>{n?(t.classList.add("collapsed"),e.classList.add("collapsed")):(t.classList.remove("collapsed"),e.classList.remove("collapsed"))})))}();const v=document.getElementById("vault-select");if(v){if(e.vault)v.value=e.vault;else{const e=yield ye("lastSelectedVault");e&&Oe.vaults.includes(e)?v.value=e:Oe.vaults.length>0&&(v.value=Oe.vaults[0])}v.addEventListener("change",(()=>{ve("lastSelectedVault",v.value)}))}}))}s.addEventListener("input",(function(){s.value=a(s.value),l(s)})),s.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||e.preventDefault()})),l(s),function(){const e=document.getElementById("clip-button");e&&(e.addEventListener("click",Pe),e.focus());const t=document.getElementById("open-settings");t&&t.addEventListener("click",(function(){chrome.runtime.openOptionsPage()}));const n=document.getElementById("show-variables");n&&(n.style.display=Oe.showMoreActionsButton?"flex":"none",n.addEventListener("click",(function(){if(Ie&&Object.keys($e).length>0){const t=(e=$e,Object.entries(e).map((([e,t])=>`\n\t\t\t<div class="variable-item is-collapsed">\n\t\t\t\t<span class="variable-key" data-variable="${_e(e)}">${_e(e)}</span>\n\t\t\t\t<span class="variable-value">${_e(t)}</span>\n\t\t\t\t<span class="chevron-icon" aria-label="Expand">\n\t\t\t\t\t<i data-lucide="chevron-right"></i>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t `)).join(""));u.innerHTML=`\n\t\t\t\t\t\t<div class="variables-header">\n\t\t\t\t\t\t\t<h3>Page variables</h3>\n\t\t\t\t\t\t\t<span class="close-panel clickable-icon" aria-label="Close">\n\t\t\t\t\t\t\t\t<i data-lucide="x"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="variable-list">${t}</div>\n\t\t\t\t\t`,u.classList.add("show"),he(),u.querySelectorAll(".variable-item").forEach((e=>{const t=e.querySelector(".variable-key"),n=e.querySelector(".chevron-icon"),r=e.querySelector(".variable-value");r.scrollWidth>r.clientWidth&&e.classList.add("has-overflow"),t.addEventListener("click",(function(){const e=this.getAttribute("data-variable");e&&navigator.clipboard.writeText(e).then((()=>{const e=this.textContent;this.textContent="Copied!",setTimeout((()=>{this.textContent=e}),1e3)})).catch((e=>{console.error("Failed to copy text: ",e)}))})),n.addEventListener("click",(function(){e.classList.toggle("is-collapsed");const t=this.querySelector("i");t&&(t.setAttribute("data-lucide",e.classList.contains("is-collapsed")?"chevron-right":"chevron-down"),he())}))})),u.querySelector(".close-panel").addEventListener("click",(function(){u.classList.remove("show")}))}else console.log("No variables available to display");var e})))}();const u=document.createElement("div");u.className="variables-panel",document.body.appendChild(u)}))}));