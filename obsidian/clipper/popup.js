/*! For license information please see popup.js.LICENSE.txt */
var e={804:e=>{var t={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function r(e){return(!e.style||"none"!=e.style.display)&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||"true"!=e.getAttribute("aria-hidden")||e.className&&e.className.indexOf&&-1!==e.className.indexOf("fallback-image"))}e.exports=function(e,n={}){"function"==typeof n&&(n={visibilityChecker:n});var i={minScore:20,minContentLength:140,visibilityChecker:r};n=Object.assign(i,n);var a=e.querySelectorAll("p, pre, article"),s=e.querySelectorAll("div > br");if(s.length){var o=new Set(a);[].forEach.call(s,(function(e){o.add(e.parentNode)})),a=Array.from(o)}var l=0;return[].some.call(a,(function(e){if(!n.visibilityChecker(e))return!1;var r=e.className+" "+e.id;if(t.unlikelyCandidates.test(r)&&!t.okMaybeItsACandidate.test(r))return!1;if(e.matches("li p"))return!1;var i=e.textContent.trim().length;return!(i<n.minContentLength)&&(l+=Math.sqrt(i-n.minContentLength))>n.minScore}))}},238:e=>{function t(e,t){if(t&&t.documentElement)e=t,t=arguments[2];else if(!e||!e.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=e,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(e){if(e.nodeType==e.TEXT_NODE)return`${e.nodeName} ("${e.textContent}")`;let t=Array.from(e.attributes||[],(function(e){return`${e.name}="${e.value}"`})).join(" ");return`<${e.localName} ${t}>`};this.log=function(){if("undefined"!=typeof console){let t=Array.from(arguments,(t=>t&&t.nodeType==this.ELEMENT_NODE?e(t):t));t.unshift("Reader: (Readability)"),console.log.apply(console,t)}else if("undefined"!=typeof dump){var t=Array.prototype.map.call(arguments,(function(t){return t&&t.nodeName?e(t):t})).join(" ");dump("Reader: (Readability) "+t+"\n")}}}else this.log=function(){}}t.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(e){this._fixRelativeUris(e),this._simplifyNestedElements(e),this._keepClasses||this._cleanClasses(e)},_removeNodes:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var r=e.length-1;r>=0;r--){var n=e[r],i=n.parentNode;i&&(t&&!t.call(this,n,r,e)||i.removeChild(n))}},_replaceNodeTags:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const r of e)this._setNodeTag(r,t)},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_findNode:function(e,t){return Array.prototype.find.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_everyNode:function(e,t){return Array.prototype.every.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments).map((function(t){return e.call(t)}));return Array.prototype.concat.apply([],t)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map((function(t){var r=e.getElementsByTagName(t);return Array.isArray(r)?r:Array.from(r)})))},_cleanClasses:function(e){var t=this._classesToPreserve,r=(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return-1!=t.indexOf(e)})).join(" ");for(r?e.setAttribute("class",r):e.removeAttribute("class"),e=e.firstElementChild;e;e=e.nextElementSibling)this._cleanClasses(e)},_fixRelativeUris:function(e){var t=this._doc.baseURI,r=this._doc.documentURI;function n(e){if(t==r&&"#"==e.charAt(0))return e;try{return new URL(e,t).href}catch(e){}return e}var i=this._getAllNodesWithTag(e,["a"]);this._forEachNode(i,(function(e){var t=e.getAttribute("href");if(t)if(0===t.indexOf("javascript:"))if(1===e.childNodes.length&&e.childNodes[0].nodeType===this.TEXT_NODE){var r=this._doc.createTextNode(e.textContent);e.parentNode.replaceChild(r,e)}else{for(var i=this._doc.createElement("span");e.firstChild;)i.appendChild(e.firstChild);e.parentNode.replaceChild(i,e)}else e.setAttribute("href",n(t))}));var a=this._getAllNodesWithTag(e,["img","picture","figure","video","audio","source"]);this._forEachNode(a,(function(e){var t=e.getAttribute("src"),r=e.getAttribute("poster"),i=e.getAttribute("srcset");if(t&&e.setAttribute("src",n(t)),r&&e.setAttribute("poster",n(r)),i){var a=i.replace(this.REGEXPS.srcsetUrl,(function(e,t,r,i){return n(t)+(r||"")+i}));e.setAttribute("srcset",a)}}))},_simplifyNestedElements:function(e){for(var t=e;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&(!t.id||!t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var r=t.children[0],n=0;n<t.attributes.length;n++)r.setAttribute(t.attributes[n].name,t.attributes[n].value);t.parentNode.replaceChild(r,t),t=r;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var e=this._doc,t="",r="";try{"string"!=typeof(t=r=e.title.trim())&&(t=r=this._getInnerText(e.getElementsByTagName("title")[0]))}catch(e){}var n=!1;function i(e){return e.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))n=/ [\\\/>»] /.test(t),i(t=r.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"))<3&&(t=r.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(-1!==t.indexOf(": ")){var a=this._concatNodeLists(e.getElementsByTagName("h1"),e.getElementsByTagName("h2")),s=t.trim();this._someNode(a,(function(e){return e.textContent.trim()===s}))||(i(t=r.substring(r.lastIndexOf(":")+1))<3?t=r.substring(r.indexOf(":")+1):i(r.substr(0,r.indexOf(":")))>5&&(t=r))}else if(t.length>150||t.length<15){var o=e.getElementsByTagName("h1");1===o.length&&(t=this._getInnerText(o[0]))}var l=i(t=t.trim().replace(this.REGEXPS.normalize," "));return l<=4&&(!n||l!=i(r.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=r),t},_prepDocument:function(){var e=this._doc;this._removeNodes(this._getAllNodesWithTag(e,["style"])),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(this._getAllNodesWithTag(e,["font"]),"SPAN")},_nextNode:function(e){for(var t=e;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),(function(e){for(var t=e.nextSibling,r=!1;(t=this._nextNode(t))&&"BR"==t.tagName;){r=!0;var n=t.nextSibling;t.parentNode.removeChild(t),t=n}if(r){var i=this._doc.createElement("p");for(e.parentNode.replaceChild(i,e),t=i.nextSibling;t;){if("BR"==t.tagName){var a=this._nextNode(t.nextSibling);if(a&&"BR"==a.tagName)break}if(!this._isPhrasingContent(t))break;var s=t.nextSibling;i.appendChild(t),t=s}for(;i.lastChild&&this._isWhitespace(i.lastChild);)i.removeChild(i.lastChild);"P"===i.parentNode.tagName&&this._setNodeTag(i.parentNode,"DIV")}}))},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),this._docJSDOMParser)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e;for(var r=e.ownerDocument.createElement(t);e.firstChild;)r.appendChild(e.firstChild);e.parentNode.replaceChild(r,e),e.readability&&(r.readability=e.readability);for(var n=0;n<e.attributes.length;n++)try{r.setAttribute(e.attributes[n].name,e.attributes[n].value)}catch(e){}return r},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._fixLazyImages(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"footer"),this._clean(e,"link"),this._clean(e,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(e.children,(function(e){this._cleanMatchedNodes(e,(function(e,r){return this.REGEXPS.shareElements.test(r)&&e.textContent.length<t}))})),this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._replaceNodeTags(this._getAllNodesWithTag(e,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(e,["p"]),(function(e){return 0===e.getElementsByTagName("img").length+e.getElementsByTagName("embed").length+e.getElementsByTagName("object").length+e.getElementsByTagName("iframe").length&&!this._getInnerText(e,!1)})),this._forEachNode(this._getAllNodesWithTag(e,["br"]),(function(e){var t=this._nextNode(e.nextSibling);t&&"P"==t.tagName&&e.parentNode.removeChild(e)})),this._forEachNode(this._getAllNodesWithTag(e,["table"]),(function(e){var t=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(t,"TR")){var r=t.firstElementChild;if(this._hasSingleTagInsideElement(r,"TD")){var n=r.firstElementChild;n=this._setNodeTag(n,this._everyNode(n.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(n,e)}}}))},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0);return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild;if(e.nextElementSibling)return e.nextElementSibling;do{e=e.parentNode}while(e&&!e.nextElementSibling);return e&&e.nextElementSibling},_textSimilarity:function(e,t){var r=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),n=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);return r.length&&n.length?1-n.filter((e=>!r.includes(e))).join(" ").length/n.join(" ").length:0},_checkByline:function(e,t){if(this._articleByline)return!1;if(void 0!==e.getAttribute)var r=e.getAttribute("rel"),n=e.getAttribute("itemprop");return!(!("author"===r||n&&-1!==n.indexOf("author")||this.REGEXPS.byline.test(t))||!this._isValidByline(e.textContent)||(this._articleByline=e.textContent.trim(),0))},_getNodeAncestors:function(e,t){t=t||0;for(var r=0,n=[];e.parentNode&&(n.push(e.parentNode),!t||++r!==t);)e=e.parentNode;return n},_grabArticle:function(e){this.log("**** grabArticle ****");var t=this._doc,r=null!==e;if(!(e=e||this._doc.body))return this.log("No body found in document. Abort."),null;for(var n=e.innerHTML;;){this.log("Starting grabArticle loop");var i=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),a=[],s=this._doc.documentElement;let V=!0;for(;s;){"HTML"===s.tagName&&(this._articleLang=s.getAttribute("lang"));var o=s.className+" "+s.id;if(this._isProbablyVisible(s))if("true"!=s.getAttribute("aria-modal")||"dialog"!=s.getAttribute("role"))if(this._checkByline(s,o))s=this._removeAndGetNext(s);else if(V&&this._headerDuplicatesTitle(s))this.log("Removing header: ",s.textContent.trim(),this._articleTitle.trim()),V=!1,s=this._removeAndGetNext(s);else{if(i){if(this.REGEXPS.unlikelyCandidates.test(o)&&!this.REGEXPS.okMaybeItsACandidate.test(o)&&!this._hasAncestorTag(s,"table")&&!this._hasAncestorTag(s,"code")&&"BODY"!==s.tagName&&"A"!==s.tagName){this.log("Removing unlikely candidate - "+o),s=this._removeAndGetNext(s);continue}if(this.UNLIKELY_ROLES.includes(s.getAttribute("role"))){this.log("Removing content with role "+s.getAttribute("role")+" - "+o),s=this._removeAndGetNext(s);continue}}if("DIV"!==s.tagName&&"SECTION"!==s.tagName&&"HEADER"!==s.tagName&&"H1"!==s.tagName&&"H2"!==s.tagName&&"H3"!==s.tagName&&"H4"!==s.tagName&&"H5"!==s.tagName&&"H6"!==s.tagName||!this._isElementWithoutContent(s)){if(-1!==this.DEFAULT_TAGS_TO_SCORE.indexOf(s.tagName)&&a.push(s),"DIV"===s.tagName){for(var l=null,c=s.firstChild;c;){var u=c.nextSibling;if(this._isPhrasingContent(c))null!==l?l.appendChild(c):this._isWhitespace(c)||(l=t.createElement("p"),s.replaceChild(l,c),l.appendChild(c));else if(null!==l){for(;l.lastChild&&this._isWhitespace(l.lastChild);)l.removeChild(l.lastChild);l=null}c=u}if(this._hasSingleTagInsideElement(s,"P")&&this._getLinkDensity(s)<.25){var d=s.children[0];s.parentNode.replaceChild(d,s),s=d,a.push(s)}else this._hasChildBlockElement(s)||(s=this._setNodeTag(s,"P"),a.push(s))}s=this._getNextNode(s)}else s=this._removeAndGetNext(s)}else s=this._removeAndGetNext(s);else this.log("Removing hidden node - "+o),s=this._removeAndGetNext(s)}var g=[];this._forEachNode(a,(function(e){if(e.parentNode&&void 0!==e.parentNode.tagName){var t=this._getInnerText(e);if(!(t.length<25)){var r=this._getNodeAncestors(e,5);if(0!==r.length){var n=0;n+=1,n+=t.split(this.REGEXPS.commas).length,n+=Math.min(Math.floor(t.length/100),3),this._forEachNode(r,(function(e,t){if(e.tagName&&e.parentNode&&void 0!==e.parentNode.tagName){if(void 0===e.readability&&(this._initializeNode(e),g.push(e)),0===t)var r=1;else r=1===t?2:3*t;e.readability.contentScore+=n/r}}))}}}}));for(var h=[],m=0,f=g.length;m<f;m+=1){var p=g[m],A=p.readability.contentScore*(1-this._getLinkDensity(p));p.readability.contentScore=A,this.log("Candidate:",p,"with score "+A);for(var y=0;y<this._nbTopCandidates;y++){var v=h[y];if(!v||A>v.readability.contentScore){h.splice(y,0,p),h.length>this._nbTopCandidates&&h.pop();break}}}var b,_=h[0]||null,N=!1;if(null===_||"BODY"===_.tagName){for(_=t.createElement("DIV"),N=!0;e.firstChild;)this.log("Moving child out:",e.firstChild),_.appendChild(e.firstChild);e.appendChild(_),this._initializeNode(_)}else if(_){for(var E=[],x=1;x<h.length;x++)h[x].readability.contentScore/_.readability.contentScore>=.75&&E.push(this._getNodeAncestors(h[x]));if(E.length>=3)for(b=_.parentNode;"BODY"!==b.tagName;){for(var T=0,S=0;S<E.length&&T<3;S++)T+=Number(E[S].includes(b));if(T>=3){_=b;break}b=b.parentNode}_.readability||this._initializeNode(_),b=_.parentNode;for(var C=_.readability.contentScore,w=C/3;"BODY"!==b.tagName;)if(b.readability){var L=b.readability.contentScore;if(L<w)break;if(L>C){_=b;break}C=b.readability.contentScore,b=b.parentNode}else b=b.parentNode;for(b=_.parentNode;"BODY"!=b.tagName&&1==b.children.length;)b=(_=b).parentNode;_.readability||this._initializeNode(_)}var O=t.createElement("DIV");r&&(O.id="readability-content");for(var k=Math.max(10,.2*_.readability.contentScore),D=(b=_.parentNode).children,$=0,M=D.length;$<M;$++){var I=D[$],R=!1;if(this.log("Looking at sibling node:",I,I.readability?"with score "+I.readability.contentScore:""),this.log("Sibling has score",I.readability?I.readability.contentScore:"Unknown"),I===_)R=!0;else{var P=0;if(I.className===_.className&&""!==_.className&&(P+=.2*_.readability.contentScore),I.readability&&I.readability.contentScore+P>=k)R=!0;else if("P"===I.nodeName){var B=this._getLinkDensity(I),H=this._getInnerText(I),j=H.length;(j>80&&B<.25||j<80&&j>0&&0===B&&-1!==H.search(/\.( |$)/))&&(R=!0)}}R&&(this.log("Appending node:",I),-1===this.ALTER_TO_DIV_EXCEPTIONS.indexOf(I.nodeName)&&(this.log("Altering sibling:",I,"to div."),I=this._setNodeTag(I,"DIV")),O.appendChild(I),D=b.children,$-=1,M-=1)}if(this._debug&&this.log("Article content pre-prep: "+O.innerHTML),this._prepArticle(O),this._debug&&this.log("Article content post-prep: "+O.innerHTML),N)_.id="readability-page-1",_.className="page";else{var U=t.createElement("DIV");for(U.id="readability-page-1",U.className="page";O.firstChild;)U.appendChild(O.firstChild);O.appendChild(U)}this._debug&&this.log("Article content after paging: "+O.innerHTML);var F=!0,W=this._getInnerText(O,!0).length;if(W<this._charThreshold)if(F=!1,e.innerHTML=n,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:O,textLength:W});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:O,textLength:W});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:O,textLength:W});else{if(this._attempts.push({articleContent:O,textLength:W}),this._attempts.sort((function(e,t){return t.textLength-e.textLength})),!this._attempts[0].textLength)return null;O=this._attempts[0].articleContent,F=!0}if(F){var G=[b,_].concat(this._getNodeAncestors(b));return this._someNode(G,(function(e){if(!e.tagName)return!1;var t=e.getAttribute("dir");return!!t&&(this._articleDir=t,!0)})),O}}},_isValidByline:function(e){return("string"==typeof e||e instanceof String)&&(e=e.trim()).length>0&&e.length<100},_unescapeHtmlEntities:function(e){if(!e)return e;var t=this.HTML_ESCAPE_MAP;return e.replace(/&(quot|amp|apos|lt|gt);/g,(function(e,r){return t[r]})).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,(function(e,t,r){var n=parseInt(t||r,t?16:10);return String.fromCharCode(n)}))},_getJSONLD:function(e){var t,r=this._getAllNodesWithTag(e,["script"]);return this._forEachNode(r,(function(e){if(!t&&"application/ld+json"===e.getAttribute("type"))try{var r=e.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),n=JSON.parse(r);if(!n["@context"]||!n["@context"].match(/^https?\:\/\/schema\.org$/))return;if(!n["@type"]&&Array.isArray(n["@graph"])&&(n=n["@graph"].find((function(e){return(e["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)}))),!n||!n["@type"]||!n["@type"].match(this.REGEXPS.jsonLdArticleTypes))return;if(t={},"string"==typeof n.name&&"string"==typeof n.headline&&n.name!==n.headline){var i=this._getArticleTitle(),a=this._textSimilarity(n.name,i)>.75,s=this._textSimilarity(n.headline,i)>.75;t.title=s&&!a?n.headline:n.name}else"string"==typeof n.name?t.title=n.name.trim():"string"==typeof n.headline&&(t.title=n.headline.trim());return n.author&&("string"==typeof n.author.name?t.byline=n.author.name.trim():Array.isArray(n.author)&&n.author[0]&&"string"==typeof n.author[0].name&&(t.byline=n.author.filter((function(e){return e&&"string"==typeof e.name})).map((function(e){return e.name.trim()})).join(", "))),"string"==typeof n.description&&(t.excerpt=n.description.trim()),n.publisher&&"string"==typeof n.publisher.name&&(t.siteName=n.publisher.name.trim()),void("string"==typeof n.datePublished&&(t.datePublished=n.datePublished.trim()))}catch(e){this.log(e.message)}})),t||{}},_getArticleMetadata:function(e){var t={},r={},n=this._doc.getElementsByTagName("meta"),i=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,a=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(n,(function(e){var t=e.getAttribute("name"),n=e.getAttribute("property"),s=e.getAttribute("content");if(s){var o=null,l=null;n&&(o=n.match(i))&&(l=o[0].toLowerCase().replace(/\s/g,""),r[l]=s.trim()),!o&&t&&a.test(t)&&(l=t,s&&(l=l.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),r[l]=s.trim()))}})),t.title=e.title||r["dc:title"]||r["dcterm:title"]||r["og:title"]||r["weibo:article:title"]||r["weibo:webpage:title"]||r.title||r["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e.byline||r["dc:creator"]||r["dcterm:creator"]||r.author,t.excerpt=e.excerpt||r["dc:description"]||r["dcterm:description"]||r["og:description"]||r["weibo:article:description"]||r["weibo:webpage:description"]||r.description||r["twitter:description"],t.siteName=e.siteName||r["og:site_name"],t.publishedTime=e.datePublished||r["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(e){return"IMG"===e.tagName||1===e.children.length&&""===e.textContent.trim()&&this._isSingleImage(e.children[0])},_unwrapNoscriptImages:function(e){var t=Array.from(e.getElementsByTagName("img"));this._forEachNode(t,(function(e){for(var t=0;t<e.attributes.length;t++){var r=e.attributes[t];switch(r.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(r.value))return}e.parentNode.removeChild(e)}));var r=Array.from(e.getElementsByTagName("noscript"));this._forEachNode(r,(function(t){var r=e.createElement("div");if(r.innerHTML=t.innerHTML,this._isSingleImage(r)){var n=t.previousElementSibling;if(n&&this._isSingleImage(n)){var i=n;"IMG"!==i.tagName&&(i=n.getElementsByTagName("img")[0]);for(var a=r.getElementsByTagName("img")[0],s=0;s<i.attributes.length;s++){var o=i.attributes[s];if(""!==o.value&&("src"===o.name||"srcset"===o.name||/\.(jpg|jpeg|png|webp)/i.test(o.value))){if(a.getAttribute(o.name)===o.value)continue;var l=o.name;a.hasAttribute(l)&&(l="data-old-"+l),a.setAttribute(l,o.value)}}t.parentNode.replaceChild(r.firstElementChild,n)}}}))},_removeScripts:function(e){this._removeNodes(this._getAllNodesWithTag(e,["script","noscript"]))},_hasSingleTagInsideElement:function(e,t){return 1==e.children.length&&e.children[0].tagName===t&&!this._someNode(e.childNodes,(function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)}))},_isElementWithoutContent:function(e){return e.nodeType===this.ELEMENT_NODE&&0==e.textContent.trim().length&&(0==e.children.length||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,(function(e){return this.DIV_TO_P_ELEMS.has(e.tagName)||this._hasChildBlockElement(e)}))},_isPhrasingContent:function(e){return e.nodeType===this.TEXT_NODE||-1!==this.PHRASING_ELEMS.indexOf(e.tagName)||("A"===e.tagName||"DEL"===e.tagName||"INS"===e.tagName)&&this._everyNode(e.childNodes,this._isPhrasingContent)},_isWhitespace:function(e){return e.nodeType===this.TEXT_NODE&&0===e.textContent.trim().length||e.nodeType===this.ELEMENT_NODE&&"BR"===e.tagName},_getInnerText:function(e,t){t=void 0===t||t;var r=e.textContent.trim();return t?r.replace(this.REGEXPS.normalize," "):r},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(e&&"svg"!==e.tagName.toLowerCase()){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)e.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);-1!==this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(e.tagName)&&(e.removeAttribute("width"),e.removeAttribute("height"));for(var r=e.firstElementChild;null!==r;)this._cleanStyles(r),r=r.nextElementSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length;if(0===t)return 0;var r=0;return this._forEachNode(e.getElementsByTagName("a"),(function(e){var t=e.getAttribute("href"),n=t&&this.REGEXPS.hashUrl.test(t)?.3:1;r+=this._getInnerText(e).length*n})),r/t},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return"string"==typeof e.className&&""!==e.className&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),"string"==typeof e.id&&""!==e.id&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var r=-1!==["object","embed","iframe"].indexOf(t);this._removeNodes(this._getAllNodesWithTag(e,[t]),(function(e){if(r){for(var t=0;t<e.attributes.length;t++)if(this._allowedVideoRegex.test(e.attributes[t].value))return!1;if("object"===e.tagName&&this._allowedVideoRegex.test(e.innerHTML))return!1}return!0}))},_hasAncestorTag:function(e,t,r,n){r=r||3,t=t.toUpperCase();for(var i=0;e.parentNode;){if(r>0&&i>r)return!1;if(e.parentNode.tagName===t&&(!n||n(e.parentNode)))return!0;e=e.parentNode,i++}return!1},_getRowAndColumnCount:function(e){for(var t=0,r=0,n=e.getElementsByTagName("tr"),i=0;i<n.length;i++){var a=n[i].getAttribute("rowspan")||0;a&&(a=parseInt(a,10)),t+=a||1;for(var s=0,o=n[i].getElementsByTagName("td"),l=0;l<o.length;l++){var c=o[l].getAttribute("colspan")||0;c&&(c=parseInt(c,10)),s+=c||1}r=Math.max(r,s)}return{rows:t,columns:r}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),r=0;r<t.length;r++){var n=t[r];if("presentation"!=n.getAttribute("role"))if("0"!=n.getAttribute("datatable"))if(n.getAttribute("summary"))n._readabilityDataTable=!0;else{var i=n.getElementsByTagName("caption")[0];if(i&&i.childNodes.length>0)n._readabilityDataTable=!0;else if(["col","colgroup","tfoot","thead","th"].some((function(e){return!!n.getElementsByTagName(e)[0]})))this.log("Data table because found data-y descendant"),n._readabilityDataTable=!0;else if(n.getElementsByTagName("table")[0])n._readabilityDataTable=!1;else{var a=this._getRowAndColumnCount(n);a.rows>=10||a.columns>4?n._readabilityDataTable=!0:n._readabilityDataTable=a.rows*a.columns>10}}else n._readabilityDataTable=!1;else n._readabilityDataTable=!1}},_fixLazyImages:function(e){this._forEachNode(this._getAllNodesWithTag(e,["img","picture","figure"]),(function(e){if(e.src&&this.REGEXPS.b64DataUrl.test(e.src)){if("image/svg+xml"===this.REGEXPS.b64DataUrl.exec(e.src)[1])return;for(var t=!1,r=0;r<e.attributes.length;r++){var n=e.attributes[r];if("src"!==n.name&&/\.(jpg|jpeg|png|webp)/i.test(n.value)){t=!0;break}}if(t){var i=e.src.search(/base64\s*/i)+7;e.src.length-i<133&&e.removeAttribute("src")}}if(!(e.src||e.srcset&&"null"!=e.srcset)||-1!==e.className.toLowerCase().indexOf("lazy"))for(var a=0;a<e.attributes.length;a++)if("src"!==(n=e.attributes[a]).name&&"srcset"!==n.name&&"alt"!==n.name){var s=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(n.value)?s="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(n.value)&&(s="src"),s)if("IMG"===e.tagName||"PICTURE"===e.tagName)e.setAttribute(s,n.value);else if("FIGURE"===e.tagName&&!this._getAllNodesWithTag(e,["img","picture"]).length){var o=this._doc.createElement("img");o.setAttribute(s,n.value),e.appendChild(o)}}}))},_getTextDensity:function(e,t){var r=this._getInnerText(e,!0).length;if(0===r)return 0;var n=0,i=this._getAllNodesWithTag(e,t);return this._forEachNode(i,(e=>n+=this._getInnerText(e,!0).length)),n/r},_cleanConditionally:function(e,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(e,[t]),(function(e){var r=function(e){return e._readabilityDataTable},n="ul"===t||"ol"===t;if(!n){var i=0,a=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(a,(e=>i+=this._getInnerText(e).length)),n=i/this._getInnerText(e).length>.9}if("table"===t&&r(e))return!1;if(this._hasAncestorTag(e,"table",-1,r))return!1;if(this._hasAncestorTag(e,"code"))return!1;var s=this._getClassWeight(e);if(this.log("Cleaning Conditionally",e),s+0<0)return!0;if(this._getCharCount(e,",")<10){for(var o=e.getElementsByTagName("p").length,l=e.getElementsByTagName("img").length,c=e.getElementsByTagName("li").length-100,u=e.getElementsByTagName("input").length,d=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),g=0,h=this._getAllNodesWithTag(e,["object","embed","iframe"]),m=0;m<h.length;m++){for(var f=0;f<h[m].attributes.length;f++)if(this._allowedVideoRegex.test(h[m].attributes[f].value))return!1;if("object"===h[m].tagName&&this._allowedVideoRegex.test(h[m].innerHTML))return!1;g++}var p=this._getLinkDensity(e),A=this._getInnerText(e).length,y=l>1&&o/l<.5&&!this._hasAncestorTag(e,"figure")||!n&&c>o||u>Math.floor(o/3)||!n&&d<.9&&A<25&&(0===l||l>2)&&!this._hasAncestorTag(e,"figure")||!n&&s<25&&p>.2||s>=25&&p>.5||1===g&&A<75||g>1;if(n&&y){for(var v=0;v<e.children.length;v++)if(e.children[v].children.length>1)return y;if(l==e.getElementsByTagName("li").length)return!1}return y}return!1}))},_cleanMatchedNodes:function(e,t){for(var r=this._getNextNode(e,!0),n=this._getNextNode(e);n&&n!=r;)n=t.call(this,n,n.className+" "+n.id)?this._removeAndGetNext(n):this._getNextNode(n)},_cleanHeaders:function(e){let t=this._getAllNodesWithTag(e,["h1","h2"]);this._removeNodes(t,(function(e){let t=this._getClassWeight(e)<0;return t&&this.log("Removing header with low class weight:",e),t}))},_headerDuplicatesTitle:function(e){if("H1"!=e.tagName&&"H2"!=e.tagName)return!1;var t=this._getInnerText(e,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(e){return(this._flags&e)>0},_removeFlag:function(e){this._flags=this._flags&~e},_isProbablyVisible:function(e){return(!e.style||"none"!=e.style.display)&&(!e.style||"hidden"!=e.style.visibility)&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||"true"!=e.getAttribute("aria-hidden")||e.className&&e.className.indexOf&&-1!==e.className.indexOf("fallback-image"))},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length;if(e>this._maxElemsToParse)throw new Error("Aborting parsing document; "+e+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var r=this._getArticleMetadata(t);this._articleTitle=r.title;var n=this._grabArticle();if(!n)return null;if(this.log("Grabbed: "+n.innerHTML),this._postProcessContent(n),!r.excerpt){var i=n.getElementsByTagName("p");i.length>0&&(r.excerpt=i[0].textContent.trim())}var a=n.textContent;return{title:this._articleTitle,byline:r.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(n),textContent:a,length:a.length,excerpt:r.excerpt,siteName:r.siteName||this._articleSiteName,publishedTime:r.publishedTime}}},e.exports=t},396:(e,t,r)=>{var n=r(238),i=r(804);e.exports={Readability:n,isProbablyReaderable:i}},353:function(e){e.exports=function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",a="hour",s="day",o="week",l="month",c="quarter",u="year",d="date",g="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},p=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},A={s:p,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+p(n,2,"0")+":"+p(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,l),a=r-i<0,s=t.clone().add(n+(a?-1:1),l);return+(-(n+(r-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:o,d:s,D:d,h:a,m:i,s:n,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",v={};v[y]=f;var b="$isDayjsObject",_=function(e){return e instanceof T||!(!e||!e[b])},N=function e(t,r,n){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();v[a]&&(i=a),r&&(v[a]=r,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=t.name;v[o]=t,i=o}return!n&&i&&(y=i),i||!n&&y},E=function(e,t){if(_(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new T(r)},x=A;x.l=N,x.i=_,x.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function f(e){this.$L=N(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return x},p.isValid=function(){return!(this.$d.toString()===g)},p.isSame=function(e,t){var r=E(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return E(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<E(e)},p.$g=function(e,t,r){return x.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var r=this,c=!!x.u(t)||t,g=x.p(e),h=function(e,t){var n=x.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return c?n:n.endOf(s)},m=function(e,t){return x.w(r.toDate()[e].apply(r.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},f=this.$W,p=this.$M,A=this.$D,y="set"+(this.$u?"UTC":"");switch(g){case u:return c?h(1,0):h(31,11);case l:return c?h(1,p):h(0,p+1);case o:var v=this.$locale().weekStart||0,b=(f<v?f+7:f)-v;return h(c?A-b:A+(6-b),p);case s:case d:return m(y+"Hours",0);case a:return m(y+"Minutes",1);case i:return m(y+"Seconds",2);case n:return m(y+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var o,c=x.p(e),g="set"+(this.$u?"UTC":""),h=(o={},o[s]=g+"Date",o[d]=g+"Date",o[l]=g+"Month",o[u]=g+"FullYear",o[a]=g+"Hours",o[i]=g+"Minutes",o[n]=g+"Seconds",o[r]=g+"Milliseconds",o)[c],m=c===s?this.$D+(t-this.$W):t;if(c===l||c===u){var f=this.clone().set(d,1);f.$d[h](m),f.init(),this.$d=f.set(d,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[x.p(e)]()},p.add=function(r,c){var d,g=this;r=Number(r);var h=x.p(c),m=function(e){var t=E(g);return x.w(t.date(t.date()+Math.round(e*r)),g)};if(h===l)return this.set(l,this.$M+r);if(h===u)return this.set(u,this.$y+r);if(h===s)return m(1);if(h===o)return m(7);var f=(d={},d[i]=e,d[a]=t,d[n]=1e3,d)[h]||1,p=this.$d.getTime()+r*f;return x.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||g;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),a=this.$H,s=this.$m,o=this.$M,l=r.weekdays,c=r.months,u=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},h=function(e){return x.s(a%12||12,e,"0")},f=u||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(m,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return o+1;case"MM":return x.s(o+1,2,"0");case"MMM":return d(r.monthsShort,o,c,3);case"MMMM":return d(c,o);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,l,2);case"ddd":return d(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(a);case"HH":return x.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(a,s,!0);case"A":return f(a,s,!1);case"m":return String(s);case"mm":return x.s(s,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(r,d,g){var h,m=this,f=x.p(d),p=E(r),A=(p.utcOffset()-this.utcOffset())*e,y=this-p,v=function(){return x.m(m,p)};switch(f){case u:h=v()/12;break;case l:h=v();break;case c:h=v()/3;break;case o:h=(y-A)/6048e5;break;case s:h=(y-A)/864e5;break;case a:h=y/t;break;case i:h=y/e;break;case n:h=y/1e3;break;default:h=y}return g?h:x.a(h)},p.daysInMonth=function(){return this.endOf(l).$D},p.$locale=function(){return v[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=N(e,t,!0);return n&&(r.$L=n),r},p.clone=function(){return x.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),S=T.prototype;return E.prototype=S,[["$ms",r],["$s",n],["$m",i],["$H",a],["$W",s],["$M",l],["$y",u],["$D",d]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,T,E),e.$i=!0),E},E.locale=N,E.isDayjs=_,E.unix=function(e){return E(1e3*e)},E.en=v[y],E.Ls=v,E.p={},E}()},992:(e,t,r)=>{var n,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function i(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var r=a._compress(e,6,(function(e){return t.charAt(e)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,(function(r){return i(t,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":a._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=a.compress(e),r=new Uint8Array(2*t.length),n=0,i=t.length;n<i;n++){var s=t.charCodeAt(n);r[2*n]=s>>>8,r[2*n+1]=s%256}return r},decompressFromUint8Array:function(t){if(null==t)return a.decompress(t);for(var r=new Array(t.length/2),n=0,i=r.length;n<i;n++)r[n]=256*t[2*n]+t[2*n+1];var s=[];return r.forEach((function(t){s.push(e(t))})),a.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,(function(t){return i(r,e.charAt(t))})))},compress:function(t){return a._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,r){if(null==e)return"";var n,i,a,s={},o={},l="",c="",u="",d=2,g=3,h=2,m=[],f=0,p=0;for(a=0;a<e.length;a+=1)if(l=e.charAt(a),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=g++,o[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(s,c))u=c;else{if(Object.prototype.hasOwnProperty.call(o,u)){if(u.charCodeAt(0)<256){for(n=0;n<h;n++)f<<=1,p==t-1?(p=0,m.push(r(f)),f=0):p++;for(i=u.charCodeAt(0),n=0;n<8;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1}else{for(i=1,n=0;n<h;n++)f=f<<1|i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete o[u]}else for(i=s[u],n=0;n<h;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1;0==--d&&(d=Math.pow(2,h),h++),s[c]=g++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(o,u)){if(u.charCodeAt(0)<256){for(n=0;n<h;n++)f<<=1,p==t-1?(p=0,m.push(r(f)),f=0):p++;for(i=u.charCodeAt(0),n=0;n<8;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1}else{for(i=1,n=0;n<h;n++)f=f<<1|i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete o[u]}else for(i=s[u],n=0;n<h;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1;0==--d&&(d=Math.pow(2,h),h++)}for(i=2,n=0;n<h;n++)f=f<<1|1&i,p==t-1?(p=0,m.push(r(f)),f=0):p++,i>>=1;for(;;){if(f<<=1,p==t-1){m.push(r(f));break}p++}return m.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,r,n){var i,a,s,o,l,c,u,d=[],g=4,h=4,m=3,f="",p=[],A={val:n(0),position:r,index:1};for(i=0;i<3;i+=1)d[i]=i;for(s=0,l=Math.pow(2,2),c=1;c!=l;)o=A.val&A.position,A.position>>=1,0==A.position&&(A.position=r,A.val=n(A.index++)),s|=(o>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)o=A.val&A.position,A.position>>=1,0==A.position&&(A.position=r,A.val=n(A.index++)),s|=(o>0?1:0)*c,c<<=1;u=e(s);break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)o=A.val&A.position,A.position>>=1,0==A.position&&(A.position=r,A.val=n(A.index++)),s|=(o>0?1:0)*c,c<<=1;u=e(s);break;case 2:return""}for(d[3]=u,a=u,p.push(u);;){if(A.index>t)return"";for(s=0,l=Math.pow(2,m),c=1;c!=l;)o=A.val&A.position,A.position>>=1,0==A.position&&(A.position=r,A.val=n(A.index++)),s|=(o>0?1:0)*c,c<<=1;switch(u=s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)o=A.val&A.position,A.position>>=1,0==A.position&&(A.position=r,A.val=n(A.index++)),s|=(o>0?1:0)*c,c<<=1;d[h++]=e(s),u=h-1,g--;break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)o=A.val&A.position,A.position>>=1,0==A.position&&(A.position=r,A.val=n(A.index++)),s|=(o>0?1:0)*c,c<<=1;d[h++]=e(s),u=h-1,g--;break;case 2:return p.join("")}if(0==g&&(g=Math.pow(2,m),m++),d[u])f=d[u];else{if(u!==h)return null;f=a+a.charAt(0)}p.push(f),d[h++]=a+f.charAt(0),a=f,0==--g&&(g=Math.pow(2,m),m++)}}};return a}();void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)},815:function(e,t){var r,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},a=e=>1==e?"argument":"arguments",s=(e,t,r)=>new Proxy(t,{apply:(t,n,i)=>r.call(n,e,...i)});let o=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},r={})=>{let n=Object.create(null),c={has:(t,r)=>r in e||r in n,get(c,u,d){if(u in n)return n[u];if(!(u in e))return;let g=e[u];if("function"==typeof g)if("function"==typeof t[u])g=s(e,e[u],t[u]);else if(o(r,u)){let t=((e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((a,s)=>{if(t.fallbackToNoCallback)try{r[e](...n,i({resolve:a,reject:s},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(r[e](...n),a()):r[e](...n,i({resolve:a,reject:s},t))}))})(u,r[u]);g=s(e,e[u],t)}else g=g.bind(e);else if("object"==typeof g&&null!==g&&(o(t,u)||o(r,u)))g=l(g,t[u],r[u]);else{if(!o(r,"*"))return Object.defineProperty(n,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(t){e[u]=t}}),g;g=l(g,t[u],r["*"])}return n[u]=g,g},set:(t,r,i,a)=>(r in n?n[r]=i:e[r]=i,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},u=Object.create(e);return new Proxy(u,c)},c=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),u=new n((e=>"function"!=typeof e?e:function(t){const r=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)})),d=new n((e=>"function"!=typeof e?e:function(t,r,n){let i,a,s=!1,o=new Promise((e=>{i=function(t){s=!0,e(t)}}));try{a=e(t,r,i)}catch(e){a=Promise.reject(e)}const l=!0!==a&&((c=a)&&"object"==typeof c&&"function"==typeof c.then);var c;if(!0!==a&&!l&&!s)return!1;return(l?a:o).then((e=>{n(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),g=({reject:r,resolve:n},i)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?r(new Error(i.message)):n(i)},h=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const i=g.bind(null,{resolve:e,reject:t});n.push(i),r.sendMessage(...n)}))},m={devtools:{network:{onRequestFinished:c(u)}},runtime:{onMessage:c(d),onMessageExternal:c(d),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},f={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":f},services:{"*":f},websites:{"*":f}},l(e,m,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(n=r.apply(t,[e]))||(e.exports=n)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=r(353),i=r.n(n);const a=r(815);function s(e){return navigator.platform.indexOf("Win")>-1?e.replace(":","").replace(/[/\\?%*|"<>]/g,"-"):e.replace(":","").replace(/[/\\]/g,"-")}function o(e,t){return Array(t+1).join(e)}var l=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function c(e){return h(e,l)}var u=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function d(e){return h(e,u)}var g=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function h(e,t){return t.indexOf(e.nodeName)>=0}function m(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var f={};function p(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function A(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function y(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(v(i,t,r))return i}}function v(e,t,r){var n=e.filter;if("string"==typeof n){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(e,t,r))return!0}}function b(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function _(e,t,r){return e&&e.parentNode===t||r(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}f.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},f.lineBreak={filter:"br",replacement:function(e,t,r){return r.br+"\n"}},f.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,r){var n=Number(t.nodeName.charAt(1));return"setext"===r.headingStyle&&n<3?"\n\n"+e+"\n"+o(1===n?"=":"-",e.length)+"\n\n":"\n\n"+o("#",n)+" "+e+"\n\n"}},f.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},f.list={filter:["ul","ol"],replacement:function(e,t){var r=t.parentNode;return"LI"===r.nodeName&&r.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},f.listItem={filter:"li",replacement:function(e,t,r){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=r.bulletListMarker+"   ",i=t.parentNode;if("OL"===i.nodeName){var a=i.getAttribute("start"),s=Array.prototype.indexOf.call(i.children,t);n=(a?Number(a)+s:s+1)+".  "}return n+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},f.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,r){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},f.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,r){for(var n,i=((t.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],a=t.firstChild.textContent,s=r.fence.charAt(0),l=3,c=new RegExp("^"+s+"{3,}","gm");n=c.exec(a);)n[0].length>=l&&(l=n[0].length+1);var u=o(s,l);return"\n\n"+u+i+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}},f.horizontalRule={filter:"hr",replacement:function(e,t,r){return"\n\n"+r.hr+"\n\n"}},f.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var r=t.getAttribute("href");r&&(r=r.replace(/([()])/g,"\\$1"));var n=p(t.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+e+"]("+r+n+")"}},f.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,r){var n,i,a=t.getAttribute("href"),s=p(t.getAttribute("title"));switch(s&&(s=' "'+s+'"'),r.linkReferenceStyle){case"collapsed":n="["+e+"][]",i="["+e+"]: "+a+s;break;case"shortcut":n="["+e+"]",i="["+e+"]: "+a+s;break;default:var o=this.references.length+1;n="["+e+"]["+o+"]",i="["+o+"]: "+a+s}return this.references.push(i),n},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},f.emphasis={filter:["em","i"],replacement:function(e,t,r){return e.trim()?r.emDelimiter+e+r.emDelimiter:""}},f.strong={filter:["strong","b"],replacement:function(e,t,r){return e.trim()?r.strongDelimiter+e+r.strongDelimiter:""}},f.code={filter:function(e){var t=e.previousSibling||e.nextSibling,r="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!r},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",r="`",n=e.match(/`+/gm)||[];-1!==n.indexOf(r);)r+="`";return r+t+e+t+r}},f.image={filter:"img",replacement:function(e,t){var r=p(t.getAttribute("alt")),n=t.getAttribute("src")||"",i=p(t.getAttribute("title"));return n?"!["+r+"]("+n+(i?' "'+i+'"':"")+")":""}},A.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=y(this.array,e,this.options))||(t=y(this._keep,e,this.options))||(t=y(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var N,E,x="undefined"!=typeof window?window:{},T=function(){var e=x.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(e){}return t}()?x.DOMParser:(N=function(){},function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){x.ActiveXObject&&(e=!0)}return e}()?N.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:N.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},N);function S(e,t){var r;return function(e){var t=e.element,r=e.isBlock,n=e.isVoid,i=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!i(t)){for(var a=null,s=!1,o=null,l=_(o,t,i);l!==t;){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(a&&!/ $/.test(a.data)||s||" "!==c[0]||(c=c.substr(1)),!c){l=b(l);continue}l.data=c,a=l}else{if(1!==l.nodeType){l=b(l);continue}r(l)||"BR"===l.nodeName?(a&&(a.data=a.data.replace(/ $/,"")),a=null,s=!1):n(l)||i(l)?(a=null,s=!0):a&&(s=!1)}var u=_(o,l,i);o=l,l=u}a&&(a.data=a.data.replace(/ $/,""),a.data||b(a))}}({element:r="string"==typeof e?(E=E||new T).parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):e.cloneNode(!0),isBlock:c,isVoid:d,isPre:t.preformattedCode?C:null}),r}function C(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function w(e,t){return e.isBlock=c(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=function(e){return!d(e)&&!function(e){return h(e,g)}(e)&&/^\s*$/i.test(e.textContent)&&!function(e){return m(e,u)}(e)&&!function(e){return m(e,g)}(e)}(e),e.flankingWhitespace=function(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var r,n={leading:(r=e.textContent.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/))[1],leadingAscii:r[2],leadingNonAscii:r[3],trailing:r[4],trailingNonAscii:r[5],trailingAscii:r[6]};return n.leadingAscii&&L("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&L("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}(e,t),e}function L(e,t,r){var n,i,a;return"left"===e?(n=t.previousSibling,i=/ $/):(n=t.nextSibling,i=/^ /),n&&(3===n.nodeType?a=i.test(n.nodeValue):r.preformattedCode&&"CODE"===n.nodeName?a=!1:1!==n.nodeType||c(n)||(a=i.test(n.textContent))),a}var O=Array.prototype.reduce,k=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function D(e){if(!(this instanceof D))return new D(e);var t={rules:f,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}({},t,e),this.rules=new A(this.options)}function $(e){var t=this;return O.call(e.childNodes,(function(e,r){var n="";return 3===(r=new w(r,t.options)).nodeType?n=r.isCode?r.nodeValue:t.escape(r.nodeValue):1===r.nodeType&&(n=I.call(t,r)),R(e,n)}),"")}function M(e){var t=this;return this.rules.forEach((function(r){"function"==typeof r.append&&(e=R(e,r.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function I(e){var t=this.rules.forNode(e),r=$.call(this,e),n=e.flankingWhitespace;return(n.leading||n.trailing)&&(r=r.trim()),n.leading+t.replacement(r,e,this.options)+n.trailing}function R(e,t){var r=function(e){for(var t=e.length;t>0&&"\n"===e[t-1];)t--;return e.substring(0,t)}(e),n=t.replace(/^\n*/,""),i=Math.max(e.length-r.length,t.length-n.length);return r+"\n\n".substring(0,i)+n}D.prototype={turndown:function(e){if(!function(e){return null!=e&&("string"==typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=$.call(this,new S(e,this.options));return M.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!=typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return k.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}};const P=D;var B=/highlight-(?:text|source)-([a-z0-9]+)/;function H(e){e.addRule("highlightedCodeBlock",{filter:function(e){var t=e.firstChild;return"DIV"===e.nodeName&&B.test(e.className)&&t&&"PRE"===t.nodeName},replacement:function(e,t,r){var n=((t.className||"").match(B)||[null,""])[1];return"\n\n"+r.fence+n+"\n"+t.firstChild.textContent+"\n"+r.fence+"\n\n"}})}function j(e){e.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var U=Array.prototype.indexOf,F=Array.prototype.every,W={};function G(e){var t,r,n=e.parentNode;return"THEAD"===n.nodeName||n.firstChild===e&&("TABLE"===n.nodeName||(r=(t=n).previousSibling,"TBODY"===t.nodeName&&(!r||"THEAD"===r.nodeName&&/^\s*$/i.test(r.textContent))))&&F.call(e.childNodes,(function(e){return"TH"===e.nodeName}))}function V(e,t){var r=" ";return 0===U.call(t.parentNode.childNodes,t)&&(r="| "),r+e+" |"}function q(e){for(var t in e.keep((function(e){return"TABLE"===e.nodeName&&!G(e.rows[0])})),W)e.addRule(t,W[t])}function Y(e){e.addRule("taskListItems",{filter:function(e){return"checkbox"===e.type&&"LI"===e.parentNode.nodeName},replacement:function(e,t){return(t.checked?"[x]":"[ ]")+" "}})}function J(e){e.use([H,j,q,Y])}W.tableCell={filter:["th","td"],replacement:function(e,t){return V(e,t)}},W.tableRow={filter:"tr",replacement:function(e,t){var r="",n={left:":--",right:"--:",center:":-:"};if(G(t))for(var i=0;i<t.childNodes.length;i++){var a="---",s=(t.childNodes[i].getAttribute("align")||"").toLowerCase();s&&(a=n[s]||a),r+=V(a,t.childNodes[i])}return"\n"+e+(r?"\n"+r:"")}},W.table={filter:function(e){return"TABLE"===e.nodeName&&G(e.rows[0])},replacement:function(e){return"\n\n"+(e=e.replace("\n\n","\n"))+"\n\n"}},W.tableSection={filter:["thead","tbody","tfoot"],replacement:function(e){return e}};var X=r(396);function z(e,t,r,n=!1){const i=(new DOMParser).parseFromString(e,"text/html"),a=new URL(t);function s(e,t){const r=e.getAttribute(t);if(r)if(r.startsWith("chrome-extension://")){const n=r.split("/").slice(3).join("/"),i=new URL(n,a).href;e.setAttribute(t,i)}else if(!(r.startsWith("http")||r.startsWith("data:")||r.startsWith("#")||r.startsWith("mailto:"))){const n=new URL(r,a).href;e.setAttribute(t,n)}}function o(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("img").forEach((e=>s(e,"src"))),t.querySelectorAll("a").forEach((e=>s(e,"href"))),t.innerHTML}let l;if(r)l=o(r);else if(n)l=o(e);else{const e=new X.Readability(i).parse();if(!e)return console.error("Failed to parse content with Readability"),"";l=o(e.content)}const c=new P({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});c.use(J),c.remove(["style","script"]),c.keep(["iframe","video","audio"]),c.addRule("keepSvg",{filter:function(e){return"svg"===e.nodeName.toLowerCase()},replacement:function(e,t){return t instanceof SVGElement?t.outerHTML:e}}),c.addRule("listItem",{filter:"li",replacement:function(e,t,r){e=e.trim();let n=r.bulletListMarker+" ",i=t.parentNode;if(i instanceof HTMLOListElement){let e=i.getAttribute("start"),r=Array.from(i.children).indexOf(t)+1;n=(e?Number(e)+r-1:r)+". "}return n+e+"\n"}}),c.addRule("figure",{filter:"figure",replacement:function(e,t){var r,n;const i=t,a=i.querySelector("img"),s=i.querySelector("figcaption");if(!a)return e;const o=a.getAttribute("alt")||"",l=a.getAttribute("src")||"";let c=s&&(null===(r=s.textContent)||void 0===r?void 0:r.trim())||"";const u=null==s?void 0:s.querySelector(".attribution");if(u){const e=u.querySelector("a");if(e){const t=(null===(n=e.textContent)||void 0===n?void 0:n.trim())||"",r=e.getAttribute("href")||"";c=c.replace(u.textContent||"","").trim(),c+=` [${t}](${r})`}}return`![${o}](${l})\n\n${c}`}}),c.addRule("embedToMarkdown",{filter:function(e){if(e instanceof HTMLIFrameElement){const t=e.getAttribute("src");return!(!t||!t.match(/(?:youtube\.com|youtu\.be)/)&&!t.match(/(?:twitter\.com|x\.com)/))}return!1},replacement:function(e,t){if(t instanceof HTMLIFrameElement){const e=t.getAttribute("src");if(e){const t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:embed\/|watch\?v=)?([a-zA-Z0-9_-]+)/);if(t&&t[1])return`![](https://www.youtube.com/watch?v=${t[1]})`;const r=e.match(/(?:twitter\.com|x\.com)\/.*?(?:status|statuses)\/(\d+)/);if(r&&r[1])return`![](https://x.com/i/status/${r[1]})`}}return e}}),c.addRule("highlight",{filter:"mark",replacement:function(e){return"=="+e+"=="}}),c.addRule("strikethrough",{filter:e=>"DEL"===e.nodeName||"S"===e.nodeName||"STRIKE"===e.nodeName,replacement:function(e){return"~~"+e+"~~"}}),c.addRule("complexLinkStructure",{filter:function(e,t){return"A"===e.nodeName&&e.childNodes.length>1&&Array.from(e.childNodes).some((e=>["H1","H2","H3","H4","H5","H6"].includes(e.nodeName)))},replacement:function(e,t,r){if(!(t instanceof HTMLElement))return e;const n=t.getAttribute("href"),i=t.getAttribute("title"),a=t.querySelector("h1, h2, h3, h4, h5, h6"),s=a?c.turndown(a.innerHTML):"";a&&a.remove();let o=`${s}\n\n${c.turndown(t.innerHTML)}\n\n`;return n&&(o+=`[View original](${n})`,i&&(o+=` "${i}"`)),o}});let u=c.turndown(l);const d=u.match(/^# .+\n+/);return d&&(u=u.slice(d[0].length)),u.trim()}const K={list:(e,t)=>{try{const r=JSON.parse(e);if(Array.isArray(r))switch(t){case"numbered":return r.map(((e,t)=>`${t+1}. ${e}`)).join("\n");case"task":return r.map((e=>`- [ ] ${e}`)).join("\n");case"numbered-task":return r.map(((e,t)=>`${t+1}. [ ] ${e}`)).join("\n");default:return r.map((e=>`- ${e}`)).join("\n")}}catch(e){console.error("Error parsing JSON for list filter:",e)}return e},camel:e=>e.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toLowerCase():e.toUpperCase())).replace(/[\s_-]+/g,""),kebab:e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),pascal:e=>e.replace(/[\s_-]+(.)/g,((e,t)=>t.toUpperCase())).replace(/^(.)/,(e=>e.toUpperCase())),snake:e=>e.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/[\s-]+/g,"_").toLowerCase(),wikilink:e=>{if(!e.trim())return"";if(e.startsWith("[")&&e.endsWith("]"))try{const t=JSON.parse(e);if(Array.isArray(t))return t.map((e=>e.trim()?`[[${e}]]`:"")).filter(Boolean).join(", ")}catch(e){console.error("wikilink error:",e)}return`[[${e}]]`},slice:(e,t)=>{if(!t)return console.error("Slice filter requires parameters"),e;const[r,n]=t.split(",").map((e=>e.trim())).map((e=>{if(""===e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}));let i;try{i=JSON.parse(e)}catch(t){console.error("Error parsing JSON in slice filter:",t),i=e}if(Array.isArray(i)){const e=i.slice(r,n);return 1===e.length?e[0].toString():JSON.stringify(e)}return e.slice(r,n)},split:(e,t)=>{if(!t)return console.error("Split filter requires a separator parameter"),JSON.stringify([e]);const r=1===(t=t.replace(/^["']|["']$/g,"")).length?t:new RegExp(t),n=e.split(r);return JSON.stringify(n)},join:(e,t)=>{let r;try{r=JSON.parse(e)}catch(t){return console.error("Error parsing JSON in join filter:",t),e}return Array.isArray(r)?r.join(t||","):e},date:(e,t)=>{const r=i()(e);return r.isValid()?t?r.format(t):r.format():(console.error("Invalid date for date filter:",e),e)},trim:e=>e.trim(),first:e=>{try{const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0)return t[0].toString()}catch(e){console.error("Error parsing JSON in first filter:",e)}return e},last:e=>{try{const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0)return t[t.length-1].toString()}catch(e){console.error("Error parsing JSON in last filter:",e)}return e},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),lower:e=>e.toLowerCase(),title:e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),upper:e=>e.toUpperCase(),blockquote:e=>e.split("\n").map((e=>`> ${e}`)).join("\n"),callout:(e,t)=>{let r="info",n="",i=null;if(t){const e=(t=t.replace(/^\((.*)\)$/,"$1")).split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map((e=>e.trim().replace(/^"|"$/g,"")));e.length>0&&(r=e[0]||r),e.length>1&&(n=e[1]||n),e.length>2&&("true"===e[2]?i="-":"false"===e[2]&&(i="+"))}let a=`> [!${r}]`;return i&&(a+=i),n&&(a+=` ${n}`),`${a}\n${e.split("\n").map((e=>`> ${e}`)).join("\n")}`},object:(e,t)=>{try{const r=JSON.parse(e);if("object"==typeof r&&null!==r)switch(t){case"array":return JSON.stringify(Object.entries(r));case"keys":return JSON.stringify(Object.keys(r));case"values":return JSON.stringify(Object.values(r));default:return e}}catch(e){console.error("Error parsing JSON for object filter:",e)}return e},table:e=>{try{const t=JSON.parse(e);if(!Array.isArray(t)||0===t.length)return e;const r=e=>e.replace(/\|/g,"\\|");if("object"==typeof t[0]&&null!==t[0]){const e=Object.keys(t[0]);let n=`| ${e.join(" | ")} |\n| ${e.map((()=>"-")).join(" | ")} |\n`;return t.forEach((t=>{n+=`| ${e.map((e=>r(String(t[e]||"")))).join(" | ")} |\n`})),n.trim()}if(Array.isArray(t[0])){const e=Math.max(...t.map((e=>e.length)));let n=`| ${Array(e).fill("").join(" | ")} |\n| ${Array(e).fill("-").join(" | ")} |\n`;return t.forEach((t=>{const i=[...t,...Array(e-t.length).fill("")];n+=`| ${i.map((e=>r(String(e)))).join(" | ")} |\n`})),n.trim()}let n="| Value |\n| - |\n";return t.forEach((e=>{n+=`| ${r(String(e))} |\n`})),n.trim()}catch(t){return console.error("Error parsing JSON for table filter:",t),e}},markdown:(e,t)=>{const r=t||"about:blank";try{return z(e,r,"",!0)}catch(t){return console.error("Error in createMarkdownContent:",t),e}}};function Z(e,t,r){let n="string"==typeof e?e:JSON.stringify(e);return t.reduce(((e,t)=>{const n=t.match(/(\w+)(?::(.+)|"(.+)")?/);if(n){const[,t,i,a]=n,s=i||a?(i||a).replace(/^["']|["']$/g,""):void 0,o=K[t];if(o)return o(e,"markdown"===t?r:s)}else console.error(`Invalid filter format: ${t}`);return e}),n)}var Q=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};function ee(e,t,r){return Q(this,void 0,void 0,(function*(){const[,n]=e.match(/{{(.*?)}}/)||[],[i,...a]=n.split("|"),s=a.join("|");return Z(t[`{{${i}}}`]||"",s.split("|").filter(Boolean),r)}))}function te(e,t,r){return Q(this,void 0,void 0,(function*(){const n=t.match(/{{selector:(.*?)(?:\|(.*?))?}}/);if(!n)return console.error("Invalid selector format:",t),t;const[,i,s]=n,{content:o}=yield function(e,t){return Q(this,void 0,void 0,(function*(){const r=t.match(/:([a-zA-Z-]+)$/);let n,i=t;r&&(n=r[1],i=t.slice(0,-n.length-1));try{const t=yield a.tabs.sendMessage(e,{action:"extractContent",selector:i,attribute:n});let r=t?t.content:"";return Array.isArray(r)&&(r=JSON.stringify(r)),{content:r,schemaOrgData:t?t.schemaOrgData:null}}catch(e){return console.error("Error extracting content by selector:",e),{content:"",schemaOrgData:null}}}))}(e,i),l=Array.isArray(o)?JSON.stringify(o):o;return s?Z(l,s.split("|").map((e=>e.trim())),r):l}))}function re(e,t,r){return Q(this,void 0,void 0,(function*(){const[,n]=e.match(/{{schema:(.*?)}}/)||[],[i,...a]=n.split("|"),s=a.join("|");let o="";const l=i.match(/(.*?)\[(\*|\d+)\](.*)/);if(l){const[,e,r,n]=l,i=JSON.parse(t[`{{schema:${e}}}`]||"[]");if(Array.isArray(i))if("*"===r)o=JSON.stringify(i.map((e=>ne(e,n.slice(1)))).filter(Boolean));else{const e=parseInt(r,10);o=i[e]?ne(i[e],n.slice(1)):""}}else o=t[`{{schema:${i}}}`]||"";return Z(o,s.split("|").filter(Boolean),r)}))}function ne(e,t){return t.split(".").reduce(((e,t)=>e&&e[t]),e)}function ie(e,t,r,n){return Q(this,void 0,void 0,(function*(){const i=t.match(/{{(?:schema:)?(?:selector:)?(.*?)}}/g);if(i)for(const a of i){let i;i=a.startsWith("{{selector:")?yield te(e,a,n):a.startsWith("{{schema:")?yield re(a,r,n):yield ee(a,r,n),t=t.replace(a,i)}return t}))}function ae(e){return Q(this,void 0,void 0,(function*(){try{const t=yield a.tabs.sendMessage(e,{action:"getPageContent"});return t&&t.content?{content:t.content,selectedHtml:t.selectedHtml,extractedContent:t.extractedContent,schemaOrgData:t.schemaOrgData,fullHtml:t.fullHtml}:null}catch(e){return console.error("Error extracting page content:",e),null}}))}function se(e,t,r){var n,i;const a=`meta[${t}]`,s=Array.from(e.querySelectorAll(a)).find((e=>{var n;return(null===(n=e.getAttribute(t))||void 0===n?void 0:n.toLowerCase())===r.toLowerCase()}));return s&&null!==(i=null===(n=s.getAttribute("content"))||void 0===n?void 0:n.trim())&&void 0!==i?i:""}function oe(e,t,r,n,i,a){return Q(this,void 0,void 0,(function*(){var o,l;const c=function(e){const t=(new DOMParser).parseFromString(e,"text/html");return new X.Readability(t).parse()}(e);if(!c)return console.error("Failed to parse content with Readability"),null;const u=(new DOMParser).parseFromString(e,"text/html"),d=se(u,"property","og:title")||se(u,"name","twitter:title")||se(u,"name","title")||(null===(l=null===(o=u.querySelector("title"))||void 0===o?void 0:o.textContent)||void 0===l?void 0:l.trim())||"",g=s(d),h=se(u,"name","author")||se(u,"property","author")||se(u,"name","twitter:creator")||se(u,"property","og:site_name")||se(u,"name","application-name")||se(u,"name","copyright")||"",m=se(u,"name","description")||se(u,"property","description")||se(u,"property","og:description")||se(u,"name","twitter:description")||"",f=new URL(n).hostname.replace(/^www\./,""),p=se(u,"property","og:image")||se(u,"name","twitter:image")||"",A=u.querySelector("time"),y=se(u,"property","article:published_time")||(null==A?void 0:A.getAttribute("datetime")),v=y?`${le(new Date(y))}`:"",b=se(u,"property","og:site_name")||se(u,"name","application-name")||se(u,"name","copyright")||"",_={"{{author}}":h,"{{content}}":z(e,n,t),"{{date}}":le(new Date),"{{description}}":m,"{{domain}}":f,"{{fullHtml}}":a,"{{image}}":p,"{{noteName}}":g,"{{published}}":v,"{{site}}":b,"{{title}}":d,"{{url}}":n};return Object.entries(r).forEach((([e,t])=>{_[`{{${e}}}`]=t})),u.querySelectorAll("meta").forEach((e=>{const t=e.getAttribute("name"),r=e.getAttribute("property"),n=e.getAttribute("content");t&&n&&(_[`{{meta:name:${t}}}`]=n),r&&n&&(_[`{{meta:property:${r}}}`]=n)})),i&&ce(i,_),console.log("Available variables:",_),{noteName:g,currentVariables:_}}))}function le(e){return i()(e).format("YYYY-MM-DD")}function ce(e,t,r=""){Array.isArray(e)?(t[`{{schema:${r}}}`]=JSON.stringify(e),1===e.length?ce(e[0],t,r):e.forEach(((e,n)=>{ce(e,t,`${r}[${n}]`)}))):"object"==typeof e&&null!==e&&Object.entries(e).forEach((([e,n])=>{"string"==typeof n||"number"==typeof n||"boolean"==typeof n?t[`{{schema:${r}${e}}}`]=String(n):Array.isArray(n)?ce(n,t,`${r}${e}`):"object"==typeof n&&null!==n&&ce(n,t,`${r}${e}.`)}))}const ue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},de=(e,t,r=[])=>{const n=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach((e=>{n.setAttribute(e,String(t[e]))})),r.length&&r.forEach((e=>{const t=de(...e);n.appendChild(t)})),n},ge=e=>"string"==typeof e?e:e&&e.class?e.class&&"string"==typeof e.class?e.class.split(" "):e.class&&Array.isArray(e.class)?e.class:"":"",he=(e,{nameAttr:t,icons:r,attrs:n})=>{const i=e.getAttribute(t);if(null==i)return;const a=r[i.replace(/(\w)(\w*)(_|-|\s*)/g,((e,t,r)=>t.toUpperCase()+r.toLowerCase()))];if(!a)return console.warn(`${e.outerHTML} icon name was not found in the provided icons object.`);const s=(e=>Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}))(e),[o,l,c]=a,u={...l,"data-lucide":i,...n,...s},d=["lucide",`lucide-${i}`,s,n].flatMap(ge).map((e=>e.trim())).filter(Boolean).filter(((e,t,r)=>r.indexOf(e)===t)).join(" ");d&&Object.assign(u,{class:d});const g=(([e,t,r])=>de(e,t,r))([o,u,c]);return e.parentNode?.replaceChild(g,e)},me={Trash2:["svg",ue,[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]]],AlignLeft:["svg",ue,[["line",{x1:"21",x2:"3",y1:"6",y2:"6"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18"}]]],Binary:["svg",ue,[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2"}],["path",{d:"M6 20h4"}],["path",{d:"M14 10h4"}],["path",{d:"M6 14h2v6"}],["path",{d:"M14 4h2v6"}]]],List:["svg",ue,[["line",{x1:"8",x2:"21",y1:"6",y2:"6"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18"}]]],Calendar:["svg",ue,[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]]],Clock:["svg",ue,[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]]],Ellipsis:["svg",ue,[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]]],SquareCheckBig:["svg",ue,[["path",{d:"m9 11 3 3L22 4"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}]]],GripVertical:["svg",ue,[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]]],Settings:["svg",ue,[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]]],X:["svg",ue,[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]]],ChevronRight:["svg",ue,[["path",{d:"m9 18 6-6-6-6"}]]],ChevronDown:["svg",ue,[["path",{d:"m6 9 6 6 6-6"}]]]};function fe(e=document){(({icons:e={},nameAttr:t="data-lucide",attrs:r={}}={})=>{if(!Object.values(e).length)throw new Error("Please provide an icons object.\nIf you want to use all the icons you can import it like:\n `import { createIcons, icons } from 'lucide';\nlucide.createIcons({icons});`");if("undefined"==typeof document)throw new Error("`createIcons()` only works in a browser environment.");const n=document.querySelectorAll(`[${t}]`);if(Array.from(n).forEach((n=>he(n,{nameAttr:t,icons:e,attrs:r}))),"data-lucide"===t){const t=document.querySelectorAll("[icon-name]");t.length>0&&(console.warn("[Lucide] Some icons were found with the now deprecated icon-name attribute. These will still be replaced for backwards compatibility, but will no longer be supported in v1.0 and you should switch to data-lucide"),Array.from(t).forEach((t=>he(t,{nameAttr:"icon-name",icons:e,attrs:r}))))}})({icons:me,attrs:{"stroke-width":1.75,class:"lucide-icon"},nameAttr:"data-lucide"})}var pe=r(992);function Ae(e,t,r){if(e.startsWith("schema:"))return function(e,t){const[,r,n]=e.match(/schema:(.+?)(?:=(.+))?$/)||[];if(!r)return!1;const i=ye(t,r);return n?Array.isArray(i)?i.includes(n):i===n:!!i}(e,r);if(!e.startsWith("/")||!e.endsWith("/"))return t.startsWith(e);try{return new RegExp(e.slice(1,-1)).test(t)}catch(t){return console.error(`Invalid regex pattern: ${e}`,t),!1}}function ye(e,t){if(Array.isArray(e)){for(const r of e){const e=ye(r,t);if(void 0!==e)return e}return}const r=t.split(".");let n=e;for(const e of r){if(!n||"object"!=typeof n||!(e in n))return;n=n[e]}return n}let ve={showMoreActionsButton:!0,vaults:[]};function be(e,t){return a.storage.local.set({[e]:t})}function _e(e){return a.storage.local.get(e).then((t=>t[e]))}function Ne(e){return e.replace(/\\"/g,'"').replace(/\\n/g,"\n")}function Ee(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var xe=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};let Te=[];const Se="template_",Ce="template_list",we=8e3,Le=6e3;function Oe(e){return xe(this,void 0,void 0,(function*(){const t=(yield a.storage.sync.get(Se+e))[Se+e];if(t){const e=(0,pe.decompressFromUTF16)(t.join(""));return JSON.parse(e)}return null}))}function ke(e){return xe(this,void 0,void 0,(function*(){const t=(0,pe.compressToUTF16)(JSON.stringify(e)),r=[];for(let e=0;e<t.length;e+=we)r.push(t.slice(e,e+we));return t.length>Le?[r,`Warning: Template "${e.name}" is ${(t.length/1024).toFixed(2)}KB, which is approaching the storage limit.`]:[r,null]}))}function De(){return{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"Default",behavior:"create",noteNameFormat:"{{title}}",path:"Clippings",noteContentFormat:"{{content}}",properties:[{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"title",value:"{{title}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"source",value:"{{url}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"author",value:"{{author|wikilink}}",type:"multitext"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"published",value:"{{published}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"created",value:"{{date}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"description",value:"{{description}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"tags",value:"clippings",type:"multitext"}],triggers:[]}}var $e=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};let Me,Ie=null,Re=[],Pe={};function Be(e){const t=document.querySelector(".error-message"),r=document.querySelector(".clipper");if(t&&r){t.textContent=e,t.style.display="flex",r.style.display="none";const n=document.getElementById("open-settings");n&&(n.style.display="flex")}}function He(e,t){console.error(e,t),Be(e)}function je(){return $e(this,void 0,void 0,(function*(){if(!Ie)return;const e=document.getElementById("vault-select"),t=document.getElementById("note-content-field"),r=document.getElementById("note-name-field"),n=document.getElementById("path-name-field");if(!(e&&t&&r&&n))return void Be("Some required fields are missing. Please try reloading the extension.");const s=Ie.vault||e.value,o=t.value,l=r.value,c=n.value,u=Array.from(document.querySelectorAll(".metadata-property input")).map((e=>({name:e.id,value:e.value,type:e.getAttribute("data-type")||"text"})));let d;if("create"===Ie.behavior){const e=yield function(e){return t=this,r=void 0,i=function*(){let t="---\n";for(const r of e)switch(t+=`${r.name}:`,r.type){case"multitext":let e;if(r.value.trim().startsWith('["')&&r.value.trim().endsWith('"]'))try{e=JSON.parse(r.value)}catch(t){e=r.value.split(",").map((e=>e.trim()))}else e=r.value.split(/,(?![^\[]*\]\])/).map((e=>e.trim()));e=e.filter((e=>""!==e)),e.length>0?(t+="\n",e.forEach((e=>{t+=`  - "${e}"\n`}))):t+="\n";break;case"number":const n=r.value.replace(/[^\d.-]/g,"");t+=n?` ${parseFloat(n)}\n`:"\n";break;case"checkbox":t+=` ${"true"===r.value.toLowerCase()||"1"===r.value}\n`;break;case"date":case"datetime":""!==r.value.trim()?t+=` "${r.value}"\n`:t+="\n";break;default:t+=""!==r.value.trim()?` "${r.value}"\n`:"\n"}return t+="---\n",t},new((n=void 0)||(n=Promise))((function(e,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,o)}l((i=i.apply(t,r||[])).next())}));var t,r,n,i}(u);d=e+o}else d=o;try{yield function(e,t,r,n,s,o,l){let c,u=e;if(r&&!r.endsWith("/")&&(r+="/"),"append-specific"===s||"append-daily"===s){let e;e="append-specific"===s?o:i()().format(l),c=`obsidian://new?file=${encodeURIComponent(r+e)}&append=true`,u="\n\n"+u}else c=`obsidian://new?file=${encodeURIComponent(r+t)}`;c+=`&content=${encodeURIComponent(u)}`;const d=n?`&vault=${encodeURIComponent(n)}`:"";c+=d,a.tabs.query({active:!0,currentWindow:!0}).then((e=>{const t=e[0];t&&t.id&&a.tabs.update(t.id,{url:c})}))}(d,l,c,s,Ie.behavior,Ie.specificNoteName,Ie.dailyNoteFormat),setTimeout((()=>window.close()),50)}catch(e){throw console.error("Error in handleClip:",e),Be("Failed to save to Obsidian. Please try again."),e}}))}a.runtime.onMessage.addListener(((e,t,r)=>{if("triggerQuickClip"===e.action)return je().then((()=>{r({success:!0})})).catch((e=>{console.error("Error in handleClip:",e),r({success:!1,error:e.message})})),!0})),document.addEventListener("DOMContentLoaded",(function(){return $e(this,void 0,void 0,(function*(){try{yield function(){return $e(this,void 0,void 0,(function*(){var e;const t=yield a.tabs.query({active:!0,currentWindow:!0});if(null===(e=t[0])||void 0===e?void 0:e.id)try{yield a.runtime.sendMessage({action:"ensureContentScriptLoaded",tabId:t[0].id})}catch(e){throw console.error("Error ensuring content script is loaded:",e),e}}))}(),fe(),Me=yield function(){return e=this,t=void 0,n=function*(){var e,t;const r=yield a.storage.sync.get(["general_settings","vaults"]);return ve={showMoreActionsButton:null===(t=null===(e=r.general_settings)||void 0===e?void 0:e.showMoreActionsButton)||void 0===t||t,vaults:r.vaults||[]},ve},new((r=void 0)||(r=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}(),console.log("General settings:",Me),yield function(){return xe(this,void 0,void 0,(function*(){const e=(yield a.storage.sync.get(Ce))[Ce]||[],t=yield Promise.all(e.map(Oe));if(Te=t.filter((e=>null!==e)),0===Te.length){const e=De();Te.push(e),yield function(){return xe(this,void 0,void 0,(function*(){const e=Te.map((e=>e.id)),t=[],r={};for(const e of Te){const[n,i]=yield ke(e);r[Se+e.id]=n,i&&t.push(i)}try{return yield a.storage.sync.set(Object.assign(Object.assign({},r),{[Ce]:e})),console.log("Template settings saved"),t}catch(e){throw console.error("Error saving templates:",e),e}}))}()}return Te}))}();const e=document.getElementById("vault-container"),t=document.getElementById("vault-select"),r=document.getElementById("template-container"),n=document.getElementById("template-select");function o(r){t.innerHTML="",r.forEach((e=>{const r=document.createElement("option");r.value=e,r.textContent=e,t.appendChild(r)})),r.length>0?(e.style.display="block",t.value=r[0]):e.style.display="none"}function l(){const e=document.querySelector(".metadata-properties-header"),t=document.querySelector(".metadata-properties");e&&t&&(e.addEventListener("click",(()=>{const r=t.classList.toggle("collapsed");e.classList.toggle("collapsed"),be("propertiesCollapsed",r)})),_e("propertiesCollapsed").then((r=>{r?(t.classList.add("collapsed"),e.classList.add("collapsed")):(t.classList.remove("collapsed"),e.classList.remove("collapsed"))})))}o(Me.vaults),a.storage.sync.get(["template_list"]).then((e=>$e(this,void 0,void 0,(function*(){const t=e.template_list||[],i=yield Promise.all(t.map((e=>$e(this,void 0,void 0,(function*(){try{const t=(yield a.storage.sync.get(`template_${e}`))[`template_${e}`];if(t){const e=(0,pe.decompressFromUTF16)(t.join("")),r=JSON.parse(e);if(r&&Array.isArray(r.properties))return r}}catch(t){console.error(`Error parsing template ${e}:`,t)}return null})))));Re=i.filter((e=>null!==e)),0===Re.length?(Ie=De(),Re=[Ie]):Ie=Re[0],n.innerHTML="",Re.forEach((e=>{const t=document.createElement("option");t.value=e.name,t.textContent=e.name,n.appendChild(t)}));const s=(yield a.tabs.query({active:!0,currentWindow:!0}))[0];if(!s.url||s.url.startsWith("chrome-extension://")||s.url.startsWith("chrome://")||s.url.startsWith("about:")||s.url.startsWith("file://"))return void Be("This page cannot be clipped.");const o=s.url;if(s.id)try{const e=yield ae(s.id);if(e){const t=yield oe(e.content,e.selectedHtml,e.extractedContent,o,e.schemaOrgData,e.fullHtml);t?(Ie=function(e,t,r){return t.find((t=>t.triggers&&t.triggers.some((t=>Ae(t,e,r)))))}(o,Re,e.schemaOrgData)||Re[0],Ie&&(n.value=Ie.name),yield g(Ie,t.currentVariables,t.noteName,e.schemaOrgData)):Be("Unable to initialize page content.")}else Be("Unable to get page content. Try reloading the page.")}catch(e){console.error("Error in popup initialization:",e),e instanceof Error?Be(`An error occurred: ${e.message}`):Be("An unexpected error occurred")}Re.length>1?r.style.display="block":r.classList.add("hidden")})))),n.addEventListener("change",(function(){return $e(this,void 0,void 0,(function*(){if(Ie=Re.find((e=>e.name===this.value))||null,Ie){const e=(yield a.tabs.query({active:!0,currentWindow:!0}))[0];if(null==e?void 0:e.id)try{const t=yield ae(e.id);if(t){const r=yield oe(t.content,t.selectedHtml,t.extractedContent,e.url,t.schemaOrgData,t.fullHtml);r?yield g(Ie,r.currentVariables,r.noteName,t.schemaOrgData):He("Unable to initialize page content.")}else He("Unable to retrieve page content. Try reloading the page.")}catch(e){He("Error initializing template fields:",e)}else He("No active tab found")}else He("Selected template not found")}))}));const c=document.getElementById("note-name-field");function u(e){e.style.minHeight="2rem",e.style.minHeight=e.scrollHeight+"px"}function d(){c.value=s(c.value),u(c)}function g(e,t,r,n){return $e(this,void 0,void 0,(function*(){if(!e)return void He("No template selected");Pe=t;const r=document.querySelector(".metadata-properties");r.innerHTML="";const o=(yield a.tabs.query({active:!0,currentWindow:!0}))[0],d=null==o?void 0:o.id,g=(null==o?void 0:o.url)||"";if(!d)return void He("No active tab found");if(!Array.isArray(e.properties))return void He("Template properties are not an array");for(const n of e.properties){const e=document.createElement("div");e.className="metadata-property";let a=yield ie(d,Ne(n.value),t,g);switch(n.type){case"number":const e=a.replace(/[^\d.-]/g,"");a=e?parseFloat(e).toString():a;break;case"checkbox":a=("true"===a.toLowerCase()||"1"===a).toString();break;case"date":a=i()(a).isValid()?i()(a).format("YYYY-MM-DD"):a;break;case"datetime":a=i()(a).isValid()?i()(a).format("YYYY-MM-DD HH:mm:ss"):a}e.innerHTML=`\n\t\t\t\t\t<span class="metadata-property-icon"><i data-lucide="${m=n.type,{text:"align-left",multitext:"list",number:"binary",checkbox:"square-check-big",date:"calendar",datetime:"clock"}[m]||"align-left"}"></i></span>\n\t\t\t\t\t<label for="${n.name}">${n.name}</label>\n\t\t\t\t\t<input id="${n.name}" type="text" value="${h=a,h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}" data-type="${n.type}" />\n\t\t\t\t`,r.appendChild(e)}var h,m;if(c){let r=yield ie(d,e.noteNameFormat,t,g);c.value=s(r),u(c)}const f=document.getElementById("path-name-field");f&&(f.value=e.path);const p=document.getElementById("note-content-field");if(p)if(e.noteContentFormat){let r=yield ie(d,e.noteContentFormat,t,g);p.value=r}else p.value="";if(Object.keys(t).length>0)if(e.triggers&&e.triggers.length>0){const t=e.triggers.find((e=>Ae(e,g,n)));t&&console.log(`Matched template trigger: ${t}`)}else console.log("No template triggers defined for this template");fe(),l();const A=document.getElementById("vault-select");A&&(e.vault?A.value=e.vault:_e("lastSelectedVault").then((e=>{e&&Me.vaults.includes(e)?A.value=e:Me.vaults.length>0&&(A.value=Me.vaults[0])})),A.addEventListener("change",(()=>{be("lastSelectedVault",A.value)})))}))}function h(){const e=document.getElementById("clip-button");e&&(e.addEventListener("click",je),e.focus());const t=document.getElementById("open-settings");t&&t.addEventListener("click",(function(){a.runtime.openOptionsPage()}));const r=document.getElementById("show-variables");r&&(r.style.display=Me.showMoreActionsButton?"flex":"none",r.addEventListener("click",(function(){if(Ie&&Object.keys(Pe).length>0){const t=(e=Pe,Object.entries(e).map((([e,t])=>{const r=e.replace(/^{{|}}$/g,"").replace(/^(schema:.+?\])(.+)/,"$1.$2");return`\n\t\t\t\t<div class="variable-item is-collapsed">\n\t\t\t\t\t<span class="variable-key" data-variable="${Ee(e)}">${Ee(r)}</span>\n\t\t\t\t\t<span class="variable-value">${Ee(t)}</span>\n\t\t\t\t\t<span class="chevron-icon" aria-label="Expand">\n\t\t\t\t\t\t<i data-lucide="chevron-right"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`})).join(""));m.innerHTML=`\n\t\t\t\t\t\t\t<div class="variables-header">\n\t\t\t\t\t\t\t\t<h3>Page variables</h3>\n\t\t\t\t\t\t\t\t<span class="close-panel clickable-icon" aria-label="Close">\n\t\t\t\t\t\t\t\t\t<i data-lucide="x"></i>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="variable-list">${t}</div>\n\t\t\t\t\t\t`,m.classList.add("show"),fe(),m.querySelectorAll(".variable-item").forEach((e=>{const t=e.querySelector(".variable-key"),r=e.querySelector(".chevron-icon"),n=e.querySelector(".variable-value");n.scrollWidth>n.clientWidth&&e.classList.add("has-overflow"),t.addEventListener("click",(function(){const e=this.getAttribute("data-variable");e&&navigator.clipboard.writeText(e).then((()=>{const e=this.textContent;this.textContent="Copied!",setTimeout((()=>{this.textContent=e}),1e3)})).catch((e=>{console.error("Failed to copy text: ",e)}))})),r.addEventListener("click",(function(){e.classList.toggle("is-collapsed");const t=this.querySelector("i");t&&(t.setAttribute("data-lucide",e.classList.contains("is-collapsed")?"chevron-right":"chevron-down"),fe())}))})),m.querySelector(".close-panel").addEventListener("click",(function(){m.classList.remove("show")}))}else console.log("No variables available to display");var e})))}c.addEventListener("input",d),c.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||e.preventDefault()})),u(c),h();const m=document.createElement("div");m.className="variables-panel",document.body.appendChild(m)}catch(f){console.error("Error initializing popup:",f),Be("Failed to initialize the extension. Please try reloading the page.")}}))}));
//# sourceMappingURL=popup.js.map