/*! For license information please see settings.js.LICENSE.txt */
var e={992:(e,t,n)=>{var r,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var n=a._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":a._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var s=t.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return a.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var s=[];return n.forEach((function(t){s.push(e(t))})),a.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return a._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,a,s={},i={},l="",c="",d="",m=2,g=3,u=2,p=[],f=0,v=0;for(a=0;a<e.length;a+=1)if(l=e.charAt(a),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=g++,i[l]=!0),c=d+l,Object.prototype.hasOwnProperty.call(s,c))d=c;else{if(Object.prototype.hasOwnProperty.call(i,d)){if(d.charCodeAt(0)<256){for(r=0;r<u;r++)f<<=1,v==t-1?(v=0,p.push(n(f)),f=0):v++;for(o=d.charCodeAt(0),r=0;r<8;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1}else{for(o=1,r=0;r<u;r++)f=f<<1|o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o=0;for(o=d.charCodeAt(0),r=0;r<16;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1}0==--m&&(m=Math.pow(2,u),u++),delete i[d]}else for(o=s[d],r=0;r<u;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1;0==--m&&(m=Math.pow(2,u),u++),s[c]=g++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(i,d)){if(d.charCodeAt(0)<256){for(r=0;r<u;r++)f<<=1,v==t-1?(v=0,p.push(n(f)),f=0):v++;for(o=d.charCodeAt(0),r=0;r<8;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1}else{for(o=1,r=0;r<u;r++)f=f<<1|o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o=0;for(o=d.charCodeAt(0),r=0;r<16;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1}0==--m&&(m=Math.pow(2,u),u++),delete i[d]}else for(o=s[d],r=0;r<u;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1;0==--m&&(m=Math.pow(2,u),u++)}for(o=2,r=0;r<u;r++)f=f<<1|1&o,v==t-1?(v=0,p.push(n(f)),f=0):v++,o>>=1;for(;;){if(f<<=1,v==t-1){p.push(n(f));break}v++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,a,s,i,l,c,d,m=[],g=4,u=4,p=3,f="",v=[],h={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)m[o]=o;for(s=0,l=Math.pow(2,2),c=1;c!=l;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),s|=(i>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),s|=(i>0?1:0)*c,c<<=1;d=e(s);break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),s|=(i>0?1:0)*c,c<<=1;d=e(s);break;case 2:return""}for(m[3]=d,a=d,v.push(d);;){if(h.index>t)return"";for(s=0,l=Math.pow(2,p),c=1;c!=l;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),s|=(i>0?1:0)*c,c<<=1;switch(d=s){case 0:for(s=0,l=Math.pow(2,8),c=1;c!=l;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),s|=(i>0?1:0)*c,c<<=1;m[u++]=e(s),d=u-1,g--;break;case 1:for(s=0,l=Math.pow(2,16),c=1;c!=l;)i=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=r(h.index++)),s|=(i>0?1:0)*c,c<<=1;m[u++]=e(s),d=u-1,g--;break;case 2:return v.join("")}if(0==g&&(g=Math.pow(2,p),p++),m[d])f=m[d];else{if(d!==u)return null;f=a+a.charAt(0)}v.push(f),m[u++]=a+f.charAt(0),a=f,0==--g&&(g=Math.pow(2,p),p++)}}};return a}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)},815:function(e,t){var n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=function(e){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},a=e=>1==e?"argument":"arguments",s=(e,t,n)=>new Proxy(t,{apply:(t,r,o)=>n.call(r,e,...o)});let i=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},n={})=>{let r=Object.create(null),c={has:(t,n)=>n in e||n in r,get(c,d,m){if(d in r)return r[d];if(!(d in e))return;let g=e[d];if("function"==typeof g)if("function"==typeof t[d])g=s(e,e[d],t[d]);else if(i(n,d)){let t=((e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((a,s)=>{if(t.fallbackToNoCallback)try{n[e](...r,o({resolve:a,reject:s},t))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(n[e](...r),a()):n[e](...r,o({resolve:a,reject:s},t))}))})(d,n[d]);g=s(e,e[d],t)}else g=g.bind(e);else if("object"==typeof g&&null!==g&&(i(t,d)||i(n,d)))g=l(g,t[d],n[d]);else{if(!i(n,"*"))return Object.defineProperty(r,d,{configurable:!0,enumerable:!0,get:()=>e[d],set(t){e[d]=t}}),g;g=l(g,t[d],n["*"])}return r[d]=g,g},set:(t,n,o,a)=>(n in r?r[n]=o:e[n]=o,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},d=Object.create(e);return new Proxy(d,c)},c=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),d=new r((e=>"function"!=typeof e?e:function(t){const n=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)})),m=new r((e=>"function"!=typeof e?e:function(t,n,r){let o,a,s=!1,i=new Promise((e=>{o=function(t){s=!0,e(t)}}));try{a=e(t,n,o)}catch(e){a=Promise.reject(e)}const l=!0!==a&&((c=a)&&"object"==typeof c&&"function"==typeof c.then);var c;if(!0!==a&&!l&&!s)return!1;return(l?a:i).then((e=>{r(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),g=({reject:n,resolve:r},o)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(new Error(e.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?n(new Error(o.message)):r(o)},u=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,t)=>{const o=g.bind(null,{resolve:e,reject:t});r.push(o),n.sendMessage(...r)}))},p={devtools:{network:{onRequestFinished:c(d)}},runtime:{onMessage:c(m),onMessageExternal:c(m),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},f={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":f},services:{"*":f},websites:{"*":f}},l(e,p,n)};e.exports=n(chrome)}else e.exports=globalThis.browser},void 0===(r=n.apply(t,[e]))||(e.exports=r)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}var r=n(992);const o=n(815);var a=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))};let s=[],i=-1;const l="template_",c="template_list",d=8e3,m=6e3;function g(e){i=e}function u(e){return a(this,void 0,void 0,(function*(){const t=(yield o.storage.sync.get(l+e))[l+e];if(t){const e=(0,r.decompressFromUTF16)(t.join(""));return JSON.parse(e)}return null}))}function p(){return a(this,void 0,void 0,(function*(){const e=s.map((e=>e.id)),t=[],n={};for(const e of s){const[r,o]=yield f(e);n[l+e.id]=r,o&&t.push(o)}try{return yield o.storage.sync.set(Object.assign(Object.assign({},n),{[c]:e})),console.log("Template settings saved"),t}catch(e){throw console.error("Error saving templates:",e),e}}))}function f(e){return a(this,void 0,void 0,(function*(){const t=(0,r.compressToUTF16)(JSON.stringify(e)),n=[];for(let e=0;e<t.length;e+=d)n.push(t.slice(e,e+d));return t.length>m?[n,`Warning: Template "${e.name}" is ${(t.length/1024).toFixed(2)}KB, which is approaching the storage limit.`]:[n,null]}))}function v(){return{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"Default",behavior:"create",noteNameFormat:"{{title}}",path:"Clippings",noteContentFormat:"{{content}}",properties:[{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"title",value:"{{title}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"source",value:"{{url}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"author",value:"{{author|wikilink}}",type:"multitext"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"published",value:"{{published}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"created",value:"{{date}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"description",value:"{{description}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"tags",value:"clippings",type:"multitext"}],triggers:[]}}function h(){return i}function A(){return s}const y={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},x=(e,t,n=[])=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach((e=>{r.setAttribute(e,String(t[e]))})),n.length&&n.forEach((e=>{const t=x(...e);r.appendChild(t)})),r},b=e=>"string"==typeof e?e:e&&e.class?e.class&&"string"==typeof e.class?e.class.split(" "):e.class&&Array.isArray(e.class)?e.class:"":"",w=(e,{nameAttr:t,icons:n,attrs:r})=>{const o=e.getAttribute(t);if(null==o)return;const a=n[o.replace(/(\w)(\w*)(_|-|\s*)/g,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))];if(!a)return console.warn(`${e.outerHTML} icon name was not found in the provided icons object.`);const s=(e=>Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}))(e),[i,l,c]=a,d={...l,"data-lucide":o,...r,...s},m=["lucide",`lucide-${o}`,s,r].flatMap(b).map((e=>e.trim())).filter(Boolean).filter(((e,t,n)=>n.indexOf(e)===t)).join(" ");m&&Object.assign(d,{class:m});const g=(([e,t,n])=>x(e,t,n))([i,d,c]);return e.parentNode?.replaceChild(g,e)},E=({icons:e={},nameAttr:t="data-lucide",attrs:n={}}={})=>{if(!Object.values(e).length)throw new Error("Please provide an icons object.\nIf you want to use all the icons you can import it like:\n `import { createIcons, icons } from 'lucide';\nlucide.createIcons({icons});`");if("undefined"==typeof document)throw new Error("`createIcons()` only works in a browser environment.");const r=document.querySelectorAll(`[${t}]`);if(Array.from(r).forEach((r=>w(r,{nameAttr:t,icons:e,attrs:n}))),"data-lucide"===t){const t=document.querySelectorAll("[icon-name]");t.length>0&&(console.warn("[Lucide] Some icons were found with the now deprecated icon-name attribute. These will still be replaced for backwards compatibility, but will no longer be supported in v1.0 and you should switch to data-lucide"),Array.from(t).forEach((t=>w(t,{nameAttr:"icon-name",icons:e,attrs:n}))))}},k={Trash2:["svg",y,[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]]],AlignLeft:["svg",y,[["line",{x1:"21",x2:"3",y1:"6",y2:"6"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18"}]]],Binary:["svg",y,[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2"}],["path",{d:"M6 20h4"}],["path",{d:"M14 10h4"}],["path",{d:"M6 14h2v6"}],["path",{d:"M14 4h2v6"}]]],List:["svg",y,[["line",{x1:"8",x2:"21",y1:"6",y2:"6"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18"}]]],Calendar:["svg",y,[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]]],Clock:["svg",y,[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]]],Ellipsis:["svg",y,[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]]],SquareCheckBig:["svg",y,[["path",{d:"m9 11 3 3L22 4"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}]]],GripVertical:["svg",y,[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]]],Settings:["svg",y,[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]]],X:["svg",y,[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]]],ChevronRight:["svg",y,[["path",{d:"m9 18 6-6-6-6"}]]],ChevronDown:["svg",y,[["path",{d:"m6 9 6 6 6-6"}]]]};function L(e=document){E({icons:k,attrs:{"stroke-width":1.75,class:"lucide-icon"},nameAttr:"data-lucide"})}function B(e){return{text:"align-left",multitext:"list",number:"binary",checkbox:"square-check-big",date:"calendar",datetime:"clock"}[e]||"align-left"}var S=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))};let T={showMoreActionsButton:!0,vaults:[],betaFeatures:!1};function I(e){return S(this,void 0,void 0,(function*(){T=Object.assign(Object.assign({},T),e),yield o.storage.sync.set({general_settings:{showMoreActionsButton:T.showMoreActionsButton,betaFeatures:T.betaFeatures},vaults:T.vaults})}))}function C(e,t){let n=`${window.location.pathname}?section=${e}`;t&&(n+=`&template=${t}`),window.history.pushState({},"",n)}function M(e,t){t.checked?e.classList.add("is-enabled"):e.classList.remove("is-enabled")}var P=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))},F=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))};function j(){const e=document.getElementById("vault-list");e&&(e.innerHTML="",T.vaults.forEach(((t,n)=>{const r=document.createElement("li");r.innerHTML=`\n\t\t\t<div class="drag-handle">\n\t\t\t\t<i data-lucide="grip-vertical"></i>\n\t\t\t</div>\n\t\t\t<span>${t}</span>\n\t\t\t<button type="button" class="remove-vault-btn clickable-icon" aria-label="Remove vault">\n\t\t\t\t<i data-lucide="trash-2"></i>\n\t\t\t</button>\n\t\t`,r.dataset.index=n.toString(),r.draggable=!0,r.addEventListener("dragstart",N),r.addEventListener("dragover",D),r.addEventListener("drop",q),r.addEventListener("dragend",_),r.querySelector(".remove-vault-btn").addEventListener("click",(e=>{e.stopPropagation(),function(e){T.vaults.splice(e,1),I(),j()}(n)})),e.appendChild(r)})),L(e))}function $(){(function(){return S(this,void 0,void 0,(function*(){var e,t,n,r;const a=yield o.storage.sync.get(["general_settings","vaults"]);return T={showMoreActionsButton:null===(t=null===(e=a.general_settings)||void 0===e?void 0:e.showMoreActionsButton)||void 0===t||t,vaults:a.vaults||[],betaFeatures:null!==(r=null===(n=a.general_settings)||void 0===n?void 0:n.betaFeatures)&&void 0!==r&&r},T}))})().then((()=>{j(),function(){const e=document.getElementById("show-more-actions-toggle");e&&(e.checked=T.showMoreActionsButton,e.addEventListener("change",(()=>{I({showMoreActionsButton:e.checked})})))}(),function(){const e=document.getElementById("beta-features-toggle");e&&(e.checked=T.betaFeatures,e.addEventListener("change",(()=>{I({betaFeatures:e.checked})})))}(),function(){const e=document.getElementById("vault-input");e&&e.addEventListener("keypress",(t=>{if("Enter"===t.key){t.preventDefault();const r=e.value.trim();r&&(n=r,T.vaults.push(n),I(),j(),e.value="")}var n}))}(),function(){const e=document.getElementById("keyboard-shortcuts-list");e&&function(){return e=this,t=void 0,r=function*(){return(yield o.commands.getAll()).map((e=>({name:e.name||"",description:e.description||"Open clipper",shortcut:e.shortcut||null})))},new((n=void 0)||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}().then((t=>{t.forEach((t=>{const n=document.createElement("div");n.className="shortcut-item",n.innerHTML=`\n\t\t\t\t<span>${t.description}</span>\n\t\t\t\t<span class="setting-hotkey">${t.shortcut||"Not set"}</span>\n\t\t\t`,e.appendChild(n)}))}))}(),document.querySelectorAll(".checkbox-container").forEach((e=>{const t=e.querySelector('input[type="checkbox"]');t&&(M(e,t),t.addEventListener("change",(()=>{M(e,t)})),e.addEventListener("click",(e=>{e.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change"))})))})),function(){F(this,void 0,void 0,(function*(){const e=document.querySelector(".shortcut-instructions");if(e){let t="";switch(yield function(){return P(this,void 0,void 0,(function*(){const e=navigator.userAgent.toLowerCase();if(e.indexOf("firefox")>-1)return"firefox";if(e.indexOf("edg/")>-1)return"edge";if(e.indexOf("chrome")>-1){const e=navigator;return e.brave&&(yield e.brave.isBrave())?"brave":"chrome"}return"other"}))}()){case"chrome":t="To change key assignments, go to <code>chrome://extensions/shortcuts</code>";break;case"brave":t="To change key assignments, go to <code>brave://extensions/shortcuts</code>";break;case"firefox":t='To change key assignments, go to <code>about:addons</code>, click the gear icon, and select "Manage Extension Shortcuts".';break;case"edge":t="To change key assignments, go to <code>edge://extensions/shortcuts</code>";break;default:t="To change key assignments, please refer to your browser's extension settings."}e.innerHTML=`Keyboard shortcuts give you quick access to clipper features. ${t}`}}))}()}))}let O=null;function N(e){e.stopPropagation(),O=e.target.closest("[draggable]"),O&&e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",O.dataset.id||O.dataset.index||""),setTimeout((()=>{O&&O.classList.add("dragging")}),0))}function D(e){var t,n;e.stopPropagation(),e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");const r=e.target.closest("[draggable]");if(r&&r!==O&&O){const o=r.getBoundingClientRect(),a=o.top+o.height/2;e.clientY<a?null===(t=r.parentNode)||void 0===t||t.insertBefore(O,r):null===(n=r.parentNode)||void 0===n||n.insertBefore(O,r.nextSibling)}}function q(e){if(e.stopPropagation(),e.preventDefault(),!e.dataTransfer)return;const t=e.dataTransfer.getData("text/plain"),n=e.target.closest("ul, #template-properties");if(n&&O){const e=Array.from(n.children).indexOf(O);"template-list"===n.id?function(e,t){const n=A(),r=n.findIndex((t=>t.id===e));if(-1!==r&&r!==t){const[e]=n.splice(r,1);n.splice(t,0,e),p().then((()=>{H()})).catch((e=>{console.error("Failed to save template settings:",e)}))}}(t,e):"template-properties"===n.id?function(e,t){const n=h();if(-1===n)return void console.error("No template is currently being edited");const r=A()[n];if(!r)return void console.error("Template not found");if(!Array.isArray(r.properties)||0===r.properties.length)return void console.error("Template properties array is empty or not an array");const o=r.properties.findIndex((t=>t.id===e));if(-1!==o){if(o!==t){const[e]=r.properties.splice(o,1);r.properties.splice(t,0,e),p().then((()=>{H()})).catch((e=>{console.error("Failed to save template settings:",e)}))}}else console.error("Property not found")}(t,e):"vault-list"===n.id&&function(e){if(!O)return;const t=parseInt(O.dataset.index||"-1");if(-1!==t&&t!==e){const[n]=T.vaults.splice(t,1);T.vaults.splice(e,0,n),I(),j()}}(e),O.classList.remove("dragging")}O=null}function _(){O&&O.classList.remove("dragging"),O=null}let R=!1;function U(){R=!1}function H(e){const t=document.getElementById("template-list");if(!t)return void console.error("Template list element not found");const n=e||s;t.innerHTML="",n.forEach(((e,n)=>{if(e&&e.name&&e.id){const r=document.createElement("li");r.innerHTML=`\n\t\t\t\t<div class="drag-handle">\n\t\t\t\t\t<i data-lucide="grip-vertical"></i>\n\t\t\t\t</div>\n\t\t\t\t<span class="template-name">${e.name}</span>\n\t\t\t\t<button type="button" class="delete-template-btn clickable-icon" aria-label="Delete template">\n\t\t\t\t\t<i data-lucide="trash-2"></i>\n\t\t\t\t</button>\n\t\t\t`,r.dataset.id=e.id,r.dataset.index=n.toString(),r.draggable=!0,r.addEventListener("click",(t=>{t.target.closest(".delete-template-btn")||V(e)}));const o=r.querySelector(".delete-template-btn");o&&o.addEventListener("click",(t=>{t.stopPropagation(),function(e){const t=s.findIndex((t=>t.id===e));if(-1!==t&&confirm(`Are you sure you want to delete the template "${s[t].name}"?`)){if(s.splice(t,1),i===t)if(s.length>0){const e=Math.max(0,t-1);V(s[e])}else!function(){g(-1);const e=document.getElementById("template-editor-title"),t=document.getElementById("template-name"),n=document.getElementById("template-properties");e&&(e.textContent="New template"),t&&(t.value=""),n&&(n.innerHTML="");const r=document.getElementById("template-path-name");r&&(r.value="Clippings");const o=document.getElementById("url-patterns");o&&(o.value="");const a=document.getElementById("template-editor");a&&(a.style.display="none")}();else i>t&&g(i-1);p(),H()}}(e.id)})),n===i&&r.classList.add("active"),t.appendChild(r)}else console.error("Invalid template at index",n,":",e)})),L(t)}function V(e){let t;e?(t=e,g(s.findIndex((e=>e.id===t.id)))):(t={id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"New template",behavior:"create",noteNameFormat:"{{title}}",path:"Clippings",noteContentFormat:"{{content}}",properties:[],triggers:[]},s.push(t),g(s.length-1),p().then((()=>{H()})).catch((e=>{console.error("Failed to save new template:",e)}))),t.properties||(t.properties=[]);const n=document.getElementById("template-editor-title"),r=document.getElementById("template-name"),o=document.getElementById("template-properties");n&&(n.textContent="Edit template"),r&&(r.value=t.name),o&&(o.innerHTML="");const a=document.getElementById("template-path-name");a&&(a.value=t.path);const l=document.getElementById("template-behavior");l&&(l.value=t.behavior||"create");const c=document.getElementById("specific-note-name");c&&(c.value=t.specificNoteName||"");const d=document.getElementById("daily-note-format");d&&(d.value=t.dailyNoteFormat||"YYYY-MM-DD");const m=document.getElementById("note-name-format");m&&(m.value=t.noteNameFormat||"{{title}}");const u=document.getElementById("note-content-format");u&&(u.value=t.noteContentFormat||""),z(),l&&l.addEventListener("change",z),t&&Array.isArray(t.properties)&&t.properties.forEach((e=>W(e.name,e.value,e.type,e.id)));const f=document.getElementById("url-patterns");f&&(f.value=t&&t.triggers?t.triggers.join("\n"):"");const v=document.getElementById("template-editor");v&&(v.style.display="block");const h=document.getElementById("templates-section");h&&(h.style.display="block");const A=document.getElementById("general-section");if(A&&(A.style.display="none"),document.querySelectorAll(".sidebar li[data-section]").forEach((e=>e.classList.remove("active"))),document.querySelectorAll("#template-list li").forEach((e=>e.classList.remove("active"))),-1!==i){const e=document.querySelector(`#template-list li[data-id="${s[i].id}"]`);e&&e.classList.add("active")}if(h&&h.classList.add("active"),A&&A.classList.remove("active"),H(),!t.id){const e=document.getElementById("template-name");e&&(e.focus(),e.select())}U(),r&&r.addEventListener("input",(()=>{-1!==i&&s[i]&&(s[i].name=r.value,H())}));const y=document.getElementById("template-vault");y&&(y.innerHTML='<option value="">Last used</option>',T.vaults.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,y.appendChild(t)})),y.value=t.vault||""),C("templates",t.id)}function z(){const e=document.getElementById("template-behavior"),t=document.getElementById("specific-note-container"),n=document.getElementById("daily-note-format-container"),r=document.getElementById("note-name-format-container"),o=document.getElementById("properties-container"),a=document.getElementById("properties-warning");if(e){const s=e.value;t&&(t.style.display="append-specific"===s?"block":"none"),n&&(n.style.display="append-daily"===s?"block":"none"),r&&(r.style.display="create"===s?"block":"none"),"append-specific"===s||"append-daily"===s?(o&&(o.style.display="none"),a&&(a.style.display="block")):(o&&(o.style.display="block"),a&&(a.style.display="none"))}}function W(e="",t="",n="text",r=null){const o=document.getElementById("template-properties");if(!o)return;const a=r||Date.now().toString()+Math.random().toString(36).slice(2,11),s=document.createElement("div");var i;s.className="property-editor",s.innerHTML=`\n\t\t<div class="drag-handle">\n\t\t\t<i data-lucide="grip-vertical"></i>\n\t\t</div>\n\t\t<div class="property-select">\n\t\t\t<div class="property-selected" data-value="${n}">\n\t\t\t\t<i data-lucide="${B(n)}"></i>\n\t\t\t</div>\n\t\t\t<select class="property-type" id="${a}-type">\n\t\t\t\t<option value="text">Text</option>\n\t\t\t\t<option value="multitext">List</option>\n\t\t\t\t<option value="number">Number</option>\n\t\t\t\t<option value="checkbox">Checkbox</option>\n\t\t\t\t<option value="date">Date</option>\n\t\t\t\t<option value="datetime">Date & time</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<input type="text" class="property-name" id="${a}-name" value="${e}" placeholder="Property name">\n\t\t<input type="text" class="property-value" id="${a}-value" value="${i=function(e){return e.replace(/\\"/g,'"').replace(/\\n/g,"\n")}(t),i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}" placeholder="Property value">\n\t\t<button type="button" class="remove-property-btn clickable-icon" aria-label="Remove property">\n\t\t\t<i data-lucide="trash-2"></i>\n\t\t</button>\n\t`,s.dataset.id=a,o.appendChild(s),s.addEventListener("mousedown",(e=>{e.target.closest("input, select, button")||(s.setAttribute("draggable","true"),o.querySelectorAll(".property-editor").forEach((e=>{e!==s&&e.setAttribute("draggable","true")})))}));const l=()=>{s.removeAttribute("draggable"),o.querySelectorAll(".property-editor").forEach((e=>{e.removeAttribute("draggable")}))};s.addEventListener("dragend",l),s.addEventListener("mouseup",l);const c=s.querySelector(".property-select");if(!c)return;const d=c.querySelector(".property-selected"),m=c.querySelector("select");m&&(m.value=n,m.addEventListener("change",(function(){d&&J(this.value,d)})));const g=s.querySelector(".remove-property-btn");g&&g.addEventListener("click",(()=>{o.removeChild(s)})),s.addEventListener("dragstart",N),s.addEventListener("dragover",D),s.addEventListener("drop",q),s.addEventListener("dragend",_),d&&J(n,d),L(s)}function J(e,t){const n=B(e);t.innerHTML=`<i data-lucide="${n}"></i>`,t.setAttribute("data-value",e),L(t)}function Y(){if(-1===i)return;const e=s[i];if(!e)return void console.error("Template not found");const t=document.getElementById("template-behavior");t&&(e.behavior=t.value);const n=document.getElementById("template-path-name");n&&(e.path=n.value);const r=document.getElementById("note-name-format");r&&(e.noteNameFormat=r.value);const o=document.getElementById("specific-note-name");o&&(e.specificNoteName=o.value);const a=document.getElementById("daily-note-format");a&&(e.dailyNoteFormat=a.value);const l=document.getElementById("note-content-format");l&&(e.noteContentFormat=l.value);const c=document.querySelectorAll("#template-properties .property-editor");e.properties=Array.from(c).map((e=>{const t=e.querySelector(".property-name"),n=e.querySelector(".property-value"),r=e.querySelector(".property-select .property-selected");return{id:e.dataset.id||Date.now().toString()+Math.random().toString(36).slice(2,11),name:t.value,value:(o=n.value,o.replace(/"/g,'\\"').replace(/\n/g,"\\n")),type:r.getAttribute("data-value")||"text"};var o}));const d=document.getElementById("url-patterns");d&&(e.triggers=d.value.split("\n").filter(Boolean));const m=document.getElementById("template-vault");m&&(e.vault=m.value||void 0),R=!0}function Z(){W(),-1!==i&&Y()}function K(){const e=document.getElementById("template-settings-form");if(!e)return void console.error("Template form not found");const t=(e=>{let t=null;return function(...n){const r=this;t&&clearTimeout(t),t=setTimeout((()=>e.apply(r,n)),1e3)}})((()=>{return e=this,t=void 0,r=function*(){try{const e=yield p();e.length>0&&(H(),console.log("Auto-save completed"),function(e){console.warn(e.join("\n"))}(e))}catch(e){console.error("Auto-save failed:",e)}},new((n=void 0)||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}));e.addEventListener("input",(()=>{-1!==i&&(Y(),t())}));const n=document.getElementById("template-properties");n&&(n.addEventListener("click",(e=>{const n=e.target;(n.classList.contains("remove-property-btn")||n.closest(".remove-property-btn"))&&-1!==i&&(Y(),t())})),n.addEventListener("change",(e=>{e.target.classList.contains("property-type")&&-1!==i&&(Y(),t())})))}function G(){if(-1===i)return void alert("Please select a template to export.");const e=s[i],t=`${n=e.name,n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}-clipper.json`;var n;const r={schemaVersion:"0.1.0",name:e.name,behavior:e.behavior,noteNameFormat:e.noteNameFormat,path:e.path,noteContentFormat:e.noteContentFormat,properties:e.properties.map((({name:e,value:t,type:n})=>({name:e,value:t,type:n}))),triggers:e.triggers},o=JSON.stringify(r,null,"\t"),a=new Blob([o],{type:"application/json"}),l=URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)}function X(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{var t,n;try{const r=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);if(!Q(r))throw new Error("Invalid template file");r.id=Date.now().toString()+Math.random().toString(36).substr(2,9),r.properties=null===(n=r.properties)||void 0===n?void 0:n.map((e=>Object.assign(Object.assign({},e),{id:Date.now().toString()+Math.random().toString(36).substr(2,9)})));let o=r.name,a=1;for(;s.some((e=>e.name===o));)o=`${r.name} (${a++})`;r.name=o,s.push(r),p(),H(),V(r)}catch(e){console.error("Error parsing imported template:",e),alert("Error importing template. Please check the file and try again.")}},r.readAsText(n)},e.click()}function Q(e){const t=["text","multitext","number","checkbox","date","datetime"];return["name","behavior","path","properties","noteContentFormat"].every((t=>e.hasOwnProperty(t)))&&Array.isArray(e.properties)&&e.properties.every((e=>e.hasOwnProperty("name")&&e.hasOwnProperty("value")&&e.hasOwnProperty("type")&&t.includes(e.type)))}function ee(e){const t=new FileReader;t.onload=e=>{var t,n;try{const r=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);if(!Q(r))throw new Error("Invalid template file");r.id=Date.now().toString()+Math.random().toString(36).substr(2,9),r.properties=null===(n=r.properties)||void 0===n?void 0:n.map((e=>Object.assign(Object.assign({},e),{id:Date.now().toString()+Math.random().toString(36).substr(2,9)})));let o=r.name,a=1;for(;s.some((e=>e.name===o));)o=`${r.name} (${a++})`;r.name=o,s.push(r),p(),H(),V(r)}catch(e){console.error("Error parsing imported template:",e),alert("Error importing template. Please check the file and try again.")}},t.readAsText(e)}function te(){const e=document.getElementById("general-section"),t=document.getElementById("templates-section");e&&(e.style.display="block",e.classList.add("active")),t&&(t.style.display="none",t.classList.remove("active")),C("general"),document.querySelectorAll(".sidebar li").forEach((e=>e.classList.remove("active")));const n=document.querySelector('.sidebar li[data-section="general"]');n&&n.classList.add("active")}var ne=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))};document.addEventListener("DOMContentLoaded",(()=>ne(void 0,void 0,void 0,(function*(){const e=document.getElementById("new-template-btn"),t=document.getElementById("export-template-btn"),n=document.getElementById("import-template-btn"),r=document.getElementById("reset-default-template-btn");function i(){const e=v(),t=A(),n=t.findIndex((e=>"Default"===e.name));-1!==n?t[n]=e:t.unshift(e),p().then((()=>{H(),V(e)})).catch((e=>{console.error("Failed to reset default template:",e),alert("Failed to reset default template. Please try again.")}))}document.getElementById("template-settings-form")&&(K(),[document.getElementById("template-list"),document.getElementById("template-properties"),document.getElementById("vault-list")].forEach((e=>{e&&(e.addEventListener("dragstart",N),e.addEventListener("dragover",D),e.addEventListener("drop",q),e.addEventListener("dragend",_))})),function(){const e=document.getElementById("template-drop-zone"),t=document.body;if(!e)return void console.error("Drop zone not found");let n=0;function r(e){var t;if(null===(t=e.dataTransfer)||void 0===t?void 0:t.types)for(let t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}t.addEventListener("dragenter",(function(t){t.preventDefault(),t.stopPropagation(),n++,r(t)&&(null==e||e.classList.add("drag-over"))}),!1),t.addEventListener("dragleave",(function(t){t.preventDefault(),t.stopPropagation(),n--,0===n&&(null==e||e.classList.remove("drag-over"))}),!1),t.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation()}),!1),t.addEventListener("drop",(function(t){var o;if(t.preventDefault(),t.stopPropagation(),null==e||e.classList.remove("drag-over"),n=0,r(t)){const e=null===(o=t.dataTransfer)||void 0===o?void 0:o.files;e&&e.length&&function(e){Array.from(e).forEach(ee)}(e)}}),!1)}(),function(){const e=document.getElementById("add-property-btn");e?(e.removeEventListener("click",Z),e.addEventListener("click",Z)):console.error("Add property button not found")}(),function(){const e=document.getElementById("template-settings-form");e&&(e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(e=>{e.preventDefault()})))}()),yield function(){return ne(this,void 0,void 0,(function*(){yield $(),H(yield function(){return a(this,void 0,void 0,(function*(){const e=(yield o.storage.sync.get(c))[c]||[],t=yield Promise.all(e.map(u));if(s=t.filter((e=>null!==e)),0===s.length){const e=v();s.push(e),yield p()}return s}))}()),function(){const t=document.getElementById("template-list");t?t.addEventListener("click",(e=>{const t=e.target.closest("li");if(t&&t.dataset.id){const e=A().find((e=>e.id===t.dataset.id));e&&(U(),V(e),C("templates",e.id))}})):console.error("Template list not found"),e&&e.addEventListener("click",(()=>{V(null)}))}(),yield function(){return ne(this,void 0,void 0,(function*(){const e=new URLSearchParams(window.location.search),t=e.get("section"),n=e.get("template");if("general"===t)te();else if(n){const e=(r=n,s.find((e=>e.id===r)));e?V(e):(console.error(`Template with id ${n} not found`),te())}else te();var r}))}(),function(){const e=document.querySelectorAll(".sidebar li[data-section]"),t=document.querySelectorAll(".settings-section"),n=document.querySelector(".sidebar");n&&n.addEventListener("click",(e=>{"general"===e.target.dataset.section&&te()})),e.forEach((n=>{n.addEventListener("click",(()=>{const r=n.dataset.section;e.forEach((e=>e.classList.remove("active"))),n.classList.add("active"),document.querySelectorAll("#template-list li").forEach((e=>e.classList.remove("active")));const o=document.getElementById("template-editor");o&&(o.style.display="none"),t.forEach((e=>{e.id===`${r}-section`?(e.style.display="block",e.classList.add("active")):(e.style.display="none",e.classList.remove("active"))}))}))}))}(),K(),t.addEventListener("click",G),n.addEventListener("click",X),r.addEventListener("click",i),E({icons:k})}))}()}))));
//# sourceMappingURL=settings.js.map