/*! For license information please see settings.js.LICENSE.txt */
var e={835:(e,t,n)=>{n.d(t,{Tzs:()=>i});const o=(e,t,n=[])=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach((e=>{r.setAttribute(e,String(t[e]))})),n.length&&n.forEach((e=>{const t=o(...e);r.appendChild(t)})),r},r=e=>"string"==typeof e?e:e&&e.class?e.class&&"string"==typeof e.class?e.class.split(" "):e.class&&Array.isArray(e.class)?e.class:"":"",a=(e,{nameAttr:t,icons:n,attrs:a})=>{const i=e.getAttribute(t);if(null==i)return;const s=n[i.replace(/(\w)(\w*)(_|-|\s*)/g,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))];if(!s)return console.warn(`${e.outerHTML} icon name was not found in the provided icons object.`);const c=(e=>Array.from(e.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{}))(e),[l,d,u]=s,p={...d,"data-lucide":i,...a,...c},m=["lucide",`lucide-${i}`,c,a].flatMap(r).map((e=>e.trim())).filter(Boolean).filter(((e,t,n)=>n.indexOf(e)===t)).join(" ");m&&Object.assign(p,{class:m});const v=(([e,t,n])=>o(e,t,n))([l,p,u]);return e.parentNode?.replaceChild(v,e)},i=({icons:e={},nameAttr:t="data-lucide",attrs:n={}}={})=>{if(!Object.values(e).length)throw new Error("Please provide an icons object.\nIf you want to use all the icons you can import it like:\n `import { createIcons, icons } from 'lucide';\nlucide.createIcons({icons});`");if("undefined"==typeof document)throw new Error("`createIcons()` only works in a browser environment.");const o=document.querySelectorAll(`[${t}]`);if(Array.from(o).forEach((o=>a(o,{nameAttr:t,icons:e,attrs:n}))),"data-lucide"===t){const t=document.querySelectorAll("[icon-name]");t.length>0&&(console.warn("[Lucide] Some icons were found with the now deprecated icon-name attribute. These will still be replaced for backwards compatibility, but will no longer be supported in v1.0 and you should switch to data-lucide"),Array.from(t).forEach((t=>a(t,{nameAttr:"icon-name",icons:e,attrs:n}))))}}},992:(e,t,n)=>{var o,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var n=a._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,(function(n){return r(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":a._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var i=t.charCodeAt(o);n[2*o]=i>>>8,n[2*o+1]=i%256}return n},decompressFromUint8Array:function(t){if(null==t)return a.decompress(t);for(var n=new Array(t.length/2),o=0,r=n.length;o<r;o++)n[o]=256*t[2*o]+t[2*o+1];var i=[];return n.forEach((function(t){i.push(e(t))})),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,(function(t){return r(n,e.charAt(t))})))},compress:function(t){return a._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var o,r,a,i={},s={},c="",l="",d="",u=2,p=3,m=2,v=[],f=0,g=0;for(a=0;a<e.length;a+=1)if(c=e.charAt(a),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=p++,s[c]=!0),l=d+c,Object.prototype.hasOwnProperty.call(i,l))d=l;else{if(Object.prototype.hasOwnProperty.call(s,d)){if(d.charCodeAt(0)<256){for(o=0;o<m;o++)f<<=1,g==t-1?(g=0,v.push(n(f)),f=0):g++;for(r=d.charCodeAt(0),o=0;o<8;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1}else{for(r=1,o=0;o<m;o++)f=f<<1|r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r=0;for(r=d.charCodeAt(0),o=0;o<16;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1}0==--u&&(u=Math.pow(2,m),m++),delete s[d]}else for(r=i[d],o=0;o<m;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1;0==--u&&(u=Math.pow(2,m),m++),i[l]=p++,d=String(c)}if(""!==d){if(Object.prototype.hasOwnProperty.call(s,d)){if(d.charCodeAt(0)<256){for(o=0;o<m;o++)f<<=1,g==t-1?(g=0,v.push(n(f)),f=0):g++;for(r=d.charCodeAt(0),o=0;o<8;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1}else{for(r=1,o=0;o<m;o++)f=f<<1|r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r=0;for(r=d.charCodeAt(0),o=0;o<16;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1}0==--u&&(u=Math.pow(2,m),m++),delete s[d]}else for(r=i[d],o=0;o<m;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1;0==--u&&(u=Math.pow(2,m),m++)}for(r=2,o=0;o<m;o++)f=f<<1|1&r,g==t-1?(g=0,v.push(n(f)),f=0):g++,r>>=1;for(;;){if(f<<=1,g==t-1){v.push(n(f));break}g++}return v.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,o){var r,a,i,s,c,l,d,u=[],p=4,m=4,v=3,f="",g=[],h={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)u[r]=r;for(i=0,c=Math.pow(2,2),l=1;l!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(s>0?1:0)*l,l<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),l=1;l!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(s>0?1:0)*l,l<<=1;d=e(i);break;case 1:for(i=0,c=Math.pow(2,16),l=1;l!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(s>0?1:0)*l,l<<=1;d=e(i);break;case 2:return""}for(u[3]=d,a=d,g.push(d);;){if(h.index>t)return"";for(i=0,c=Math.pow(2,v),l=1;l!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(s>0?1:0)*l,l<<=1;switch(d=i){case 0:for(i=0,c=Math.pow(2,8),l=1;l!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(s>0?1:0)*l,l<<=1;u[m++]=e(i),d=m-1,p--;break;case 1:for(i=0,c=Math.pow(2,16),l=1;l!=c;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),i|=(s>0?1:0)*l,l<<=1;u[m++]=e(i),d=m-1,p--;break;case 2:return g.join("")}if(0==p&&(p=Math.pow(2,v),v++),u[d])f=u[d];else{if(d!==m)return null;f=a+a.charAt(0)}g.push(f),u[m++]=a+f.charAt(0),a=f,0==--p&&(p=Math.pow(2,v),v++)}}};return a}();void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)},783:(e,t,n)=>{n.d(t,{b:()=>m});var o=n(436),r=n(213),a=n(102);function i(){const e=document.getElementById("template-settings-form");if(!e)return void console.error("Template form not found");const t=(e=>{let t=null;return function(...n){const o=this;t&&clearTimeout(t),t=setTimeout((()=>e.apply(o,n)),1e3)}})((()=>{return e=this,t=void 0,r=function*(){try{const e=yield(0,o.tR)();e.length>0&&((0,o.wK)(),console.log("Auto-save completed"),function(e){console.warn(e.join("\n"))}(e))}catch(e){console.error("Auto-save failed:",e)}},new((n=void 0)||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}));e.addEventListener("input",(()=>{-1!==o.H0&&((0,o.G_)(),t())}));const n=document.getElementById("template-properties");n&&(n.addEventListener("click",(e=>{const n=e.target;(n.classList.contains("remove-property-btn")||n.closest(".remove-property-btn"))&&-1!==o.H0&&((0,o.G_)(),t())})),n.addEventListener("change",(e=>{e.target.classList.contains("property-type")&&-1!==o.H0&&((0,o.G_)(),t())})));const r=document.getElementById("add-property-btn");r?r.addEventListener("click",(()=>{(0,o.JE)(),-1!==o.H0&&((0,o.G_)(),t())})):console.error("Add property button not found")}function s(){if(-1===o.H0)return void alert("Please select a template to export.");const e=o.kT[o.H0],t=`${n=e.name,n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}-clipper.json`;var n;const r={schemaVersion:"0.1.0",name:e.name,behavior:e.behavior,noteNameFormat:e.noteNameFormat,path:e.path,noteContentFormat:e.noteContentFormat,properties:e.properties.map((({name:e,value:t,type:n})=>({name:e,value:t,type:n}))),triggers:e.triggers},a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(i),c=document.createElement("a");c.href=s,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(s)}function c(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{var t,n;try{const r=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);if(!l(r))throw new Error("Invalid template file");r.id=Date.now().toString()+Math.random().toString(36).substr(2,9),r.properties=null===(n=r.properties)||void 0===n?void 0:n.map((e=>Object.assign(Object.assign({},e),{id:Date.now().toString()+Math.random().toString(36).substr(2,9)})));let a=r.name,i=1;for(;o.kT.some((e=>e.name===a));)a=`${r.name} (${i++})`;r.name=a,o.kT.push(r),(0,o.tR)(),(0,o.wK)(),(0,o.XM)(r)}catch(e){console.error("Error parsing imported template:",e),alert("Error importing template. Please check the file and try again.")}},r.readAsText(n)},e.click()}function l(e){const t=["text","multitext","number","checkbox","date","datetime"];return["name","behavior","path","properties","noteContentFormat"].every((t=>e.hasOwnProperty(t)))&&Array.isArray(e.properties)&&e.properties.every((e=>e.hasOwnProperty("name")&&e.hasOwnProperty("value")&&e.hasOwnProperty("type")&&t.includes(e.type)))}function d(e){const t=new FileReader;t.onload=e=>{var t,n;try{const r=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);if(!l(r))throw new Error("Invalid template file");r.id=Date.now().toString()+Math.random().toString(36).substr(2,9),r.properties=null===(n=r.properties)||void 0===n?void 0:n.map((e=>Object.assign(Object.assign({},e),{id:Date.now().toString()+Math.random().toString(36).substr(2,9)})));let a=r.name,i=1;for(;o.kT.some((e=>e.name===a));)a=`${r.name} (${i++})`;r.name=a,o.kT.push(r),(0,o.tR)(),(0,o.wK)(),(0,o.XM)(r)}catch(e){console.error("Error parsing imported template:",e),alert("Error importing template. Please check the file and try again.")}},t.readAsText(e)}var u=n(835),p=n(237);function m(e,t){let n=`${window.location.pathname}?section=${e}`;t&&(n+=`&template=${t}`),window.history.pushState({},"",n)}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("vault-input"),t=document.getElementById("new-template-btn"),n=document.getElementById("export-template-btn"),l=document.getElementById("import-template-btn"),v=document.getElementById("reset-default-template-btn");function f(){const e=document.getElementById("general-section"),t=document.getElementById("templates-section");e&&(e.style.display="block",e.classList.add("active")),t&&(t.style.display="none",t.classList.remove("active")),m("general"),document.querySelectorAll(".sidebar li").forEach((e=>e.classList.remove("active")));const n=document.querySelector('.sidebar li[data-section="general"]');n&&n.classList.add("active")}e?e.addEventListener("keypress",(t=>{if("Enter"===t.key){t.preventDefault();const n=e.value.trim();n&&((0,r.C_)(n),e.value="")}})):console.error("Vault input not found"),(0,r.YR)(),(0,o.K8)().then((()=>{!function(){const e=document.getElementById("template-list");e?e.addEventListener("click",(e=>{const t=e.target.closest("li");if(t&&t.dataset.id){const e=(0,o.yv)().find((e=>e.id===t.dataset.id));e&&((0,o.Do)(),(0,o.XM)(e),m("templates",e.id))}})):console.error("Template list not found"),t&&t.addEventListener("click",(()=>{(0,o.XM)(null)}))}(),function(){const e=new URLSearchParams(window.location.search),t=e.get("section"),n=e.get("template");if("general"===t)f();else if(n){const e=(0,o.Gw)(n);e?(0,o.XM)(e):(console.error(`Template with id ${n} not found`),f())}else f()}()})),function(){const e=document.querySelector(".sidebar");e&&e.addEventListener("click",(e=>{"general"===e.target.dataset.section&&f()}))}(),i(),(0,a.hf)(),function(){const e=document.getElementById("template-drop-zone"),t=document.body;if(!e)return void console.error("Drop zone not found");let n=0;function o(e){var t;if(null===(t=e.dataTransfer)||void 0===t?void 0:t.types)for(let t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}t.addEventListener("dragenter",(function(t){t.preventDefault(),t.stopPropagation(),n++,o(t)&&(null==e||e.classList.add("drag-over"))}),!1),t.addEventListener("dragleave",(function(t){t.preventDefault(),t.stopPropagation(),n--,0===n&&(null==e||e.classList.remove("drag-over"))}),!1),t.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation()}),!1),t.addEventListener("drop",(function(t){var r;if(t.preventDefault(),t.stopPropagation(),null==e||e.classList.remove("drag-over"),n=0,o(t)){const e=null===(r=t.dataTransfer)||void 0===r?void 0:r.files;e&&e.length&&function(e){Array.from(e).forEach(d)}(e)}}),!1)}(),n.addEventListener("click",s),l.addEventListener("click",c),v.addEventListener("click",(function(){const e=(0,o.e2)(),t=(0,o.yv)(),n=t.findIndex((e=>"Default"===e.name));-1!==n?t[n]=e:t.unshift(e),(0,o.tR)().then((()=>{(0,o.wK)(),(0,o.XM)(e)})).catch((e=>{console.error("Failed to reset default template:",e),alert("Failed to reset default template. Please try again.")}))})),(0,u.Tzs)({icons:p.Pt})}))},237:(e,t,n)=>{n.d(t,{R9:()=>b,Pt:()=>y,vY:()=>E});const o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},r=["svg",o,[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]]],a=["svg",o,[["line",{x1:"21",x2:"3",y1:"6",y2:"6"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18"}]]],i=["svg",o,[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2"}],["path",{d:"M6 20h4"}],["path",{d:"M14 10h4"}],["path",{d:"M6 14h2v6"}],["path",{d:"M14 4h2v6"}]]],s=["svg",o,[["line",{x1:"8",x2:"21",y1:"6",y2:"6"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18"}]]],c=["svg",o,[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]]],l=["svg",o,[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]]],d=["svg",o,[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]]],u=["svg",o,[["path",{d:"m9 11 3 3L22 4"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}]]],p=["svg",o,[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]]],m=["svg",o,[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]]],v=["svg",o,[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]]],f=["svg",o,[["path",{d:"m9 18 6-6-6-6"}]]],g=["svg",o,[["path",{d:"m6 9 6 6 6-6"}]]];var h=n(835);const y={Trash2:r,AlignLeft:a,Binary:i,List:s,Calendar:c,Clock:l,Ellipsis:d,SquareCheckBig:u,GripVertical:p,Settings:m,X:v,ChevronRight:f,ChevronDown:g};function E(e=document){(0,h.Tzs)({icons:y,attrs:{"stroke-width":1.75,class:"lucide-icon"},nameAttr:"data-lucide"})}function b(e){return{text:"align-left",multitext:"list",number:"binary",checkbox:"square-check-big",date:"calendar",datetime:"clock"}[e]||"align-left"}},213:(e,t,n)=>{n.d(t,{C_:()=>u,Sz:()=>c,YR:()=>p,zv:()=>l,Yb:()=>d});var o=n(102),r=n(237),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};function i(e,t){t.checked?e.classList.add("is-enabled"):e.classList.remove("is-enabled")}n(436);var s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};let c={showMoreActionsButton:!0,vaults:[]};function l(e){return s(this,void 0,void 0,(function*(){c=Object.assign(Object.assign({},c),e),yield chrome.storage.sync.set({general_settings:{showMoreActionsButton:c.showMoreActionsButton},vaults:c.vaults}),console.log("Saved general settings:",c)}))}function d(){const e=document.getElementById("vault-list");e&&(e.innerHTML="",c.vaults.forEach(((t,n)=>{const r=document.createElement("li");r.innerHTML=`\n\t\t\t<div class="drag-handle">\n\t\t\t\t<i data-lucide="grip-vertical"></i>\n\t\t\t</div>\n\t\t\t<span>${t}</span>\n\t\t\t<button type="button" class="remove-vault-btn clickable-icon" aria-label="Remove vault">\n\t\t\t\t<i data-lucide="trash-2"></i>\n\t\t\t</button>\n\t\t`,r.dataset.index=n.toString(),r.draggable=!0,r.addEventListener("dragstart",o.bS),r.addEventListener("dragover",o.ji),r.addEventListener("drop",o.MS),r.addEventListener("dragend",o.S5),r.querySelector(".remove-vault-btn").addEventListener("click",(e=>{e.stopPropagation(),function(e){c.vaults.splice(e,1),l(),d()}(n)})),e.appendChild(r)})),(0,r.vY)(e))}function u(e){c.vaults.push(e),l(),d()}function p(){(function(){return s(this,void 0,void 0,(function*(){var e;const t=yield chrome.storage.sync.get(["general_settings","vaults"]);return console.log("Loaded general settings:",t.general_settings),console.log("Loaded vaults:",t.vaults),c=Object.assign(Object.assign({},t.general_settings),{vaults:t.vaults||[],showMoreActionsButton:(null===(e=t.general_settings)||void 0===e?void 0:e.showMoreActionsButton)||!0}),c}))})().then((()=>{d(),function(){const e=document.getElementById("show-more-actions-toggle");e&&(e.checked=c.showMoreActionsButton,e.addEventListener("change",(()=>{l({showMoreActionsButton:e.checked})})))}(),function(){const e=document.getElementById("vault-input");e&&e.addEventListener("keypress",(t=>{if("Enter"===t.key){t.preventDefault();const n=e.value.trim();n&&(u(n),e.value="")}}))}(),function(){const e=document.getElementById("keyboard-shortcuts-list");e&&function(){return a(this,void 0,void 0,(function*(){return new Promise((e=>{chrome.commands.getAll((t=>{e(t.map((e=>({name:e.name||"",description:e.description||"Open clipper",shortcut:e.shortcut||null}))))}))}))}))}().then((t=>{t.forEach((t=>{const n=document.createElement("div");n.className="shortcut-item",n.innerHTML=`\n\t\t\t\t<span>${t.description}</span>\n\t\t\t\t<span class="setting-hotkey">${t.shortcut||"Not set"}</span>\n\t\t\t`,e.appendChild(n)}))}))}(),document.querySelectorAll(".checkbox-container").forEach((e=>{const t=e.querySelector('input[type="checkbox"]');t&&(i(e,t),t.addEventListener("change",(()=>{i(e,t)})),e.addEventListener("click",(e=>{e.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change"))})))}))}))}},436:(e,t,n)=>{n.d(t,{JE:()=>S,e2:()=>L,H0:()=>u,Gw:()=>C,d8:()=>A,yv:()=>k,K8:()=>h,Do:()=>M,tR:()=>x,XM:()=>b,kT:()=>d,G_:()=>I,wK:()=>E});var o=n(102),r=n(237),a=n(633),i=n(992),s=n(213),c=n(783),l=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};let d=[],u=-1;const p="template_",m="template_list",v=8e3,f=6e3;let g=!1;function h(){return new Promise((e=>{chrome.storage.sync.get(m,(t=>l(this,void 0,void 0,(function*(){const n=t[m]||[];d=[];for(const e of n){const t=yield y(e);t&&d.push(t)}0===d.length&&d.push(L()),E(),e()}))))}))}function y(e){return l(this,void 0,void 0,(function*(){return new Promise((t=>{chrome.storage.sync.get(p+e,(n=>{const o=n[p+e];if(o){const e=(0,i.decompressFromUTF16)(o.join(""));t(JSON.parse(e))}else t(null)}))}))}))}function E(){const e=document.getElementById("template-list");e&&(e.innerHTML="",d.forEach(((t,n)=>{if(t&&t.name&&t.id){const o=document.createElement("li");o.innerHTML=`\n\t\t\t\t<div class="drag-handle">\n\t\t\t\t\t<i data-lucide="grip-vertical"></i>\n\t\t\t\t</div>\n\t\t\t\t<span class="template-name">${t.name}</span>\n\t\t\t\t<button type="button" class="delete-template-btn clickable-icon" aria-label="Delete template">\n\t\t\t\t\t<i data-lucide="trash-2"></i>\n\t\t\t\t</button>\n\t\t\t`,o.dataset.id=t.id,o.dataset.index=n.toString(),o.draggable=!0,o.addEventListener("click",(e=>{e.target.closest(".delete-template-btn")||b(t)}));const r=o.querySelector(".delete-template-btn");r&&r.addEventListener("click",(e=>{e.stopPropagation(),function(e){const t=d.findIndex((t=>t.id===e));if(-1!==t&&confirm(`Are you sure you want to delete the template "${d[t].name}"?`)){if(d.splice(t,1),u===t)if(d.length>0){const e=Math.max(0,t-1);b(d[e])}else!function(){u=-1;const e=document.getElementById("template-editor-title"),t=document.getElementById("template-name"),n=document.getElementById("template-properties");e&&(e.textContent="New template"),t&&(t.value=""),n&&(n.innerHTML="");const o=document.getElementById("template-path-name");o&&(o.value="Clippings");const r=document.getElementById("url-patterns");r&&(r.value="");const a=document.getElementById("template-editor");a&&(a.style.display="none")}();else u>t&&u--;x(),E()}}(t.id)})),n===u&&o.classList.add("active"),e.appendChild(o)}else console.error("Invalid template at index",n,":",t)})),(0,r.vY)(e))}function b(e){let t;e?(t=e,u=d.findIndex((e=>e.id===t.id))):(t={id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"New template",behavior:"create",noteNameFormat:"{{title}}",path:"Clippings",noteContentFormat:"{{content}}",properties:[],triggers:[]},d.push(t),u=d.length-1,x().then((()=>{E()})).catch((e=>{console.error("Failed to save new template:",e)}))),t.properties||(t.properties=[]);const n=document.getElementById("template-editor-title"),o=document.getElementById("template-name"),r=document.getElementById("template-properties");n&&(n.textContent="Edit template"),o&&(o.value=t.name),r&&(r.innerHTML="");const a=document.getElementById("template-path-name");a&&(a.value=t.path);const i=document.getElementById("template-behavior");document.getElementById("specific-note-container"),document.getElementById("daily-note-format-container"),document.getElementById("note-name-format-container"),document.getElementById("properties-container"),document.getElementById("properties-warning"),i&&(i.value=t.behavior||"create");const l=document.getElementById("specific-note-name");l&&(l.value=t.specificNoteName||"");const p=document.getElementById("daily-note-format");p&&(p.value=t.dailyNoteFormat||"YYYY-MM-DD");const m=document.getElementById("note-name-format");m&&(m.value=t.noteNameFormat||"{{title}}");const v=document.getElementById("note-content-format");v&&(v.value=t.noteContentFormat||""),T(),i&&i.addEventListener("change",T),t&&Array.isArray(t.properties)&&t.properties.forEach((e=>S(e.name,e.value,e.type,e.id)));const f=document.getElementById("url-patterns");f&&(f.value=t&&t.triggers?t.triggers.join("\n"):"");const h=document.getElementById("template-editor");h&&(h.style.display="block");const y=document.getElementById("templates-section");y&&(y.style.display="block");const b=document.getElementById("general-section");if(b&&(b.style.display="none"),document.querySelectorAll(".sidebar li[data-section]").forEach((e=>e.classList.remove("active"))),document.querySelectorAll("#template-list li").forEach((e=>e.classList.remove("active"))),-1!==u){const e=document.querySelector(`#template-list li[data-id="${d[u].id}"]`);e&&e.classList.add("active")}if(y&&y.classList.add("active"),b&&b.classList.remove("active"),E(),!t.id){const e=document.getElementById("template-name");e&&(e.focus(),e.select())}M(),o&&o.addEventListener("input",function(e){let t=null;return function(...n){const o=this;t&&clearTimeout(t),t=setTimeout((()=>e.apply(o,n)),200)}}((()=>{-1!==u&&d[u]&&(d[u].name=o.value,E(),g=!0)})));const w=document.getElementById("template-vault");w&&(w.innerHTML='<option value="">Last used</option>',s.Sz.vaults.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,w.appendChild(t)})),w.value=t.vault||""),g=!0,(0,c.b)("templates",t.id)}function w(e){return l(this,void 0,void 0,(function*(){const t=(0,i.compressToUTF16)(JSON.stringify(e)),n=[];for(let e=0;e<t.length;e+=v)n.push(t.slice(e,e+v));return t.length>f?[n,`Warning: Template "${e.name}" is ${(t.length/1024).toFixed(2)}KB, which is approaching the storage limit.`]:[n,null]}))}function x(){return new Promise(((e,t)=>l(this,void 0,void 0,(function*(){try{const n=d.map((e=>e.id)),o=[],r={};for(const e of d){const[t,n]=yield w(e);r[p+e.id]=t,n&&o.push(n)}chrome.storage.sync.set(Object.assign(Object.assign({},r),{[m]:n}),(()=>{chrome.runtime.lastError?(console.error("Error saving templates:",chrome.runtime.lastError),t(chrome.runtime.lastError)):(console.log("Template settings saved"),g=!1,e(o))}))}catch(e){console.error("Error preparing templates for save:",e),t(e)}}))))}function L(){return{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"Default",behavior:"create",noteNameFormat:"{{title}}",path:"Clippings",noteContentFormat:"{{content}}",properties:[{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"title",value:"{{title}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"source",value:"{{url}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"author",value:"{{author|wikilink}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"published",value:"{{published}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"created",value:"{{date}}",type:"date"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"description",value:"{{description}}",type:"text"},{id:Date.now().toString()+Math.random().toString(36).slice(2,11),name:"tags",value:"clippings",type:"multitext"}],triggers:[]}}function S(e="",t="",n="text",i=null){const s=document.getElementById("template-properties");if(!s)return;const c=document.createElement("div");var l;c.className="property-editor",c.innerHTML=`\n\t\t<div class="drag-handle">\n\t\t\t<i data-lucide="grip-vertical"></i>\n\t\t</div>\n\t\t<div class="property-select">\n\t\t\t<div class="property-selected" data-value="${n}">\n\t\t\t\t<i data-lucide="${(0,r.R9)(n)}"></i>\n\t\t\t</div>\n\t\t\t<select class="property-type">\n\t\t\t\t<option value="text">Text</option>\n\t\t\t\t<option value="multitext">List</option>\n\t\t\t\t<option value="number">Number</option>\n\t\t\t\t<option value="checkbox">Checkbox</option>\n\t\t\t\t<option value="date">Date</option>\n\t\t\t\t<option value="datetime">Date & time</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<input type="text" class="property-name" value="${e}" placeholder="Property name">\n\t\t<input type="text" class="property-value" value="${l=(0,a.MG)(t),l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}" placeholder="Property value">\n\t\t<button type="button" class="remove-property-btn clickable-icon" aria-label="Remove property">\n\t\t\t<i data-lucide="trash-2"></i>\n\t\t</button>\n\t`,c.dataset.id=i||Date.now().toString()+Math.random().toString(36).slice(2,11),s.appendChild(c),c.addEventListener("mousedown",(e=>{e.target.closest("input, select, button")||(c.setAttribute("draggable","true"),s.querySelectorAll(".property-editor").forEach((e=>{e!==c&&e.setAttribute("draggable","true")})))}));const d=()=>{c.removeAttribute("draggable"),s.querySelectorAll(".property-editor").forEach((e=>{e.removeAttribute("draggable")}))};c.addEventListener("dragend",d),c.addEventListener("mouseup",d);const u=c.querySelector(".property-select");if(!u)return;const p=u.querySelector(".property-selected"),m=u.querySelector("select");m&&(m.value=n,m.addEventListener("change",(function(){p&&B(this.value,p)})));const v=c.querySelector(".remove-property-btn");v&&v.addEventListener("click",(()=>{s.removeChild(c)})),c.addEventListener("dragstart",o.bS),c.addEventListener("dragover",o.ji),c.addEventListener("drop",o.MS),c.addEventListener("dragend",o.S5),p&&B(n,p),(0,r.vY)(c)}function B(e,t){const n=(0,r.R9)(e);t.innerHTML=`<i data-lucide="${n}"></i>`,t.setAttribute("data-value",e),(0,r.vY)(t)}function I(){if(-1===u)return;const e=d[u];if(!e)return void console.error("Template not found");const t=document.getElementById("template-behavior");t&&(e.behavior=t.value);const n=document.getElementById("template-path-name");n&&(e.path=n.value);const o=document.getElementById("note-name-format");o&&(e.noteNameFormat=o.value);const r=document.getElementById("specific-note-name");r&&(e.specificNoteName=r.value);const i=document.getElementById("daily-note-format");i&&(e.dailyNoteFormat=i.value);const s=document.getElementById("note-content-format");s&&(e.noteContentFormat=s.value);const c=document.querySelectorAll("#template-properties .property-editor");e.properties=Array.from(c).map((e=>{const t=e.querySelector(".property-name"),n=e.querySelector(".property-value"),o=e.querySelector(".property-select .property-selected");return{id:e.dataset.id||Date.now().toString()+Math.random().toString(36).slice(2,11),name:t.value,value:(0,a.PI)(n.value),type:o.getAttribute("data-value")||"text"}}));const l=document.getElementById("url-patterns");l&&(e.triggers=l.value.split("\n").filter(Boolean));const p=document.getElementById("template-vault");p&&(e.vault=p.value||void 0),g=!0}function M(){g=!1}function A(){return u}function k(){return d}function T(){const e=document.getElementById("template-behavior"),t=document.getElementById("specific-note-container"),n=document.getElementById("daily-note-format-container"),o=document.getElementById("note-name-format-container"),r=document.getElementById("properties-container"),a=document.getElementById("properties-warning");if(e){const i=e.value;t&&(t.style.display="append-specific"===i?"block":"none"),n&&(n.style.display="append-daily"===i?"block":"none"),o&&(o.style.display="create"===i?"block":"none"),"append-specific"===i||"append-daily"===i?(r&&(r.style.display="none"),a&&(a.style.display="block")):(r&&(r.style.display="block"),a&&(a.style.display="none"))}}function C(e){return d.find((t=>t.id===e))}},102:(e,t,n)=>{n.d(t,{MS:()=>l,S5:()=>d,bS:()=>s,hf:()=>i,ji:()=>c});var o=n(436),r=n(213);let a=null;function i(){[document.getElementById("template-list"),document.getElementById("template-properties"),document.getElementById("vault-list")].forEach((e=>{e&&(e.addEventListener("dragstart",s),e.addEventListener("dragover",c),e.addEventListener("drop",l),e.addEventListener("dragend",d))}))}function s(e){e.stopPropagation(),a=e.target.closest("[draggable]"),a&&e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",a.dataset.id||a.dataset.index||""),setTimeout((()=>{a&&a.classList.add("dragging")}),0))}function c(e){var t,n;e.stopPropagation(),e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");const o=e.target.closest("[draggable]");if(o&&o!==a&&a){const r=o.getBoundingClientRect(),i=r.top+r.height/2;e.clientY<i?null===(t=o.parentNode)||void 0===t||t.insertBefore(a,o):null===(n=o.parentNode)||void 0===n||n.insertBefore(a,o.nextSibling)}}function l(e){if(e.stopPropagation(),e.preventDefault(),!e.dataTransfer)return;const t=e.dataTransfer.getData("text/plain"),n=e.target.closest("ul, #template-properties");if(n&&a){const e=Array.from(n.children).indexOf(a);"template-list"===n.id?function(e,t){const n=(0,o.yv)(),r=n.findIndex((t=>t.id===e));if(-1!==r&&r!==t){const[e]=n.splice(r,1);n.splice(t,0,e),(0,o.tR)().then((()=>{(0,o.wK)()})).catch((e=>{console.error("Failed to save template settings:",e)}))}}(t,e):"template-properties"===n.id?function(e,t){const n=(0,o.d8)();if(-1===n)return void console.error("No template is currently being edited");const r=(0,o.yv)()[n];if(!r)return void console.error("Template not found");if(!Array.isArray(r.properties)||0===r.properties.length)return void console.error("Template properties array is empty or not an array");const a=r.properties.findIndex((t=>t.id===e));if(-1!==a){if(a!==t){const[e]=r.properties.splice(a,1);r.properties.splice(t,0,e),(0,o.tR)().then((()=>{(0,o.wK)()})).catch((e=>{console.error("Failed to save template settings:",e)}))}}else console.error("Property not found")}(t,e):"vault-list"===n.id&&function(e){if(!a)return;const t=parseInt(a.dataset.index||"-1");if(-1!==t&&t!==e){const[n]=r.Sz.vaults.splice(t,1);r.Sz.vaults.splice(e,0,n),(0,r.zv)(),(0,r.Yb)()}}(e),a.classList.remove("dragging")}a=null}function d(){a&&a.classList.remove("dragging"),a=null}},633:(e,t,n)=>{function o(e){return e.replace(/"/g,'\\"').replace(/\n/g,"\\n")}function r(e){return e.replace(/\\"/g,'"').replace(/\\n/g,"\n")}n.d(t,{MG:()=>r,PI:()=>o})}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(783);