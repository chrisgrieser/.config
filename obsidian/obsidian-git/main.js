/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository (https://github.com/denolehov/obsidian-git)
*/

var FM=Object.create;var Tl=Object.defineProperty;var OM=Object.getOwnPropertyDescriptor;var MM=Object.getOwnPropertyNames;var DM=Object.getPrototypeOf,LM=Object.prototype.hasOwnProperty;var Yy=t=>{throw TypeError(t)};var NM=(t,e,r)=>e in t?Tl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var BM=(t,e)=>()=>(t&&(e=t(t=0)),e);var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),HM=(t,e)=>{for(var r in e)Tl(t,r,{get:e[r],enumerable:!0})},Xy=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of MM(e))!LM.call(t,i)&&i!==r&&Tl(t,i,{get:()=>e[i],enumerable:!(n=OM(e,i))||n.enumerable});return t};var Ft=(t,e,r)=>(r=t!=null?FM(DM(t)):{},Xy(e||!t||!t.__esModule?Tl(r,"default",{value:t,enumerable:!0}):r,t)),UM=t=>Xy(Tl({},"__esModule",{value:!0}),t);var vt=(t,e,r)=>NM(t,typeof e!="symbol"?e+"":e,r),Hp=(t,e,r)=>e.has(t)||Yy("Cannot "+r);var le=(t,e,r)=>(Hp(t,e,"read from private field"),r?r.call(t):e.get(t)),wt=(t,e,r)=>e.has(t)?Yy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ot=(t,e,r,n)=>(Hp(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),vi=(t,e,r)=>(Hp(t,e,"access private method"),r);var Jy=I(Gu=>{"use strict";p();Gu.byteLength=GM;Gu.toByteArray=zM;Gu.fromByteArray=YM;var Dn=[],Wr=[],jM=typeof Uint8Array!="undefined"?Uint8Array:Array,Up="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(La=0,Zy=Up.length;La<Zy;++La)Dn[La]=Up[La],Wr[Up.charCodeAt(La)]=La;var La,Zy;Wr[45]=62;Wr[95]=63;function Ky(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function GM(t){var e=Ky(t),r=e[0],n=e[1];return(r+n)*3/4-n}function qM(t,e,r){return(e+r)*3/4-r}function zM(t){var e,r=Ky(t),n=r[0],i=r[1],a=new jM(qM(t,n,i)),s=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=Wr[t.charCodeAt(l)]<<18|Wr[t.charCodeAt(l+1)]<<12|Wr[t.charCodeAt(l+2)]<<6|Wr[t.charCodeAt(l+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=Wr[t.charCodeAt(l)]<<2|Wr[t.charCodeAt(l+1)]>>4,a[s++]=e&255),i===1&&(e=Wr[t.charCodeAt(l)]<<10|Wr[t.charCodeAt(l+1)]<<4|Wr[t.charCodeAt(l+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function VM(t){return Dn[t>>18&63]+Dn[t>>12&63]+Dn[t>>6&63]+Dn[t&63]}function WM(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(VM(n));return i.join("")}function YM(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(WM(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(Dn[e>>2]+Dn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Dn[e>>10]+Dn[e>>4&63]+Dn[e<<2&63]+"=")),i.join("")}});var Qy=I(jp=>{p();jp.read=function(t,e,r,n,i){var a,s,o=i*8-n-1,l=(1<<o)-1,c=l>>1,u=-7,f=r?i-1:0,d=r?-1:1,h=t[e+f];for(f+=d,a=h&(1<<-u)-1,h>>=-u,u+=o;u>0;a=a*256+t[e+f],f+=d,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=s*256+t[e+f],f+=d,u-=8);if(a===0)a=1-c;else{if(a===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-c}return(h?-1:1)*s*Math.pow(2,a-n)};jp.write=function(t,e,r,n,i,a){var s,o,l,c=a*8-i-1,u=(1<<c)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,m=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=d/l:e+=d*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=u?(o=0,s=u):s+f>=1?(o=(e*l-1)*Math.pow(2,i),s=s+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+h]=o&255,h+=m,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;t[r+h]=s&255,h+=m,s/=256,c-=8);t[r+h-m]|=g*128}});var Kp=I(Vs=>{"use strict";p();var Gp=Jy(),qs=Qy(),eb=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Vs.Buffer=$;Vs.SlowBuffer=eD;Vs.INSPECT_MAX_BYTES=50;var qu=2147483647;Vs.kMaxLength=qu;$.TYPED_ARRAY_SUPPORT=XM();!$.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function XM(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty($.prototype,"parent",{enumerable:!0,get:function(){if($.isBuffer(this))return this.buffer}});Object.defineProperty($.prototype,"offset",{enumerable:!0,get:function(){if($.isBuffer(this))return this.byteOffset}});function wi(t){if(t>qu)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,$.prototype),e}function $(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Wp(t)}return ib(t,e,r)}$.poolSize=8192;function ib(t,e,r){if(typeof t=="string")return KM(t,e);if(ArrayBuffer.isView(t))return JM(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ln(t,ArrayBuffer)||t&&Ln(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Ln(t,SharedArrayBuffer)||t&&Ln(t.buffer,SharedArrayBuffer)))return zp(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return $.from(n,e,r);let i=QM(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return $.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}$.from=function(t,e,r){return ib(t,e,r)};Object.setPrototypeOf($.prototype,Uint8Array.prototype);Object.setPrototypeOf($,Uint8Array);function ab(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function ZM(t,e,r){return ab(t),t<=0?wi(t):e!==void 0?typeof r=="string"?wi(t).fill(e,r):wi(t).fill(e):wi(t)}$.alloc=function(t,e,r){return ZM(t,e,r)};function Wp(t){return ab(t),wi(t<0?0:Yp(t)|0)}$.allocUnsafe=function(t){return Wp(t)};$.allocUnsafeSlow=function(t){return Wp(t)};function KM(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!$.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=sb(t,e)|0,n=wi(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function qp(t){let e=t.length<0?0:Yp(t.length)|0,r=wi(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function JM(t){if(Ln(t,Uint8Array)){let e=new Uint8Array(t);return zp(e.buffer,e.byteOffset,e.byteLength)}return qp(t)}function zp(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,$.prototype),n}function QM(t){if($.isBuffer(t)){let e=Yp(t.length)|0,r=wi(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Zp(t.length)?wi(0):qp(t);if(t.type==="Buffer"&&Array.isArray(t.data))return qp(t.data)}function Yp(t){if(t>=qu)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+qu.toString(16)+" bytes");return t|0}function eD(t){return+t!=t&&(t=0),$.alloc(+t)}$.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==$.prototype};$.compare=function(e,r){if(Ln(e,Uint8Array)&&(e=$.from(e,e.offset,e.byteLength)),Ln(r,Uint8Array)&&(r=$.from(r,r.offset,r.byteLength)),!$.isBuffer(e)||!$.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let a=0,s=Math.min(n,i);a<s;++a)if(e[a]!==r[a]){n=e[a],i=r[a];break}return n<i?-1:i<n?1:0};$.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};$.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return $.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=$.allocUnsafe(r),a=0;for(n=0;n<e.length;++n){let s=e[n];if(Ln(s,Uint8Array))a+s.length>i.length?($.isBuffer(s)||(s=$.from(s)),s.copy(i,a)):Uint8Array.prototype.set.call(i,s,a);else if($.isBuffer(s))s.copy(i,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return i};function sb(t,e){if($.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ln(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Vp(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return mb(t).length;default:if(i)return n?-1:Vp(t).length;e=(""+e).toLowerCase(),i=!0}}$.byteLength=sb;function tD(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return fD(this,e,r);case"utf8":case"utf-8":return lb(this,e,r);case"ascii":return cD(this,e,r);case"latin1":case"binary":return uD(this,e,r);case"base64":return oD(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dD(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}$.prototype._isBuffer=!0;function Na(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}$.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Na(this,r,r+1);return this};$.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Na(this,r,r+3),Na(this,r+1,r+2);return this};$.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Na(this,r,r+7),Na(this,r+1,r+6),Na(this,r+2,r+5),Na(this,r+3,r+4);return this};$.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?lb(this,0,e):tD.apply(this,arguments)};$.prototype.toLocaleString=$.prototype.toString;$.prototype.equals=function(e){if(!$.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:$.compare(this,e)===0};$.prototype.inspect=function(){let e="",r=Vs.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};eb&&($.prototype[eb]=$.prototype.inspect);$.prototype.compare=function(e,r,n,i,a){if(Ln(e,Uint8Array)&&(e=$.from(e,e.offset,e.byteLength)),!$.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),r<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===e)return 0;let s=a-i,o=n-r,l=Math.min(s,o),c=this.slice(i,a),u=e.slice(r,n);for(let f=0;f<l;++f)if(c[f]!==u[f]){s=c[f],o=u[f];break}return s<o?-1:o<s?1:0};function ob(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Zp(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=$.from(e,n)),$.isBuffer(e))return e.length===0?-1:tb(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):tb(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function tb(t,e,r,n,i){let a=1,s=t.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,s/=2,o/=2,r/=2}function l(u,f){return a===1?u[f]:u.readUInt16BE(f*a)}let c;if(i){let u=-1;for(c=r;c<s;c++)if(l(t,c)===l(e,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===o)return u*a}else u!==-1&&(c-=c-u),u=-1}else for(r+o>s&&(r=s-o),c=r;c>=0;c--){let u=!0;for(let f=0;f<o;f++)if(l(t,c+f)!==l(e,f)){u=!1;break}if(u)return c}return-1}$.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};$.prototype.indexOf=function(e,r,n){return ob(this,e,r,n,!0)};$.prototype.lastIndexOf=function(e,r,n){return ob(this,e,r,n,!1)};function rD(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let a=e.length;n>a/2&&(n=a/2);let s;for(s=0;s<n;++s){let o=parseInt(e.substr(s*2,2),16);if(Zp(o))return s;t[r+s]=o}return s}function nD(t,e,r,n){return zu(Vp(e,t.length-r),t,r,n)}function iD(t,e,r,n){return zu(gD(e),t,r,n)}function aD(t,e,r,n){return zu(mb(e),t,r,n)}function sD(t,e,r,n){return zu(vD(e,t.length-r),t,r,n)}$.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return rD(this,e,r,n);case"utf8":case"utf-8":return nD(this,e,r,n);case"ascii":case"latin1":case"binary":return iD(this,e,r,n);case"base64":return aD(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sD(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};$.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function oD(t,e,r){return e===0&&r===t.length?Gp.fromByteArray(t):Gp.fromByteArray(t.slice(e,r))}function lb(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let a=t[i],s=null,o=a>239?4:a>223?3:a>191?2:1;if(i+o<=r){let l,c,u,f;switch(o){case 1:a<128&&(s=a);break;case 2:l=t[i+1],(l&192)===128&&(f=(a&31)<<6|l&63,f>127&&(s=f));break;case 3:l=t[i+1],c=t[i+2],(l&192)===128&&(c&192)===128&&(f=(a&15)<<12|(l&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:l=t[i+1],c=t[i+2],u=t[i+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(f=(a&15)<<18|(l&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=o}return lD(n)}var rb=4096;function lD(t){let e=t.length;if(e<=rb)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=rb));return r}function cD(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function uD(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function fD(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let a=e;a<r;++a)i+=wD[t[a]];return i}function dD(t,e,r){let n=t.slice(e,r),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}$.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,$.prototype),i};function bt(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}$.prototype.readUintLE=$.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||bt(e,r,this.length);let i=this[e],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[e+s]*a;return i};$.prototype.readUintBE=$.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||bt(e,r,this.length);let i=this[e+--r],a=1;for(;r>0&&(a*=256);)i+=this[e+--r]*a;return i};$.prototype.readUint8=$.prototype.readUInt8=function(e,r){return e=e>>>0,r||bt(e,1,this.length),this[e]};$.prototype.readUint16LE=$.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||bt(e,2,this.length),this[e]|this[e+1]<<8};$.prototype.readUint16BE=$.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||bt(e,2,this.length),this[e]<<8|this[e+1]};$.prototype.readUint32LE=$.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||bt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};$.prototype.readUint32BE=$.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||bt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};$.prototype.readBigUInt64LE=Zi(function(e){e=e>>>0,zs(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cl(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(a)<<BigInt(32))});$.prototype.readBigUInt64BE=Zi(function(e){e=e>>>0,zs(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cl(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(a)});$.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||bt(e,r,this.length);let i=this[e],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[e+s]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*r)),i};$.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||bt(e,r,this.length);let i=r,a=1,s=this[e+--i];for(;i>0&&(a*=256);)s+=this[e+--i]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s};$.prototype.readInt8=function(e,r){return e=e>>>0,r||bt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};$.prototype.readInt16LE=function(e,r){e=e>>>0,r||bt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};$.prototype.readInt16BE=function(e,r){e=e>>>0,r||bt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};$.prototype.readInt32LE=function(e,r){return e=e>>>0,r||bt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};$.prototype.readInt32BE=function(e,r){return e=e>>>0,r||bt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};$.prototype.readBigInt64LE=Zi(function(e){e=e>>>0,zs(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cl(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});$.prototype.readBigInt64BE=Zi(function(e){e=e>>>0,zs(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Cl(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});$.prototype.readFloatLE=function(e,r){return e=e>>>0,r||bt(e,4,this.length),qs.read(this,e,!0,23,4)};$.prototype.readFloatBE=function(e,r){return e=e>>>0,r||bt(e,4,this.length),qs.read(this,e,!1,23,4)};$.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||bt(e,8,this.length),qs.read(this,e,!0,52,8)};$.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||bt(e,8,this.length),qs.read(this,e,!1,52,8)};function ur(t,e,r,n,i,a){if(!$.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}$.prototype.writeUintLE=$.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let o=Math.pow(2,8*n)-1;ur(this,e,r,n,o,0)}let a=1,s=0;for(this[r]=e&255;++s<n&&(a*=256);)this[r+s]=e/a&255;return r+n};$.prototype.writeUintBE=$.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let o=Math.pow(2,8*n)-1;ur(this,e,r,n,o,0)}let a=n-1,s=1;for(this[r+a]=e&255;--a>=0&&(s*=256);)this[r+a]=e/s&255;return r+n};$.prototype.writeUint8=$.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,1,255,0),this[r]=e&255,r+1};$.prototype.writeUint16LE=$.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};$.prototype.writeUint16BE=$.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};$.prototype.writeUint32LE=$.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};$.prototype.writeUint32BE=$.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function cb(t,e,r,n,i){pb(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function ub(t,e,r,n,i){pb(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}$.prototype.writeBigUInt64LE=Zi(function(e,r=0){return cb(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});$.prototype.writeBigUInt64BE=Zi(function(e,r=0){return ub(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});$.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);ur(this,e,r,n,l-1,-l)}let a=0,s=1,o=0;for(this[r]=e&255;++a<n&&(s*=256);)e<0&&o===0&&this[r+a-1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+n};$.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);ur(this,e,r,n,l-1,-l)}let a=n-1,s=1,o=0;for(this[r+a]=e&255;--a>=0&&(s*=256);)e<0&&o===0&&this[r+a+1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+n};$.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};$.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};$.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};$.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};$.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ur(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};$.prototype.writeBigInt64LE=Zi(function(e,r=0){return cb(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});$.prototype.writeBigInt64BE=Zi(function(e,r=0){return ub(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fb(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function db(t,e,r,n,i){return e=+e,r=r>>>0,i||fb(t,e,r,4,34028234663852886e22,-34028234663852886e22),qs.write(t,e,r,n,23,4),r+4}$.prototype.writeFloatLE=function(e,r,n){return db(this,e,r,!0,n)};$.prototype.writeFloatBE=function(e,r,n){return db(this,e,r,!1,n)};function hb(t,e,r,n,i){return e=+e,r=r>>>0,i||fb(t,e,r,8,17976931348623157e292,-17976931348623157e292),qs.write(t,e,r,n,52,8),r+8}$.prototype.writeDoubleLE=function(e,r,n){return hb(this,e,r,!0,n)};$.prototype.writeDoubleBE=function(e,r,n){return hb(this,e,r,!1,n)};$.prototype.copy=function(e,r,n,i){if(!$.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let a=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),a};$.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!$.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{let s=$.isBuffer(e)?e:$.from(e,i),o=s.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%o]}return this};var Gs={};function Xp(t,e,r){Gs[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Xp("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Xp("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Xp("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=nb(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=nb(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function nb(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function hD(t,e,r){zs(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Cl(e,t.length-(r+1))}function pb(t,e,r,n,i,a){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",o;throw a>3?e===0||e===BigInt(0)?o=`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:o=`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:o=`>= ${e}${s} and <= ${r}${s}`,new Gs.ERR_OUT_OF_RANGE("value",o,t)}hD(n,i,a)}function zs(t,e){if(typeof t!="number")throw new Gs.ERR_INVALID_ARG_TYPE(e,"number",t)}function Cl(t,e,r){throw Math.floor(t)!==t?(zs(t,r),new Gs.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Gs.ERR_BUFFER_OUT_OF_BOUNDS:new Gs.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var pD=/[^+/0-9A-Za-z-_]/g;function mD(t){if(t=t.split("=")[0],t=t.trim().replace(pD,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Vp(t,e){e=e||1/0;let r,n=t.length,i=null,a=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function gD(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function vD(t,e){let r,n,i,a=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function mb(t){return Gp.toByteArray(mD(t))}function zu(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Ln(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Zp(t){return t!==t}var wD=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Zi(t){return typeof BigInt=="undefined"?yD:t}function yD(){throw new Error("BigInt not supported")}});var gb,Jp,Buffer,p=BM(()=>{gb=require("obsidian");gb.Platform.isMobileApp?Jp=Kp().Buffer:Jp=global.Buffer;Buffer=Jp});var wb=I((_9,vb)=>{"use strict";p();var Pr=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof process=="undefined"||typeof process.domain=="undefined")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||Pr.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||Pr.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||Pr.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=Pr.DEFAULT_MAX_PENDING};Pr.DEFAULT_TIMEOUT=0;Pr.DEFAULT_MAX_OCCUPATION_TIME=0;Pr.DEFAULT_MAX_EXECUTION_TIME=0;Pr.DEFAULT_MAX_PENDING=1e3;Pr.prototype.acquire=function(t,e,r,n){if(Array.isArray(t))return this._acquireBatch(t,e,r,n);if(typeof e!="function")throw new Error("You must pass a function to execute");var i=null,a=null,s=null;typeof r!="function"&&(n=r,r=null,s=new this.Promise(function(b,S){i=b,a=S})),n=n||{};var o=!1,l=null,c=null,u=null,f=this,d=function(b,S,E){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),b&&(f.queues[t]&&f.queues[t].length===0&&delete f.queues[t],f.domainReentrant&&delete f.domains[t]),o||(s?S?a(S):i(E):typeof r=="function"&&r(S,E),o=!0),b&&f.queues[t]&&f.queues[t].length>0&&f.queues[t].shift()()},h=function(b){if(o)return d(b);l&&(clearTimeout(l),l=null),f.domainReentrant&&b&&(f.domains[t]=process.domain);var S=n.maxExecutionTime||f.maxExecutionTime;if(S&&(u=setTimeout(function(){f.queues[t]&&d(b,new Error("Maximum execution time is exceeded "+t))},S)),e.length===1){var E=!1;try{e(function(k,A){E||(E=!0,d(b,k,A))})}catch(k){E||(E=!0,d(b,k))}}else f._promiseTry(function(){return e()}).then(function(k){d(b,void 0,k)},function(k){d(b,k)})};f.domainReentrant&&process.domain&&(h=process.domain.bind(h));var m=n.maxPending||f.maxPending;if(!f.queues[t])f.queues[t]=[],h(!0);else if(f.domainReentrant&&process.domain&&process.domain===f.domains[t])h(!1);else if(f.queues[t].length>=m)d(!1,new Error("Too many pending tasks in queue "+t));else{var g=function(){h(!0)};n.skipQueue?f.queues[t].unshift(g):f.queues[t].push(g);var v=n.timeout||f.timeout;v&&(l=setTimeout(function(){l=null,d(!1,new Error("async-lock timed out in queue "+t))},v))}var w=n.maxOccupationTime||f.maxOccupationTime;if(w&&(c=setTimeout(function(){f.queues[t]&&d(!1,new Error("Maximum occupation time is exceeded in queue "+t))},w)),s)return s};Pr.prototype._acquireBatch=function(t,e,r,n){typeof r!="function"&&(n=r,r=null);var i=this,a=function(o,l){return function(c){i.acquire(o,l,c,n)}},s=t.reduceRight(function(o,l){return a(l,o)},e);if(typeof r=="function")s(r);else return new this.Promise(function(o,l){s.length===1?s(function(c,u){c?l(c):o(u)}):o(s())})};Pr.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};Pr.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};vb.exports=Pr});var bb=I((S9,yb)=>{"use strict";p();yb.exports=wb()});var _b=I((k9,Qp)=>{p();typeof Object.create=="function"?Qp.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Qp.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Wu=I((em,Sb)=>{p();var Vu=Kp(),Nn=Vu.Buffer;function xb(t,e){for(var r in t)e[r]=t[r]}Nn.from&&Nn.alloc&&Nn.allocUnsafe&&Nn.allocUnsafeSlow?Sb.exports=Vu:(xb(Vu,em),em.Buffer=Ba);function Ba(t,e,r){return Nn(t,e,r)}Ba.prototype=Object.create(Nn.prototype);xb(Nn,Ba);Ba.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Nn(t,e,r)};Ba.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Nn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Ba.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Nn(t)};Ba.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Vu.SlowBuffer(t)}});var Yu=I((C9,Eb)=>{p();var bD={}.toString;Eb.exports=Array.isArray||function(t){return bD.call(t)=="[object Array]"}});var fr=I((R9,kb)=>{"use strict";p();kb.exports=TypeError});var Xu=I(($9,Ab)=>{"use strict";p();Ab.exports=Object});var tm=I((O9,Tb)=>{"use strict";p();Tb.exports=Error});var Pb=I((D9,Cb)=>{"use strict";p();Cb.exports=EvalError});var Ib=I((N9,Rb)=>{"use strict";p();Rb.exports=RangeError});var Fb=I((H9,$b)=>{"use strict";p();$b.exports=ReferenceError});var Zu=I((j9,Ob)=>{"use strict";p();Ob.exports=SyntaxError});var Db=I((q9,Mb)=>{"use strict";p();Mb.exports=URIError});var Nb=I((V9,Lb)=>{"use strict";p();Lb.exports=Math.abs});var Hb=I((Y9,Bb)=>{"use strict";p();Bb.exports=Math.floor});var jb=I((Z9,Ub)=>{"use strict";p();Ub.exports=Math.max});var qb=I((J9,Gb)=>{"use strict";p();Gb.exports=Math.min});var Vb=I((e7,zb)=>{"use strict";p();zb.exports=Math.pow});var Yb=I((r7,Wb)=>{"use strict";p();Wb.exports=Math.round});var Zb=I((i7,Xb)=>{"use strict";p();Xb.exports=Number.isNaN||function(e){return e!==e}});var Jb=I((s7,Kb)=>{"use strict";p();var _D=Zb();Kb.exports=function(e){return _D(e)||e===0?e:e<0?-1:1}});var e_=I((l7,Qb)=>{"use strict";p();Qb.exports=Object.getOwnPropertyDescriptor});var Ki=I((u7,t_)=>{"use strict";p();var Ku=e_();if(Ku)try{Ku([],"length")}catch(t){Ku=null}t_.exports=Ku});var Pl=I((d7,r_)=>{"use strict";p();var Ju=Object.defineProperty||!1;if(Ju)try{Ju({},"a",{value:1})}catch(t){Ju=!1}r_.exports=Ju});var Rl=I((p7,n_)=>{"use strict";p();n_.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var Qu=I((g7,a_)=>{"use strict";p();var i_=typeof Symbol!="undefined"&&Symbol,xD=Rl();a_.exports=function(){return typeof i_!="function"||typeof Symbol!="function"||typeof i_("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:xD()}});var rm=I((w7,s_)=>{"use strict";p();s_.exports=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null});var nm=I((b7,o_)=>{"use strict";p();var SD=Xu();o_.exports=SD.getPrototypeOf||null});var u_=I((x7,c_)=>{"use strict";p();var ED="Function.prototype.bind called on incompatible ",kD=Object.prototype.toString,AD=Math.max,TD="[object Function]",l_=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},CD=function(e,r){for(var n=[],i=r||0,a=0;i<e.length;i+=1,a+=1)n[a]=e[i];return n},PD=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};c_.exports=function(e){var r=this;if(typeof r!="function"||kD.apply(r)!==TD)throw new TypeError(ED+r);for(var n=CD(arguments,1),i,a=function(){if(this instanceof i){var u=r.apply(this,l_(n,arguments));return Object(u)===u?u:this}return r.apply(e,l_(n,arguments))},s=AD(0,r.length-n.length),o=[],l=0;l<s;l++)o[l]="$"+l;if(i=Function("binder","return function ("+PD(o,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var Ws=I((E7,f_)=>{"use strict";p();var RD=u_();f_.exports=Function.prototype.bind||RD});var ef=I((A7,d_)=>{"use strict";p();d_.exports=Function.prototype.call});var tf=I((C7,h_)=>{"use strict";p();h_.exports=Function.prototype.apply});var m_=I((R7,p_)=>{"use strict";p();p_.exports=typeof Reflect!="undefined"&&Reflect&&Reflect.apply});var im=I(($7,g_)=>{"use strict";p();var ID=Ws(),$D=tf(),FD=ef(),OD=m_();g_.exports=OD||ID.call(FD,$D)});var rf=I((O7,v_)=>{"use strict";p();var MD=Ws(),DD=fr(),LD=ef(),ND=im();v_.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new DD("a function is required");return ND(MD,LD,e)}});var S_=I((D7,x_)=>{"use strict";p();var BD=rf(),w_=Ki(),b_;try{b_=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var am=!!b_&&w_&&w_(Object.prototype,"__proto__"),__=Object,y_=__.getPrototypeOf;x_.exports=am&&typeof am.get=="function"?BD([am.get]):typeof y_=="function"?function(e){return y_(e==null?e:__(e))}:!1});var nf=I((N7,T_)=>{"use strict";p();var E_=rm(),k_=nm(),A_=S_();T_.exports=E_?function(e){return E_(e)}:k_?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return k_(e)}:A_?function(e){return A_(e)}:null});var af=I((H7,C_)=>{"use strict";p();var HD=Function.prototype.call,UD=Object.prototype.hasOwnProperty,jD=Ws();C_.exports=jD.call(HD,UD)});var Bn=I((j7,O_)=>{"use strict";p();var be,GD=Xu(),qD=tm(),zD=Pb(),VD=Ib(),WD=Fb(),Ks=Zu(),Zs=fr(),YD=Db(),XD=Nb(),ZD=Hb(),KD=jb(),JD=qb(),QD=Vb(),eL=Yb(),tL=Jb(),$_=Function,sm=function(t){try{return $_('"use strict"; return ('+t+").constructor;")()}catch(e){}},Il=Ki(),rL=Pl(),om=function(){throw new Zs},nL=Il?function(){try{return arguments.callee,om}catch(t){try{return Il(arguments,"callee").get}catch(e){return om}}}():om,Ys=Qu()(),_t=nf(),iL=nm(),aL=rm(),F_=tf(),$l=ef(),Xs={},sL=typeof Uint8Array=="undefined"||!_t?be:_t(Uint8Array),Ha={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?be:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?be:ArrayBuffer,"%ArrayIteratorPrototype%":Ys&&_t?_t([][Symbol.iterator]()):be,"%AsyncFromSyncIteratorPrototype%":be,"%AsyncFunction%":Xs,"%AsyncGenerator%":Xs,"%AsyncGeneratorFunction%":Xs,"%AsyncIteratorPrototype%":Xs,"%Atomics%":typeof Atomics=="undefined"?be:Atomics,"%BigInt%":typeof BigInt=="undefined"?be:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?be:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?be:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?be:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":qD,"%eval%":eval,"%EvalError%":zD,"%Float16Array%":typeof Float16Array=="undefined"?be:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?be:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?be:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?be:FinalizationRegistry,"%Function%":$_,"%GeneratorFunction%":Xs,"%Int8Array%":typeof Int8Array=="undefined"?be:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?be:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?be:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ys&&_t?_t(_t([][Symbol.iterator]())):be,"%JSON%":typeof JSON=="object"?JSON:be,"%Map%":typeof Map=="undefined"?be:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Ys||!_t?be:_t(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":GD,"%Object.getOwnPropertyDescriptor%":Il,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?be:Promise,"%Proxy%":typeof Proxy=="undefined"?be:Proxy,"%RangeError%":VD,"%ReferenceError%":WD,"%Reflect%":typeof Reflect=="undefined"?be:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?be:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Ys||!_t?be:_t(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?be:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ys&&_t?_t(""[Symbol.iterator]()):be,"%Symbol%":Ys?Symbol:be,"%SyntaxError%":Ks,"%ThrowTypeError%":nL,"%TypedArray%":sL,"%TypeError%":Zs,"%Uint8Array%":typeof Uint8Array=="undefined"?be:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?be:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?be:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?be:Uint32Array,"%URIError%":YD,"%WeakMap%":typeof WeakMap=="undefined"?be:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?be:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?be:WeakSet,"%Function.prototype.call%":$l,"%Function.prototype.apply%":F_,"%Object.defineProperty%":rL,"%Object.getPrototypeOf%":iL,"%Math.abs%":XD,"%Math.floor%":ZD,"%Math.max%":KD,"%Math.min%":JD,"%Math.pow%":QD,"%Math.round%":eL,"%Math.sign%":tL,"%Reflect.getPrototypeOf%":aL};if(_t)try{null.error}catch(t){P_=_t(_t(t)),Ha["%Error.prototype%"]=P_}var P_,oL=function t(e){var r;if(e==="%AsyncFunction%")r=sm("async function () {}");else if(e==="%GeneratorFunction%")r=sm("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=sm("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_t&&(r=_t(i.prototype))}return Ha[e]=r,r},R_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Fl=Ws(),sf=af(),lL=Fl.call($l,Array.prototype.concat),cL=Fl.call(F_,Array.prototype.splice),I_=Fl.call($l,String.prototype.replace),of=Fl.call($l,String.prototype.slice),uL=Fl.call($l,RegExp.prototype.exec),fL=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,dL=/\\(\\)?/g,hL=function(e){var r=of(e,0,1),n=of(e,-1);if(r==="%"&&n!=="%")throw new Ks("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ks("invalid intrinsic syntax, expected opening `%`");var i=[];return I_(e,fL,function(a,s,o,l){i[i.length]=o?I_(l,dL,"$1"):s||a}),i},pL=function(e,r){var n=e,i;if(sf(R_,n)&&(i=R_[n],n="%"+i[0]+"%"),sf(Ha,n)){var a=Ha[n];if(a===Xs&&(a=oL(n)),typeof a=="undefined"&&!r)throw new Zs("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new Ks("intrinsic "+e+" does not exist!")};O_.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Zs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Zs('"allowMissing" argument must be a boolean');if(uL(/^%?[^%]*%?$/,e)===null)throw new Ks("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=hL(e),i=n.length>0?n[0]:"",a=pL("%"+i+"%",r),s=a.name,o=a.value,l=!1,c=a.alias;c&&(i=c[0],cL(n,lL([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var d=n[u],h=of(d,0,1),m=of(d,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Ks("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(l=!0),i+="."+d,s="%"+i+"%",sf(Ha,s))o=Ha[s];else if(o!=null){if(!(d in o)){if(!r)throw new Zs("base intrinsic for "+e+" exists, but the property is not available.");return}if(Il&&u+1>=n.length){var g=Il(o,d);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?o=g.get:o=o[d]}else f=sf(o,d),o=o[d];f&&!l&&(Ha[s]=o)}}return o}});var xt=I((q7,L_)=>{"use strict";p();var M_=Bn(),D_=rf(),mL=D_([M_("%String.prototype.indexOf%")]);L_.exports=function(e,r){var n=M_(e,!!r);return typeof n=="function"&&mL(e,".prototype.")>-1?D_([n]):n}});var U_=I((V7,H_)=>{"use strict";p();var B_=Function.prototype.toString,Js=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,cm,lf;if(typeof Js=="function"&&typeof Object.defineProperty=="function")try{cm=Object.defineProperty({},"length",{get:function(){throw lf}}),lf={},Js(function(){throw 42},null,cm)}catch(t){t!==lf&&(Js=null)}else Js=null;var gL=/^\s*class\b/,um=function(e){try{var r=B_.call(e);return gL.test(r)}catch(n){return!1}},lm=function(e){try{return um(e)?!1:(B_.call(e),!0)}catch(r){return!1}},cf=Object.prototype.toString,vL="[object Object]",wL="[object Function]",yL="[object GeneratorFunction]",bL="[object HTMLAllCollection]",_L="[object HTML document.all class]",xL="[object HTMLCollection]",SL=typeof Symbol=="function"&&!!Symbol.toStringTag,EL=!(0 in[,]),fm=function(){return!1};typeof document=="object"&&(N_=document.all,cf.call(N_)===cf.call(document.all)&&(fm=function(e){if((EL||!e)&&(typeof e=="undefined"||typeof e=="object"))try{var r=cf.call(e);return(r===bL||r===_L||r===xL||r===vL)&&e("")==null}catch(n){}return!1}));var N_;H_.exports=Js?function(e){if(fm(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Js(e,null,cm)}catch(r){if(r!==lf)return!1}return!um(e)&&lm(e)}:function(e){if(fm(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(SL)return lm(e);if(um(e))return!1;var r=cf.call(e);return r!==wL&&r!==yL&&!/^\[object HTML/.test(r)?!1:lm(e)}});var q_=I((Y7,G_)=>{"use strict";p();var kL=U_(),AL=Object.prototype.toString,j_=Object.prototype.hasOwnProperty,TL=function(e,r,n){for(var i=0,a=e.length;i<a;i++)j_.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},CL=function(e,r,n){for(var i=0,a=e.length;i<a;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},PL=function(e,r,n){for(var i in e)j_.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))};function RL(t){return AL.call(t)==="[object Array]"}G_.exports=function(e,r,n){if(!kL(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),RL(e)?TL(e,r,i):typeof e=="string"?CL(e,r,i):PL(e,r,i)}});var V_=I((Z7,z_)=>{"use strict";p();z_.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var Y_=I((J7,W_)=>{"use strict";p();var dm=V_(),IL=typeof globalThis=="undefined"?global:globalThis;W_.exports=function(){for(var e=[],r=0;r<dm.length;r++)typeof IL[dm[r]]=="function"&&(e[e.length]=dm[r]);return e}});var uf=I((eY,K_)=>{"use strict";p();var X_=Pl(),$L=Zu(),Qs=fr(),Z_=Ki();K_.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Qs("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Qs("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Qs("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Qs("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Qs("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Qs("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,l=!!Z_&&Z_(e,r);if(X_)X_(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:a===null&&l?l.writable:!a});else if(o||!i&&!a&&!s)e[r]=n;else throw new $L("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var ff=I((rY,Q_)=>{"use strict";p();var hm=Pl(),J_=function(){return!!hm};J_.hasArrayLengthDefineBug=function(){if(!hm)return null;try{return hm([],"length",{value:1}).length!==1}catch(e){return!0}};Q_.exports=J_});var ix=I((iY,nx)=>{"use strict";p();var FL=Bn(),ex=uf(),OL=ff()(),tx=Ki(),rx=fr(),ML=FL("%Math.floor%");nx.exports=function(e,r){if(typeof e!="function")throw new rx("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ML(r)!==r)throw new rx("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in e&&tx){var s=tx(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(a=!1)}return(i||a||!n)&&(OL?ex(e,"length",r,!0,!0):ex(e,"length",r)),e}});var sx=I((sY,ax)=>{"use strict";p();var DL=Ws(),LL=tf(),NL=im();ax.exports=function(){return NL(DL,LL,arguments)}});var Ua=I((lY,df)=>{"use strict";p();var BL=ix(),ox=Pl(),HL=rf(),lx=sx();df.exports=function(e){var r=HL(arguments),n=e.length-(arguments.length-1);return BL(r,1+(n>0?n:0),!0)};ox?ox(df.exports,"apply",{value:lx}):df.exports.apply=lx});var Ji=I((uY,cx)=>{"use strict";p();var UL=Rl();cx.exports=function(){return UL()&&!!Symbol.toStringTag}});var vm=I((dY,hx)=>{"use strict";p();var mf=q_(),jL=Y_(),ux=Ua(),mm=xt(),pf=Ki(),hf=nf(),GL=mm("Object.prototype.toString"),dx=Ji()(),fx=typeof globalThis=="undefined"?global:globalThis,pm=jL(),gm=mm("String.prototype.slice"),qL=mm("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},gf={__proto__:null};dx&&pf&&hf?mf(pm,function(t){var e=new fx[t];if(Symbol.toStringTag in e&&hf){var r=hf(e),n=pf(r,Symbol.toStringTag);if(!n&&r){var i=hf(r);n=pf(i,Symbol.toStringTag)}gf["$"+t]=ux(n.get)}}):mf(pm,function(t){var e=new fx[t],r=e.slice||e.set;r&&(gf["$"+t]=ux(r))});var zL=function(e){var r=!1;return mf(gf,function(n,i){if(!r)try{"$"+n(e)===i&&(r=gm(i,1))}catch(a){}}),r},VL=function(e){var r=!1;return mf(gf,function(n,i){if(!r)try{n(e),r=gm(i,1)}catch(a){}}),r};hx.exports=function(e){if(!e||typeof e!="object")return!1;if(!dx){var r=gm(GL(e),8,-1);return qL(pm,r)>-1?r:r!=="Object"?!1:VL(e)}return pf?zL(e):null}});var mx=I((pY,px)=>{"use strict";p();var WL=vm();px.exports=function(e){return!!WL(e)}});var vx=I((gY,gx)=>{"use strict";p();var YL=fr(),XL=xt(),ZL=XL("TypedArray.prototype.buffer",!0),KL=mx();gx.exports=ZL||function(e){if(!KL(e))throw new YL("Not a Typed Array");return e.buffer}});var bx=I((wY,yx)=>{"use strict";p();var Hn=Wu().Buffer,JL=Yu(),QL=vx(),eN=ArrayBuffer.isView||function(e){try{return QL(e),!0}catch(r){return!1}},tN=typeof Uint8Array!="undefined",wx=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",rN=wx&&(Hn.prototype instanceof Uint8Array||Hn.TYPED_ARRAY_SUPPORT);yx.exports=function(e,r){if(e instanceof Hn)return e;if(typeof e=="string")return Hn.from(e,r);if(wx&&eN(e)){if(e.byteLength===0)return Hn.alloc(0);if(rN){var n=Hn.from(e.buffer,e.byteOffset,e.byteLength);if(n.byteLength===e.byteLength)return n}var i=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=Hn.from(i);if(a.length===e.byteLength)return a}if(tN&&e instanceof Uint8Array)return Hn.from(e);var s=JL(e);if(s)for(var o=0;o<e.length;o+=1){var l=e[o];if(typeof l!="number"||l<0||l>255||~~l!==l)throw new RangeError("Array items must be numbers in the range 0-255.")}if(s||Hn.isBuffer(e)&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))return Hn.from(e);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}});var xx=I((bY,_x)=>{"use strict";p();var nN=Wu().Buffer,iN=bx();function vf(t,e){this._block=nN.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}vf.prototype.update=function(t,e){t=iN(t,e||"utf8");for(var r=this._block,n=this._blockSize,i=t.length,a=this._len,s=0;s<i;){for(var o=a%n,l=Math.min(i-s,n-o),c=0;c<l;c++)r[o+c]=t[s+c];a+=l,s+=l,a%n===0&&this._update(r)}return this._len+=i,this};vf.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a};vf.prototype._update=function(){throw new Error("_update must be implemented by subclass")};_x.exports=vf});var kx=I((xY,Ex)=>{"use strict";p();var aN=_b(),Sx=xx(),sN=Wu().Buffer,oN=[1518500249,1859775393,-1894007588,-899497514],lN=new Array(80);function Ol(){this.init(),this._w=lN,Sx.call(this,64,56)}aN(Ol,Sx);Ol.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function cN(t){return t<<1|t>>>31}function uN(t){return t<<5|t>>>27}function fN(t){return t<<30|t>>>2}function dN(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Ol.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,s=this._e|0,o=0;o<16;++o)e[o]=t.readInt32BE(o*4);for(;o<80;++o)e[o]=cN(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=uN(r)+dN(c,n,i,a)+s+e[l]+oN[c]|0;s=a,a=i,i=fN(n),n=r,r=u}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0};Ol.prototype._hash=function(){var t=sN.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};Ex.exports=Ol});var Cx=I((EY,Tx)=>{"use strict";p();function Un(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Ax(t,e){for(var r="",n=0,i=-1,a=0,s,o=0;o<=t.length;++o){if(o<t.length)s=t.charCodeAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,a=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=o,a=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,o):r=t.slice(i+1,o),n=o-i-1;i=o,a=0}else s===46&&a!==-1?++a:a=-1}return r}function hN(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var eo={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var a;i>=0?a=arguments[i]:(n===void 0&&(n=process.cwd()),a=n),Un(a),a.length!==0&&(e=a+"/"+e,r=a.charCodeAt(0)===47)}return e=Ax(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Un(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Ax(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return Un(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];Un(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":eo.normalize(e)},relative:function(e,r){if(Un(e),Un(r),e===r||(e=eo.resolve(e),r=eo.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,a=i-n,s=1;s<r.length&&r.charCodeAt(s)===47;++s);for(var o=r.length,l=o-s,c=a<l?a:l,u=-1,f=0;f<=c;++f){if(f===c){if(l>c){if(r.charCodeAt(s+f)===47)return r.slice(s+f+1);if(f===0)return r.slice(s+f)}else a>c&&(e.charCodeAt(n+f)===47?u=f:f===0&&(u=0));break}var d=e.charCodeAt(n+f),h=r.charCodeAt(s+f);if(d!==h)break;d===47&&(u=f)}var m="";for(f=n+u+1;f<=i;++f)(f===i||e.charCodeAt(f)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+r.slice(s+u):(s+=u,r.charCodeAt(s)===47&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(Un(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,a=!0,s=e.length-1;s>=1;--s)if(r=e.charCodeAt(s),r===47){if(!a){i=s;break}}else a=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Un(e);var n=0,i=-1,a=!0,s;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,l=-1;for(s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(c===47){if(!a){n=s+1;break}}else l===-1&&(a=!1,l=s+1),o>=0&&(c===r.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=l))}return n===i?i=l:i===-1&&(i=e.length),e.slice(n,i)}else{for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!a){n=s+1;break}}else i===-1&&(a=!1,i=s+1);return i===-1?"":e.slice(n,i)}},extname:function(e){Un(e);for(var r=-1,n=0,i=-1,a=!0,s=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!a){n=o+1;break}continue}i===-1&&(a=!1,i=o+1),l===46?r===-1?r=o:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||i===-1||s===0||s===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return hN("/",e)},parse:function(e){Un(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,a;i?(r.root="/",a=1):a=0;for(var s=-1,o=0,l=-1,c=!0,u=e.length-1,f=0;u>=a;--u){if(n=e.charCodeAt(u),n===47){if(!c){o=u+1;break}continue}l===-1&&(c=!1,l=u+1),n===46?s===-1?s=u:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===o+1?l!==-1&&(o===0&&i?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(o,l)):(o===0&&i?(r.name=e.slice(1,s),r.base=e.slice(1,l)):(r.name=e.slice(o,s),r.base=e.slice(o,l)),r.ext=e.slice(s,l)),o>0?r.dir=e.slice(0,o-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};eo.posix=eo;Tx.exports=eo});var Rx=I(wm=>{p();var Px;(function(t){typeof DO_NOT_EXPORT_CRC=="undefined"?typeof wm=="object"?t(wm):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(Px={}):t(Px={})})(function(t){t.version="1.2.2";function e(){for(var y=0,_=new Array(256),x=0;x!=256;++x)y=x,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,_[x]=y;return typeof Int32Array!="undefined"?new Int32Array(_):_}var r=e();function n(y){var _=0,x=0,T=0,P=typeof Int32Array!="undefined"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)P[T]=y[T];for(T=0;T!=256;++T)for(x=y[T],_=256+T;_<4096;_+=256)x=P[_]=x>>>8^y[x&255];var F=[];for(T=1;T!=16;++T)F[T-1]=typeof Int32Array!="undefined"?P.subarray(T*256,T*256+256):P.slice(T*256,T*256+256);return F}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],d=i[7],h=i[8],m=i[9],g=i[10],v=i[11],w=i[12],b=i[13],S=i[14];function E(y,_){for(var x=_^-1,T=0,P=y.length;T<P;)x=x>>>8^r[(x^y.charCodeAt(T++))&255];return~x}function k(y,_){for(var x=_^-1,T=y.length-15,P=0;P<T;)x=S[y[P++]^x&255]^b[y[P++]^x>>8&255]^w[y[P++]^x>>16&255]^v[y[P++]^x>>>24]^g[y[P++]]^m[y[P++]]^h[y[P++]]^d[y[P++]]^f[y[P++]]^u[y[P++]]^c[y[P++]]^l[y[P++]]^o[y[P++]]^s[y[P++]]^a[y[P++]]^r[y[P++]];for(T+=15;P<T;)x=x>>>8^r[(x^y[P++])&255];return~x}function A(y,_){for(var x=_^-1,T=0,P=y.length,F=0,N=0;T<P;)F=y.charCodeAt(T++),F<128?x=x>>>8^r[(x^F)&255]:F<2048?(x=x>>>8^r[(x^(192|F>>6&31))&255],x=x>>>8^r[(x^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,N=y.charCodeAt(T++)&1023,x=x>>>8^r[(x^(240|F>>8&7))&255],x=x>>>8^r[(x^(128|F>>2&63))&255],x=x>>>8^r[(x^(128|N>>6&15|(F&3)<<4))&255],x=x>>>8^r[(x^(128|N&63))&255]):(x=x>>>8^r[(x^(224|F>>12&15))&255],x=x>>>8^r[(x^(128|F>>6&63))&255],x=x>>>8^r[(x^(128|F&63))&255]);return~x}t.table=r,t.bstr=E,t.buf=k,t.str=A})});var yi=I(er=>{"use strict";p();var pN=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function mN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}er.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var n in r)mN(r,n)&&(t[n]=r[n])}}return t};er.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var gN={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+n),i);return}for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],s.set(a,i),i+=a.length;return s}},vN={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};er.setTyped=function(t){t?(er.Buf8=Uint8Array,er.Buf16=Uint16Array,er.Buf32=Int32Array,er.assign(er,gN)):(er.Buf8=Array,er.Buf16=Array,er.Buf32=Array,er.assign(er,vN))};er.setTyped(pN)});var Qx=I(no=>{"use strict";p();var wN=yi(),yN=4,Ix=0,$x=1,bN=2;function ro(t){for(var e=t.length;--e>=0;)t[e]=0}var _N=0,Nx=1,xN=2,SN=3,EN=258,km=29,Hl=256,Dl=Hl+1+km,to=30,Am=19,Bx=2*Dl+1,ja=15,ym=16,kN=7,Tm=256,Hx=16,Ux=17,jx=18,Sm=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],wf=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],AN=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Gx=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],TN=512,bi=new Array((Dl+2)*2);ro(bi);var Ml=new Array(to*2);ro(Ml);var Ll=new Array(TN);ro(Ll);var Nl=new Array(EN-SN+1);ro(Nl);var Cm=new Array(km);ro(Cm);var yf=new Array(to);ro(yf);function bm(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}var qx,zx,Vx;function _m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function Wx(t){return t<256?Ll[t]:Ll[256+(t>>>7)]}function Bl(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function dr(t,e,r){t.bi_valid>ym-r?(t.bi_buf|=e<<t.bi_valid&65535,Bl(t,t.bi_buf),t.bi_buf=e>>ym-t.bi_valid,t.bi_valid+=r-ym):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function jn(t,e,r){dr(t,r[e*2],r[e*2+1])}function Yx(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function CN(t){t.bi_valid===16?(Bl(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function PN(t,e){var r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,f,d,h,m,g=0;for(d=0;d<=ja;d++)t.bl_count[d]=0;for(r[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<Bx;c++)u=t.heap[c],d=r[r[u*2+1]*2+1]+1,d>l&&(d=l,g++),r[u*2+1]=d,!(u>n)&&(t.bl_count[d]++,h=0,u>=o&&(h=s[u-o]),m=r[u*2],t.opt_len+=m*(d+h),a&&(t.static_len+=m*(i[u*2+1]+h)));if(g!==0){do{for(d=l-1;t.bl_count[d]===0;)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;d!==0;d--)for(u=t.bl_count[d];u!==0;)f=t.heap[--c],!(f>n)&&(r[f*2+1]!==d&&(t.opt_len+=(d-r[f*2+1])*r[f*2],r[f*2+1]=d),u--)}}function Xx(t,e,r){var n=new Array(ja+1),i=0,a,s;for(a=1;a<=ja;a++)n[a]=i=i+r[a-1]<<1;for(s=0;s<=e;s++){var o=t[s*2+1];o!==0&&(t[s*2]=Yx(n[o]++,o))}}function RN(){var t,e,r,n,i,a=new Array(ja+1);for(r=0,n=0;n<km-1;n++)for(Cm[n]=r,t=0;t<1<<Sm[n];t++)Nl[r++]=n;for(Nl[r-1]=n,i=0,n=0;n<16;n++)for(yf[n]=i,t=0;t<1<<wf[n];t++)Ll[i++]=n;for(i>>=7;n<to;n++)for(yf[n]=i<<7,t=0;t<1<<wf[n]-7;t++)Ll[256+i++]=n;for(e=0;e<=ja;e++)a[e]=0;for(t=0;t<=143;)bi[t*2+1]=8,t++,a[8]++;for(;t<=255;)bi[t*2+1]=9,t++,a[9]++;for(;t<=279;)bi[t*2+1]=7,t++,a[7]++;for(;t<=287;)bi[t*2+1]=8,t++,a[8]++;for(Xx(bi,Dl+1,a),t=0;t<to;t++)Ml[t*2+1]=5,Ml[t*2]=Yx(t,5);qx=new bm(bi,Sm,Hl+1,Dl,ja),zx=new bm(Ml,wf,0,to,ja),Vx=new bm(new Array(0),AN,0,Am,kN)}function Zx(t){var e;for(e=0;e<Dl;e++)t.dyn_ltree[e*2]=0;for(e=0;e<to;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Am;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Tm*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Kx(t){t.bi_valid>8?Bl(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function IN(t,e,r,n){Kx(t),n&&(Bl(t,r),Bl(t,~r)),wN.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function Fx(t,e,r,n){var i=e*2,a=r*2;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function xm(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&Fx(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Fx(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function Ox(t,e,r){var n,i,a=0,s,o;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+a*2]<<8|t.pending_buf[t.d_buf+a*2+1],i=t.pending_buf[t.l_buf+a],a++,n===0?jn(t,i,e):(s=Nl[i],jn(t,s+Hl+1,e),o=Sm[s],o!==0&&(i-=Cm[s],dr(t,i,o)),n--,s=Wx(n),jn(t,s,r),o=wf[s],o!==0&&(n-=yf[s],dr(t,n,o)));while(a<t.last_lit);jn(t,Tm,e)}function Em(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems,s,o,l=-1,c;for(t.heap_len=0,t.heap_max=Bx,s=0;s<a;s++)r[s*2]!==0?(t.heap[++t.heap_len]=l=s,t.depth[s]=0):r[s*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,r[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=n[c*2+1]);for(e.max_code=l,s=t.heap_len>>1;s>=1;s--)xm(t,r,s);c=a;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],xm(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,r[c*2]=r[s*2]+r[o*2],t.depth[c]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,r[s*2+1]=r[o*2+1]=c,t.heap[1]=c++,xm(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],PN(t,e),Xx(r,l,t.bl_count)}function Mx(t,e,r){var n,i=-1,a,s=e[0*2+1],o=0,l=7,c=4;for(s===0&&(l=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=e[(n+1)*2+1],!(++o<l&&a===s)&&(o<c?t.bl_tree[a*2]+=o:a!==0?(a!==i&&t.bl_tree[a*2]++,t.bl_tree[Hx*2]++):o<=10?t.bl_tree[Ux*2]++:t.bl_tree[jx*2]++,o=0,i=a,s===0?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))}function Dx(t,e,r){var n,i=-1,a,s=e[0*2+1],o=0,l=7,c=4;for(s===0&&(l=138,c=3),n=0;n<=r;n++)if(a=s,s=e[(n+1)*2+1],!(++o<l&&a===s)){if(o<c)do jn(t,a,t.bl_tree);while(--o!==0);else a!==0?(a!==i&&(jn(t,a,t.bl_tree),o--),jn(t,Hx,t.bl_tree),dr(t,o-3,2)):o<=10?(jn(t,Ux,t.bl_tree),dr(t,o-3,3)):(jn(t,jx,t.bl_tree),dr(t,o-11,7));o=0,i=a,s===0?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}}function $N(t){var e;for(Mx(t,t.dyn_ltree,t.l_desc.max_code),Mx(t,t.dyn_dtree,t.d_desc.max_code),Em(t,t.bl_desc),e=Am-1;e>=3&&t.bl_tree[Gx[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function FN(t,e,r,n){var i;for(dr(t,e-257,5),dr(t,r-1,5),dr(t,n-4,4),i=0;i<n;i++)dr(t,t.bl_tree[Gx[i]*2+1],3);Dx(t,t.dyn_ltree,e-1),Dx(t,t.dyn_dtree,r-1)}function ON(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return Ix;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return $x;for(r=32;r<Hl;r++)if(t.dyn_ltree[r*2]!==0)return $x;return Ix}var Lx=!1;function MN(t){Lx||(RN(),Lx=!0),t.l_desc=new _m(t.dyn_ltree,qx),t.d_desc=new _m(t.dyn_dtree,zx),t.bl_desc=new _m(t.bl_tree,Vx),t.bi_buf=0,t.bi_valid=0,Zx(t)}function Jx(t,e,r,n){dr(t,(_N<<1)+(n?1:0),3),IN(t,e,r,!0)}function DN(t){dr(t,Nx<<1,3),jn(t,Tm,bi),CN(t)}function LN(t,e,r,n){var i,a,s=0;t.level>0?(t.strm.data_type===bN&&(t.strm.data_type=ON(t)),Em(t,t.l_desc),Em(t,t.d_desc),s=$N(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&e!==-1?Jx(t,e,r,n):t.strategy===yN||a===i?(dr(t,(Nx<<1)+(n?1:0),3),Ox(t,bi,Ml)):(dr(t,(xN<<1)+(n?1:0),3),FN(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Ox(t,t.dyn_ltree,t.dyn_dtree)),Zx(t),n&&Kx(t)}function NN(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Nl[r]+Hl+1)*2]++,t.dyn_dtree[Wx(e)*2]++),t.last_lit===t.lit_bufsize-1}no._tr_init=MN;no._tr_stored_block=Jx;no._tr_flush_block=LN;no._tr_tally=NN;no._tr_align=DN});var Pm=I(($Y,e1)=>{"use strict";p();function BN(t,e,r,n){for(var i=t&65535|0,a=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0}e1.exports=BN});var Rm=I((OY,t1)=>{"use strict";p();function HN(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var UN=HN();function jN(t,e,r,n){var i=UN,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1}t1.exports=jN});var bf=I((DY,r1)=>{"use strict";p();r1.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var f1=I(zn=>{"use strict";p();var tr=yi(),Yr=Qx(),s1=Pm(),Qi=Rm(),GN=bf(),Va=0,qN=1,zN=3,ia=4,n1=5,qn=0,i1=1,Xr=-2,VN=-3,Im=-5,WN=-1,YN=1,_f=2,XN=3,ZN=4,KN=0,JN=2,kf=8,QN=9,eB=15,tB=8,rB=29,nB=256,Fm=nB+1+rB,iB=30,aB=19,sB=2*Fm+1,oB=15,ke=3,ra=258,mn=ra+ke+1,lB=32,Af=42,Om=69,xf=73,Sf=91,Ef=103,Ga=113,jl=666,yt=1,Gl=2,qa=3,so=4,cB=3;function na(t,e){return t.msg=GN[e],e}function a1(t){return(t<<1)-(t>4?9:0)}function ta(t){for(var e=t.length;--e>=0;)t[e]=0}function ea(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(tr.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function Mt(t,e){Yr._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ea(t.strm)}function Pe(t,e){t.pending_buf[t.pending++]=e}function Ul(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function uB(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,tr.arraySet(e,t.input,t.next_in,i,r),t.state.wrap===1?t.adler=s1(t.adler,e,i,r):t.state.wrap===2&&(t.adler=Qi(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function o1(t,e){var r=t.max_chain_length,n=t.strstart,i,a,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-mn?t.strstart-(t.w_size-mn):0,c=t.window,u=t.w_mask,f=t.prev,d=t.strstart+ra,h=c[n+s-1],m=c[n+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,!(c[i+s]!==m||c[i+s-1]!==h||c[i]!==c[n]||c[++i]!==c[n+1])){n+=2,i++;do;while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<d);if(a=ra-(d-n),n=d-ra,a>s){if(t.match_start=e,s=a,a>=o)break;h=c[n+s-1],m=c[n+s]}}while((e=f[e&u])>l&&--r!==0);return s<=t.lookahead?s:t.lookahead}function za(t){var e=t.w_size,r,n,i,a,s;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-mn)){tr.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do i=t.head[--r],t.head[r]=i>=e?i-e:0;while(--n);n=e,r=n;do i=t.prev[--r],t.prev[r]=i>=e?i-e:0;while(--n);a+=e}if(t.strm.avail_in===0)break;if(n=uB(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=n,t.lookahead+t.insert>=ke)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+ke-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<ke)););}while(t.lookahead<mn&&t.strm.avail_in!==0)}function fB(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(za(t),t.lookahead===0&&e===Va)return yt;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Mt(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-mn&&(Mt(t,!1),t.strm.avail_out===0))return yt}return t.insert=0,e===ia?(Mt(t,!0),t.strm.avail_out===0?qa:so):(t.strstart>t.block_start&&(Mt(t,!1),t.strm.avail_out===0),yt)}function $m(t,e){for(var r,n;;){if(t.lookahead<mn){if(za(t),t.lookahead<mn&&e===Va)return yt;if(t.lookahead===0)break}if(r=0,t.lookahead>=ke&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-mn&&(t.match_length=o1(t,r)),t.match_length>=ke)if(n=Yr._tr_tally(t,t.strstart-t.match_start,t.match_length-ke),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ke){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=Yr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Mt(t,!1),t.strm.avail_out===0))return yt}return t.insert=t.strstart<ke-1?t.strstart:ke-1,e===ia?(Mt(t,!0),t.strm.avail_out===0?qa:so):t.last_lit&&(Mt(t,!1),t.strm.avail_out===0)?yt:Gl}function io(t,e){for(var r,n,i;;){if(t.lookahead<mn){if(za(t),t.lookahead<mn&&e===Va)return yt;if(t.lookahead===0)break}if(r=0,t.lookahead>=ke&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ke-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-mn&&(t.match_length=o1(t,r),t.match_length<=5&&(t.strategy===YN||t.match_length===ke&&t.strstart-t.match_start>4096)&&(t.match_length=ke-1)),t.prev_length>=ke&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-ke,n=Yr._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ke),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=ke-1,t.strstart++,n&&(Mt(t,!1),t.strm.avail_out===0))return yt}else if(t.match_available){if(n=Yr._tr_tally(t,0,t.window[t.strstart-1]),n&&Mt(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return yt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Yr._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ke-1?t.strstart:ke-1,e===ia?(Mt(t,!0),t.strm.avail_out===0?qa:so):t.last_lit&&(Mt(t,!1),t.strm.avail_out===0)?yt:Gl}function dB(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=ra){if(za(t),t.lookahead<=ra&&e===Va)return yt;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=ke&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+ra;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=ra-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ke?(r=Yr._tr_tally(t,1,t.match_length-ke),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Yr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Mt(t,!1),t.strm.avail_out===0))return yt}return t.insert=0,e===ia?(Mt(t,!0),t.strm.avail_out===0?qa:so):t.last_lit&&(Mt(t,!1),t.strm.avail_out===0)?yt:Gl}function hB(t,e){for(var r;;){if(t.lookahead===0&&(za(t),t.lookahead===0)){if(e===Va)return yt;break}if(t.match_length=0,r=Yr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Mt(t,!1),t.strm.avail_out===0))return yt}return t.insert=0,e===ia?(Mt(t,!0),t.strm.avail_out===0?qa:so):t.last_lit&&(Mt(t,!1),t.strm.avail_out===0)?yt:Gl}function Gn(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var ao;ao=[new Gn(0,0,0,0,fB),new Gn(4,4,8,4,$m),new Gn(4,5,16,8,$m),new Gn(4,6,32,32,$m),new Gn(4,4,16,16,io),new Gn(8,16,32,32,io),new Gn(8,16,128,128,io),new Gn(8,32,128,256,io),new Gn(32,128,258,1024,io),new Gn(32,258,258,4096,io)];function pB(t){t.window_size=2*t.w_size,ta(t.head),t.max_lazy_match=ao[t.level].max_lazy,t.good_match=ao[t.level].good_length,t.nice_match=ao[t.level].nice_length,t.max_chain_length=ao[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ke-1,t.match_available=0,t.ins_h=0}function mB(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=kf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new tr.Buf16(sB*2),this.dyn_dtree=new tr.Buf16((2*iB+1)*2),this.bl_tree=new tr.Buf16((2*aB+1)*2),ta(this.dyn_ltree),ta(this.dyn_dtree),ta(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new tr.Buf16(oB+1),this.heap=new tr.Buf16(2*Fm+1),ta(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new tr.Buf16(2*Fm+1),ta(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function l1(t){var e;return!t||!t.state?na(t,Xr):(t.total_in=t.total_out=0,t.data_type=JN,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Af:Ga,t.adler=e.wrap===2?0:1,e.last_flush=Va,Yr._tr_init(e),qn)}function c1(t){var e=l1(t);return e===qn&&pB(t.state),e}function gB(t,e){return!t||!t.state||t.state.wrap!==2?Xr:(t.state.gzhead=e,qn)}function u1(t,e,r,n,i,a){if(!t)return Xr;var s=1;if(e===WN&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>QN||r!==kf||n<8||n>15||e<0||e>9||a<0||a>ZN)return na(t,Xr);n===8&&(n=9);var o=new mB;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+ke-1)/ke),o.window=new tr.Buf8(o.w_size*2),o.head=new tr.Buf16(o.hash_size),o.prev=new tr.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new tr.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=a,o.method=r,c1(t)}function vB(t,e){return u1(t,e,kf,eB,tB,KN)}function wB(t,e){var r,n,i,a;if(!t||!t.state||e>n1||e<0)return t?na(t,Xr):Xr;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===jl&&e!==ia)return na(t,t.avail_out===0?Im:Xr);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===Af)if(n.wrap===2)t.adler=0,Pe(n,31),Pe(n,139),Pe(n,8),n.gzhead?(Pe(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Pe(n,n.gzhead.time&255),Pe(n,n.gzhead.time>>8&255),Pe(n,n.gzhead.time>>16&255),Pe(n,n.gzhead.time>>24&255),Pe(n,n.level===9?2:n.strategy>=_f||n.level<2?4:0),Pe(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Pe(n,n.gzhead.extra.length&255),Pe(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Qi(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Om):(Pe(n,0),Pe(n,0),Pe(n,0),Pe(n,0),Pe(n,0),Pe(n,n.level===9?2:n.strategy>=_f||n.level<2?4:0),Pe(n,cB),n.status=Ga);else{var s=kf+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=_f||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,s|=o<<6,n.strstart!==0&&(s|=lB),s+=31-s%31,n.status=Ga,Ul(n,s),n.strstart!==0&&(Ul(n,t.adler>>>16),Ul(n,t.adler&65535)),t.adler=1}if(n.status===Om)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Qi(t.adler,n.pending_buf,n.pending-i,i)),ea(t),i=n.pending,n.pending===n.pending_buf_size));)Pe(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=Qi(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=xf)}else n.status=xf;if(n.status===xf)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Qi(t.adler,n.pending_buf,n.pending-i,i)),ea(t),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,Pe(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Qi(t.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.gzindex=0,n.status=Sf)}else n.status=Sf;if(n.status===Sf)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Qi(t.adler,n.pending_buf,n.pending-i,i)),ea(t),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,Pe(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Qi(t.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.status=Ef)}else n.status=Ef;if(n.status===Ef&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ea(t),n.pending+2<=n.pending_buf_size&&(Pe(n,t.adler&255),Pe(n,t.adler>>8&255),t.adler=0,n.status=Ga)):n.status=Ga),n.pending!==0){if(ea(t),t.avail_out===0)return n.last_flush=-1,qn}else if(t.avail_in===0&&a1(e)<=a1(r)&&e!==ia)return na(t,Im);if(n.status===jl&&t.avail_in!==0)return na(t,Im);if(t.avail_in!==0||n.lookahead!==0||e!==Va&&n.status!==jl){var l=n.strategy===_f?hB(n,e):n.strategy===XN?dB(n,e):ao[n.level].func(n,e);if((l===qa||l===so)&&(n.status=jl),l===yt||l===qa)return t.avail_out===0&&(n.last_flush=-1),qn;if(l===Gl&&(e===qN?Yr._tr_align(n):e!==n1&&(Yr._tr_stored_block(n,0,0,!1),e===zN&&(ta(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ea(t),t.avail_out===0))return n.last_flush=-1,qn}return e!==ia?qn:n.wrap<=0?i1:(n.wrap===2?(Pe(n,t.adler&255),Pe(n,t.adler>>8&255),Pe(n,t.adler>>16&255),Pe(n,t.adler>>24&255),Pe(n,t.total_in&255),Pe(n,t.total_in>>8&255),Pe(n,t.total_in>>16&255),Pe(n,t.total_in>>24&255)):(Ul(n,t.adler>>>16),Ul(n,t.adler&65535)),ea(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?qn:i1)}function yB(t){var e;return!t||!t.state?Xr:(e=t.state.status,e!==Af&&e!==Om&&e!==xf&&e!==Sf&&e!==Ef&&e!==Ga&&e!==jl?na(t,Xr):(t.state=null,e===Ga?na(t,VN):qn))}function bB(t,e){var r=e.length,n,i,a,s,o,l,c,u;if(!t||!t.state||(n=t.state,s=n.wrap,s===2||s===1&&n.status!==Af||n.lookahead))return Xr;for(s===1&&(t.adler=s1(t.adler,e,r,0)),n.wrap=0,r>=n.w_size&&(s===0&&(ta(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new tr.Buf8(n.w_size),tr.arraySet(u,e,r-n.w_size,n.w_size,0),e=u,r=n.w_size),o=t.avail_in,l=t.next_in,c=t.input,t.avail_in=r,t.next_in=0,t.input=e,za(n);n.lookahead>=ke;){i=n.strstart,a=n.lookahead-(ke-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+ke-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--a);n.strstart=i,n.lookahead=ke-1,za(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ke-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=o,n.wrap=s,qn}zn.deflateInit=vB;zn.deflateInit2=u1;zn.deflateReset=c1;zn.deflateResetKeep=l1;zn.deflateSetHeader=gB;zn.deflate=wB;zn.deflateEnd=yB;zn.deflateSetDictionary=bB;zn.deflateInfo="pako deflate (from Nodeca project)"});var Mm=I(oo=>{"use strict";p();var Tf=yi(),d1=!0,h1=!0;try{String.fromCharCode.apply(null,[0])}catch(t){d1=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){h1=!1}var ql=new Tf.Buf8(256);for(_i=0;_i<256;_i++)ql[_i]=_i>=252?6:_i>=248?5:_i>=240?4:_i>=224?3:_i>=192?2:1;var _i;ql[254]=ql[254]=1;oo.string2buf=function(t){var e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Tf.Buf8(o),a=0,i=0;a<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|r&63):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|r&63):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|r&63);return e};function p1(t,e){if(e<65534&&(t.subarray&&h1||!t.subarray&&d1))return String.fromCharCode.apply(null,Tf.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}oo.buf2binstring=function(t){return p1(t,t.length)};oo.binstring2buf=function(t){for(var e=new Tf.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e};oo.buf2string=function(t,e){var r,n,i,a,s=e||t.length,o=new Array(s*2);for(n=0,r=0;r<s;){if(i=t[r++],i<128){o[n++]=i;continue}if(a=ql[i],a>4){o[n++]=65533,r+=a-1;continue}for(i&=a===2?31:a===3?15:7;a>1&&r<s;)i=i<<6|t[r++]&63,a--;if(a>1){o[n++]=65533;continue}i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|i&1023)}return p1(o,n)};oo.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+ql[t[r]]>e?r:e}});var Dm=I((jY,m1)=>{"use strict";p();function _B(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}m1.exports=_B});var y1=I(Wl=>{"use strict";p();var zl=f1(),Vl=yi(),Nm=Mm(),Bm=bf(),xB=Dm(),w1=Object.prototype.toString,SB=0,Lm=4,lo=0,g1=1,v1=2,EB=-1,kB=0,AB=8;function Wa(t){if(!(this instanceof Wa))return new Wa(t);this.options=Vl.assign({level:EB,method:AB,chunkSize:16384,windowBits:15,memLevel:8,strategy:kB,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xB,this.strm.avail_out=0;var r=zl.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==lo)throw new Error(Bm[r]);if(e.header&&zl.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=Nm.string2buf(e.dictionary):w1.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=zl.deflateSetDictionary(this.strm,n),r!==lo)throw new Error(Bm[r]);this._dict_set=!0}}Wa.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;a=e===~~e?e:e===!0?Lm:SB,typeof t=="string"?r.input=Nm.string2buf(t):w1.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Vl.Buf8(n),r.next_out=0,r.avail_out=n),i=zl.deflate(r,a),i!==g1&&i!==lo)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(a===Lm||a===v1))&&(this.options.to==="string"?this.onData(Nm.buf2binstring(Vl.shrinkBuf(r.output,r.next_out))):this.onData(Vl.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==g1);return a===Lm?(i=zl.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===lo):(a===v1&&(this.onEnd(lo),r.avail_out=0),!0)};Wa.prototype.onData=function(t){this.chunks.push(t)};Wa.prototype.onEnd=function(t){t===lo&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vl.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Hm(t,e){var r=new Wa(e);if(r.push(t,!0),r.err)throw r.msg||Bm[r.err];return r.result}function TB(t,e){return e=e||{},e.raw=!0,Hm(t,e)}function CB(t,e){return e=e||{},e.gzip=!0,Hm(t,e)}Wl.Deflate=Wa;Wl.deflate=Hm;Wl.deflateRaw=TB;Wl.gzip=CB});var _1=I((VY,b1)=>{"use strict";p();var Cf=30,PB=12;b1.exports=function(e,r){var n,i,a,s,o,l,c,u,f,d,h,m,g,v,w,b,S,E,k,A,y,_,x,T,P;n=e.state,i=e.next_in,T=e.input,a=i+(e.avail_in-5),s=e.next_out,P=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=n.dmax,u=n.wsize,f=n.whave,d=n.wnext,h=n.window,m=n.hold,g=n.bits,v=n.lencode,w=n.distcode,b=(1<<n.lenbits)-1,S=(1<<n.distbits)-1;e:do{g<15&&(m+=T[i++]<<g,g+=8,m+=T[i++]<<g,g+=8),E=v[m&b];t:for(;;){if(k=E>>>24,m>>>=k,g-=k,k=E>>>16&255,k===0)P[s++]=E&65535;else if(k&16){A=E&65535,k&=15,k&&(g<k&&(m+=T[i++]<<g,g+=8),A+=m&(1<<k)-1,m>>>=k,g-=k),g<15&&(m+=T[i++]<<g,g+=8,m+=T[i++]<<g,g+=8),E=w[m&S];r:for(;;){if(k=E>>>24,m>>>=k,g-=k,k=E>>>16&255,k&16){if(y=E&65535,k&=15,g<k&&(m+=T[i++]<<g,g+=8,g<k&&(m+=T[i++]<<g,g+=8)),y+=m&(1<<k)-1,y>c){e.msg="invalid distance too far back",n.mode=Cf;break e}if(m>>>=k,g-=k,k=s-o,y>k){if(k=y-k,k>f&&n.sane){e.msg="invalid distance too far back",n.mode=Cf;break e}if(_=0,x=h,d===0){if(_+=u-k,k<A){A-=k;do P[s++]=h[_++];while(--k);_=s-y,x=P}}else if(d<k){if(_+=u+d-k,k-=d,k<A){A-=k;do P[s++]=h[_++];while(--k);if(_=0,d<A){k=d,A-=k;do P[s++]=h[_++];while(--k);_=s-y,x=P}}}else if(_+=d-k,k<A){A-=k;do P[s++]=h[_++];while(--k);_=s-y,x=P}for(;A>2;)P[s++]=x[_++],P[s++]=x[_++],P[s++]=x[_++],A-=3;A&&(P[s++]=x[_++],A>1&&(P[s++]=x[_++]))}else{_=s-y;do P[s++]=P[_++],P[s++]=P[_++],P[s++]=P[_++],A-=3;while(A>2);A&&(P[s++]=P[_++],A>1&&(P[s++]=P[_++]))}}else if(k&64){e.msg="invalid distance code",n.mode=Cf;break e}else{E=w[(E&65535)+(m&(1<<k)-1)];continue r}break}}else if(k&64)if(k&32){n.mode=PB;break e}else{e.msg="invalid literal/length code",n.mode=Cf;break e}else{E=v[(E&65535)+(m&(1<<k)-1)];continue t}break}}while(i<a&&s<l);A=g>>3,i-=A,g-=A<<3,m&=(1<<g)-1,e.next_in=i,e.next_out=s,e.avail_in=i<a?5+(a-i):5-(i-a),e.avail_out=s<l?257+(l-s):257-(s-l),n.hold=m,n.bits=g}});var C1=I((YY,T1)=>{"use strict";p();var x1=yi(),co=15,S1=852,E1=592,k1=0,Um=1,A1=2,RB=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],IB=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],FB=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];T1.exports=function(e,r,n,i,a,s,o,l){var c=l.bits,u=0,f=0,d=0,h=0,m=0,g=0,v=0,w=0,b=0,S=0,E,k,A,y,_,x=null,T=0,P,F=new x1.Buf16(co+1),N=new x1.Buf16(co+1),M=null,re=0,ye,me,fe;for(u=0;u<=co;u++)F[u]=0;for(f=0;f<i;f++)F[r[n+f]]++;for(m=c,h=co;h>=1&&F[h]===0;h--);if(m>h&&(m=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<h&&F[d]===0;d++);for(m<d&&(m=d),w=1,u=1;u<=co;u++)if(w<<=1,w-=F[u],w<0)return-1;if(w>0&&(e===k1||h!==1))return-1;for(N[1]=0,u=1;u<co;u++)N[u+1]=N[u]+F[u];for(f=0;f<i;f++)r[n+f]!==0&&(o[N[r[n+f]]++]=f);if(e===k1?(x=M=o,P=19):e===Um?(x=RB,T-=257,M=IB,re-=257,P=256):(x=$B,M=FB,P=-1),S=0,f=0,u=d,_=s,g=m,v=0,A=-1,b=1<<m,y=b-1,e===Um&&b>S1||e===A1&&b>E1)return 1;for(;;){ye=u-v,o[f]<P?(me=0,fe=o[f]):o[f]>P?(me=M[re+o[f]],fe=x[T+o[f]]):(me=96,fe=0),E=1<<u-v,k=1<<g,d=k;do k-=E,a[_+(S>>v)+k]=ye<<24|me<<16|fe|0;while(k!==0);for(E=1<<u-1;S&E;)E>>=1;if(E!==0?(S&=E-1,S+=E):S=0,f++,--F[u]===0){if(u===h)break;u=r[n+o[f]]}if(u>m&&(S&y)!==A){for(v===0&&(v=m),_+=d,g=u-v,w=1<<g;g+v<h&&(w-=F[g+v],!(w<=0));)g++,w<<=1;if(b+=1<<g,e===Um&&b>S1||e===A1&&b>E1)return 1;A=S&y,a[A]=m<<24|g<<16|_-s|0}}return S!==0&&(a[_+S]=u-v<<24|64<<16|0),l.bits=m,0}});var cS=I(gn=>{"use strict";p();var Rr=yi(),Wm=Pm(),Vn=Rm(),OB=_1(),Yl=C1(),MB=0,eS=1,tS=2,P1=4,DB=5,Pf=6,Ya=0,LB=1,NB=2,Zr=-2,rS=-3,Ym=-4,BB=-5,R1=8,nS=1,I1=2,$1=3,F1=4,O1=5,M1=6,D1=7,L1=8,N1=9,B1=10,$f=11,xi=12,jm=13,H1=14,Gm=15,U1=16,j1=17,G1=18,q1=19,Rf=20,If=21,z1=22,V1=23,W1=24,Y1=25,X1=26,qm=27,Z1=28,K1=29,Ye=30,Xm=31,HB=32,UB=852,jB=592,GB=15,qB=GB;function J1(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function zB(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Rr.Buf16(320),this.work=new Rr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function iS(t){var e;return!t||!t.state?Zr:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=nS,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Rr.Buf32(UB),e.distcode=e.distdyn=new Rr.Buf32(jB),e.sane=1,e.back=-1,Ya)}function aS(t){var e;return!t||!t.state?Zr:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,iS(t))}function sS(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Zr:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,aS(t))}function oS(t,e){var r,n;return t?(n=new zB,t.state=n,n.window=null,r=sS(t,e),r!==Ya&&(t.state=null),r):Zr}function VB(t){return oS(t,qB)}var Q1=!0,zm,Vm;function WB(t){if(Q1){var e;for(zm=new Rr.Buf32(512),Vm=new Rr.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Yl(eS,t.lens,0,288,zm,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Yl(tS,t.lens,0,32,Vm,0,t.work,{bits:5}),Q1=!1}t.lencode=zm,t.lenbits=9,t.distcode=Vm,t.distbits=5}function lS(t,e,r,n){var i,a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Rr.Buf8(a.wsize)),n>=a.wsize?(Rr.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),Rr.arraySet(a.window,e,r-n,i,a.wnext),n-=i,n?(Rr.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function YB(t,e){var r,n,i,a,s,o,l,c,u,f,d,h,m,g,v=0,w,b,S,E,k,A,y,_,x=new Rr.Buf8(4),T,P,F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Zr;r=t.state,r.mode===xi&&(r.mode=jm),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,f=o,d=l,_=Ya;e:for(;;)switch(r.mode){case nS:if(r.wrap===0){r.mode=jm;break}for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.wrap&2&&c===35615){r.check=0,x[0]=c&255,x[1]=c>>>8&255,r.check=Vn(r.check,x,2,0),c=0,u=0,r.mode=I1;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Ye;break}if((c&15)!==R1){t.msg="unknown compression method",r.mode=Ye;break}if(c>>>=4,u-=4,y=(c&15)+8,r.wbits===0)r.wbits=y;else if(y>r.wbits){t.msg="invalid window size",r.mode=Ye;break}r.dmax=1<<y,t.adler=r.check=1,r.mode=c&512?B1:xi,c=0,u=0;break;case I1:for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==R1){t.msg="unknown compression method",r.mode=Ye;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Ye;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,r.check=Vn(r.check,x,2,0)),c=0,u=0,r.mode=$1;case $1:for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,r.check=Vn(r.check,x,4,0)),c=0,u=0,r.mode=F1;case F1:for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,r.check=Vn(r.check,x,2,0)),c=0,u=0,r.mode=O1;case O1:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,r.check=Vn(r.check,x,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=M1;case M1:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(y=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Rr.arraySet(r.head.extra,n,a,h,y)),r.flags&512&&(r.check=Vn(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=D1;case D1:if(r.flags&2048){if(o===0)break e;h=0;do y=n[a+h++],r.head&&y&&r.length<65536&&(r.head.name+=String.fromCharCode(y));while(y&&h<o);if(r.flags&512&&(r.check=Vn(r.check,n,h,a)),o-=h,a+=h,y)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=L1;case L1:if(r.flags&4096){if(o===0)break e;h=0;do y=n[a+h++],r.head&&y&&r.length<65536&&(r.head.comment+=String.fromCharCode(y));while(y&&h<o);if(r.flags&512&&(r.check=Vn(r.check,n,h,a)),o-=h,a+=h,y)break e}else r.head&&(r.head.comment=null);r.mode=N1;case N1:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Ye;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=xi;break;case B1:for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}t.adler=r.check=J1(c),c=0,u=0,r.mode=$f;case $f:if(r.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=u,NB;t.adler=r.check=1,r.mode=xi;case xi:if(e===DB||e===Pf)break e;case jm:if(r.last){c>>>=u&7,u-=u&7,r.mode=qm;break}for(;u<3;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=H1;break;case 1:if(WB(r),r.mode=Rf,e===Pf){c>>>=2,u-=2;break e}break;case 2:r.mode=j1;break;case 3:t.msg="invalid block type",r.mode=Ye}c>>>=2,u-=2;break;case H1:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Ye;break}if(r.length=c&65535,c=0,u=0,r.mode=Gm,e===Pf)break e;case Gm:r.mode=U1;case U1:if(h=r.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;Rr.arraySet(i,n,a,h,s),o-=h,a+=h,l-=h,s+=h,r.length-=h;break}r.mode=xi;break;case j1:for(;u<14;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Ye;break}r.have=0,r.mode=G1;case G1:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.lens[F[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},_=Yl(MB,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,_){t.msg="invalid code lengths set",r.mode=Ye;break}r.have=0,r.mode=q1;case q1:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[c&(1<<r.lenbits)-1],w=v>>>24,b=v>>>16&255,S=v&65535,!(w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(S<16)c>>>=w,u-=w,r.lens[r.have++]=S;else{if(S===16){for(P=w+2;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c>>>=w,u-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=Ye;break}y=r.lens[r.have-1],h=3+(c&3),c>>>=2,u-=2}else if(S===17){for(P=w+3;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=w,u-=w,y=0,h=3+(c&7),c>>>=3,u-=3}else{for(P=w+7;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=w,u-=w,y=0,h=11+(c&127),c>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Ye;break}for(;h--;)r.lens[r.have++]=y}}if(r.mode===Ye)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Ye;break}if(r.lenbits=9,T={bits:r.lenbits},_=Yl(eS,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,_){t.msg="invalid literal/lengths set",r.mode=Ye;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},_=Yl(tS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,_){t.msg="invalid distances set",r.mode=Ye;break}if(r.mode=Rf,e===Pf)break e;case Rf:r.mode=If;case If:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=u,OB(t,d),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,r.mode===xi&&(r.back=-1);break}for(r.back=0;v=r.lencode[c&(1<<r.lenbits)-1],w=v>>>24,b=v>>>16&255,S=v&65535,!(w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(b&&!(b&240)){for(E=w,k=b,A=S;v=r.lencode[A+((c&(1<<E+k)-1)>>E)],w=v>>>24,b=v>>>16&255,S=v&65535,!(E+w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=E,u-=E,r.back+=E}if(c>>>=w,u-=w,r.back+=w,r.length=S,b===0){r.mode=X1;break}if(b&32){r.back=-1,r.mode=xi;break}if(b&64){t.msg="invalid literal/length code",r.mode=Ye;break}r.extra=b&15,r.mode=z1;case z1:if(r.extra){for(P=r.extra;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=V1;case V1:for(;v=r.distcode[c&(1<<r.distbits)-1],w=v>>>24,b=v>>>16&255,S=v&65535,!(w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(!(b&240)){for(E=w,k=b,A=S;v=r.distcode[A+((c&(1<<E+k)-1)>>E)],w=v>>>24,b=v>>>16&255,S=v&65535,!(E+w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=E,u-=E,r.back+=E}if(c>>>=w,u-=w,r.back+=w,b&64){t.msg="invalid distance code",r.mode=Ye;break}r.offset=S,r.extra=b&15,r.mode=W1;case W1:if(r.extra){for(P=r.extra;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Ye;break}r.mode=Y1;case Y1:if(l===0)break e;if(h=d-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Ye;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),g=r.window}else g=i,m=s-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do i[s++]=g[m++];while(--h);r.length===0&&(r.mode=If);break;case X1:if(l===0)break e;i[s++]=r.length,l--,r.mode=If;break;case qm:if(r.wrap){for(;u<32;){if(o===0)break e;o--,c|=n[a++]<<u,u+=8}if(d-=l,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?Vn(r.check,i,d,s-d):Wm(r.check,i,d,s-d)),d=l,(r.flags?c:J1(c))!==r.check){t.msg="incorrect data check",r.mode=Ye;break}c=0,u=0}r.mode=Z1;case Z1:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Ye;break}c=0,u=0}r.mode=K1;case K1:_=LB;break e;case Ye:_=rS;break e;case Xm:return Ym;case HB:default:return Zr}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=u,(r.wsize||d!==t.avail_out&&r.mode<Ye&&(r.mode<qm||e!==P1))&&lS(t,t.output,t.next_out,d-t.avail_out)?(r.mode=Xm,Ym):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?Vn(r.check,i,d,t.next_out-d):Wm(r.check,i,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(r.mode===xi?128:0)+(r.mode===Rf||r.mode===Gm?256:0),(f===0&&d===0||e===P1)&&_===Ya&&(_=BB),_)}function XB(t){if(!t||!t.state)return Zr;var e=t.state;return e.window&&(e.window=null),t.state=null,Ya}function ZB(t,e){var r;return!t||!t.state||(r=t.state,!(r.wrap&2))?Zr:(r.head=e,e.done=!1,Ya)}function KB(t,e){var r=e.length,n,i,a;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==$f)?Zr:n.mode===$f&&(i=1,i=Wm(i,e,r,0),i!==n.check)?rS:(a=lS(t,e,r,r),a?(n.mode=Xm,Ym):(n.havedict=1,Ya))}gn.inflateReset=aS;gn.inflateReset2=sS;gn.inflateResetKeep=iS;gn.inflateInit=VB;gn.inflateInit2=oS;gn.inflate=YB;gn.inflateEnd=XB;gn.inflateGetHeader=ZB;gn.inflateSetDictionary=KB;gn.inflateInfo="pako inflate (from Nodeca project)"});var Zm=I((JY,uS)=>{"use strict";p();uS.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var dS=I((eX,fS)=>{"use strict";p();function JB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}fS.exports=JB});var pS=I(Zl=>{"use strict";p();var uo=cS(),Xl=yi(),Ff=Mm(),lt=Zm(),Km=bf(),QB=Dm(),eH=dS(),hS=Object.prototype.toString;function Xa(t){if(!(this instanceof Xa))return new Xa(t);this.options=Xl.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new QB,this.strm.avail_out=0;var r=uo.inflateInit2(this.strm,e.windowBits);if(r!==lt.Z_OK)throw new Error(Km[r]);if(this.header=new eH,uo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ff.string2buf(e.dictionary):hS.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=uo.inflateSetDictionary(this.strm,e.dictionary),r!==lt.Z_OK)))throw new Error(Km[r])}Xa.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,s,o,l,c,u=!1;if(this.ended)return!1;s=e===~~e?e:e===!0?lt.Z_FINISH:lt.Z_NO_FLUSH,typeof t=="string"?r.input=Ff.binstring2buf(t):hS.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Xl.Buf8(n),r.next_out=0,r.avail_out=n),a=uo.inflate(r,lt.Z_NO_FLUSH),a===lt.Z_NEED_DICT&&i&&(a=uo.inflateSetDictionary(this.strm,i)),a===lt.Z_BUF_ERROR&&u===!0&&(a=lt.Z_OK,u=!1),a!==lt.Z_STREAM_END&&a!==lt.Z_OK)return this.onEnd(a),this.ended=!0,!1;r.next_out&&(r.avail_out===0||a===lt.Z_STREAM_END||r.avail_in===0&&(s===lt.Z_FINISH||s===lt.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=Ff.utf8border(r.output,r.next_out),l=r.next_out-o,c=Ff.buf2string(r.output,o),r.next_out=l,r.avail_out=n-l,l&&Xl.arraySet(r.output,r.output,o,l,0),this.onData(c)):this.onData(Xl.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(u=!0)}while((r.avail_in>0||r.avail_out===0)&&a!==lt.Z_STREAM_END);return a===lt.Z_STREAM_END&&(s=lt.Z_FINISH),s===lt.Z_FINISH?(a=uo.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===lt.Z_OK):(s===lt.Z_SYNC_FLUSH&&(this.onEnd(lt.Z_OK),r.avail_out=0),!0)};Xa.prototype.onData=function(t){this.chunks.push(t)};Xa.prototype.onEnd=function(t){t===lt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Xl.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Jm(t,e){var r=new Xa(e);if(r.push(t,!0),r.err)throw r.msg||Km[r.err];return r.result}function tH(t,e){return e=e||{},e.raw=!0,Jm(t,e)}Zl.Inflate=Xa;Zl.inflate=Jm;Zl.inflateRaw=tH;Zl.ungzip=Jm});var vS=I((iX,gS)=>{"use strict";p();var rH=yi().assign,nH=y1(),iH=pS(),aH=Zm(),mS={};rH(mS,nH,iH,aH);gS.exports=mS});var bS=I((sX,yS)=>{"use strict";p();var wS=(t,e)=>function(...r){let n=e.promiseModule;return new n((i,a)=>{e.multiArgs?r.push((...s)=>{e.errorFirst?s[0]?a(s):(s.shift(),i(s)):i(s)}):e.errorFirst?r.push((s,o)=>{s?a(s):i(o)}):r.push(i),t.apply(this,r)})};yS.exports=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);let r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);let n=a=>{let s=o=>typeof o=="string"?a===o:o.test(a);return e.include?e.include.some(s):!e.exclude.some(s)},i;r==="function"?i=function(...a){return e.excludeMain?t(...a):wS(t,e).apply(this,a)}:i=Object.create(Object.getPrototypeOf(t));for(let a in t){let s=t[a];i[a]=typeof s=="function"&&n(a)?wS(s,e):s}return i}});var PS=I((lX,CS)=>{p();function _S(t){return Array.isArray(t)?t:[t]}var tg="",xS=" ",Qm="\\",sH=/^\s+$/,oH=/(?:[^\\]|^)\\$/,lH=/^\\!/,cH=/^\\#/,uH=/\r?\n/g,fH=/^\.*\/|^\.+$/,eg="/",kS="node-ignore";typeof Symbol!="undefined"&&(kS=Symbol.for("node-ignore"));var SS=kS,dH=(t,e,r)=>Object.defineProperty(t,e,{value:r}),hH=/([0-z])-([0-z])/g,AS=()=>!1,pH=t=>t.replace(hH,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:tg),mH=t=>{let{length:e}=t;return t.slice(0,e-e%2)},gH=[[/^\uFEFF/,()=>tg],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?xS:tg)],[/(\\+?)\s/g,(t,e)=>{let{length:r}=e;return e.slice(0,r-r%2)+xS}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Qm],[/\\\\/g,()=>Qm],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===Qm?`\\[${r}${mH(n)}${i}`:i==="]"&&n.length%2===0?`[${pH(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],ES=Object.create(null),vH=(t,e)=>{let r=ES[t];return r||(r=gH.reduce((n,[i,a])=>n.replace(i,a.bind(t)),t),ES[t]=r),e?new RegExp(r,"i"):new RegExp(r)},ig=t=>typeof t=="string",wH=t=>t&&ig(t)&&!sH.test(t)&&!oH.test(t)&&t.indexOf("#")!==0,yH=t=>t.split(uH),rg=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},bH=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(lH,"!").replace(cH,"#");let i=vH(t,e);return new rg(r,t,n,i)},_H=(t,e)=>{throw new e(t)},Si=(t,e,r)=>ig(t)?t?Si.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),TS=t=>fH.test(t);Si.isNotRelative=TS;Si.convert=t=>t;var ng=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){dH(this,SS,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[SS]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(wH(e)){let r=bH(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,_S(ig(e)?yH(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(a=>{let{negative:s}=a;if(i===s&&n!==i||s&&!n&&!i&&!r)return;a.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let a=e&&Si.convert(e);return Si(a,e,this._allowRelativePaths?AS:_H),this._t(a,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(eg)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let a=this._t(i.join(eg)+eg,r,n,i);return r[e]=a.ignored?a:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return _S(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},Of=t=>new ng(t),xH=t=>Si(t&&Si.convert(t),t,AS);Of.isPathValid=xH;Of.default=Of;CS.exports=Of;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Si.convert=t;let e=/^[a-z]:\//i;Si.isNotRelative=r=>e.test(r)||TS(r)}});var IS=I((uX,RS)=>{"use strict";p();function SH(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wn(t,e,r){return e=e instanceof RegExp?e:new RegExp(SH(e),"g"),t.replace(e,r)}var EH={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=Wn(e,"./","/"),e=Wn(e,"..","."),e=Wn(e," ","-"),e=Wn(e,/^[~^:?*\\\-]/g,""),e=Wn(e,/[~^:?*\\]/g,"-"),e=Wn(e,/[~^:?*\\\-]$/g,""),e=Wn(e,"@{","-"),e=Wn(e,/\.$/g,""),e=Wn(e,/\/$/g,""),e=Wn(e,/\.lock$/g,""),e}};RS.exports=EH});var FS=I((dX,$S)=>{p();$S.exports=function(t,e){var r=t,n=e,i=r.length,a=n.length,s=!1,o=null,l=i+1,c=[],u=[],f=[],d="",h=-1,m=0,g=1,v,w,b=function(){i>=a&&(v=r,w=i,r=n,n=v,i=a,a=w,s=!0,l=i+1)},S=function(y,_,x){return{x:y,y:_,k:x}},E=function(y,_){return{elem:y,t:_}},k=function(y,_,x){var T,P,F;for(_>x?T=c[y-1+l]:T=c[y+1+l],F=Math.max(_,x),P=F-y;P<i&&F<a&&r[P]===n[F];)++P,++F;return c[y+l]=u.length,u[u.length]=new S(P,F,T),F},A=function(y){var _,x,T,P,F;for(_=x=1,T=P=0,F=y.length-1;F>=0;--F)for(;T<y[F].x||P<y[F].y;)y[F].y-y[F].x>P-T?(s?f[f.length]=new E(n[P],h):f[f.length]=new E(n[P],g),++x,++P):y[F].y-y[F].x<P-T?(s?f[f.length]=new E(r[T],g):f[f.length]=new E(r[T],h),++_,++T):(f[f.length]=new E(r[T],m),d+=r[T],++_,++x,++T,++P)};return b(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return d},getses:function(){return f},compose:function(){var y,_,x,T,P,F,N,M;for(y=a-i,_=i+a+3,x={},N=0;N<_;++N)x[N]=-1,c[N]=-1;T=-1;do{for(++T,M=-T;M<=y-1;++M)x[M+l]=k(M,x[M-1+l]+1,x[M+1+l]);for(M=y+T;M>=y+1;--M)x[M+l]=k(M,x[M-1+l]+1,x[M+1+l]);x[y+l]=k(y,x[y-1+l]+1,x[y+1+l])}while(x[y+l]!==a);for(o=y+2*T,P=c[y+l],F=[];P!==-1;)F[F.length]=new S(u[P].x,u[P].y,null),P=u[P].k;A(F)}}}});var DS=I((pX,MS)=>{p();var kH=FS();function AH(t,e){var r=new kH(t,e);r.compose();for(var n=r.getses(),i,a,s=t.length-1,o=e.length-1,l=n.length-1;l>=0;--l)n[l].t===r.SES_COMMON?(a?(a.chain={file1index:s,file2index:o,chain:null},a=a.chain):(i={file1index:s,file2index:o,chain:null},a=i),s--,o--):n[l].t===r.SES_DELETE?s--:n[l].t===r.SES_ADD&&o--;var c={file1index:-1,file2index:-1,chain:null};return a?(a.chain=c,i):c}function OS(t,e){for(var r=[],n=t.length,i=e.length,a=AH(t,e);a!==null;a=a.chain){var s=n-a.file1index-1,o=i-a.file2index-1;n=a.file1index,i=a.file2index,(s||o)&&r.push({file1:[n+1,s],file2:[i+1,o]})}return r.reverse(),r}function TH(t,e,r){var n,i=OS(e,t),a=OS(e,r),s=[];function o(N,M){s.push([N.file1[0],M,N.file1[1],N.file2[0],N.file2[1]])}for(n=0;n<i.length;n++)o(i[n],0);for(n=0;n<a.length;n++)o(a[n],2);s.sort(function(N,M){return N[0]-M[0]});var l=[],c=0;function u(N){N>c&&(l.push([1,c,N-c]),c=N)}for(var f=0;f<s.length;f++){for(var d=f,h=s[f],m=h[0],g=m+h[2];f<s.length-1;){var v=s[f+1],w=v[0];if(w>g)break;g=Math.max(g,w+v[2]),f++}if(u(m),d==f)h[4]>0&&l.push([h[1],h[3],h[4]]);else{var b={0:[t.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(n=d;n<=f;n++){h=s[n];var S=h[1],E=b[S],k=h[0],A=k+h[2],y=h[3],_=y+h[4];E[0]=Math.min(y,E[0]),E[1]=Math.max(_,E[1]),E[2]=Math.min(k,E[2]),E[3]=Math.max(A,E[3])}var x=b[0][0]+(m-b[0][2]),T=b[0][1]+(g-b[0][3]),P=b[2][0]+(m-b[2][2]),F=b[2][1]+(g-b[2][3]);l.push([-1,x,T-x,m,g-m,P,F-P])}c=g}return u(e.length),l}function CH(t,e,r){var n=[],i=[t,e,r],a=TH(t,e,r),s=[];function o(){s.length&&n.push({ok:s}),s=[]}function l(h){for(var m=0;m<h.length;m++)s.push(h[m])}function c(h){if(h[2]!=h[6])return!0;for(var m=h[1],g=h[5],v=0;v<h[2];v++)if(t[v+m]!=r[v+g])return!0;return!1}for(var u=0;u<a.length;u++){var f=a[u],d=f[0];d==-1?c(f)?(o(),n.push({conflict:{a:t.slice(f[1],f[1]+f[2]),aIndex:f[1],o:e.slice(f[3],f[3]+f[4]),oIndex:f[3],b:r.slice(f[5],f[5]+f[6]),bIndex:f[5]}})):l(i[0].slice(f[1],f[1]+f[2])):l(i[d].slice(f[1],f[1]+f[2]))}return o(),n}MS.exports=CH});var Lg=I(W=>{"use strict";p();Object.defineProperty(W,"__esModule",{value:!0});function ha(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Jl=ha(bb()),aE=ha(kx()),O=Cx(),PH=ha(Rx()),Rg=ha(vS()),ag=ha(bS()),RH=ha(PS()),Xn=ha(IS()),IH=ha(DS()),Ae=class t extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){let r=new t(e.message);return r.code=e.code,r.data=e.data,r.caller=e.caller,r.stack=e.stack,r}get isIsomorphicGitError(){return!0}},Ql=class t extends Ae{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=t.code,this.data={filepaths:e}}};Ql.code="UnmergedPathsError";var de=class t extends Ae{constructor(e){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=t.code,this.data={message:e}}};de.code="InternalError";var ho=class t extends Ae{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=t.code,this.data={filepath:e}}};ho.code="UnsafeFilepathError";var Kr=class{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){let r=this.buffer.slice(this._start,this._start+e);return this._start+=e,r}toString(e,r){let n=this.buffer.toString(e,this._start,this._start+r);return this._start+=r,n}write(e,r,n){let i=this.buffer.write(e,this._start,r,n);return this._start+=r,i}copy(e,r,n){let i=e.copy(this.buffer,this._start,r,n);return this._start+=i,i}readUInt8(){let e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){let r=this.buffer.writeUInt8(e,this._start);return this._start+=1,r}readUInt16BE(){let e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){let r=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,r}readUInt32BE(){let e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){let r=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,r}};function Wf(t,e){return-(t<e)||+(t>e)}function sE(t,e){return Wf(t.path,e.path)}function oE(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let r=t&511;return r&73?r=493:r=420,e!==8&&(r=0),(e<<12)+r}var Yn=2**32;function LS(t,e,r,n){if(t!==void 0&&e!==void 0)return[t,e];r===void 0&&(r=n.valueOf());let i=Math.floor(r/1e3),a=(r-i*1e3)*1e6;return[i,a]}function po(t){let[e,r]=LS(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[n,i]=LS(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%Yn,ctimeNanoseconds:r%Yn,mtimeSeconds:n%Yn,mtimeNanoseconds:i%Yn,dev:t.dev%Yn,ino:t.ino%Yn,mode:oE(t.mode%Yn),uid:t.uid%Yn,gid:t.gid%Yn,size:t.size>-1?t.size%Yn:0}}function $H(t){let e="";for(let r of new Uint8Array(t))r<16&&(e+="0"),e+=r.toString(16);return e}var sg=null;async function ki(t){return sg===null&&(sg=await OH()),sg?lE(t):FH(t)}function FH(t){return new aE().update(t).digest("hex")}async function lE(t){let e=await crypto.subtle.digest("SHA-1",t);return $H(e)}async function OH(){try{if(await lE(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch(t){}return!1}function MH(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function DH(t){let e=t.flags;return e.extended=!1,e.nameLength=Math.min(Buffer.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}var wg=class t{constructor(e,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let r=this._entries.get(e.path);r||(this._entries.set(e.path,e),r=e),r.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(Buffer.isBuffer(e))return t.fromBuffer(e);if(e===null)return new t(null);throw new de("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new de("Index file is empty (.git/index)");let r=new t,n=new Kr(e),i=n.toString("utf8",4);if(i!=="DIRC")throw new de(`Invalid dircache magic file number: ${i}`);let a=await ki(e.slice(0,-20)),s=e.slice(-20).toString("hex");if(s!==a)throw new de(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${a}`);let o=n.readUInt32BE();if(o!==2)throw new de(`Unsupported dircache version: ${o}`);let l=n.readUInt32BE(),c=0;for(;!n.eof()&&c<l;){let u={};u.ctimeSeconds=n.readUInt32BE(),u.ctimeNanoseconds=n.readUInt32BE(),u.mtimeSeconds=n.readUInt32BE(),u.mtimeNanoseconds=n.readUInt32BE(),u.dev=n.readUInt32BE(),u.ino=n.readUInt32BE(),u.mode=n.readUInt32BE(),u.uid=n.readUInt32BE(),u.gid=n.readUInt32BE(),u.size=n.readUInt32BE(),u.oid=n.slice(20).toString("hex");let f=n.readUInt16BE();u.flags=MH(f);let d=e.indexOf(0,n.tell()+1)-n.tell();if(d<1)throw new de(`Got a path length of: ${d}`);if(u.path=n.toString("utf8",d),u.path.includes("..\\")||u.path.includes("../"))throw new ho(u.path);let h=8-(n.tell()-12)%8;for(h===0&&(h=8);h--;){let m=n.readUInt8();if(m!==0)throw new de(`Expected 1-8 null characters but got '${m}' after ${u.path}`);if(n.eof())throw new de("Unexpected end of file")}u.stages=[],r._addEntry(u),c++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(sE)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(r=>r):e)}*[Symbol.iterator](){for(let e of this.entries)yield e}insert({filepath:e,stats:r,oid:n,stage:i=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=po(r);let a=Buffer.from(e),s={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:e,oid:n,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:a.length<4095?a.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(let r of this._entries.keys())r.startsWith(e+"/")&&this._entries.delete(r);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){let r=Buffer.from(e.path),n=Math.ceil((62+r.length+1)/8)*8,i=Buffer.alloc(n),a=new Kr(i),s=po(e);return a.writeUInt32BE(s.ctimeSeconds),a.writeUInt32BE(s.ctimeNanoseconds),a.writeUInt32BE(s.mtimeSeconds),a.writeUInt32BE(s.mtimeNanoseconds),a.writeUInt32BE(s.dev),a.writeUInt32BE(s.ino),a.writeUInt32BE(s.mode),a.writeUInt32BE(s.uid),a.writeUInt32BE(s.gid),a.writeUInt32BE(s.size),a.write(e.oid,20,"hex"),a.writeUInt16BE(DH(e)),a.write(e.path,r.length,"utf8"),i}async toObject(){let e=Buffer.alloc(12),r=new Kr(e);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(let o of this.entries)if(n.push(t._entryToBuffer(o)),o.stages.length>1)for(let l of o.stages)l&&l!==o&&n.push(t._entryToBuffer(l));n=await Promise.all(n);let i=Buffer.concat(n),a=Buffer.concat([e,i]),s=await ki(a);return Buffer.concat([a,Buffer.from(s,"hex")])}};function Lf(t,e,r=!0,n=!0){let i=po(t),a=po(e);return r&&i.mode!==a.mode||i.mtimeSeconds!==a.mtimeSeconds||i.ctimeSeconds!==a.ctimeSeconds||i.uid!==a.uid||i.gid!==a.gid||n&&i.ino!==a.ino||i.size!==a.size}var og=null,lg=Symbol("IndexCache");function LH(){return{map:new Map,stats:new Map}}async function NH(t,e,r){let[n,i]=await Promise.all([t.lstat(e),t.read(e)]),a=await wg.from(i);r.map.set(e,a),r.stats.set(e,n)}async function BH(t,e,r){let n=r.stats.get(e);if(n===void 0)return!0;if(n===null)return!1;let i=await t.lstat(e);return i===null?!1:Lf(n,i)}var ct=class{static async acquire({fs:e,gitdir:r,cache:n,allowUnmerged:i=!0},a){n[lg]||(n[lg]=LH());let s=`${r}/index`;og===null&&(og=new Jl({maxPending:1/0}));let o,l=[];return await og.acquire(s,async()=>{let c=n[lg];await BH(e,s,c)&&await NH(e,s,c);let u=c.map.get(s);if(l=u.unmergedPaths,l.length&&!i)throw new Ql(l);if(o=await a(u),u._dirty){let f=await u.toObject();await e.write(s,f),c.stats.set(s,await e.lstat(s)),u._dirty=!1}}),o}};function Nf(t){let e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function mo(t){let e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function cE(t){let e=new Map,r=function(i){if(!e.has(i)){let a={type:"tree",fullpath:i,basename:Nf(i),metadata:{},children:[]};e.set(i,a),a.parent=r(mo(i)),a.parent&&a.parent!==a&&a.parent.children.push(a)}return e.get(i)},n=function(i,a){if(!e.has(i)){let s={type:"blob",fullpath:i,basename:Nf(i),metadata:a,parent:r(mo(i)),children:[]};s.parent&&s.parent.children.push(s),e.set(i,s)}return e.get(i)};r(".");for(let i of t)n(i.path,i);return e}function HH(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new de(`Unexpected GitTree entry mode: ${t.toString(8)}`)}var yg=class{constructor({fs:e,gitdir:r,cache:n}){this.treePromise=ct.acquire({fs:e,gitdir:r,cache:n},async function(a){return cE(a.entries)});let i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){let r=e._fullpath,i=(await this.treePromise).get(r);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);let a=i.children.map(s=>s.fullpath);return a.sort(Wf),a}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){let n=(await this.treePromise).get(e._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let i=n.type==="tree"?{}:po(n.metadata);e._type=n.type==="tree"?"tree":HH(i.mode),e._mode=i.mode,n.type==="tree"?e._stat=void 0:e._stat=i}return e._stat}async content(e){}async oid(e){if(e._oid===!1){let n=(await this.treePromise).get(e._fullpath);e._oid=n.metadata.oid}return e._oid}},Yf=Symbol("GitWalkSymbol");function ts(){let t=Object.create(null);return Object.defineProperty(t,Yf,{value:function({fs:e,gitdir:r,cache:n}){return new yg({fs:e,gitdir:r,cache:n})}}),Object.freeze(t),t}var Le=class t extends Ae{constructor(e){super(`Could not find ${e}.`),this.code=this.name=t.code,this.data={what:e}}};Le.code="NotFoundError";var rr=class t extends Ae{constructor(e,r,n,i){super(`Object ${e} ${i?`at ${i}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=t.code,this.data={oid:e,actual:r,expected:n,filepath:i}}};rr.code="ObjectTypeError";var oa=class t extends Ae{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=t.code,this.data={value:e}}};oa.code="InvalidOidError";var ec=class t extends Ae{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=t.code,this.data={remote:e}}};ec.code="NoRefspecError";var Bf=class t{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let r=null;this.parsedConfig=e.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};let i=n.indexOf(" ");if(n.startsWith("^")){let a=n.slice(1);return this.refs.set(r+"^{}",a),{line:n,ref:r,peeled:a}}else{let a=n.slice(0,i);return r=n.slice(i+1),this.refs.set(r,a),{line:n,ref:r,oid:a}}})}return this}static from(e){return new t(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}},Hf=class t{constructor({remotePath:e,localPath:r,force:n,matchPrefix:i}){Object.assign(this,{remotePath:e,localPath:r,force:n,matchPrefix:i})}static from(e){let[r,n,i,a,s]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=r==="+",l=i==="*";if(l!==(s==="*"))throw new de("Invalid refspec");return new t({remotePath:n,localPath:a,force:o,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}},bg=class t{constructor(e=[]){this.rules=e}static from(e){let r=[];for(let n of e)r.push(Hf.from(n));return new t(r)}add(e){let r=Hf.from(e);this.rules.push(r)}translate(e){let r=[];for(let n of this.rules)for(let i of e){let a=n.translate(i);a&&r.push([i,a])}return r}translateOne(e){let r=null;for(let n of this.rules){let i=n.translate(e);i&&(r=i)}return r}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}};function UH(t,e){let r=t.replace(/\^\{\}$/,""),n=e.replace(/\^\{\}$/,""),i=-(r<n)||+(r>n);return i===0?t.endsWith("^{}")?1:-1:i}var jH=t=>{if(typeof t=="number")return t;t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},Kl=t=>{if(typeof t=="boolean")return t;if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},NS={core:{filemode:Kl,bare:Kl,logallrefupdates:Kl,symlinks:Kl,ignorecase:Kl,bigFileThreshold:jH}},GH=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,qH=/^[A-Za-z0-9-.]+$/,zH=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,VH=/^[A-Za-z][A-Za-z-]*$/,WH=/^(.*?)( *[#;].*)$/,YH=t=>{let e=GH.exec(t);if(e!=null){let[r,n]=e.slice(1);return[r,n]}return null},XH=t=>{let e=zH.exec(t);if(e!=null){let[r,n="true"]=e.slice(1),i=ZH(n),a=KH(i);return[r,a]}return null},ZH=t=>{let e=WH.exec(t);if(e==null)return t;let[r,n]=e.slice(1);return BS(r)&&BS(n)?`${r}${n}`:r},BS=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,KH=t=>t.split("").reduce((e,r,n,i)=>{let a=r==='"'&&i[n-1]!=="\\",s=r==="\\"&&i[n+1]==='"';return a||s?e:e+r},""),HS=t=>t!=null?t.toLowerCase():null,_g=(t,e,r)=>[HS(t),e,HS(r)].filter(n=>n!=null).join("."),US=t=>{let e=t.split("."),r=e.shift(),n=e.pop(),i=e.length?e.join("."):void 0;return{section:r,subsection:i,name:n,path:_g(r,i,n),sectionPath:_g(r,i,null),isSection:!!r}},JH=(t,e)=>t.reduce((r,n,i)=>e(n)?i:r,-1),xg=class t{constructor(e){let r=null,n=null;this.parsedConfig=e?e.split(`
`).map(i=>{let a=null,s=null,o=i.trim(),l=YH(o),c=l!=null;if(c)[r,n]=l;else{let f=XH(o);f!=null&&([a,s]=f)}let u=_g(r,n,a);return{line:i,isSection:c,section:r,subsection:n,name:a,value:s,path:u}}):[]}static from(e){return new t(e)}async get(e,r=!1){let n=US(e).path,i=this.parsedConfig.filter(a=>a.path===n).map(({section:a,name:s,value:o})=>{let l=NS[a]&&NS[a][s];return l?l(o):o});return r?i:i.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(r=>r.isSection&&r.section===e).map(r=>r.subsection)}async deleteSection(e,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===e&&n.subsection===r))}async append(e,r){return this.set(e,r,!0)}async set(e,r,n=!1){let{section:i,subsection:a,name:s,path:o,sectionPath:l,isSection:c}=US(e),u=JH(this.parsedConfig,f=>f.path===o);if(r==null)u!==-1&&this.parsedConfig.splice(u,1);else if(u!==-1){let f=this.parsedConfig[u],d=Object.assign({},f,{name:s,value:r,modified:!0});n?this.parsedConfig.splice(u+1,0,d):this.parsedConfig[u]=d}else{let f=this.parsedConfig.findIndex(h=>h.path===l),d={section:i,subsection:a,name:s,value:r,modified:!0,path:o};if(qH.test(i)&&VH.test(s))if(f>=0)this.parsedConfig.splice(f+1,0,d);else{let h={isSection:c,section:i,subsection:a,modified:!0,path:l};this.parsedConfig.push(h,d)}}}toString(){return this.parsedConfig.map(({line:e,section:r,subsection:n,name:i,value:a,modified:s=!1})=>s?i!=null&&a!=null?typeof a=="string"&&/[#;]/.test(a)?`	${i} = "${a}"`:`	${i} = ${a}`:n!=null?`[${r} "${n}"]`:`[${r}]`:e).join(`
`)}},nt=class{static async get({fs:e,gitdir:r}){let n=await e.read(`${r}/config`,{encoding:"utf8"});return xg.from(n)}static async save({fs:e,gitdir:r,config:n}){await e.write(`${r}/config`,n.toString(),{encoding:"utf8"})}},Mf=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],QH=["config","description","index","shallow","commondir"],cg;async function aa(t,e){return cg===void 0&&(cg=new Jl),cg.acquire(t,e)}var z=class t{static async updateRemoteRefs({fs:e,gitdir:r,remote:n,refs:i,symrefs:a,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:c=!1}){for(let v of i.values())if(!v.match(/[0-9a-f]{40}/))throw new oa(v);let u=await nt.get({fs:e,gitdir:r});if(!o){if(o=await u.getall(`remote.${n}.fetch`),o.length===0)throw new ec(n);o.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}let f=bg.from(o),d=new Map;if(c){let v=await t.listRefs({fs:e,gitdir:r,filepath:"refs/tags"});await t.deleteRefs({fs:e,gitdir:r,refs:v.map(w=>`refs/tags/${w}`)})}if(s){for(let v of i.keys())if(v.startsWith("refs/tags")&&!v.endsWith("^{}")&&!await t.exists({fs:e,gitdir:r,ref:v})){let w=i.get(v);d.set(v,w)}}let h=f.translate([...i.keys()]);for(let[v,w]of h){let b=i.get(v);d.set(w,b)}let m=f.translate([...a.keys()]);for(let[v,w]of m){let b=a.get(v),S=f.translateOne(b);S&&d.set(w,`ref: ${S}`)}let g=[];if(l){for(let v of f.localNamespaces()){let w=(await t.listRefs({fs:e,gitdir:r,filepath:v})).map(b=>`${v}/${b}`);for(let b of w)d.has(b)||g.push(b)}g.length>0&&await t.deleteRefs({fs:e,gitdir:r,refs:g})}for(let[v,w]of d)await aa(v,async()=>e.write(O.join(r,v),`${w.trim()}
`,"utf8"));return{pruned:g}}static async writeRef({fs:e,gitdir:r,ref:n,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new oa(i);await aa(n,async()=>e.write(O.join(r,n),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:r,ref:n,value:i}){await aa(n,async()=>e.write(O.join(r,n),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:r,ref:n}){return t.deleteRefs({fs:e,gitdir:r,refs:[n]})}static async deleteRefs({fs:e,gitdir:r,refs:n}){await Promise.all(n.map(o=>e.rm(O.join(r,o))));let i=await aa("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"})),a=Bf.from(i),s=a.refs.size;for(let o of n)a.refs.has(o)&&a.delete(o);a.refs.size<s&&(i=a.toString(),await aa("packed-refs",async()=>e.write(`${r}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:r,ref:n,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return n;if(n.startsWith("ref: "))return n=n.slice(5),t.resolve({fs:e,gitdir:r,ref:n,depth:i});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let a=await t.packedRefs({fs:e,gitdir:r}),s=Mf(n).filter(o=>!QH.includes(o));for(let o of s){let l=await aa(o,async()=>await e.read(`${r}/${o}`,{encoding:"utf8"})||a.get(o));if(l)return t.resolve({fs:e,gitdir:r,ref:l.trim(),depth:i})}throw new Le(n)}static async exists({fs:e,gitdir:r,ref:n}){try{return await t.expand({fs:e,gitdir:r,ref:n}),!0}catch(i){return!1}}static async expand({fs:e,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let i=await t.packedRefs({fs:e,gitdir:r}),a=Mf(n);for(let s of a)if(await aa(s,async()=>e.exists(`${r}/${s}`))||i.has(s))return s;throw new Le(n)}static async expandAgainstMap({ref:e,map:r}){let n=Mf(e);for(let i of n)if(await r.has(i))return i;throw new Le(e)}static resolveAgainstMap({ref:e,fullref:r=e,depth:n=void 0,map:i}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),t.resolveAgainstMap({ref:e,fullref:r,depth:n,map:i});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:r,oid:e};let a=Mf(e);for(let s of a){let o=i.get(s);if(o)return t.resolveAgainstMap({ref:o.trim(),fullref:s,depth:n,map:i})}throw new Le(e)}static async packedRefs({fs:e,gitdir:r}){let n=await aa("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));return Bf.from(n).refs}static async listRefs({fs:e,gitdir:r,filepath:n}){let i=t.packedRefs({fs:e,gitdir:r}),a=null;try{a=await e.readdirDeep(`${r}/${n}`),a=a.map(s=>s.replace(`${r}/${n}/`,""))}catch(s){a=[]}for(let s of(await i).keys())s.startsWith(n)&&(s=s.replace(n+"/",""),a.includes(s)||a.push(s));return a.sort(UH),a}static async listBranches({fs:e,gitdir:r,remote:n}){return n?t.listRefs({fs:e,gitdir:r,filepath:`refs/remotes/${n}`}):t.listRefs({fs:e,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:r}){return(await t.listRefs({fs:e,gitdir:r,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}};function e3(t,e){return Wf(jS(t),jS(e))}function jS(t){return t.mode==="040000"?t.path+"/":t.path}function uE(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new de(`Unexpected GitTree entry mode: ${t}`)}function t3(t){let e=[],r=0;for(;r<t.length;){let n=t.indexOf(32,r);if(n===-1)throw new de(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);let i=t.indexOf(0,r);if(i===-1)throw new de(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let a=t.slice(r,n).toString("utf8");a==="40000"&&(a="040000");let s=uE(a),o=t.slice(n+1,i).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new ho(o);let l=t.slice(i+1,i+21).toString("hex");r=i+21,e.push({mode:a,path:o,oid:l,type:s})}return e}function r3(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new de(`Could not understand file mode: ${t}`)}function n3(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=r3(t.mode),t.type||(t.type=uE(t.mode)),t}var pr=class t{constructor(e){if(Buffer.isBuffer(e))this._entries=t3(e);else if(Array.isArray(e))this._entries=e.map(n3);else throw new de("invalid type passed to GitTree constructor");this._entries.sort(sE)}static from(e){return new t(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){let e=[...this._entries];return e.sort(e3),Buffer.concat(e.map(r=>{let n=Buffer.from(r.mode.replace(/^0/,"")),i=Buffer.from(" "),a=Buffer.from(r.path,"utf8"),s=Buffer.from([0]),o=Buffer.from(r.oid,"hex");return Buffer.concat([n,i,a,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(let e of this._entries)yield e}},la=class{static wrap({type:e,object:r}){return Buffer.concat([Buffer.from(`${e} ${r.byteLength.toString()}\0`),Buffer.from(r)])}static unwrap(e){let r=e.indexOf(32),n=e.indexOf(0),i=e.slice(0,r).toString("utf8"),a=e.slice(r+1,n).toString("utf8"),s=e.length-(n+1);if(parseInt(a)!==s)throw new de(`Length mismatch: expected ${a} bytes but got ${s} instead.`);return{type:i,object:Buffer.from(e.slice(n+1))}}};async function fE({fs:t,gitdir:e,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`,i=await t.read(`${e}/${n}`);return i?{object:i,format:"deflated",source:n}:null}function i3(t,e){let r=new Kr(t),n=GS(r);if(n!==e.byteLength)throw new de(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${e.length} bytes`);let i=GS(r),a,s=zS(r,e);if(s.byteLength===i)a=s;else{a=Buffer.alloc(i);let o=new Kr(a);for(o.copy(s);!r.eof();)o.copy(zS(r,e));let l=o.tell();if(i!==l)throw new de(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return a}function GS(t){let e=0,r=0,n=null;do n=t.readUInt8(),e|=(n&127)<<r,r+=7;while(n&128);return e}function qS(t,e,r){let n=0,i=0;for(;r--;)e&1&&(n|=t.readUInt8()<<i),e>>=1,i+=8;return n}function zS(t,e){let r=t.readUInt8(),n=128,i=15,a=112;if(r&n){let s=qS(t,r&i,4),o=qS(t,(r&a)>>4,3);return o===0&&(o=65536),e.slice(s,s+o)}else return t.slice(r)}function a3(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function dE(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:a3(t)}var Uf=class{constructor(e){if(typeof Buffer=="undefined")throw new Error("Missing Buffer dependency");this.stream=dE(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:r}=await this.stream.next();return e&&(this._ended=!0,!r)?Buffer.alloc(0):(r&&(r=Buffer.from(r)),r)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;let r=[this.buffer];for(;this.cursor+e>s3(r);){let n=await this._next();if(this._ended)break;r.push(n)}this.buffer=Buffer.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}};function s3(t){return t.reduce((e,r)=>e+r.length,0)}async function o3(t,e){let r=new Uf(t),n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new de(`Invalid PACK header '${n}'`);let i=await r.read(4);if(i=i.readUInt32BE(0),i!==2)throw new de(`Invalid packfile version: ${i}`);let a=await r.read(4);if(a=a.readUInt32BE(0),!(a<1))for(;!r.eof()&&a--;){let s=r.tell(),{type:o,length:l,ofs:c,reference:u}=await l3(r),f=new Rg.Inflate;for(;!f.result;){let d=await r.chunk();if(!d)break;if(f.push(d,!1),f.err)throw new de(`Pako error: ${f.msg}`);if(f.result){if(f.result.length!==l)throw new de("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(d.length-f.strm.avail_in);let h=r.tell();await e({data:f.result,type:o,num:a,offset:s,end:h,reference:u,ofs:c})}}}}async function l3(t){let e=await t.byte(),r=e>>4&7,n=e&15;if(e&128){let s=4;do e=await t.byte(),n|=(e&127)<<s,s+=7;while(e&128)}let i,a;if(r===6){let s=0;i=0;let o=[];do e=await t.byte(),i|=(e&127)<<s,s+=7,o.push(e);while(e&128);a=Buffer.from(o)}return r===7&&(a=await t.read(20)),{type:r,length:n,ofs:i,reference:a}}var ug=!1;async function hE(t){return ug===null&&(ug=u3()),ug?c3(t):Rg.inflate(t)}async function c3(t){let e=new DecompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function u3(){try{if(new DecompressionStream("deflate"))return!0}catch(t){}return!1}function f3(t){let e=[],r=0,n=0;do{r=t.readUInt8();let i=r&127;e.push(i),n=r&128}while(n);return e.reduce((i,a)=>i+1<<7|a,-1)}function d3(t,e){let r=e,n=4,i=null;do i=t.readUInt8(),r|=(i&127)<<n,n+=7;while(i&128);return r}var tc=class t{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:r}){let n=new Kr(e);if(n.slice(4).toString("hex")!=="ff744f63")return;let a=n.readUInt32BE();if(a!==2)throw new de(`Unable to read version ${a} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new de("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);let s=n.readUInt32BE(),o=[];for(let u=0;u<s;u++){let f=n.slice(20).toString("hex");o[u]=f}n.seek(n.tell()+4*s);let l=new Map;for(let u=0;u<s;u++)l.set(o[u],n.readUInt32BE());let c=n.slice(20).toString("hex");return new t({hashes:o,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:r})}static async fromPack({pack:e,getExternalRefDelta:r,onProgress:n}){let i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},a={},s=e.slice(-20).toString("hex"),o=[],l={},c=new Map,u=null,f=null;await o3([e],async({data:v,type:w,reference:b,offset:S,num:E})=>{u===null&&(u=E);let k=Math.floor((u-E)*100/u);k!==f&&n&&await n({phase:"Receiving objects",loaded:u-E,total:u}),f=k,w=i[w],["commit","tree","blob","tag"].includes(w)?a[S]={type:w,offset:S}:w==="ofs-delta"?a[S]={type:w,offset:S}:w==="ref-delta"&&(a[S]={type:w,offset:S})});let d=Object.keys(a).map(Number);for(let[v,w]of d.entries()){let b=v+1===d.length?e.byteLength-20:d[v+1],S=a[w],E=PH.buf(e.slice(w,b))>>>0;S.end=b,S.crc=E}let h=new t({pack:Promise.resolve(e),packfileSha:s,crcs:l,hashes:o,offsets:c,getExternalRefDelta:r});f=null;let m=0,g=[0,0,0,0,0,0,0,0,0,0,0,0];for(let v in a){v=Number(v);let w=Math.floor(m*100/u);w!==f&&n&&await n({phase:"Resolving deltas",loaded:m,total:u}),m++,f=w;let b=a[v];if(!b.oid)try{h.readDepth=0,h.externalReadDepth=0;let{type:S,object:E}=await h.readSlice({start:v});g[h.readDepth]+=1;let k=await ki(la.wrap({type:S,object:E}));b.oid=k,o.push(k),c.set(k,v),l[k]=b.crc}catch(S){continue}}return o.sort(),h}async toBuffer(){let e=[],r=(c,u)=>{e.push(Buffer.from(c,u))};r("ff744f63","hex"),r("00000002","hex");let n=new Kr(Buffer.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(let f of this.hashes)parseInt(f.slice(0,2),16)<=c&&u++;n.writeUInt32BE(u)}e.push(n.buffer);for(let c of this.hashes)r(c,"hex");let i=new Kr(Buffer.alloc(this.hashes.length*4));for(let c of this.hashes)i.writeUInt32BE(this.crcs[c]);e.push(i.buffer);let a=new Kr(Buffer.alloc(this.hashes.length*4));for(let c of this.hashes)a.writeUInt32BE(this.offsets.get(c));e.push(a.buffer),r(this.packfileSha,"hex");let s=Buffer.concat(e),o=await ki(s),l=Buffer.alloc(20);return l.write(o,"hex"),Buffer.concat([s,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new de(`Could not read object ${e} from packfile`)}let r=this.offsets.get(e);return this.readSlice({start:r})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;let r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new de("Tried to read from a GitPackIndex with no packfile loaded into memory");let n=(await this.pack).slice(e),i=new Kr(n),a=i.readUInt8(),s=a&112,o=r[s];if(o===void 0)throw new de("Unrecognized type: 0b"+s.toString(2));let l=a&15,c=l;a&128&&(c=d3(i,l));let f=null,d=null;if(o==="ofs_delta"){let m=f3(i),g=e-m;({object:f,type:o}=await this.readSlice({start:g}))}if(o==="ref_delta"){let m=i.slice(20).toString("hex");({object:f,type:o}=await this.read({oid:m}))}let h=n.slice(i.tell());if(d=Buffer.from(await hE(h)),d.byteLength!==c)throw new de(`Packfile told us object would have length ${c} but it had length ${d.byteLength}`);return f&&(d=Buffer.from(i3(d,f))),this.readDepth>3&&(this.offsetCache[e]={type:o,object:d}),{type:o,format:"content",object:d}}},Df=Symbol("PackfileCache");async function h3({fs:t,filename:e,getExternalRefDelta:r,emitter:n,emitterPrefix:i}){let a=await t.read(e);return tc.fromIdx({idx:a,getExternalRefDelta:r})}function Ig({fs:t,cache:e,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}){e[Df]||(e[Df]=new Map);let s=e[Df].get(r);return s||(s=h3({fs:t,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}),e[Df].set(r,s)),s}async function p3({fs:t,cache:e,gitdir:r,oid:n,format:i="content",getExternalRefDelta:a}){let s=await t.readdir(O.join(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(let o of s){let l=`${r}/objects/pack/${o}`,c=await Ig({fs:t,cache:e,filename:l,getExternalRefDelta:a});if(c.error)throw new de(c.error);if(c.offsets.has(n)){if(!c.pack){let f=l.replace(/idx$/,"pack");c.pack=t.read(f)}let u=await c.read({oid:n,getExternalRefDelta:a});return u.format="content",u.source=`objects/pack/${o.replace(/idx$/,"pack")}`,u}}return null}async function qe({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){let a=u=>qe({fs:t,cache:e,gitdir:r,oid:u}),s;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Buffer.from("tree 0\0")}),s||(s=await fE({fs:t,gitdir:r,oid:n})),!s){if(s=await p3({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:a}),!s)throw new Le(n);return s}if(i==="deflated"||(s.format==="deflated"&&(s.object=Buffer.from(await hE(s.object)),s.format="wrapped"),i==="wrapped"))return s;let o=await ki(s.object);if(o!==n)throw new de(`SHA check failed! Expected ${n}, computed ${o}`);let{object:l,type:c}=la.unwrap(s.object);if(s.type=c,s.object=l,s.format="content",i==="content")return s;throw new de(`invalid requested format "${i}"`)}var vn=class t extends Ae{constructor(e,r,n=!0){super(`Failed to create ${e} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=t.code,this.data={noun:e,where:r,canForce:n}}};vn.code="AlreadyExistsError";var rc=class t extends Ae{constructor(e,r,n){super(`Found multiple ${e} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=t.code,this.data={nouns:e,short:r,matches:n}}};rc.code="AmbiguousError";var nc=class t extends Ae{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=t.code,this.data={filepaths:e}}};nc.code="CheckoutConflictError";var ic=class t extends Ae{constructor(e,r){super(`Failed to checkout "${e}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=t.code,this.data={ref:e,oid:r}}};ic.code="CommitNotFetchedError";var ac=class t extends Ae{constructor(){super("Empty response from git server."),this.code=this.name=t.code,this.data={}}};ac.code="EmptyServerResponseError";var sc=class t extends Ae{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=t.code,this.data={}}};sc.code="FastForwardError";var oc=class t extends Ae{constructor(e,r){super(`One or more branches were not updated: ${e}`),this.code=this.name=t.code,this.data={prettyDetails:e,result:r}}};oc.code="GitPushError";var go=class t extends Ae{constructor(e,r,n){super(`HTTP Error: ${e} ${r}`),this.code=this.name=t.code,this.data={statusCode:e,statusMessage:r,response:n}}};go.code="HttpError";var ca=class t extends Ae{constructor(e){let r="invalid filepath";e==="leading-slash"||e==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=t.code,this.data={reason:e}}};ca.code="InvalidFilepathError";var wn=class t extends Ae{constructor(e,r){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=t.code,this.data={ref:e,suggestion:r}}};wn.code="InvalidRefNameError";var lc=class t extends Ae{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=t.code,this.data={depth:e}}};lc.code="MaxDepthError";var vo=class t extends Ae{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=t.code,this.data={}}};vo.code="MergeNotSupportedError";var wo=class t extends Ae{constructor(e,r,n,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=t.code,this.data={filepaths:e,bothModified:r,deleteByUs:n,deleteByTheirs:i}}};wo.code="MergeConflictError";var zt=class t extends Ae{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=t.code,this.data={role:e}}};zt.code="MissingNameError";var hr=class t extends Ae{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=t.code,this.data={parameter:e}}};hr.code="MissingParameterError";var cc=class t extends Ae{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=t.code,this.data={errors:e},this.errors=e}};cc.code="MultipleGitError";var Ja=class t extends Ae{constructor(e,r){super(`Expected "${e}" but received "${r}".`),this.code=this.name=t.code,this.data={expected:e,actual:r}}};Ja.code="ParseError";var yo=class t extends Ae{constructor(e){let r="";e==="not-fast-forward"?r=" because it was not a simple fast-forward":e==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=t.code,this.data={reason:e}}};yo.code="PushRejectedError";var sa=class t extends Ae{constructor(e,r){super(`Remote does not support the "${e}" so the "${r}" parameter cannot be used.`),this.code=this.name=t.code,this.data={capability:e,parameter:r}}};sa.code="RemoteCapabilityError";var uc=class t extends Ae{constructor(e,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=t.code,this.data={preview:e,response:r}}};uc.code="SmartHttpError";var fc=class t extends Ae{constructor(e,r,n){super(`Git remote "${e}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=t.code,this.data={url:e,transport:r,suggestion:n}}};fc.code="UnknownTransportError";var dc=class t extends Ae{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=t.code,this.data={url:e}}};dc.code="UrlParseError";var bo=class t extends Ae{constructor(){super("The operation was canceled."),this.code=this.name=t.code,this.data={}}};bo.code="UserCanceledError";var hc=class t extends Ae{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=t.code,this.data={filepath:e}}};hc.code="IndexResetError";var pc=class t extends Ae{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=t.code,this.data={ref:e}}};pc.code="NoCommitError";var pE=Object.freeze({__proto__:null,AlreadyExistsError:vn,AmbiguousError:rc,CheckoutConflictError:nc,CommitNotFetchedError:ic,EmptyServerResponseError:ac,FastForwardError:sc,GitPushError:oc,HttpError:go,InternalError:de,InvalidFilepathError:ca,InvalidOidError:oa,InvalidRefNameError:wn,MaxDepthError:lc,MergeNotSupportedError:vo,MergeConflictError:wo,MissingNameError:zt,MissingParameterError:hr,MultipleGitError:cc,NoRefspecError:ec,NotFoundError:Le,ObjectTypeError:rr,ParseError:Ja,PushRejectedError:yo,RemoteCapabilityError:sa,SmartHttpError:uc,UnknownTransportError:fc,UnsafeFilepathError:ho,UrlParseError:dc,UserCanceledError:bo,UnmergedPathsError:Ql,IndexResetError:hc,NoCommitError:pc});function Sg({name:t,email:e,timestamp:r,timezoneOffset:n}){return n=m3(n),`${t} <${e}> ${r} ${n}`}function m3(t){let e=g3(v3(t));t=Math.abs(t);let r=Math.floor(t/60);t-=r*60;let n=String(r),i=String(t);return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),(e===-1?"-":"+")+n+i}function g3(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function v3(t){return t===0?t:-t}function Ei(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function jf(t){let[,e,r,n,i]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:r,timestamp:Number(n),timezoneOffset:w3(i)}}function w3(t){let[,e,r,n]=t.match(/(\+|-)(\d\d)(\d\d)/);return n=(e==="+"?1:-1)*(Number(r)*60+Number(n)),y3(n)}function y3(t){return t===0?t:-t}var $r=class t{constructor(e){if(typeof e=="string")this._tag=e;else if(Buffer.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=t.render(e);else throw new de("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new t(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${Sg(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){let e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){let e=this.justHeaders().split(`
`),r=[];for(let i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={};for(let i of r){let a=i.slice(0,i.indexOf(" ")),s=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(s):n[a]=s}return n.tagger&&(n.tagger=jf(n.tagger)),n.committer&&(n.committer=jf(n.committer)),n}withoutSignature(){let e=Ei(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;let e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Ei(e)}payload(){return this.withoutSignature()+`
`}toObject(){return Buffer.from(this._tag,"utf8")}static async sign(e,r,n){let i=e.payload(),{signature:a}=await r({payload:i,secretKey:n});a=Ei(a);let s=i+a;return t.from(s)}};function fg(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function b3(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}var mr=class t{constructor(e){if(typeof e=="string")this._commit=e;else if(Buffer.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=t.render(e);else throw new de("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:r}){let n=t.justHeaders(e),i=t.justMessage(e),a=Ei(n+`
gpgsig`+fg(r)+`
`+i);return new t(a)}static from(e){return new t(e)}toObject(){return Buffer.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return t.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return Ei(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){let e=t.justHeaders(this._commit).split(`
`),r=[];for(let i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={parent:[]};for(let i of r){let a=i.slice(0,i.indexOf(" ")),s=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(s):n[a]=s}return n.author&&(n.author=jf(n.author)),n.committer&&(n.committer=jf(n.committer)),n}static renderHeaders(e){let r="";if(e.tree?r+=`tree ${e.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new de("commit 'parent' property should be an array");for(let a of e.parent)r+=`parent ${a}
`}let n=e.author;r+=`author ${Sg(n)}
`;let i=e.committer||e.author;return r+=`committer ${Sg(i)}
`,e.gpgsig&&(r+="gpgsig"+fg(e.gpgsig)),r}static render(e){return t.renderHeaders(e)+`
`+Ei(e.message)}render(){return this._commit}withoutSignature(){let e=Ei(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;let r=e.slice(0,e.indexOf(`
gpgsig`)),n=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Ei(r+`
`+n)}isolateSignature(){let e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return b3(e)}static async sign(e,r,n){let i=e.withoutSignature(),a=t.justMessage(e._commit),{signature:s}=await r({payload:i,secretKey:n});s=Ei(s);let l=t.justHeaders(e._commit)+`
gpgsig`+fg(s)+`
`+a;return t.from(l)}};async function _o({fs:t,cache:e,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:pr.from([]),oid:n};let{type:i,object:a}=await qe({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=$r.from(a).parse().object,_o({fs:t,cache:e,gitdir:r,oid:n});if(i==="commit")return n=mr.from(a).parse().tree,_o({fs:t,cache:e,gitdir:r,oid:n});if(i!=="tree")throw new rr(n,i,"tree");return{tree:pr.from(a),oid:n}}var Eg=class{constructor({fs:e,gitdir:r,ref:n,cache:i}){this.fs=e,this.cache=i,this.gitdir=r,this.mapPromise=(async()=>{let s=new Map,o;try{o=await z.resolve({fs:e,gitdir:r,ref:n})}catch(c){c instanceof Le&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}let l=await _o({fs:e,cache:this.cache,gitdir:r,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();let a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(e){let r=e._fullpath,{fs:n,cache:i,gitdir:a}=this,s=await this.mapPromise,o=s.get(r);if(!o)throw new Error(`No obj for ${r}`);let l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;let{type:c,object:u}=await qe({fs:n,cache:i,gitdir:a,oid:l});if(c!==o.type)throw new rr(l,c,o.type);let f=pr.from(u);for(let d of f)s.set(O.join(r,d.path),d);return f.entries().map(d=>O.join(r,d.path))}async type(e){if(e._type===!1){let r=await this.mapPromise,{type:n}=r.get(e._fullpath);e._type=n}return e._type}async mode(e){if(e._mode===!1){let r=await this.mapPromise,{mode:n}=r.get(e._fullpath);e._mode=oE(parseInt(n,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){let r=await this.mapPromise,{fs:n,cache:i,gitdir:a}=this,o=r.get(e._fullpath).oid,{type:l,object:c}=await qe({fs:n,cache:i,gitdir:a,oid:o});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){let n=(await this.mapPromise).get(e._fullpath);e._oid=n.oid}return e._oid}};function Ir({ref:t="HEAD"}={}){let e=Object.create(null);return Object.defineProperty(e,Yf,{value:function({fs:r,gitdir:n,cache:i}){return new Eg({fs:r,gitdir:n,ref:t,cache:i})}}),Object.freeze(e),e}var kg=class{constructor({fs:e,dir:r,gitdir:n,cache:i}){this.fs=e,this.cache=i,this.dir=r,this.gitdir=n,this.config=null;let a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(e){let r=e._fullpath,{fs:n,dir:i}=this,a=await n.readdir(O.join(i,r));return a===null?null:a.map(s=>O.join(r,s))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){let{fs:r,dir:n}=this,i=await r.lstat(`${n}/${e._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let a=i.isDirectory()?"tree":"blob";a==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(a="special"),e._type=a,i=po(i),e._mode=i.mode,i.size===-1&&e._actualSize&&(i.size=e._actualSize),e._stat=i}return e._stat}async content(e){if(e._content===!1){let{fs:r,dir:n,gitdir:i}=this;if(await e.type()==="tree")e._content=void 0;else{let s=await(await this._getGitConfig(r,i)).get("core.autocrlf"),o=await r.read(`${n}/${e._fullpath}`,{autocrlf:s});e._actualSize=o.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(o)}}return e._content}async oid(e){if(e._oid===!1){let r=this,{fs:n,gitdir:i,cache:a}=this,s;await ct.acquire({fs:n,gitdir:i,cache:a},async function(o){let l=o.entriesMap.get(e._fullpath),c=await e.stat(),f=await(await r._getGitConfig(n,i)).get("core.filemode"),d=typeof process!="undefined"?process.platform!=="win32":!0;if(!l||Lf(c,l,f,d)){let h=await e.content();h===void 0?s=void 0:(s=await ki(la.wrap({type:"blob",object:h})),l&&s===l.oid&&(!f||c.mode===l.mode)&&Lf(c,l,f,d)&&o.insert({filepath:e._fullpath,stats:c,oid:s}))}else s=l.oid}),e._oid=s}return e._oid}async _getGitConfig(e,r){return this.config?this.config:(this.config=await nt.get({fs:e,gitdir:r}),this.config)}};function To(){let t=Object.create(null);return Object.defineProperty(t,Yf,{value:function({fs:e,dir:r,gitdir:n,cache:i}){return new kg({fs:e,dir:r,gitdir:n,cache:i})}}),Object.freeze(t),t}function _3(t,e){let r=e-t;return Array.from({length:r},(n,i)=>t+i)}var mE=typeof Array.prototype.flat=="undefined"?t=>t.reduce((e,r)=>e.concat(r),[]):t=>t.flat(),Ag=class{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}};function*x3(t){let e=new Ag,r,n=[],i=t.length;for(let a=0;a<i;a++)n[a]=t[a].next().value,n[a]!==void 0&&e.consider(n[a]);if(e.value!==null)for(;;){let a=[];r=e.value,e.reset();for(let s=0;s<i;s++)n[s]!==void 0&&n[s]===r?(a[s]=n[s],n[s]=t[s].next().value):a[s]=null,n[s]!==void 0&&e.consider(n[s]);if(yield a,e.value===null)return}}async function ua({fs:t,cache:e,dir:r,gitdir:n,trees:i,map:a=async(l,c)=>c,reduce:s=async(l,c)=>{let u=mE(c);return l!==void 0&&u.unshift(l),u},iterate:o=(l,c)=>Promise.all([...c].map(l))}){let l=i.map(h=>h[Yf]({fs:t,dir:r,gitdir:n,cache:e})),c=new Array(l.length).fill("."),u=_3(0,l.length),f=async h=>{u.map(v=>{let w=h[v];h[v]=w&&new l[v].ConstructEntry(w)});let g=(await Promise.all(u.map(v=>{let w=h[v];return w?l[v].readdir(w):[]}))).map(v=>(v===null?[]:v)[Symbol.iterator]());return{entries:h,children:x3(g)}},d=async h=>{let{entries:m,children:g}=await f(h),v=m.find(b=>b&&b._fullpath)._fullpath,w=await a(v,m);if(w!==null){let b=await o(d,g);return b=b.filter(S=>S!==void 0),s(w,b)}};return d(c)}async function Tg(t,e){let r=await t.readdir(e);r==null?await t.rm(e):r.length?await Promise.all(r.map(n=>{let i=O.join(e,n);return t.lstat(i).then(a=>{if(a)return a.isDirectory()?Tg(t,i):t.rm(i)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function S3(t){return E3(t)&&VS(t.then)&&VS(t.catch)}function E3(t){return t&&typeof t=="object"}function VS(t){return typeof t=="function"}function WS(t){return S3((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(t))}var YS=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function XS(t,e){if(WS(e))for(let r of YS)t[`_${r}`]=e[r].bind(e);else for(let r of YS)t[`_${r}`]=ag(e[r].bind(e));WS(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=Tg.bind(null,t):e.rm?t._rm=ag(e.rm.bind(e)):e.rmdir.length>2?t._rm=ag(e.rmdir.bind(e)):t._rm=Tg.bind(null,t)}var J=class{constructor(e){if(typeof e._original_unwrapped_fs!="undefined")return e;let r=Object.getOwnPropertyDescriptor(e,"promises");r&&r.enumerable?XS(this,e.promises):XS(this,e),this._original_unwrapped_fs=e}async exists(e,r={}){try{return await this._stat(e),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR"||(n.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(e,r={}){try{let n=await this._readFile(e,r);if(r.autocrlf==="true")try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,`
`),n=new TextEncoder().encode(n)}catch(i){}return typeof n!="string"&&(n=Buffer.from(n)),n}catch(n){return null}}async write(e,r,n={}){try{await this._writeFile(e,r,n);return}catch(i){await this.mkdir(mo(e)),await this._writeFile(e,r,n)}}async mkdir(e,r=!1){try{await this._mkdir(e);return}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){let i=mo(e);if(i==="."||i==="/"||i===e)throw n;await this.mkdir(i),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(e,r){try{r&&r.recursive?await this._rm(e,r):await this._rmdir(e)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(e){try{let r=await this._readdir(e);return r.sort(Wf),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(e){let r=await this._readdir(e);return(await Promise.all(r.map(async i=>{let a=e+"/"+i;return(await this._stat(a)).isDirectory()?this.readdirDeep(a):a}))).reduce((i,a)=>i.concat(a),[])}async lstat(e){try{return await this._lstat(e)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async readlink(e,r={encoding:"buffer"}){try{let n=await this._readlink(e,r);return Buffer.isBuffer(n)?n:Buffer.from(n)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async writelink(e,r){return this._symlink(r.toString("utf8"),e)}};function C(t,e){if(e===void 0)throw new hr(t)}async function Gf(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function gE({fs:t,dir:e,gitdir:r=O.join(e,".git"),commit:n="HEAD",cache:i={}}){try{C("fs",t),C("dir",e),C("gitdir",r);let a=new J(t),s=[Ir({ref:n}),To(),ts()],o=[];await ct.acquire({fs:a,gitdir:r,cache:i},async function(c){o=c.unmergedPaths});let l=await ua({fs:a,cache:i,dir:e,gitdir:r,trees:s,map:async function(c,[u,f,d]){let h=!await Gf(f,d),m=o.includes(c),g=!await Gf(d,u);if(h||m)return u?{path:c,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(g)return!1;throw new hc(c)}});await ct.acquire({fs:a,gitdir:r,cache:i},async function(c){for(let u of l)if(u!==!1){if(!u){await a.rmdir(`${e}/${u.path}`,{recursive:!0}),c.delete({filepath:u.path});continue}if(u.type==="blob"){let f=new TextDecoder().decode(u.content);await a.write(`${e}/${u.path}`,f,{mode:u.mode}),c.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(a){throw a.caller="git.abortMerge",a}}var fa=class{static async isIgnored({fs:e,dir:r,gitdir:n=O.join(r,".git"),filepath:i}){if(Nf(i)===".git")return!0;if(i===".")return!1;let a="",s=O.join(n,"info","exclude");await e.exists(s)&&(a=await e.read(s,"utf8"));let o=[{gitignore:O.join(r,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let u=1;u<l.length;u++){let f=l.slice(0,u).join("/"),d=l.slice(u).join("/");o.push({gitignore:O.join(r,f,".gitignore"),filepath:d})}let c=!1;for(let u of o){let f;try{f=await e.read(u.gitignore,"utf8")}catch(m){if(m.code==="NOENT")continue}let d=RH().add(a);d.add(f);let h=mo(u.filepath);if(h!=="."&&d.ignores(h))return!0;c?c=!d.test(u.filepath).unignored:c=d.test(u.filepath).ignored}return c}};async function k3({fs:t,gitdir:e,object:r,format:n,oid:i}){if(n!=="deflated")throw new de("GitObjectStoreLoose expects objects to write to be in deflated format");let a=`objects/${i.slice(0,2)}/${i.slice(2)}`,s=`${e}/${a}`;await t.exists(s)||await t.write(s,r)}var dg=null;async function vE(t){return dg===null&&(dg=T3()),dg?A3(t):Rg.deflate(t)}async function A3(t){let e=new CompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function T3(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch(t){return!1}}async function gr({fs:t,gitdir:e,type:r,object:n,format:i="content",oid:a=void 0,dryRun:s=!1}){return i!=="deflated"&&(i!=="wrapped"&&(n=la.wrap({type:r,object:n})),a=await ki(n),n=Buffer.from(await vE(n))),s||await k3({fs:t,gitdir:e,object:n,format:"deflated",oid:a}),a}function wE(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function yE({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n,cache:i={},force:a=!1,parallel:s=!0}){try{C("fs",t),C("dir",e),C("gitdir",r),C("filepath",n);let o=new J(t);await ct.acquire({fs:o,gitdir:r,cache:i},async l=>{let u=await(await nt.get({fs:o,gitdir:r})).get("core.autocrlf");return Cg({dir:e,gitdir:r,fs:o,filepath:n,index:l,force:a,parallel:s,autocrlf:u})})}catch(o){throw o.caller="git.add",o}}async function Cg({dir:t,gitdir:e,fs:r,filepath:n,index:i,force:a,parallel:s,autocrlf:o}){n=Array.isArray(n)?n:[n];let l=n.map(async d=>{if(!a&&await fa.isIgnored({fs:r,dir:t,gitdir:e,filepath:d}))return;let h=await r.lstat(O.join(t,d));if(!h)throw new Le(d);if(h.isDirectory()){let m=await r.readdir(O.join(t,d));if(s){let g=m.map(v=>Cg({dir:t,gitdir:e,fs:r,filepath:[O.join(d,v)],index:i,force:a,parallel:s,autocrlf:o}));await Promise.all(g)}else for(let g of m)await Cg({dir:t,gitdir:e,fs:r,filepath:[O.join(d,g)],index:i,force:a,parallel:s,autocrlf:o})}else{let m=h.isSymbolicLink()?await r.readlink(O.join(t,d)).then(wE):await r.read(O.join(t,d),{autocrlf:o});if(m===null)throw new Le(d);let g=await gr({fs:r,gitdir:e,type:"blob",object:m});i.insert({filepath:d,stats:h,oid:g})}}),c=await Promise.allSettled(l),u=c.filter(d=>d.status==="rejected").map(d=>d.reason);if(u.length>1)throw new cc(u);if(u.length===1)throw u[0];return c.filter(d=>d.status==="fulfilled"&&d.value).map(d=>d.value)}async function mc({fs:t,gitdir:e,path:r}){return(await nt.get({fs:t,gitdir:e})).get(r)}function bE(t,...e){for(let r of e)if(r)for(let n of Object.keys(r)){let i=r[n];i!==void 0&&(t[n]=i)}return t}async function da({fs:t,gitdir:e,author:r,commit:n}){let i=Math.floor(Date.now()/1e3),a={name:await mc({fs:t,gitdir:e,path:"user.name"}),email:await mc({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=bE({},a,n?n.author:void 0,r);if(s.name!==void 0)return s}async function xo({fs:t,gitdir:e,author:r,committer:n,commit:i}){let a=Math.floor(Date.now()/1e3),s={name:await mc({fs:t,gitdir:e,path:"user.name"}),email:await mc({fs:t,gitdir:e,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=bE({},s,i?i.committer:void 0,r,n);if(o.name!==void 0)return o}async function _E({fs:t,cache:e,gitdir:r,oid:n}){let{type:i,object:a}=await qe({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=$r.from(a).parse().object,_E({fs:t,cache:e,gitdir:r,oid:n});if(i!=="commit")throw new rr(n,i,"commit");return{commit:mr.from(a),oid:n}}async function So({fs:t,cache:e,gitdir:r,oid:n}){let{commit:i,oid:a}=await _E({fs:t,cache:e,gitdir:r,oid:n});return{oid:a,commit:i.parse(),payload:i.withoutSignature()}}async function Xf({fs:t,cache:e,onSign:r,gitdir:n,message:i,author:a,committer:s,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:f,parent:d,tree:h}){let m=!1;f||(f=await z.resolve({fs:t,gitdir:n,ref:"HEAD",depth:2}));let g,v;try{g=await z.resolve({fs:t,gitdir:n,ref:f}),v=await So({fs:t,gitdir:n,oid:g,cache:{}})}catch(S){m=!0}if(l&&m)throw new pc(f);let w=l?await da({fs:t,gitdir:n,author:a,commit:v.commit}):await da({fs:t,gitdir:n,author:a});if(!w)throw new zt("author");let b=l?await xo({fs:t,gitdir:n,author:w,committer:s,commit:v.commit}):await xo({fs:t,gitdir:n,author:w,committer:s});if(!b)throw new zt("committer");return ct.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async function(S){let k=cE(S.entries).get(".");if(h||(h=await xE({fs:t,gitdir:n,inode:k,dryRun:c})),d?d=await Promise.all(d.map(_=>z.resolve({fs:t,gitdir:n,ref:_}))):l?d=v.commit.parent:d=g?[g]:[],!i)if(l)i=v.commit.message;else throw new hr("message");let A=mr.from({tree:h,parent:d,author:w,committer:b,message:i});o&&(A=await mr.sign(A,r,o));let y=await gr({fs:t,gitdir:n,type:"commit",object:A.toObject(),dryRun:c});return!u&&!c&&await z.writeRef({fs:t,gitdir:n,ref:f,value:y}),y})}async function xE({fs:t,gitdir:e,inode:r,dryRun:n}){let i=r.children;for(let l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await xE({fs:t,gitdir:e,inode:l,dryRun:n}));let a=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=pr.from(a);return await gr({fs:t,gitdir:e,type:"tree",object:s.toObject(),dryRun:n})}async function gc({fs:t,cache:e,gitdir:r,oid:n,filepath:i}){if(i.startsWith("/"))throw new ca("leading-slash");if(i.endsWith("/"))throw new ca("trailing-slash");let a=n,s=await _o({fs:t,cache:e,gitdir:r,oid:n}),o=s.tree;if(i==="")n=s.oid;else{let l=i.split("/");n=await SE({fs:t,cache:e,gitdir:r,tree:o,pathArray:l,oid:a,filepath:i})}return n}async function SE({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:a,filepath:s}){let o=i.shift();for(let l of n)if(l.path===o){if(i.length===0)return l.oid;{let{type:c,object:u}=await qe({fs:t,cache:e,gitdir:r,oid:l.oid});if(c!=="tree")throw new rr(a,c,"tree",s);return n=pr.from(u),SE({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:a,filepath:s})}}throw new Le(`file or directory found at "${a}:${s}"`)}async function Co({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){i!==void 0&&(n=await gc({fs:t,cache:e,gitdir:r,oid:n,filepath:i}));let{tree:a,oid:s}=await _o({fs:t,cache:e,gitdir:r,oid:n});return{oid:s,tree:a.entries()}}async function vc({fs:t,gitdir:e,tree:r}){let n=pr.from(r).toObject();return await gr({fs:t,gitdir:e,type:"tree",object:n,format:"content"})}async function C3({fs:t,cache:e,onSign:r,gitdir:n,ref:i,oid:a,note:s,force:o,author:l,committer:c,signingKey:u}){let f;try{f=await z.resolve({gitdir:n,fs:t,ref:i})}catch(w){if(!(w instanceof Le))throw w}let h=(await Co({fs:t,cache:e,gitdir:n,oid:f||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)h=h.filter(w=>w.path!==a);else for(let w of h)if(w.path===a)throw new vn("note",a);typeof s=="string"&&(s=Buffer.from(s,"utf8"));let m=await gr({fs:t,gitdir:n,type:"blob",object:s,format:"content"});h.push({mode:"100644",path:a,oid:m,type:"blob"});let g=await vc({fs:t,gitdir:n,tree:h});return await Xf({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:g,parent:f&&[f],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function EE({fs:t,onSign:e,dir:r,gitdir:n=O.join(r,".git"),ref:i="refs/notes/commits",oid:a,note:s,force:o,author:l,committer:c,signingKey:u,cache:f={}}){try{C("fs",t),C("gitdir",n),C("oid",a),C("note",s),u&&C("onSign",e);let d=new J(t),h=await da({fs:d,gitdir:n,author:l});if(!h)throw new zt("author");let m=await xo({fs:d,gitdir:n,author:h,committer:c});if(!m)throw new zt("committer");return await C3({fs:new J(d),cache:f,onSign:e,gitdir:n,ref:i,oid:a,note:s,force:o,author:h,committer:m,signingKey:u})}catch(d){throw d.caller="git.addNote",d}}async function kE({fs:t,gitdir:e,remote:r,url:n,force:i}){if(r!==Xn.clean(r))throw new wn(r,Xn.clean(r));let a=await nt.get({fs:t,gitdir:e});if(!i&&(await a.getSubsections("remote")).includes(r)&&n!==await a.get(`remote.${r}.url`))throw new vn("remote",r);await a.set(`remote.${r}.url`,n),await a.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await nt.save({fs:t,gitdir:e,config:a})}async function AE({fs:t,dir:e,gitdir:r=O.join(e,".git"),remote:n,url:i,force:a=!1}){try{return C("fs",t),C("gitdir",r),C("remote",n),C("url",i),await kE({fs:new J(t),gitdir:r,remote:n,url:i,force:a})}catch(s){throw s.caller="git.addRemote",s}}async function P3({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tagger:a,message:s=i,gpgsig:o,object:l,signingKey:c,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await z.exists({fs:t,gitdir:n,ref:i}))throw new vn("tag",i);let f=await z.resolve({fs:t,gitdir:n,ref:l||"HEAD"}),{type:d}=await qe({fs:t,cache:e,gitdir:n,oid:f}),h=$r.from({object:f,type:d,tag:i.replace("refs/tags/",""),tagger:a,message:s,gpgsig:o});c&&(h=await $r.sign(h,r,c));let m=await gr({fs:t,gitdir:n,type:"tag",object:h.toObject()});await z.writeRef({fs:t,gitdir:n,ref:i,value:m})}async function TE({fs:t,onSign:e,dir:r,gitdir:n=O.join(r,".git"),ref:i,tagger:a,message:s=i,gpgsig:o,object:l,signingKey:c,force:u=!1,cache:f={}}){try{C("fs",t),C("gitdir",n),C("ref",i),c&&C("onSign",e);let d=new J(t),h=await da({fs:d,gitdir:n,author:a});if(!h)throw new zt("tagger");return await P3({fs:d,cache:f,onSign:e,gitdir:n,ref:i,tagger:h,message:s,gpgsig:o,object:l,signingKey:c,force:u})}catch(d){throw d.caller="git.annotatedTag",d}}async function R3({fs:t,gitdir:e,ref:r,object:n,checkout:i=!1,force:a=!1}){if(r!==Xn.clean(r))throw new wn(r,Xn.clean(r));let s=`refs/heads/${r}`;if(!a&&await z.exists({fs:t,gitdir:e,ref:s}))throw new vn("branch",r,!1);let o;try{o=await z.resolve({fs:t,gitdir:e,ref:n||"HEAD"})}catch(l){}o&&await z.writeRef({fs:t,gitdir:e,ref:s,value:o}),i&&await z.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:s})}async function CE({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n,object:i,checkout:a=!1,force:s=!1}){try{return C("fs",t),C("gitdir",r),C("ref",n),await R3({fs:new J(t),gitdir:r,ref:n,object:i,checkout:a,force:s})}catch(o){throw o.caller="git.branch",o}}var PE=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function $g({fs:t,cache:e,onProgress:r,onPostCheckout:n,dir:i,gitdir:a,remote:s,ref:o,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:f,force:d,track:h=!0,nonBlocking:m=!1,batchSize:g=100}){let v;if(n)try{v=await z.resolve({fs:t,gitdir:a,ref:"HEAD"})}catch(b){v="0000000000000000000000000000000000000000"}let w;try{w=await z.resolve({fs:t,gitdir:a,ref:o})}catch(b){if(o==="HEAD")throw b;let S=`${s}/${o}`;if(w=await z.resolve({fs:t,gitdir:a,ref:S}),h){let E=await nt.get({fs:t,gitdir:a});await E.set(`branch.${o}.remote`,s),await E.set(`branch.${o}.merge`,`refs/heads/${o}`),await nt.save({fs:t,gitdir:a,config:E})}await z.writeRef({fs:t,gitdir:a,ref:`refs/heads/${o}`,value:w})}if(!c){let b;try{b=await I3({fs:t,cache:e,onProgress:r,dir:i,gitdir:a,ref:o,force:d,filepaths:l})}catch(y){throw y instanceof Le&&y.data.what===w?new ic(o,w):y}let S=b.filter(([y])=>y==="conflict").map(([y,_])=>_);if(S.length>0)throw new nc(S);let E=b.filter(([y])=>y==="error").map(([y,_])=>_);if(E.length>0)throw new de(E.join(", "));if(f){n&&await n({previousHead:v,newHead:w,type:l!=null&&l.length>0?"file":"branch"});return}let k=0,A=b.length;if(await ct.acquire({fs:t,gitdir:a,cache:e},async function(y){await Promise.all(b.filter(([_])=>_==="delete"||_==="delete-index").map(async function([_,x]){let T=`${i}/${x}`;_==="delete"&&await t.rm(T),y.delete({filepath:x}),r&&await r({phase:"Updating workdir",loaded:++k,total:A})}))}),await ct.acquire({fs:t,gitdir:a,cache:e},async function(y){for(let[_,x]of b)if(_==="rmdir"||_==="rmdir-index"){let T=`${i}/${x}`;try{_==="rmdir"&&await t.rmdir(T),y.delete({filepath:x}),r&&await r({phase:"Updating workdir",loaded:++k,total:A})}catch(P){if(P.code==="ENOTEMPTY")console.log(`Did not delete ${x} because directory is not empty`);else throw P}}}),await Promise.all(b.filter(([y])=>y==="mkdir"||y==="mkdir-index").map(async function([y,_]){let x=`${i}/${_}`;await t.mkdir(x),r&&await r({phase:"Updating workdir",loaded:++k,total:A})})),m){let y=b.filter(([x])=>x==="create"||x==="create-index"||x==="update"||x==="mkdir-index"),_=await ZS("Update Working Dir",y.map(([x,T,P,F,N])=>()=>F3({fs:t,cache:e,gitdir:a,dir:i},[x,T,P,F,N])),r,g);await ct.acquire({fs:t,gitdir:a,cache:e,allowUnmerged:!0},async function(x){await ZS("Update Index",_.map(([T,P,F])=>()=>$3({index:x,fullpath:T,oid:P,stats:F})),r,g)})}else await ct.acquire({fs:t,gitdir:a,cache:e,allowUnmerged:!0},async function(y){await Promise.all(b.filter(([_])=>_==="create"||_==="create-index"||_==="update"||_==="mkdir-index").map(async function([_,x,T,P,F]){let N=`${i}/${x}`;try{if(_!=="create-index"&&_!=="mkdir-index"){let{object:re}=await qe({fs:t,cache:e,gitdir:a,oid:T});if(F&&await t.rm(N),P===33188)await t.write(N,re);else if(P===33261)await t.write(N,re,{mode:511});else if(P===40960)await t.writelink(N,re);else throw new de(`Invalid mode 0o${P.toString(8)} detected in blob ${T}`)}let M=await t.lstat(N);P===33261&&(M.mode=493),_==="mkdir-index"&&(M.mode=57344),y.insert({filepath:x,stats:M,oid:T}),r&&await r({phase:"Updating workdir",loaded:++k,total:A})}catch(M){console.log(M)}}))});n&&await n({previousHead:v,newHead:w,type:l!=null&&l.length>0?"file":"branch"})}if(!u){let b=await z.expand({fs:t,gitdir:a,ref:o});b.startsWith("refs/heads")?await z.writeSymbolicRef({fs:t,gitdir:a,ref:"HEAD",value:b}):await z.writeRef({fs:t,gitdir:a,ref:"HEAD",value:w})}}async function I3({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,ref:a,force:s,filepaths:o}){let l=0;return ua({fs:t,cache:e,dir:n,gitdir:i,trees:[Ir({ref:a}),To(),ts()],map:async function(c,[u,f,d]){if(c===".")return;if(o&&!o.some(m=>PE(c,m)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++l}),[!!d,!!u,!!f].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await f.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await f.oid()?s?["update",c,await u.oid(),await u.mode(),await u.mode()!==await f.mode()]:["conflict",c]:await u.mode()!==await f.mode()?s?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await d.type()){case"tree":return["rmdir-index",c];case"blob":return await d.oid()!==await f.oid()?s?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await d.type()}`]}case"110":case"111":switch(`${await d.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await d.oid()===await u.oid()&&await d.mode()===await u.mode()&&!s)return;if(f){if(await f.oid()!==await d.oid()&&await f.oid()!==await u.oid())return s?["update",c,await u.oid(),await u.mode(),await u.mode()!==await f.mode()]:["conflict",c]}else if(s)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()];return await u.mode()!==await d.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await d.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await d.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=mE(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function $3({index:t,fullpath:e,stats:r,oid:n}){try{t.insert({filepath:e,stats:r,oid:n})}catch(i){console.warn(`Error inserting ${e} into index:`,i)}}async function F3({fs:t,cache:e,gitdir:r,dir:n},[i,a,s,o,l]){let c=`${n}/${a}`;if(i!=="create-index"&&i!=="mkdir-index"){let{object:f}=await qe({fs:t,cache:e,gitdir:r,oid:s});if(l&&await t.rm(c),o===33188)await t.write(c,f);else if(o===33261)await t.write(c,f,{mode:511});else if(o===40960)await t.writelink(c,f);else throw new de(`Invalid mode 0o${o.toString(8)} detected in blob ${s}`)}let u=await t.lstat(c);return o===33261&&(u.mode=493),i==="mkdir-index"&&(u.mode=57344),[a,s,u]}async function ZS(t,e,r,n){let i=[];try{for(let a=0;a<e.length;a+=n){let s=e.slice(a,a+n).map(l=>l());(await Promise.allSettled(s)).forEach(l=>{l.status==="fulfilled"&&i.push(l.value)}),r&&await r({phase:"Updating workdir",loaded:a+s.length,total:e.length})}return i}catch(a){console.error(`Error during ${t}: ${a}`)}return i}async function Fg({fs:t,onProgress:e,onPostCheckout:r,dir:n,gitdir:i=O.join(n,".git"),remote:a="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:c=s===void 0,dryRun:u=!1,force:f=!1,track:d=!0,cache:h={},nonBlocking:m=!1,batchSize:g=100}){try{C("fs",t),C("dir",n),C("gitdir",i);let v=s||"HEAD";return await $g({fs:new J(t),cache:h,onProgress:e,onPostCheckout:r,dir:n,gitdir:i,remote:a,ref:v,filepaths:o,noCheckout:l,noUpdateHead:c,dryRun:u,force:f,track:d,nonBlocking:m,batchSize:g})}catch(v){throw v.caller="git.checkout",v}}var O3=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Ka(t){let e=O3.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function pa({fs:t,gitdir:e,fullname:r=!1,test:n=!1}){let i=await z.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(n)try{await z.resolve({fs:t,gitdir:e,ref:i})}catch(a){return}if(i.startsWith("refs/"))return r?i:Ka(i)}function M3(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function RE({username:t="",password:e=""}){return`Basic ${Buffer.from(`${t}:${e}`).toString("base64")}`}async function wc(t,e){let r=dE(t);for(;;){let{value:n,done:i}=await r.next();if(n&&await e(n),i)break}r.return&&r.return()}async function qf(t){let e=0,r=[];await wc(t,a=>{r.push(a),e+=a.byteLength});let n=new Uint8Array(e),i=0;for(let a of r)n.set(a,i),i+=a.byteLength;return n}function KS(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];let[r,n]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:r,password:n}}}function Pg(t,e){let r=e.toString(16);return"0".repeat(t-r.length)+r}var Qe=class{static flush(){return Buffer.from("0000","utf8")}static delim(){return Buffer.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=Buffer.from(e));let r=e.length+4,n=Pg(4,r);return Buffer.concat([Buffer.from(n,"utf8"),e])}static streamReader(e){let r=new Uf(e);return async function(){try{let i=await r.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;let a=await r.read(i-4);return a==null?!0:a}catch(i){return e.error=i,!0}}}};async function JS(t){let e={},r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");let n=r.indexOf("=");if(n>-1){let i=r.slice(0,n),a=r.slice(n+1);e[i]=a}else e[r]=!0}return{protocolVersion:2,capabilities2:e}}async function QS(t,{service:e}){let r=new Set,n=new Map,i=new Map,a=Qe.streamReader(t),s=await a();for(;s===null;)s=await a();if(s===!0)throw new ac;if(s.includes("version 2"))return JS(a);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new Ja(`# service=${e}\\n`,s.toString("utf8"));let o=await a();for(;o===null;)o=await a();if(o===!0)return{capabilities:r,refs:n,symrefs:i};if(o=o.toString("utf8"),o.includes("version 2"))return JS(a);let[l,c]=hg(o,"\0","\\x00");if(c.split(" ").map(u=>r.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){let[u,f]=hg(l," "," ");for(n.set(f,u);;){let d=await a();if(d===!0)break;if(d!==null){let[h,m]=hg(d.toString("utf8")," "," ");n.set(m,h)}}}for(let u of r)if(u.startsWith("symref=")){let f=u.match(/symref=([^:]+):(.*)/);f.length===3&&i.set(f[1],f[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:i}}function hg(t,e,r){let n=t.trim().split(e);if(n.length!==2)throw new Ja(`Two strings separated by '${r}'`,t.toString("utf8"));return n}var eE=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,tE=(t,e)=>{(e.username||e.password)&&(t.Authorization=RE(e)),e.headers&&Object.assign(t,e.headers)},pg=async t=>{try{let e=Buffer.from(await qf(t.body)),r=e.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:e}}catch(e){return{}}},Eo=class{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:r,onAuth:n,onAuthSuccess:i,onAuthFailure:a,corsProxy:s,service:o,url:l,headers:c,protocolVersion:u}){let{url:f,auth:d}=KS(l),h=s?eE(s,f):f;(d.username||d.password)&&(c.Authorization=RE(d)),u===2&&(c["Git-Protocol"]="version=2");let m,g,v=!1;do if(m=await e.request({onProgress:r,method:"GET",url:`${h}/info/refs?service=${o}`,headers:c}),g=!1,m.statusCode===401||m.statusCode===203){let w=v?a:n;if(w){if(d=await w(f,{...d,headers:{...c}}),d&&d.cancel)throw new bo;d&&(tE(c,d),v=!0,g=!0)}}else m.statusCode===200&&v&&i&&await i(f,d);while(g);if(m.statusCode!==200){let{response:w}=await pg(m);throw new go(m.statusCode,m.statusMessage,w)}if(m.headers["content-type"]===`application/x-${o}-advertisement`){let w=await QS(m.body,{service:o});return w.auth=d,w}else{let{preview:w,response:b,data:S}=await pg(m);try{let E=await QS([S],{service:o});return E.auth=d,E}catch(E){throw new uc(w,b)}}}static async connect({http:e,onProgress:r,corsProxy:n,service:i,url:a,auth:s,body:o,headers:l}){let c=KS(a);c&&(a=c.url),n&&(a=eE(n,a)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,tE(l,s);let u=await e.request({onProgress:r,method:"POST",url:`${a}/${i}`,body:o,headers:l});if(u.statusCode!==200){let{response:f}=pg(u);throw new go(u.statusCode,u.statusMessage,f)}return u}};function D3({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};let e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}var ko=class{static getRemoteHelperFor({url:e}){let r=new Map;r.set("http",Eo),r.set("https",Eo);let n=D3({url:e});if(!n)throw new dc(e);if(r.has(n.transport))return r.get(n.transport);throw new fc(e,n.transport,n.transport==="ssh"?M3(e):void 0)}},Za=null,Qa=class{static async read({fs:e,gitdir:r}){Za===null&&(Za=new Jl);let n=O.join(r,"shallow"),i=new Set;return await Za.acquire(n,async function(){let a=await e.read(n,{encoding:"utf8"});if(a===null||a.trim()==="")return i;a.trim().split(`
`).map(s=>i.add(s))}),i}static async write({fs:e,gitdir:r,oids:n}){Za===null&&(Za=new Jl);let i=O.join(r,"shallow");if(n.size>0){let a=[...n].join(`
`)+`
`;await Za.acquire(i,async function(){await e.write(i,a,{encoding:"utf8"})})}else await Za.acquire(i,async function(){await e.rm(i)})}};async function L3({fs:t,gitdir:e,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return t.exists(`${e}/${n}`)}async function N3({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){let a=await t.readdir(O.join(r,"objects/pack"));a=a.filter(s=>s.endsWith(".idx"));for(let s of a){let o=`${r}/objects/pack/${s}`,l=await Ig({fs:t,cache:e,filename:o,getExternalRefDelta:i});if(l.error)throw new de(l.error);if(l.offsets.has(n))return!0}return!1}async function rE({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){let a=o=>qe({fs:t,cache:e,gitdir:r,oid:o}),s=await L3({fs:t,gitdir:r,oid:n});return s||(s=await N3({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:a})),s}function B3(t){let i="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===i}function IE(t,e){let r=t.map(n=>n.split("=",1)[0]);return e.filter(n=>{let i=n.split("=",1)[0];return r.includes(i)})}var Zf={name:"isomorphic-git",version:"1.32.2",agent:"git/isomorphic-git@1.32.2"},fo=class{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){let r=this._waiting;this._waiting=null,r({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){let e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}};function H3(t){let e=t.indexOf("\r"),r=t.indexOf(`
`);return e===-1&&r===-1?-1:e===-1?r+1:r===-1?e+1:r===e+1?r+1:Math.min(e,r)+1}function $E(t){let e=new fo,r="";return(async()=>(await wc(t,n=>{for(n=n.toString("utf8"),r+=n;;){let i=H3(r);if(i===-1)break;e.write(r.slice(0,i)),r=r.slice(i)}}),r.length>0&&e.write(r),e.end()))(),e}var zf=class{static demux(e){let r=Qe.streamReader(e),n=new fo,i=new fo,a=new fo,s=async function(){let o=await r();if(o===null)return s();if(o===!0){n.end(),a.end(),e.error?i.destroy(e.error):i.end();return}switch(o[0]){case 1:{i.write(o.slice(1));break}case 2:{a.write(o.slice(1));break}case 3:{let l=o.slice(1);a.write(l),n.end(),a.end(),i.destroy(new Error(l.toString("utf8")));return}default:n.write(o)}s()};return s(),{packetlines:n,packfile:i,progress:a}}};async function U3(t){let{packetlines:e,packfile:r,progress:n}=zf.demux(t),i=[],a=[],s=[],o=!1,l=!1;return new Promise((c,u)=>{wc(e,f=>{let d=f.toString("utf8").trim();if(d.startsWith("shallow")){let h=d.slice(-41).trim();h.length!==40&&u(new oa(h)),i.push(h)}else if(d.startsWith("unshallow")){let h=d.slice(-41).trim();h.length!==40&&u(new oa(h)),a.push(h)}else if(d.startsWith("ACK")){let[,h,m]=d.split(" ");s.push({oid:h,status:m}),m||(l=!0)}else d.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(t.error?u(t.error):c({shallows:i,unshallows:a,acks:s,nak:o,packfile:r,progress:n}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:i,unshallows:a,acks:s,nak:o,packfile:r,progress:n}))})})}function j3({capabilities:t=[],wants:e=[],haves:r=[],shallows:n=[],depth:i=null,since:a=null,exclude:s=[]}){let o=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(let c of e)o.push(Qe.encode(`want ${c}${l}
`)),l="";for(let c of n)o.push(Qe.encode(`shallow ${c}
`));i!==null&&o.push(Qe.encode(`deepen ${i}
`)),a!==null&&o.push(Qe.encode(`deepen-since ${Math.floor(a.valueOf()/1e3)}
`));for(let c of s)o.push(Qe.encode(`deepen-not ${c}
`));o.push(Qe.flush());for(let c of r)o.push(Qe.encode(`have ${c}
`));return o.push(Qe.encode(`done
`)),o}async function Og({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:c,remoteRef:u,remote:f,url:d,corsProxy:h,depth:m=null,since:g=null,exclude:v=[],relative:w=!1,tags:b=!1,singleBranch:S=!1,headers:E={},prune:k=!1,pruneTags:A=!1}){let y=c||await pa({fs:t,gitdir:l,test:!0}),_=await nt.get({fs:t,gitdir:l}),x=f||y&&await _.get(`branch.${y}.remote`)||"origin",T=d||await _.get(`remote.${x}.url`);if(typeof T=="undefined")throw new hr("remote OR url");let P=u||y&&await _.get(`branch.${y}.merge`)||c||"HEAD";h===void 0&&(h=await _.get("http.corsProxy"));let F=ko.getRemoteHelperFor({url:T}),N=await F.discover({http:r,onAuth:a,onAuthSuccess:s,onAuthFailure:o,corsProxy:h,service:"git-upload-pack",url:T,headers:E,protocolVersion:1}),M=N.auth,re=N.refs;if(re.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(m!==null&&!N.capabilities.has("shallow"))throw new sa("shallow","depth");if(g!==null&&!N.capabilities.has("deepen-since"))throw new sa("deepen-since","since");if(v.length>0&&!N.capabilities.has("deepen-not"))throw new sa("deepen-not","exclude");if(w===!0&&!N.capabilities.has("deepen-relative"))throw new sa("deepen-relative","relative");let{oid:ye,fullref:me}=z.resolveAgainstMap({ref:P,map:re});for(let G of re.keys())G===me||G==="HEAD"||G.startsWith("refs/heads/")||b&&G.startsWith("refs/tags/")||re.delete(G);let fe=IE([...N.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Zf.agent}`]);w&&fe.push("deepen-relative");let Ge=S?[ye]:re.values(),oe=S?[y]:await z.listRefs({fs:t,gitdir:l,filepath:"refs"}),B=[];for(let G of oe)try{G=await z.expand({fs:t,gitdir:l,ref:G});let Je=await z.resolve({fs:t,gitdir:l,ref:G});await rE({fs:t,cache:e,gitdir:l,oid:Je})&&B.push(Je)}catch(Je){}B=[...new Set(B)];let Z=await Qa.read({fs:t,gitdir:l}),H=N.capabilities.has("shallow")?[...Z]:[],Oe=j3({capabilities:fe,wants:Ge,haves:B,shallows:H,depth:m,since:g,exclude:v}),cr=Buffer.from(await qf(Oe)),Gt=await F.connect({http:r,onProgress:n,corsProxy:h,service:"git-upload-pack",url:T,auth:M,body:[cr],headers:E}),Y=await U3(Gt.body);Gt.headers&&(Y.headers=Gt.headers);for(let G of Y.shallows)if(!Z.has(G))try{let{object:Je}=await qe({fs:t,cache:e,gitdir:l,oid:G}),L=new mr(Je),X=await Promise.all(L.headers().parent.map(We=>rE({fs:t,cache:e,gitdir:l,oid:We})));X.length===0||X.every(We=>We)||Z.add(G)}catch(Je){Z.add(G)}for(let G of Y.unshallows)Z.delete(G);if(await Qa.write({fs:t,gitdir:l,oids:Z}),S){let G=new Map([[me,ye]]),Je=new Map,L=10,X=me;for(;L--;){let It=N.symrefs.get(X);if(It===void 0)break;Je.set(X,It),X=It}let Ee=re.get(X);Ee&&G.set(X,Ee);let{pruned:We}=await z.updateRemoteRefs({fs:t,gitdir:l,remote:x,refs:G,symrefs:Je,tags:b,prune:k});k&&(Y.pruned=We)}else{let{pruned:G}=await z.updateRemoteRefs({fs:t,gitdir:l,remote:x,refs:re,symrefs:N.symrefs,tags:b,prune:k,pruneTags:A});k&&(Y.pruned=G)}if(Y.HEAD=N.symrefs.get("HEAD"),Y.HEAD===void 0){let{oid:G}=z.resolveAgainstMap({ref:"HEAD",map:re});for(let[Je,L]of re.entries())if(Je!=="HEAD"&&L===G){Y.HEAD=Je;break}}let Ie=me.startsWith("refs/tags")?"tag":"branch";if(Y.FETCH_HEAD={oid:ye,description:`${Ie} '${Ka(me)}' of ${T}`},n||i){let G=$E(Y.progress);wc(G,async Je=>{if(i&&await i(Je),n){let L=Je.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);L&&await n({phase:L[1].trim(),loaded:parseInt(L[2],10),total:parseInt(L[3],10)})}})}let Me=Buffer.from(await qf(Y.packfile));if(Gt.body.error)throw Gt.body.error;let Rt=Me.slice(-20).toString("hex"),De={defaultBranch:Y.HEAD,fetchHead:Y.FETCH_HEAD.oid,fetchHeadDescription:Y.FETCH_HEAD.description};if(Y.headers&&(De.headers=Y.headers),k&&(De.pruned=Y.pruned),Rt!==""&&!B3(Me)){De.packfile=`objects/pack/pack-${Rt}.pack`;let G=O.join(l,De.packfile);await t.write(G,Me);let Je=X=>qe({fs:t,cache:e,gitdir:l,oid:X}),L=await tc.fromPack({pack:Me,getExternalRefDelta:Je,onProgress:n});await t.write(G.replace(/\.pack$/,".idx"),await L.toBuffer())}return De}async function FE({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:O.join(r,".git"),defaultBranch:i="master"}){if(await t.exists(n+"/config"))return;let a=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];a=a.map(s=>n+"/"+s);for(let s of a)await t.mkdir(s);await t.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(n+"/HEAD",`ref: refs/heads/${i}
`)}async function G3({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:c,gitdir:u,url:f,corsProxy:d,ref:h,remote:m,depth:g,since:v,exclude:w,relative:b,singleBranch:S,noCheckout:E,noTags:k,headers:A,nonBlocking:y,batchSize:_=100}){try{if(await FE({fs:t,gitdir:u}),await kE({fs:t,gitdir:u,remote:m,url:f,force:!1}),d){let P=await nt.get({fs:t,gitdir:u});await P.set("http.corsProxy",d),await nt.save({fs:t,gitdir:u,config:P})}let{defaultBranch:x,fetchHead:T}=await Og({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:u,ref:h,remote:m,corsProxy:d,depth:g,since:v,exclude:w,relative:b,singleBranch:S,headers:A,tags:!k});if(T===null)return;h=h||x,h=h.replace("refs/heads/",""),await $g({fs:t,cache:e,onProgress:n,onPostCheckout:l,dir:c,gitdir:u,ref:h,remote:m,noCheckout:E,nonBlocking:y,batchSize:_})}catch(x){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),x}}async function OE({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:c=O.join(l,".git"),url:u,corsProxy:f=void 0,ref:d=void 0,remote:h="origin",depth:m=void 0,since:g=void 0,exclude:v=[],relative:w=!1,singleBranch:b=!1,noCheckout:S=!1,noTags:E=!1,headers:k={},cache:A={},nonBlocking:y=!1,batchSize:_=100}){try{return C("fs",t),C("http",e),C("gitdir",c),S||C("dir",l),C("url",u),await G3({fs:new J(t),cache:A,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:c,url:u,corsProxy:f,ref:d,remote:h,depth:m,since:g,exclude:v,relative:w,singleBranch:b,noCheckout:S,noTags:E,headers:k,nonBlocking:y,batchSize:_})}catch(x){throw x.caller="git.clone",x}}async function ME({fs:t,onSign:e,dir:r,gitdir:n=O.join(r,".git"),message:i,author:a,committer:s,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:f,parent:d,tree:h,cache:m={}}){try{C("fs",t),l||C("message",i),o&&C("onSign",e);let g=new J(t);return await Xf({fs:g,cache:m,onSign:e,gitdir:n,message:i,author:a,committer:s,signingKey:o,amend:l,dryRun:c,noUpdateBranch:u,ref:f,parent:d,tree:h})}catch(g){throw g.caller="git.commit",g}}async function DE({fs:t,dir:e,gitdir:r=O.join(e,".git"),fullname:n=!1,test:i=!1}){try{return C("fs",t),C("gitdir",r),await pa({fs:new J(t),gitdir:r,fullname:n,test:i})}catch(a){throw a.caller="git.currentBranch",a}}async function q3({fs:t,gitdir:e,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await z.exists({fs:t,gitdir:e,ref:r}))throw new Le(r);let i=await z.expand({fs:t,gitdir:e,ref:r}),a=await pa({fs:t,gitdir:e,fullname:!0});if(i===a){let l=await z.resolve({fs:t,gitdir:e,ref:i});await z.writeRef({fs:t,gitdir:e,ref:"HEAD",value:l})}await z.deleteRef({fs:t,gitdir:e,ref:i});let s=Ka(r),o=await nt.get({fs:t,gitdir:e});await o.deleteSection("branch",s),await nt.save({fs:t,gitdir:e,config:o})}async function LE({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n}){try{return C("fs",t),C("ref",n),await q3({fs:new J(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteBranch",i}}async function NE({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n}){try{C("fs",t),C("ref",n),await z.deleteRef({fs:new J(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteRef",i}}async function z3({fs:t,gitdir:e,remote:r}){let n=await nt.get({fs:t,gitdir:e});await n.deleteSection("remote",r),await nt.save({fs:t,gitdir:e,config:n})}async function BE({fs:t,dir:e,gitdir:r=O.join(e,".git"),remote:n}){try{return C("fs",t),C("remote",n),await z3({fs:new J(t),gitdir:r,remote:n})}catch(i){throw i.caller="git.deleteRemote",i}}async function V3({fs:t,gitdir:e,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await z.deleteRef({fs:t,gitdir:e,ref:r})}async function HE({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n}){try{return C("fs",t),C("ref",n),await V3({fs:new J(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteTag",i}}async function W3({fs:t,gitdir:e,oid:r}){let n=r.slice(0,2);return(await t.readdir(`${e}/objects/${n}`)).map(a=>`${n}${a}`).filter(a=>a.startsWith(r))}async function Y3({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){let a=[],s=await t.readdir(O.join(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(let o of s){let l=`${r}/objects/pack/${o}`,c=await Ig({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new de(c.error);for(let u of c.offsets.keys())u.startsWith(n)&&a.push(u)}return a}async function X3({fs:t,cache:e,gitdir:r,oid:n}){let i=o=>qe({fs:t,cache:e,gitdir:r,oid:o}),a=await W3({fs:t,gitdir:r,oid:n}),s=await Y3({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i});for(let o of s)a.indexOf(o)===-1&&a.push(o);if(a.length===1)return a[0];throw a.length>1?new rc("oids",n,a):new Le(`an object matching "${n}"`)}async function UE({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,cache:i={}}){try{return C("fs",t),C("gitdir",r),C("oid",n),await X3({fs:new J(t),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.expandOid",a}}async function jE({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n}){try{return C("fs",t),C("gitdir",r),C("ref",n),await z.expand({fs:new J(t),gitdir:r,ref:n})}catch(i){throw i.caller="git.expandRef",i}}async function Mg({fs:t,cache:e,gitdir:r,oids:n}){let i={},a=n.length,s=n.map((o,l)=>({index:l,oid:o}));for(;s.length;){let o=new Set;for(let{oid:c,index:u}of s)i[c]||(i[c]=new Set),i[c].add(u),i[c].size===a&&o.add(c);if(o.size>0)return[...o];let l=new Map;for(let{oid:c,index:u}of s)try{let{object:f}=await qe({fs:t,cache:e,gitdir:r,oid:c}),d=mr.from(f),{parent:h}=d.parseHeaders();for(let m of h)(!i[m]||!i[m].has(u))&&l.set(m+":"+u,{oid:m,index:u})}catch(f){}s=Array.from(l.values())}return[]}var mg=/^.*(\r?\n|$)/gm;function Z3({branches:t,contents:e}){let r=t[1],n=t[2],i=e[0],a=e[1],s=e[2],o=a.match(mg),l=i.match(mg),c=s.match(mg),u=IH(o,l,c),f=7,d="",h=!0;for(let m of u)m.ok&&(d+=m.ok.join("")),m.conflict&&(h=!1,d+=`${"<".repeat(f)} ${r}
`,d+=m.conflict.a.join(""),d+=`${"=".repeat(f)}
`,d+=m.conflict.b.join(""),d+=`${">".repeat(f)} ${n}
`);return{cleanMerge:h,mergedText:d}}async function K3({fs:t,cache:e,dir:r,gitdir:n=O.join(r,".git"),index:i,ourOid:a,baseOid:s,theirOid:o,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:f=!1,abortOnConflict:d=!0,mergeDriver:h}){let m=Ir({ref:a}),g=Ir({ref:s}),v=Ir({ref:o}),w=[],b=[],S=[],E=[],k=await ua({fs:t,cache:e,dir:r,gitdir:n,trees:[m,g,v],map:async function(A,[y,_,x]){let T=Nf(A),P=await Gf(y,_),F=await Gf(x,_);switch(`${P}-${F}`){case"false-false":return{mode:await _.mode(),path:T,oid:await _.oid(),type:await _.type()};case"false-true":return!x&&await y.type()==="tree"?{mode:await y.mode(),path:T,oid:await y.oid(),type:await y.type()}:x?{mode:await x.mode(),path:T,oid:await x.oid(),type:await x.type()}:void 0;case"true-false":return!y&&await x.type()==="tree"?{mode:await x.mode(),path:T,oid:await x.oid(),type:await x.type()}:y?{mode:await y.mode(),path:T,oid:await y.oid(),type:await y.type()}:void 0;case"true-true":{if(y&&x&&await y.type()==="tree"&&await x.type()==="tree")return{mode:await y.mode(),path:T,oid:await y.oid(),type:"tree"};if(y&&x&&await y.type()==="blob"&&await x.type()==="blob")return J3({fs:t,gitdir:n,path:T,ours:y,base:_,theirs:x,ourName:l,baseName:c,theirName:u,mergeDriver:h}).then(async N=>{if(N.cleanMerge)d||i.insert({filepath:A,oid:N.mergeResult.oid,stage:0});else if(w.push(A),b.push(A),!d){let M="";_&&await _.type()==="blob"&&(M=await _.oid());let re=await y.oid(),ye=await x.oid();i.delete({filepath:A}),M&&i.insert({filepath:A,oid:M,stage:1}),i.insert({filepath:A,oid:re,stage:2}),i.insert({filepath:A,oid:ye,stage:3})}return N.mergeResult});if(_&&!y&&x&&await _.type()==="blob"&&await x.type()==="blob"){if(w.push(A),S.push(A),!d){let N=await _.oid(),M=await x.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:N,stage:1}),i.insert({filepath:A,oid:M,stage:3})}return{mode:await x.mode(),oid:await x.oid(),type:"blob",path:T}}if(_&&y&&!x&&await _.type()==="blob"&&await y.type()==="blob"){if(w.push(A),E.push(A),!d){let N=await _.oid(),M=await y.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:N,stage:1}),i.insert({filepath:A,oid:M,stage:2})}return{mode:await y.mode(),oid:await y.oid(),type:"blob",path:T}}if(_&&!y&&!x&&(await _.type()==="blob"||await _.type()==="tree"))return;throw new vo}}},reduce:w.length!==0&&(!r||d)?void 0:async(A,y)=>{let _=y.filter(Boolean);if(A&&!(A&&A.type==="tree"&&_.length===0&&A.path!==".")){if(_.length>0||A.path==="."&&_.length===0){let T=new pr(_).toObject(),P=await gr({fs:t,gitdir:n,type:"tree",object:T,dryRun:f});A.oid=P}return A}}});return w.length!==0?(r&&!d&&await ua({fs:t,cache:e,dir:r,gitdir:n,trees:[Ir({ref:k.oid})],map:async function(A,[y]){let _=`${r}/${A}`;if(await y.type()==="blob"){let x=await y.mode(),T=new TextDecoder().decode(await y.content());await t.write(_,T,{mode:x})}return!0}}),new wo(w,b,S,E)):k.oid}async function J3({fs:t,gitdir:e,path:r,ours:n,base:i,theirs:a,ourName:s,theirName:o,baseName:l,dryRun:c,mergeDriver:u=Z3}){let f="blob",d="100755",h="",m="";i&&await i.type()==="blob"&&(d=await i.mode(),h=await i.oid(),m=Buffer.from(await i.content()).toString("utf8"));let g=d===await n.mode()?await a.mode():await n.mode();if(await n.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:g,path:r,oid:await n.oid(),type:f}};if(await n.oid()===h)return{cleanMerge:!0,mergeResult:{mode:g,path:r,oid:await a.oid(),type:f}};if(await a.oid()===h)return{cleanMerge:!0,mergeResult:{mode:g,path:r,oid:await n.oid(),type:f}};let v=Buffer.from(await n.content()).toString("utf8"),w=Buffer.from(await a.content()).toString("utf8"),{mergedText:b,cleanMerge:S}=await u({branches:[l,s,o],contents:[m,v,w],path:r}),E=await gr({fs:t,gitdir:e,type:"blob",object:Buffer.from(b,"utf8"),dryRun:c});return{cleanMerge:S,mergeResult:{mode:g,path:r,oid:E,type:f}}}async function GE({fs:t,cache:e,dir:r,gitdir:n,ours:i,theirs:a,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:f,author:d,committer:h,signingKey:m,onSign:g,mergeDriver:v,allowUnrelatedHistories:w=!1}){i===void 0&&(i=await pa({fs:t,gitdir:n,fullname:!0})),i=await z.expand({fs:t,gitdir:n,ref:i}),a=await z.expand({fs:t,gitdir:n,ref:a});let b=await z.resolve({fs:t,gitdir:n,ref:i}),S=await z.resolve({fs:t,gitdir:n,ref:a}),E=await Mg({fs:t,cache:e,gitdir:n,oids:[b,S]});if(E.length!==1)if(E.length===0&&w)E.push("4b825dc642cb6eb9a060e54bf8d69288fbee4904");else throw new vo;let k=E[0];if(k===S)return{oid:b,alreadyMerged:!0};if(s&&k===b)return!l&&!c&&await z.writeRef({fs:t,gitdir:n,ref:i,value:S}),{oid:S,fastForward:!0};{if(o)throw new sc;let A=await ct.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async _=>K3({fs:t,cache:e,dir:r,gitdir:n,index:_,ourOid:b,theirOid:S,baseOid:k,ourName:Ka(i),baseName:"base",theirName:Ka(a),dryRun:l,abortOnConflict:u,mergeDriver:v}));if(A instanceof wo)throw A;return f||(f=`Merge branch '${Ka(a)}' into ${Ka(i)}`),{oid:await Xf({fs:t,cache:e,gitdir:n,message:f,ref:i,tree:A,parent:[b,S],author:d,committer:h,signingKey:m,onSign:g,dryRun:l,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function qE({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:c,ref:u,url:f,remote:d,remoteRef:h,prune:m,pruneTags:g,fastForward:v,fastForwardOnly:w,corsProxy:b,singleBranch:S,headers:E,author:k,committer:A,signingKey:y}){try{if(!u){let T=await pa({fs:t,gitdir:c});if(!T)throw new hr("ref");u=T}let{fetchHead:_,fetchHeadDescription:x}=await Og({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:c,corsProxy:b,ref:u,url:f,remote:d,remoteRef:h,singleBranch:S,headers:E,prune:m,pruneTags:g});await GE({fs:t,cache:e,gitdir:c,ours:u,theirs:_,fastForward:v,fastForwardOnly:w,message:`Merge ${x}`,author:k,committer:A,signingKey:y,dryRun:!1,noUpdateBranch:!1}),await $g({fs:t,cache:e,onProgress:n,dir:l,gitdir:c,ref:u,remote:d,noCheckout:!1})}catch(_){throw _.caller="git.pull",_}}async function zE({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=O.join(o,".git"),ref:c,url:u,remote:f,remoteRef:d,corsProxy:h,singleBranch:m,headers:g={},cache:v={}}){try{C("fs",t),C("http",e),C("gitdir",l);let w={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await qE({fs:new J(t),cache:v,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l,ref:c,url:u,remote:f,remoteRef:d,fastForwardOnly:!0,corsProxy:h,singleBranch:m,headers:g,author:w,committer:w})}catch(w){throw w.caller="git.fastForward",w}}async function VE({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=O.join(o,".git"),ref:c,remote:u,remoteRef:f,url:d,corsProxy:h,depth:m=null,since:g=null,exclude:v=[],relative:w=!1,tags:b=!1,singleBranch:S=!1,headers:E={},prune:k=!1,pruneTags:A=!1,cache:y={}}){try{return C("fs",t),C("http",e),C("gitdir",l),await Og({fs:new J(t),cache:y,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,gitdir:l,ref:c,remote:u,remoteRef:f,url:d,corsProxy:h,depth:m,since:g,exclude:v,relative:w,tags:b,singleBranch:S,headers:E,prune:k,pruneTags:A})}catch(_){throw _.caller="git.fetch",_}}async function WE({fs:t,dir:e,gitdir:r=O.join(e,".git"),oids:n,cache:i={}}){try{return C("fs",t),C("gitdir",r),C("oids",n),await Mg({fs:new J(t),cache:i,gitdir:r,oids:n})}catch(a){throw a.caller="git.findMergeBase",a}}async function YE({fs:t,filepath:e}){if(await t.exists(O.join(e,".git")))return e;{let r=mo(e);if(r===e)throw new Le(`git root for ${e}`);return YE({fs:t,filepath:r})}}async function XE({fs:t,filepath:e}){try{return C("fs",t),C("filepath",e),await YE({fs:new J(t),filepath:e})}catch(r){throw r.caller="git.findRoot",r}}async function ZE({fs:t,dir:e,gitdir:r=O.join(e,".git"),path:n}){try{return C("fs",t),C("gitdir",r),C("path",n),await mc({fs:new J(t),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfig",i}}async function Q3({fs:t,gitdir:e,path:r}){return(await nt.get({fs:t,gitdir:e})).getall(r)}async function KE({fs:t,dir:e,gitdir:r=O.join(e,".git"),path:n}){try{return C("fs",t),C("gitdir",r),C("path",n),await Q3({fs:new J(t),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfigAll",i}}async function JE({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1}){try{C("http",t),C("url",a);let c=await ko.getRemoteHelperFor({url:a}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(let[f,d]of c.refs){let h=f.split("/"),m=h.pop(),g=u;for(let v of h)g[v]=g[v]||{},g=g[v];g[m]=d}for(let[f,d]of c.symrefs){let h=f.split("/"),m=h.pop(),g=u;for(let v of h)g[v]=g[v]||{},g=g[v];g[m]=d}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function QE(t,e,r,n){let i=[];for(let[a,s]of t.refs){if(e&&!a.startsWith(e))continue;if(a.endsWith("^{}")){if(n){let l=a.replace("^{}",""),c=i[i.length-1],u=c.ref===l?c:i.find(f=>f.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=s}continue}let o={ref:a,oid:s};r&&t.symrefs.has(a)&&(o.target=t.symrefs.get(a)),i.push(o)}return i}async function ek({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{C("http",t),C("url",a);let u=await ko.getRemoteHelperFor({url:a}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};let f={};for(let d of u.capabilities){let[h,m]=d.split("=");m?f[h]=m:f[h]=!0}return{protocolVersion:1,capabilities:f,refs:QE(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function e8({type:t,object:e,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(e=la.wrap({type:t,object:e})),n=await ki(e)),{oid:n,object:e}}async function tk({object:t}){try{C("object",t),typeof t=="string"?t=Buffer.from(t,"utf8"):t=Buffer.from(t);let e="blob",{oid:r,object:n}=await e8({type:"blob",format:"content",object:t});return{oid:r,type:e,object:new Uint8Array(n),format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function t8({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,filepath:a}){try{a=O.join(n,a);let s=await t.read(a),o=c=>qe({fs:t,cache:e,gitdir:i,oid:c}),l=await tc.fromPack({pack:s,getExternalRefDelta:o,onProgress:r});return await t.write(a.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function rk({fs:t,onProgress:e,dir:r,gitdir:n=O.join(r,".git"),filepath:i,cache:a={}}){try{return C("fs",t),C("dir",r),C("gitdir",r),C("filepath",i),await t8({fs:new J(t),cache:a,onProgress:e,dir:r,gitdir:n,filepath:i})}catch(s){throw s.caller="git.indexPack",s}}async function nk({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:O.join(r,".git"),defaultBranch:i="master"}){try{return C("fs",t),C("gitdir",n),e||C("dir",r),await FE({fs:new J(t),bare:e,dir:r,gitdir:n,defaultBranch:i})}catch(a){throw a.caller="git.init",a}}async function ik({fs:t,cache:e,gitdir:r,oid:n,ancestor:i,depth:a}){let s=await Qa.read({fs:t,gitdir:r});if(!n)throw new hr("oid");if(!i)throw new hr("ancestor");if(n===i)return!1;let o=[n],l=new Set,c=0;for(;o.length;){if(c++===a)throw new lc(a);let u=o.shift(),{type:f,object:d}=await qe({fs:t,cache:e,gitdir:r,oid:u});if(f!=="commit")throw new rr(u,f,"commit");let h=mr.from(d).parse();for(let m of h.parent)if(m===i)return!0;if(!s.has(u))for(let m of h.parent)l.has(m)||(o.push(m),l.add(m))}return!1}async function ak({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,ancestor:i,depth:a=-1,cache:s={}}){try{return C("fs",t),C("gitdir",r),C("oid",n),C("ancestor",i),await ik({fs:new J(t),cache:s,gitdir:r,oid:n,ancestor:i,depth:a})}catch(o){throw o.caller="git.isDescendent",o}}async function sk({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n}){try{return C("fs",t),C("dir",e),C("gitdir",r),C("filepath",n),fa.isIgnored({fs:new J(t),dir:e,gitdir:r,filepath:n})}catch(i){throw i.caller="git.isIgnored",i}}async function ok({fs:t,dir:e,gitdir:r=O.join(e,".git"),remote:n}){try{return C("fs",t),C("gitdir",r),z.listBranches({fs:new J(t),gitdir:r,remote:n})}catch(i){throw i.caller="git.listBranches",i}}async function r8({fs:t,gitdir:e,ref:r,cache:n}){if(r){let i=await z.resolve({gitdir:e,fs:t,ref:r}),a=[];return await lk({fs:t,cache:n,gitdir:e,oid:i,filenames:a,prefix:""}),a}else return ct.acquire({fs:t,gitdir:e,cache:n},async function(i){return i.entries.map(a=>a.path)})}async function lk({fs:t,cache:e,gitdir:r,oid:n,filenames:i,prefix:a}){let{tree:s}=await Co({fs:t,cache:e,gitdir:r,oid:n});for(let o of s)o.type==="tree"?await lk({fs:t,cache:e,gitdir:r,oid:o.oid,filenames:i,prefix:O.join(a,o.path)}):i.push(O.join(a,o.path))}async function ck({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n,cache:i={}}){try{return C("fs",t),C("gitdir",r),await r8({fs:new J(t),cache:i,gitdir:r,ref:n})}catch(a){throw a.caller="git.listFiles",a}}async function n8({fs:t,cache:e,gitdir:r,ref:n}){let i;try{i=await z.resolve({gitdir:r,fs:t,ref:n})}catch(o){if(o instanceof Le)return[]}return(await Co({fs:t,cache:e,gitdir:r,oid:i})).tree.map(o=>({target:o.path,note:o.oid}))}async function uk({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n="refs/notes/commits",cache:i={}}){try{return C("fs",t),C("gitdir",r),C("ref",n),await n8({fs:new J(t),cache:i,gitdir:r,ref:n})}catch(a){throw a.caller="git.listNotes",a}}async function fk({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n}){try{return C("fs",t),C("gitdir",r),z.listRefs({fs:new J(t),gitdir:r,filepath:n})}catch(i){throw i.caller="git.listRefs",i}}async function i8({fs:t,gitdir:e}){let r=await nt.get({fs:t,gitdir:e}),n=await r.getSubsections("remote");return Promise.all(n.map(async a=>{let s=await r.get(`remote.${a}.url`);return{remote:a,url:s}}))}async function dk({fs:t,dir:e,gitdir:r=O.join(e,".git")}){try{return C("fs",t),C("gitdir",r),await i8({fs:new J(t),gitdir:r})}catch(n){throw n.caller="git.listRemotes",n}}async function a8(t){let e=Qe.streamReader(t),r=[],n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");let[i,a,...s]=n.split(" "),o={ref:a,oid:i};for(let l of s){let[c,u]=l.split(":");c==="symref-target"?o.target=u:c==="peeled"&&(o.peeled=u)}r.push(o)}return r}async function s8({prefix:t,symrefs:e,peelTags:r}){let n=[];return n.push(Qe.encode(`command=ls-refs
`)),n.push(Qe.encode(`agent=${Zf.agent}
`)),(r||e||t)&&n.push(Qe.delim()),r&&n.push(Qe.encode("peel")),e&&n.push(Qe.encode("symrefs")),t&&n.push(Qe.encode(`ref-prefix ${t}`)),n.push(Qe.flush()),n}async function hk({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:f}){try{C("http",t),C("url",a);let d=await Eo.discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:l});if(d.protocolVersion===1)return QE(d,c,u,f);let h=await s8({prefix:c,symrefs:u,peelTags:f}),m=await Eo.connect({http:t,auth:d.auth,headers:s,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,body:h});return a8(m.body)}catch(d){throw d.caller="git.listServerRefs",d}}async function pk({fs:t,dir:e,gitdir:r=O.join(e,".git")}){try{return C("fs",t),C("gitdir",r),z.listTags({fs:new J(t),gitdir:r})}catch(n){throw n.caller="git.listTags",n}}function o8(t,e){return t.committer.timestamp-e.committer.timestamp}var l8="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function nE({fs:t,cache:e,gitdir:r,oid:n,fileId:i}){if(i===l8)return;let a=n,s,o=await _o({fs:t,cache:e,gitdir:r,oid:n}),l=o.tree;return i===o.oid?s=o.path:(s=await mk({fs:t,cache:e,gitdir:r,tree:l,fileId:i,oid:a}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function mk({fs:t,cache:e,gitdir:r,tree:n,fileId:i,oid:a,filepaths:s=[],parentPath:o=""}){let l=n.entries().map(function(c){let u;return c.oid===i?(u=O.join(o,c.path),s.push(u)):c.type==="tree"&&(u=qe({fs:t,cache:e,gitdir:r,oid:c.oid}).then(function({object:f}){return mk({fs:t,cache:e,gitdir:r,tree:pr.from(f),fileId:i,oid:a,filepaths:s,parentPath:O.join(o,c.path)})})),u});return await Promise.all(l),s}async function c8({fs:t,cache:e,gitdir:r,filepath:n,ref:i,depth:a,since:s,force:o,follow:l}){let c=typeof s=="undefined"?void 0:Math.floor(s.valueOf()/1e3),u=[],f=await Qa.read({fs:t,gitdir:r}),d=await z.resolve({fs:t,gitdir:r,ref:i}),h=[await So({fs:t,cache:e,gitdir:r,oid:d})],m,g,v;function w(b){v&&n&&u.push(b)}for(;h.length>0;){let b=h.pop();if(c!==void 0&&b.commit.committer.timestamp<=c)break;if(n){let S;try{S=await gc({fs:t,cache:e,gitdir:r,oid:b.commit.tree,filepath:n}),g&&m!==S&&u.push(g),m=S,g=b,v=!0}catch(E){if(E instanceof Le){let k=l&&m;if(k&&(k=await nE({fs:t,cache:e,gitdir:r,oid:b.commit.tree,fileId:m}),k))if(Array.isArray(k)){if(g){let A=await nE({fs:t,cache:e,gitdir:r,oid:g.commit.tree,fileId:m});if(Array.isArray(A))if(k=k.filter(y=>A.indexOf(y)===-1),k.length===1)k=k[0],n=k,g&&u.push(g);else{k=!1,g&&u.push(g);break}}}else n=k,g&&u.push(g);if(!k){if(v&&m&&(u.push(g),!o))break;if(!o&&!l)throw E}g=b,v=!1}else throw E}}else u.push(b);if(a!==void 0&&u.length===a){w(b);break}if(!f.has(b.oid))for(let S of b.commit.parent){let E=await So({fs:t,cache:e,gitdir:r,oid:S});h.map(k=>k.oid).includes(E.oid)||h.push(E)}h.length===0&&w(b),h.sort((S,E)=>o8(S.commit,E.commit))}return u}async function gk({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n,ref:i="HEAD",depth:a,since:s,force:o,follow:l,cache:c={}}){try{return C("fs",t),C("gitdir",r),C("ref",i),await c8({fs:new J(t),cache:c,gitdir:r,filepath:n,ref:i,depth:a,since:s,force:o,follow:l})}catch(u){throw u.caller="git.log",u}}async function vk({fs:t,onSign:e,dir:r,gitdir:n=O.join(r,".git"),ours:i,theirs:a,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:f,author:d,committer:h,signingKey:m,cache:g={},mergeDriver:v,allowUnrelatedHistories:w=!1}){try{C("fs",t),m&&C("onSign",e);let b=new J(t),S=await da({fs:b,gitdir:n,author:d});if(!S&&(!o||!s))throw new zt("author");let E=await xo({fs:b,gitdir:n,author:S,committer:h});if(!E&&(!o||!s))throw new zt("committer");return await GE({fs:b,cache:g,dir:r,gitdir:n,ours:i,theirs:a,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:f,author:S,committer:E,signingKey:m,onSign:e,mergeDriver:v,allowUnrelatedHistories:w})}catch(b){throw b.caller="git.merge",b}}var u8={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function wk({fs:t,cache:e,dir:r,gitdir:n=O.join(r,".git"),oids:i}){let a=new aE,s=[];function o(u,f){let d=Buffer.from(u,f);s.push(d),a.update(d)}async function l({stype:u,object:f}){let d=u8[u],h=f.length,m=h>15?128:0,g=h&15;h=h>>>4;let v=(m|d|g).toString(16);for(o(v,"hex");m;)m=h>127?128:0,v=m|h&127,o(Pg(2,v),"hex"),h=h>>>7;o(Buffer.from(await vE(f)))}o("PACK"),o("00000002","hex"),o(Pg(8,i.length),"hex");for(let u of i){let{type:f,object:d}=await qe({fs:t,cache:e,gitdir:n,oid:u});await l({write:o,object:d,stype:f})}let c=a.digest();return s.push(c),s}async function f8({fs:t,cache:e,gitdir:r,oids:n,write:i}){let a=await wk({fs:t,cache:e,gitdir:r,oids:n}),s=Buffer.from(await qf(a)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return i?(await t.write(O.join(r,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function yk({fs:t,dir:e,gitdir:r=O.join(e,".git"),oids:n,write:i=!1,cache:a={}}){try{return C("fs",t),C("gitdir",r),C("oids",n),await f8({fs:new J(t),cache:a,gitdir:r,oids:n,write:i})}catch(s){throw s.caller="git.packObjects",s}}async function bk({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=O.join(o,".git"),ref:c,url:u,remote:f,remoteRef:d,prune:h=!1,pruneTags:m=!1,fastForward:g=!0,fastForwardOnly:v=!1,corsProxy:w,singleBranch:b,headers:S={},author:E,committer:k,signingKey:A,cache:y={}}){try{C("fs",t),C("gitdir",l);let _=new J(t),x=await da({fs:_,gitdir:l,author:E});if(!x)throw new zt("author");let T=await xo({fs:_,gitdir:l,author:x,committer:k});if(!T)throw new zt("committer");return await qE({fs:_,cache:y,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l,ref:c,url:u,remote:f,remoteRef:d,fastForward:g,fastForwardOnly:v,corsProxy:w,singleBranch:b,headers:S,author:x,committer:T,signingKey:A,prune:h,pruneTags:m})}catch(_){throw _.caller="git.pull",_}}async function d8({fs:t,cache:e,dir:r,gitdir:n=O.join(r,".git"),start:i,finish:a}){let s=await Qa.read({fs:t,gitdir:n}),o=new Set,l=new Set;for(let f of i)o.add(await z.resolve({fs:t,gitdir:n,ref:f}));for(let f of a)try{let d=await z.resolve({fs:t,gitdir:n,ref:f});l.add(d)}catch(d){}let c=new Set;async function u(f){c.add(f);let{type:d,object:h}=await qe({fs:t,cache:e,gitdir:n,oid:f});if(d==="tag"){let g=$r.from(h).headers().object;return u(g)}if(d!=="commit")throw new rr(f,d,"commit");if(!s.has(f)){let g=mr.from(h).headers().parent;for(f of g)!l.has(f)&&!c.has(f)&&await u(f)}}for(let f of o)await u(f);return c}async function gg({fs:t,cache:e,dir:r,gitdir:n=O.join(r,".git"),oids:i}){let a=new Set;async function s(o){if(a.has(o))return;a.add(o);let{type:l,object:c}=await qe({fs:t,cache:e,gitdir:n,oid:o});if(l==="tag"){let f=$r.from(c).headers().object;await s(f)}else if(l==="commit"){let f=mr.from(c).headers().tree;await s(f)}else if(l==="tree"){let u=pr.from(c);for(let f of u)f.type==="blob"&&a.add(f.oid),f.type==="tree"&&await s(f.oid)}}for(let o of i)await s(o);return a}async function h8(t){let e={},r="",n=Qe.streamReader(t),i=await n();for(;i!==!0;)i!==null&&(r+=i.toString("utf8")+`
`),i=await n();let a=r.toString("utf8").split(`
`);if(i=a.shift(),!i.startsWith("unpack "))throw new Ja('unpack ok" or "unpack [error message]',i);e.ok=i==="unpack ok",e.ok||(e.error=i.slice(7)),e.refs={};for(let s of a){if(s.trim()==="")continue;let o=s.slice(0,2),l=s.slice(3),c=l.indexOf(" ");c===-1&&(c=l.length);let u=l.slice(0,c),f=l.slice(c+1);e.refs[u]={ok:o==="ok",error:f}}return e}async function p8({capabilities:t=[],triplets:e=[]}){let r=[],n=`\0 ${t.join(" ")}`;for(let i of e)r.push(Qe.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${n}
`)),n="";return r.push(Qe.flush()),r}async function m8({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:c,ref:u,remoteRef:f,remote:d,url:h,force:m=!1,delete:g=!1,corsProxy:v,headers:w={}}){let b=u||await pa({fs:t,gitdir:c});if(typeof b=="undefined")throw new hr("ref");let S=await nt.get({fs:t,gitdir:c});d=d||await S.get(`branch.${b}.pushRemote`)||await S.get("remote.pushDefault")||await S.get(`branch.${b}.remote`)||"origin";let E=h||await S.get(`remote.${d}.pushurl`)||await S.get(`remote.${d}.url`);if(typeof E=="undefined")throw new hr("remote OR url");let k=f||await S.get(`branch.${b}.merge`);if(typeof E=="undefined")throw new hr("remoteRef");v===void 0&&(v=await S.get("http.corsProxy"));let A=await z.expand({fs:t,gitdir:c,ref:b}),y=g?"0000000000000000000000000000000000000000":await z.resolve({fs:t,gitdir:c,ref:A}),_=ko.getRemoteHelperFor({url:E}),x=await _.discover({http:r,onAuth:a,onAuthSuccess:s,onAuthFailure:o,corsProxy:v,service:"git-receive-pack",url:E,headers:w,protocolVersion:1}),T=x.auth,P;if(!k)P=A;else try{P=await z.expandAgainstMap({ref:k,map:x.refs})}catch(Z){if(Z instanceof Le)P=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Z}let F=x.refs.get(P)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:d,url:E,localRef:{ref:g?"(delete)":A,oid:y},remoteRef:{ref:P,oid:F}}))throw new bo;let N=!x.capabilities.has("no-thin"),M=new Set;if(!g){let Z=[...x.refs.values()],H=new Set;if(F!=="0000000000000000000000000000000000000000"){let Oe=await Mg({fs:t,cache:e,gitdir:c,oids:[y,F]});for(let cr of Oe)Z.push(cr);N&&(H=await gg({fs:t,cache:e,gitdir:c,oids:Oe}))}if(!Z.includes(y)){let Oe=await d8({fs:t,cache:e,gitdir:c,start:[y],finish:Z});M=await gg({fs:t,cache:e,gitdir:c,oids:Oe})}if(N){try{let Oe=await z.resolve({fs:t,gitdir:c,ref:`refs/remotes/${d}/HEAD`,depth:2}),{oid:cr}=await z.resolveAgainstMap({ref:Oe.replace(`refs/remotes/${d}/`,""),fullref:Oe,map:x.refs}),Gt=[cr];for(let Y of await gg({fs:t,cache:e,gitdir:c,oids:Gt}))H.add(Y)}catch(Oe){}for(let Oe of H)M.delete(Oe)}if(y===F&&(m=!0),!m){if(A.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new yo("tag-exists");if(y!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await ik({fs:t,cache:e,gitdir:c,oid:y,ancestor:F,depth:-1}))throw new yo("not-fast-forward")}}let re=IE([...x.capabilities],["report-status","side-band-64k",`agent=${Zf.agent}`]),ye=await p8({capabilities:re,triplets:[{oldoid:F,oid:y,fullRef:P}]}),me=g?[]:await wk({fs:t,cache:e,gitdir:c,oids:[...M]}),fe=await _.connect({http:r,onProgress:n,corsProxy:v,service:"git-receive-pack",url:E,auth:T,headers:w,body:[...ye,...me]}),{packfile:Ge,progress:oe}=await zf.demux(fe.body);if(i){let Z=$E(oe);wc(Z,async H=>{await i(H)})}let B=await h8(Ge);if(fe.headers&&(B.headers=fe.headers),d&&B.ok&&B.refs[P].ok&&!A.startsWith("refs/tags")){let Z=`refs/remotes/${d}/${P.replace("refs/heads","")}`;g?await z.deleteRef({fs:t,gitdir:c,ref:Z}):await z.writeRef({fs:t,gitdir:c,ref:Z,value:y})}if(B.ok&&Object.values(B.refs).every(Z=>Z.ok))return B;{let Z=Object.entries(B.refs).filter(([H,Oe])=>!Oe.ok).map(([H,Oe])=>`
  - ${H}: ${Oe.error}`).join("");throw new oc(Z,B)}}async function _k({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPrePush:o,dir:l,gitdir:c=O.join(l,".git"),ref:u,remoteRef:f,remote:d="origin",url:h,force:m=!1,delete:g=!1,corsProxy:v,headers:w={},cache:b={}}){try{return C("fs",t),C("http",e),C("gitdir",c),await m8({fs:new J(t),cache:b,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPrePush:o,gitdir:c,ref:u,remoteRef:f,remote:d,url:h,force:m,delete:g,corsProxy:v,headers:w})}catch(S){throw S.caller="git.push",S}}async function xk({fs:t,cache:e,gitdir:r,oid:n}){let{type:i,object:a}=await qe({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=$r.from(a).parse().object,xk({fs:t,cache:e,gitdir:r,oid:n});if(i!=="blob")throw new rr(n,i,"blob");return{oid:n,blob:new Uint8Array(a)}}async function Sk({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){return i!==void 0&&(n=await gc({fs:t,cache:e,gitdir:r,oid:n,filepath:i})),await xk({fs:t,cache:e,gitdir:r,oid:n})}async function Ek({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,filepath:i,cache:a={}}){try{return C("fs",t),C("gitdir",r),C("oid",n),await Sk({fs:new J(t),cache:a,gitdir:r,oid:n,filepath:i})}catch(s){throw s.caller="git.readBlob",s}}async function Dg({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,cache:i={}}){try{return C("fs",t),C("gitdir",r),C("oid",n),await So({fs:new J(t),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.readCommit",a}}async function g8({fs:t,cache:e,gitdir:r,ref:n="refs/notes/commits",oid:i}){let a=await z.resolve({gitdir:r,fs:t,ref:n}),{blob:s}=await Sk({fs:t,cache:e,gitdir:r,oid:a,filepath:i});return s}async function kk({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n="refs/notes/commits",oid:i,cache:a={}}){try{return C("fs",t),C("gitdir",r),C("ref",n),C("oid",i),await g8({fs:new J(t),cache:a,gitdir:r,ref:n,oid:i})}catch(s){throw s.caller="git.readNote",s}}async function Ak({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,format:i="parsed",filepath:a=void 0,encoding:s=void 0,cache:o={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let l=new J(t);a!==void 0&&(n=await gc({fs:l,cache:o,gitdir:r,oid:n,filepath:a}));let u=await qe({fs:l,cache:o,gitdir:r,oid:n,format:i==="parsed"?"content":i});if(u.oid=n,i==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=mr.from(u.object).parse();break;case"tree":u.object=pr.from(u.object).entries();break;case"blob":s?u.object=u.object.toString(s):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=$r.from(u.object).parse();break;default:throw new rr(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(l){throw l.caller="git.readObject",l}}async function v8({fs:t,cache:e,gitdir:r,oid:n}){let{type:i,object:a}=await qe({fs:t,cache:e,gitdir:r,oid:n,format:"content"});if(i!=="tag")throw new rr(n,i,"tag");let s=$r.from(a);return{oid:n,tag:s.parse(),payload:s.payload()}}async function Tk({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,cache:i={}}){try{return C("fs",t),C("gitdir",r),C("oid",n),await v8({fs:new J(t),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.readTag",a}}async function Ck({fs:t,dir:e,gitdir:r=O.join(e,".git"),oid:n,filepath:i=void 0,cache:a={}}){try{return C("fs",t),C("gitdir",r),C("oid",n),await Co({fs:new J(t),cache:a,gitdir:r,oid:n,filepath:i})}catch(s){throw s.caller="git.readTree",s}}async function Pk({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("filepath",n),await ct.acquire({fs:new J(t),gitdir:r,cache:i},async function(a){a.delete({filepath:n})})}catch(a){throw a.caller="git.remove",a}}async function w8({fs:t,cache:e,onSign:r,gitdir:n,ref:i="refs/notes/commits",oid:a,author:s,committer:o,signingKey:l}){let c;try{c=await z.resolve({gitdir:n,fs:t,ref:i})}catch(m){if(!(m instanceof Le))throw m}let f=(await Co({fs:t,gitdir:n,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;f=f.filter(m=>m.path!==a);let d=await vc({fs:t,gitdir:n,tree:f});return await Xf({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:d,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function Rk({fs:t,onSign:e,dir:r,gitdir:n=O.join(r,".git"),ref:i="refs/notes/commits",oid:a,author:s,committer:o,signingKey:l,cache:c={}}){try{C("fs",t),C("gitdir",n),C("oid",a);let u=new J(t),f=await da({fs:u,gitdir:n,author:s});if(!f)throw new zt("author");let d=await xo({fs:u,gitdir:n,author:f,committer:o});if(!d)throw new zt("committer");return await w8({fs:u,cache:c,onSign:e,gitdir:n,ref:i,oid:a,author:f,committer:d,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function y8({fs:t,gitdir:e,oldref:r,ref:n,checkout:i=!1}){if(n!==Xn.clean(n))throw new wn(n,Xn.clean(n));if(r!==Xn.clean(r))throw new wn(r,Xn.clean(r));let a=`refs/heads/${r}`,s=`refs/heads/${n}`;if(await z.exists({fs:t,gitdir:e,ref:s}))throw new vn("branch",n,!1);let l=await z.resolve({fs:t,gitdir:e,ref:a,depth:1});await z.writeRef({fs:t,gitdir:e,ref:s,value:l}),await z.deleteRef({fs:t,gitdir:e,ref:a});let u=await pa({fs:t,gitdir:e,fullname:!0})===a;(i||u)&&await z.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:s})}async function Ik({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n,oldref:i,checkout:a=!1}){try{return C("fs",t),C("gitdir",r),C("ref",n),C("oldref",i),await y8({fs:new J(t),gitdir:r,ref:n,oldref:i,checkout:a})}catch(s){throw s.caller="git.renameBranch",s}}async function $k({gitdir:t,type:e,object:r}){return ki(la.wrap({type:e,object:r}))}async function Fk({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n,ref:i,cache:a={}}){try{C("fs",t),C("gitdir",r),C("filepath",n);let s=new J(t),o,l;try{o=await z.resolve({fs:s,gitdir:r,ref:i||"HEAD"})}catch(f){if(i)throw f}if(o)try{o=await gc({fs:s,cache:a,gitdir:r,oid:o,filepath:n})}catch(f){o=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0},u=e&&await s.read(O.join(e,n));u&&(l=await $k({gitdir:r,type:"blob",object:u}),o===l&&(c=await s.lstat(O.join(e,n)))),await ct.acquire({fs:s,gitdir:r,cache:a},async function(f){f.delete({filepath:n}),o&&f.insert({filepath:n,stats:c,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function Ok({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n,depth:i}){try{return C("fs",t),C("gitdir",r),C("ref",n),await z.resolve({fs:new J(t),gitdir:r,ref:n,depth:i})}catch(a){throw a.caller="git.resolveRef",a}}async function Mk({fs:t,dir:e,gitdir:r=O.join(e,".git"),path:n,value:i,append:a=!1}){try{C("fs",t),C("gitdir",r),C("path",n);let s=new J(t),o=await nt.get({fs:s,gitdir:r});a?await o.append(n,i):await o.set(n,i),await nt.save({fs:s,gitdir:r,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function Dk({fs:t,gitdir:e,commit:r}){let n=mr.from(r).toObject();return await gr({fs:t,gitdir:e,type:"commit",object:n,format:"content"})}var Vf=class t{static get timezoneOffsetForRefLogEntry(){let e=new Date().getTimezoneOffset(),r=Math.abs(Math.floor(e/60)),n=Math.abs(e%60).toString().padStart(2,"0");return`${e>0?"-":"+"}${r.toString().padStart(2,"0")}${n}`}static createStashReflogEntry(e,r,n){let i=e.name.replace(/\s/g,""),a="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=t.timezoneOffsetForRefLogEntry;return`${a} ${r} ${i} ${e.email} ${s} ${o}	${n}
`}static getStashReflogEntry(e,r=!1){return e.split(`
`).filter(a=>a).reverse().map((a,s)=>r?`stash@{${s}}: ${a.split("	")[1]}`:a)}},b8={stage:ts,workdir:To},vg;async function Ao(t,e){return vg===void 0&&(vg=new Jl),vg.acquire(t,e)}async function _8(t,e,r,n,i=null){let a=O.join(r,n),s=await t.lstat(a);if(!s)throw new Le(a);if(s.isDirectory())throw new de(`${a}: file expected, but found directory`);let o=i?await fE({fs:t,gitdir:e,oid:i}):void 0,l=o?i:void 0;return o||await Ao({fs:t,gitdir:e,currentFilepath:a},async()=>{let c=s.isSymbolicLink()?await t.readlink(a).then(wE):await t.read(a);if(c===null)throw new Le(a);l=await gr({fs:t,gitdir:e,type:"blob",object:c})}),l}async function x8({fs:t,dir:e,gitdir:r,entries:n}){async function i(a){if(a.type==="tree"){if(!a.oid){let s=await Promise.all(a.children.map(i));a.oid=await vc({fs:t,gitdir:r,tree:s}),a.mode=16384}}else a.type==="blob"&&(a.oid=await _8(t,r,e,a.path,a.oid),a.mode=33188);return a.path=a.path.split("/").pop(),a}return Promise.all(n.map(i))}async function iE({fs:t,dir:e,gitdir:r,treePair:n}){let i=n[1]==="stage",a=n.map(h=>typeof h=="string"?b8[h]():h),s=[],u=await ua({fs:t,cache:{},dir:e,gitdir:r,trees:a,map:async(h,[m,g])=>{if(!(h==="."||await fa.isIgnored({fs:t,dir:e,gitdir:r,filepath:h}))&&g)return(!m||await m.oid()!==await g.oid()&&await g.oid()!==void 0)&&s.push([m,g]),{mode:await g.mode(),path:h,oid:await g.oid(),type:await g.type()}},reduce:async(h,m)=>(m=m.filter(Boolean),h?(h.children=m,h):m.length>0?m:void 0),iterate:async(h,m)=>{let g=[];for(let v of m){let[w,b]=v;i?b&&(await t.exists(`${e}/${b.toString()}`)?g.push(v):s.push([null,b])):w&&(b?g.push(v):s.push([w,null]))}return g.length?Promise.all(g.map(h)):[]}});if(s.length===0||u.length===0)return null;let d=(await x8({fs:t,dir:e,gitdir:r,entries:u})).filter(Boolean).map(h=>({mode:h.mode,path:h.path,oid:h.oid,type:h.type}));return vc({fs:t,gitdir:r,tree:d})}async function S8({fs:t,dir:e,gitdir:r,stashCommit:n,parentCommit:i,wasStaged:a}){let s=[],o=[],l=await ua({fs:t,cache:{},dir:e,gitdir:r,trees:[Ir({ref:i}),Ir({ref:n})],map:async(c,[u,f])=>{if(c==="."||await fa.isIgnored({fs:t,dir:e,gitdir:r,filepath:c}))return;let d=f?await f.type():await u.type();if(d!=="tree"&&d!=="blob")return;if(!f&&u){let m=d==="tree"?"rmdir":"rm";return d==="tree"&&s.push(c),d==="blob"&&a&&o.push({filepath:c,oid:await u.oid()}),{method:m,filepath:c}}let h=await f.oid();if(!u||await u.oid()!==h)return d==="tree"?{method:"mkdir",filepath:c}:(a&&o.push({filepath:c,oid:h,stats:await t.lstat(O.join(e,c))}),{method:"write",filepath:c,oid:h})}});await Ao({fs:t,gitdir:r,dirRemoved:s,ops:l},async()=>{for(let c of l){let u=O.join(e,c.filepath);switch(c.method){case"rmdir":await t.rmdir(u);break;case"mkdir":await t.mkdir(u);break;case"rm":await t.rm(u);break;case"write":if(!s.some(f=>u.startsWith(f))){let{object:f}=await qe({fs:t,cache:{},gitdir:r,oid:c.oid});await t.exists(u)&&await t.rm(u),await t.write(u,f)}break}}}),await ct.acquire({fs:t,gitdir:r,cache:{}},async c=>{o.forEach(({filepath:u,stats:f,oid:d})=>{c.insert({filepath:u,stats:f,oid:d})})})}var es=class t{constructor({fs:e,dir:r,gitdir:n=O.join(r,".git")}){Object.assign(this,{fs:e,dir:r,gitdir:n,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return O.join(this.gitdir,t.refStash)}get refLogsStashPath(){return O.join(this.gitdir,t.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await da({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new zt("author");return this._author}async getStashSHA(e,r){return await this.fs.exists(this.refStashPath)?(r||await this.readStashReflogs({parsed:!1}))[e].split(" ")[1]:null}async writeStashCommit({message:e,tree:r,parent:n}){return Dk({fs:this.fs,gitdir:this.gitdir,commit:{message:e,tree:r,parent:n,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(e){let r=await this.readStashReflogs({parsed:!1});if(e!==0&&(e<0||e>r.length-1))throw new wn(`stash@${e}`,"number that is in range of [0, num of stash pushed]");let n=await this.getStashSHA(e,r);return n?So({fs:this.fs,cache:{},gitdir:this.gitdir,oid:n}):{}}async writeStashRef(e){return z.writeRef({fs:this.fs,gitdir:this.gitdir,ref:t.refStash,value:e})}async writeStashReflogEntry({stashCommit:e,message:r}){let n=await this.getAuthor(),i=Vf.createStashReflogEntry(n,e,r),a=this.refLogsStashPath;await Ao({filepath:a,entry:i},async()=>{let s=await this.fs.exists(a)?await this.fs.read(a,"utf8"):"";await this.fs.write(a,s+i,"utf8")})}async readStashReflogs({parsed:e=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];let n=(await this.fs.read(this.refLogsStashPath)).toString();return Vf.getStashReflogEntry(n,e)}};async function E8({fs:t,dir:e,gitdir:r,message:n=""}){let i=new es({fs:t,dir:e,gitdir:r});await i.getAuthor();let a=await pa({fs:t,gitdir:r,fullname:!1}),s=await z.resolve({fs:t,gitdir:r,ref:"HEAD"}),l=(await Dg({fs:t,dir:e,gitdir:r,oid:s})).commit.message,c=[s],u=null,f=Ir({ref:"HEAD"}),d=await iE({fs:t,dir:e,gitdir:r,treePair:[Ir({ref:"HEAD"}),"stage"]});if(d){let v=await i.writeStashCommit({message:`stash-Index: WIP on ${a} - ${new Date().toISOString()}`,tree:d,parent:c});c.push(v),u=d,f=ts()}let h=await iE({fs:t,dir:e,gitdir:r,treePair:[f,"workdir"]});if(h){let v=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${a} - ${new Date().toISOString()}`,tree:h,parent:[c[c.length-1]]});c.push(v),u=h}if(!u||!d&&!h)throw new Le("changes, nothing to stash");let m=(n.trim()||`WIP on ${a}`)+`: ${s.substring(0,7)} ${l}`,g=await i.writeStashCommit({message:m,tree:u,parent:c});return await i.writeStashRef(g),await i.writeStashReflogEntry({stashCommit:g,message:m}),await Fg({fs:t,dir:e,gitdir:r,ref:a,track:!1,force:!0}),g}async function Lk({fs:t,dir:e,gitdir:r,refIdx:n=0}){let a=await new es({fs:t,dir:e,gitdir:r}).readStashCommit(n),{parent:s=null}=a.commit?a.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){let c=(await So({fs:t,cache:{},gitdir:r,oid:s[o+1]})).commit.message.startsWith("stash-Index");await S8({fs:t,dir:e,gitdir:r,stashCommit:s[o+1],parentCommit:s[o],wasStaged:c})}}async function Nk({fs:t,dir:e,gitdir:r,refIdx:n=0}){let i=new es({fs:t,dir:e,gitdir:r});if(!(await i.readStashCommit(n)).commit)return;let s=i.refStashPath;await Ao(s,async()=>{await t.exists(s)&&await t.rm(s)});let o=await i.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(n,1);let l=i.refLogsStashPath;await Ao({reflogEntries:o,stashReflogPath:l,stashMgr:i},async()=>{if(o.length){await t.write(l,o.join(`
`),"utf8");let c=o[o.length-1].split(" ")[1];await i.writeStashRef(c)}else await t.rm(l)})}async function k8({fs:t,dir:e,gitdir:r}){return new es({fs:t,dir:e,gitdir:r}).readStashReflogs({parsed:!0})}async function A8({fs:t,dir:e,gitdir:r}){let n=new es({fs:t,dir:e,gitdir:r}),i=[n.refStashPath,n.refLogsStashPath];await Ao(i,async()=>{await Promise.all(i.map(async a=>{if(await t.exists(a))return t.rm(a)}))})}async function T8({fs:t,dir:e,gitdir:r,refIdx:n=0}){await Lk({fs:t,dir:e,gitdir:r,refIdx:n}),await Nk({fs:t,dir:e,gitdir:r,refIdx:n})}async function Bk({fs:t,dir:e,gitdir:r=O.join(e,".git"),op:n="push",message:i="",refIdx:a=0}){C("fs",t),C("dir",e),C("gitdir",r),C("op",n);let s={push:E8,apply:Lk,drop:Nk,list:k8,clear:A8,pop:T8},o=["apply","drop","pop"];try{let l=new J(t);["refs","logs","logs/refs"].map(f=>O.join(r,f)).forEach(async f=>{await l.exists(f)||await l.mkdir(f)});let u=s[n];if(u){if(o.includes(n)&&a<0)throw new wn(`stash@${a}`,"number that is in range of [0, num of stash pushed]");return await u({fs:l,dir:e,gitdir:r,message:i,refIdx:a})}throw new Error(`To be implemented: ${n}`)}catch(l){throw l.caller="git.stash",l}}async function Hk({fs:t,dir:e,gitdir:r=O.join(e,".git"),filepath:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("filepath",n);let a=new J(t);if(await fa.isIgnored({fs:a,gitdir:r,dir:e,filepath:n}))return"ignored";let o=await C8({fs:a,cache:i,gitdir:r}),l=await Uk({fs:a,cache:i,gitdir:r,tree:o,path:n}),c=await ct.acquire({fs:a,gitdir:r,cache:i},async function(g){for(let v of g)if(v.path===n)return v;return null}),u=await a.lstat(O.join(e,n)),f=l!==null,d=c!==null,h=u!==null,m=async()=>{if(d&&!Lf(c,u))return c.oid;{let g=await a.read(O.join(e,n)),v=await $k({gitdir:r,type:"blob",object:g});return d&&c.oid===v&&u.size!==-1&&ct.acquire({fs:a,gitdir:r,cache:i},async function(w){w.insert({filepath:n,stats:u,oid:v})}),v}};if(!f&&!h&&!d)return"absent";if(!f&&!h&&d)return"*absent";if(!f&&h&&!d)return"*added";if(!f&&h&&d)return await m()===c.oid?"added":"*added";if(f&&!h&&!d)return"deleted";if(f&&!h&&d)return l===c.oid,"*deleted";if(f&&h&&!d)return await m()===l?"*undeleted":"*undeletemodified";if(f&&h&&d){let g=await m();return g===l?g===c.oid?"unmodified":"*unmodified":g===c.oid?"modified":"*modified"}}catch(a){throw a.caller="git.status",a}}async function Uk({fs:t,cache:e,gitdir:r,tree:n,path:i}){typeof i=="string"&&(i=i.split("/"));let a=i.shift();for(let s of n)if(s.path===a){if(i.length===0)return s.oid;let{type:o,object:l}=await qe({fs:t,cache:e,gitdir:r,oid:s.oid});if(o==="tree"){let c=pr.from(l);return Uk({fs:t,cache:e,gitdir:r,tree:c,path:i})}if(o==="blob")throw new rr(s.oid,o,"blob",i.join("/"))}return null}async function C8({fs:t,cache:e,gitdir:r}){let n;try{n=await z.resolve({fs:t,gitdir:r,ref:"HEAD"})}catch(a){if(a instanceof Le)return[]}let{tree:i}=await Co({fs:t,cache:e,gitdir:r,oid:n});return i}async function jk({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n="HEAD",filepaths:i=["."],filter:a,cache:s={},ignored:o=!1}){try{C("fs",t),C("gitdir",r),C("ref",n);let l=new J(t);return await ua({fs:l,cache:s,dir:e,gitdir:r,trees:[Ir({ref:n}),To(),ts()],map:async function(c,[u,f,d]){if(!u&&!d&&f&&!o&&await fa.isIgnored({fs:l,dir:e,filepath:c})||!i.some(A=>PE(c,A)))return null;if(a&&!a(c))return;let[h,m,g]=await Promise.all([u&&u.type(),f&&f.type(),d&&d.type()]),v=[h,m,g].includes("blob");if((h==="tree"||h==="special")&&!v)return;if(h==="commit")return null;if((m==="tree"||m==="special")&&!v)return;if(g==="commit")return null;if((g==="tree"||g==="special")&&!v)return;let w=h==="blob"?await u.oid():void 0,b=g==="blob"?await d.oid():void 0,S;h!=="blob"&&m==="blob"&&g!=="blob"?S="42":m==="blob"&&(S=await f.oid());let E=[void 0,w,S,b],k=E.map(A=>E.indexOf(A));return k.shift(),[c,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Gk({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n,object:i,force:a=!1}){try{C("fs",t),C("gitdir",r),C("ref",n);let s=new J(t);if(n===void 0)throw new hr("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;let o=await z.resolve({fs:s,gitdir:r,ref:i||"HEAD"});if(!a&&await z.exists({fs:s,gitdir:r,ref:n}))throw new vn("tag",n);await z.writeRef({fs:s,gitdir:r,ref:n,value:o})}catch(s){throw s.caller="git.tag",s}}async function qk({fs:t,dir:e,gitdir:r=O.join(e,".git"),cache:n={},filepath:i,oid:a,mode:s,add:o,remove:l,force:c}){try{C("fs",t),C("gitdir",r),C("filepath",i);let u=new J(t);if(l)return await ct.acquire({fs:u,gitdir:r,cache:n},async function(d){if(!c){let h=await u.lstat(O.join(e,i));if(h){if(h.isDirectory())throw new ca("directory");return}}d.has({filepath:i})&&d.delete({filepath:i})});let f;if(!a){if(f=await u.lstat(O.join(e,i)),!f)throw new Le(`file at "${i}" on disk and "remove" not set`);if(f.isDirectory())throw new ca("directory")}return await ct.acquire({fs:u,gitdir:r,cache:n},async function(d){if(!o&&!d.has({filepath:i}))throw new Le(`file at "${i}" in index and "add" not set`);let h;if(a)h={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{h=f;let m=h.isSymbolicLink()?await u.readlink(O.join(e,i)):await u.read(O.join(e,i));a=await gr({fs:u,gitdir:r,type:"blob",format:"content",object:m})}return d.insert({filepath:i,oid:a,stats:h}),a})}catch(u){throw u.caller="git.updateIndex",u}}function zk(){try{return Zf.version}catch(t){throw t.caller="git.version",t}}async function Vk({fs:t,dir:e,gitdir:r=O.join(e,".git"),trees:n,map:i,reduce:a,iterate:s,cache:o={}}){try{return C("fs",t),C("gitdir",r),C("trees",n),await ua({fs:new J(t),cache:o,dir:e,gitdir:r,trees:n,map:i,reduce:a,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function Wk({fs:t,dir:e,gitdir:r=O.join(e,".git"),blob:n}){try{return C("fs",t),C("gitdir",r),C("blob",n),await gr({fs:new J(t),gitdir:r,type:"blob",object:n,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function Yk({fs:t,dir:e,gitdir:r=O.join(e,".git"),commit:n}){try{return C("fs",t),C("gitdir",r),C("commit",n),await Dk({fs:new J(t),gitdir:r,commit:n})}catch(i){throw i.caller="git.writeCommit",i}}async function Xk({fs:t,dir:e,gitdir:r=O.join(e,".git"),type:n,object:i,format:a="parsed",oid:s,encoding:o=void 0}){try{let l=new J(t);if(a==="parsed"){switch(n){case"commit":i=mr.from(i).toObject();break;case"tree":i=pr.from(i).toObject();break;case"blob":i=Buffer.from(i,o);break;case"tag":i=$r.from(i).toObject();break;default:throw new rr(s||"",n,"blob|commit|tag|tree")}a="content"}return s=await gr({fs:l,gitdir:r,type:n,object:i,oid:s,format:a}),s}catch(l){throw l.caller="git.writeObject",l}}async function Zk({fs:t,dir:e,gitdir:r=O.join(e,".git"),ref:n,value:i,force:a=!1,symbolic:s=!1}){try{C("fs",t),C("gitdir",r),C("ref",n),C("value",i);let o=new J(t);if(n!==Xn.clean(n))throw new wn(n,Xn.clean(n));if(!a&&await z.exists({fs:o,gitdir:r,ref:n}))throw new vn("ref",n);s?await z.writeSymbolicRef({fs:o,gitdir:r,ref:n,value:i}):(i=await z.resolve({fs:o,gitdir:r,ref:i}),await z.writeRef({fs:o,gitdir:r,ref:n,value:i}))}catch(o){throw o.caller="git.writeRef",o}}async function P8({fs:t,gitdir:e,tag:r}){let n=$r.from(r).toObject();return await gr({fs:t,gitdir:e,type:"tag",object:n,format:"content"})}async function Kk({fs:t,dir:e,gitdir:r=O.join(e,".git"),tag:n}){try{return C("fs",t),C("gitdir",r),C("tag",n),await P8({fs:new J(t),gitdir:r,tag:n})}catch(i){throw i.caller="git.writeTag",i}}async function Jk({fs:t,dir:e,gitdir:r=O.join(e,".git"),tree:n}){try{return C("fs",t),C("gitdir",r),C("tree",n),await vc({fs:new J(t),gitdir:r,tree:n})}catch(i){throw i.caller="git.writeTree",i}}var R8={Errors:pE,STAGE:ts,TREE:Ir,WORKDIR:To,add:yE,abortMerge:gE,addNote:EE,addRemote:AE,annotatedTag:TE,branch:CE,checkout:Fg,clone:OE,commit:ME,getConfig:ZE,getConfigAll:KE,setConfig:Mk,currentBranch:DE,deleteBranch:LE,deleteRef:NE,deleteRemote:BE,deleteTag:HE,expandOid:UE,expandRef:jE,fastForward:zE,fetch:VE,findMergeBase:WE,findRoot:XE,getRemoteInfo:JE,getRemoteInfo2:ek,hashBlob:tk,indexPack:rk,init:nk,isDescendent:ak,isIgnored:sk,listBranches:ok,listFiles:ck,listNotes:uk,listRefs:fk,listRemotes:dk,listServerRefs:hk,listTags:pk,log:gk,merge:vk,packObjects:yk,pull:bk,push:_k,readBlob:Ek,readCommit:Dg,readNote:kk,readObject:Ak,readTag:Tk,readTree:Ck,remove:Pk,removeNote:Rk,renameBranch:Ik,resetIndex:Fk,updateIndex:qk,resolveRef:Ok,status:Hk,statusMatrix:jk,tag:Gk,version:zk,walk:Vk,writeBlob:Wk,writeCommit:Yk,writeObject:Xk,writeRef:Zk,writeTag:Kk,writeTree:Jk,stash:Bk};W.Errors=pE;W.STAGE=ts;W.TREE=Ir;W.WORKDIR=To;W.abortMerge=gE;W.add=yE;W.addNote=EE;W.addRemote=AE;W.annotatedTag=TE;W.branch=CE;W.checkout=Fg;W.clone=OE;W.commit=ME;W.currentBranch=DE;W.default=R8;W.deleteBranch=LE;W.deleteRef=NE;W.deleteRemote=BE;W.deleteTag=HE;W.expandOid=UE;W.expandRef=jE;W.fastForward=zE;W.fetch=VE;W.findMergeBase=WE;W.findRoot=XE;W.getConfig=ZE;W.getConfigAll=KE;W.getRemoteInfo=JE;W.getRemoteInfo2=ek;W.hashBlob=tk;W.indexPack=rk;W.init=nk;W.isDescendent=ak;W.isIgnored=sk;W.listBranches=ok;W.listFiles=ck;W.listNotes=uk;W.listRefs=fk;W.listRemotes=dk;W.listServerRefs=hk;W.listTags=pk;W.log=gk;W.merge=vk;W.packObjects=yk;W.pull=bk;W.push=_k;W.readBlob=Ek;W.readCommit=Dg;W.readNote=kk;W.readObject=Ak;W.readTag=Tk;W.readTree=Ck;W.remove=Pk;W.removeNote=Rk;W.renameBranch=Ik;W.resetIndex=Fk;W.resolveRef=Ok;W.setConfig=Mk;W.stash=Bk;W.status=Hk;W.statusMatrix=jk;W.tag=Gk;W.updateIndex=qk;W.version=zk;W.walk=Vk;W.writeBlob=Wk;W.writeCommit=Yk;W.writeObject=Xk;W.writeRef=Zk;W.writeTag=Kk;W.writeTree=Jk});var sA=I((jX,aA)=>{"use strict";p();aA.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var lA=I((qX,oA)=>{p();var Gg={px:{px:1,cm:37.79527559055118,mm:3.7795275590551185,in:96,pt:1.3333333333333333,pc:16},cm:{px:.026458333333333334,cm:1,mm:.1,in:2.54,pt:.035277777777777776,pc:.42333333333333334},mm:{px:.26458333333333334,cm:10,mm:1,in:25.4,pt:.35277777777777775,pc:4.233333333333333},in:{px:.010416666666666666,cm:.39370078740157477,mm:.03937007874015748,in:1,pt:.013888888888888888,pc:.16666666666666666},pt:{px:.75,cm:28.346456692913385,mm:2.834645669291339,in:72,pt:1,pc:12},pc:{px:.0625,cm:2.3622047244094486,mm:.2362204724409449,in:6,pt:.08333333333333333,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:1.1111111111111112,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:.002777777777777778,grad:.0025,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:.39370078740157477,dppx:.010416666666666666},dpcm:{dpi:2.54,dpcm:1,dppx:.026458333333333334},dppx:{dpi:96,dpcm:37.79527559055118,dppx:1}};oA.exports=function(t,e,r,n){if(!Gg.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!Gg[r].hasOwnProperty(e))throw new Error("Cannot convert from "+e+" to "+r);var i=Gg[r][e]*t;return n!==!1?(n=Math.pow(10,parseInt(n)||5),Math.round(i*n)/n):i}});var xA=I(Ai=>{"use strict";p();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.fromRgba=Io;Ai.fromRgb=qg;Ai.fromHsla=nd;Ai.fromHsl=bA;Ai.fromString=_A;Ai.default=void 0;var cA=dA(sA()),M8=dA(lA());function dA(t){return t&&t.__esModule?t:{default:t}}function D8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L8(t,e,r){return e&&uA(t.prototype,e),r&&uA(t,r),t}function nr(t,e){return U8(t)||H8(t,e)||B8(t,e)||N8()}function N8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B8(t,e){if(t){if(typeof t=="string")return fA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fA(t,e)}}function fA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function H8(t,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function U8(t){if(Array.isArray(t))return t}var hA=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/,pA=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/,mA=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,gA=/^rgba?\(\s*(\d+)\s+(\d+)\s+(\d+)(?:\s*\/\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,vA=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,wA=/^rgba?\(\s*(\d+%)\s+(\d+%)\s+(\d+%)(?:\s*\/\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,yA=/^hsla?\(\s*(\d+)(deg|rad|grad|turn)?\s*,\s*(\d+)%\s*,\s*(\d+)%(?:\s*,\s*(0|1|0?\.\d+|\d+%))?\s*\)$/;function _c(t,e){return t.indexOf(e)>-1}function j8(t,e,r){var n=t/255,i=e/255,a=r/255,s=Math.max(n,i,a),o=Math.min(n,i,a),l=s-o,c=(s+o)/2;if(l===0)return[0,0,c*100];var u=l/(1-Math.abs(2*c-1)),f=function(){switch(s){case n:return(i-a)/l%6;case i:return(a-n)/l+2;default:return(n-i)/l+4}}();return[f*60,u*100,c*100]}function G8(t,e,r){var n=t/60,i=e/100,a=r/100,s=(1-Math.abs(2*a-1))*i,o=s*(1-Math.abs(n%2-1)),l=a-s/2,c=function(){return n<1?[s,o,0]:n<2?[o,s,0]:n<3?[0,s,o]:n<4?[0,o,s]:n<5?[o,0,s]:[s,0,o]}(),u=nr(c,3),f=u[0],d=u[1],h=u[2];return[(f+l)*255,(d+l)*255,(h+l)*255]}var q8=function(){function t(e){var r=nr(e,4),n=r[0],i=r[1],a=r[2],s=r[3];D8(this,t),this.values=[Math.max(Math.min(parseInt(n,10),255),0),Math.max(Math.min(parseInt(i,10),255),0),Math.max(Math.min(parseInt(a,10),255),0),s==null?1:Math.max(Math.min(parseFloat(s),255),0)]}return L8(t,[{key:"toRgbString",value:function(){var r=nr(this.values,4),n=r[0],i=r[1],a=r[2],s=r[3];return s===1?"rgb(".concat(n,", ").concat(i,", ").concat(a,")"):"rgba(".concat(n,", ").concat(i,", ").concat(a,", ").concat(s,")")}},{key:"toHslString",value:function(){var r=this.toHslaArray(),n=nr(r,4),i=n[0],a=n[1],s=n[2],o=n[3];return o===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(s,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(s,"%, ").concat(o,")")}},{key:"toHexString",value:function(){var r=nr(this.values,4),n=r[0],i=r[1],a=r[2],s=r[3];return n=Number(n).toString(16).padStart(2,"0"),i=Number(i).toString(16).padStart(2,"0"),a=Number(a).toString(16).padStart(2,"0"),s=s<1?parseInt(s*255,10).toString(16).padStart(2,"0"):"","#".concat(n).concat(i).concat(a).concat(s)}},{key:"toRgbaArray",value:function(){return this.values}},{key:"toHslaArray",value:function(){var r=nr(this.values,4),n=r[0],i=r[1],a=r[2],s=r[3],o=j8(n,i,a),l=nr(o,3),c=l[0],u=l[1],f=l[2];return[c,u,f,s]}}]),t}();function Io(t){var e=nr(t,4),r=e[0],n=e[1],i=e[2],a=e[3];return new q8([r,n,i,a])}function qg(t){var e=nr(t,3),r=e[0],n=e[1],i=e[2];return Io([r,n,i,1])}function nd(t){var e=nr(t,4),r=e[0],n=e[1],i=e[2],a=e[3],s=G8(r,n,i),o=nr(s,3),l=o[0],c=o[1],u=o[2];return Io([l,c,u,a])}function bA(t){var e=nr(t,3),r=e[0],n=e[1],i=e[2];return nd([r,n,i,1])}function z8(t){var e=hA.exec(t)||pA.exec(t),r=nr(e,5),n=r[1],i=r[2],a=r[3],s=r[4];return n=parseInt(n.length<2?n.repeat(2):n,16),i=parseInt(i.length<2?i.repeat(2):i,16),a=parseInt(a.length<2?a.repeat(2):a,16),s=s&&(parseInt(s.length<2?s.repeat(2):s,16)/255).toPrecision(1)||1,Io([n,i,a,s])}function V8(t){var e=mA.exec(t)||vA.exec(t)||gA.exec(t)||wA.exec(t),r=nr(e,5),n=r[1],i=r[2],a=r[3],s=r[4];return n=_c(n,"%")?parseInt(n,10)*255/100:parseInt(n,10),i=_c(i,"%")?parseInt(i,10)*255/100:parseInt(i,10),a=_c(a,"%")>0?parseInt(a,10)*255/100:parseInt(a,10),s=s===void 0?1:parseFloat(s)/(_c(s,"%")?100:1),Io([n,i,a,s])}function W8(t){var e=yA.exec(t),r=nr(e,6),n=r[1],i=r[2],a=r[3],s=r[4],o=r[5];return i=i||"deg",n=(0,M8.default)(parseFloat(n),i,"deg"),a=parseFloat(a),s=parseFloat(s),o=o===void 0?1:parseFloat(o)/(_c(o,"%")?100:1),nd([n,a,s,o])}function _A(t){return cA.default[t]?qg(cA.default[t]):hA.test(t)||pA.test(t)?z8(t):mA.test(t)||vA.test(t)||gA.test(t)||wA.test(t)?V8(t):yA.test(t)?W8(t):null}var Y8={fromString:_A,fromRgb:qg,fromRgba:Io,fromHsl:bA,fromHsla:nd};Ai.default=Y8});var zg=I((YX,EA)=>{"use strict";p();var SA=Object.prototype.toString;EA.exports=function(e){var r=SA.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&SA.call(e.callee)==="[object Function]"),n}});var FA=I((ZX,$A)=>{"use strict";p();var IA;Object.keys||(xc=Object.prototype.hasOwnProperty,Vg=Object.prototype.toString,kA=zg(),Wg=Object.prototype.propertyIsEnumerable,AA=!Wg.call({toString:null},"toString"),TA=Wg.call(function(){},"prototype"),Sc=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],id=function(t){var e=t.constructor;return e&&e.prototype===t},CA={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},PA=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!CA["$"+t]&&xc.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{id(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),RA=function(t){if(typeof window=="undefined"||!PA)return id(t);try{return id(t)}catch(e){return!1}},IA=function(e){var r=e!==null&&typeof e=="object",n=Vg.call(e)==="[object Function]",i=kA(e),a=r&&Vg.call(e)==="[object String]",s=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=TA&&n;if(a&&e.length>0&&!xc.call(e,0))for(var l=0;l<e.length;++l)s.push(String(l));if(i&&e.length>0)for(var c=0;c<e.length;++c)s.push(String(c));else for(var u in e)!(o&&u==="prototype")&&xc.call(e,u)&&s.push(String(u));if(AA)for(var f=RA(e),d=0;d<Sc.length;++d)!(f&&Sc[d]==="constructor")&&xc.call(e,Sc[d])&&s.push(Sc[d]);return s});var xc,Vg,kA,Wg,AA,TA,Sc,id,CA,PA,RA;$A.exports=IA});var sd=I((JX,DA)=>{"use strict";p();var X8=Array.prototype.slice,Z8=zg(),OA=Object.keys,ad=OA?function(e){return OA(e)}:FA(),MA=Object.keys;ad.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Z8(n)?MA(X8.call(n)):MA(n)})}else Object.keys=ad;return Object.keys||ad};DA.exports=ad});var va=I((eZ,HA)=>{"use strict";p();var K8=sd(),J8=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Q8=Object.prototype.toString,e6=Array.prototype.concat,LA=uf(),t6=function(t){return typeof t=="function"&&Q8.call(t)==="[object Function]"},NA=ff()(),r6=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!t6(n)||!n())return}NA?LA(t,e,r,!0):LA(t,e,r)},BA=function(t,e){var r=arguments.length>2?arguments[2]:{},n=K8(e);J8&&(n=e6.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)r6(t,n[i],e[n[i]],r[n[i]])};BA.supportsDescriptors=!!NA;HA.exports=BA});var Yg=I((rZ,qA)=>{"use strict";p();var n6=sd(),jA=Rl()(),GA=xt(),od=Xu(),i6=GA("Array.prototype.push"),UA=GA("Object.prototype.propertyIsEnumerable"),a6=jA?od.getOwnPropertySymbols:null;qA.exports=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=od(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var a=od(arguments[i]),s=n6(a),o=jA&&(od.getOwnPropertySymbols||a6);if(o)for(var l=o(a),c=0;c<l.length;++c){var u=l[c];UA(a,u)&&i6(s,u)}for(var f=0;f<s.length;++f){var d=s[f];if(UA(a,d)){var h=a[d];n[d]=h}}}return n}});var Zg=I((iZ,zA)=>{"use strict";p();var Xg=Yg(),s6=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),a="";for(var s in i)a+=s;return t!==a},o6=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return t[1]==="y"}return!1};zA.exports=function(){return!Object.assign||s6()||o6()?Xg:Object.assign}});var WA=I((sZ,VA)=>{"use strict";p();var l6=va(),c6=Zg();VA.exports=function(){var e=c6();return l6(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}});var KA=I((lZ,ZA)=>{"use strict";p();var u6=va(),f6=Ua(),d6=Yg(),YA=Zg(),h6=WA(),p6=f6.apply(YA()),XA=function(e,r){return p6(Object,arguments)};u6(XA,{getPolyfill:YA,implementation:d6,shim:h6});ZA.exports=XA});var Kg=I((uZ,eT)=>{"use strict";p();var JA=Bn(),QA=Ua(),m6=QA(JA("String.prototype.indexOf"));eT.exports=function(e,r){var n=JA(e,!!r);return typeof n=="function"&&m6(e,".prototype.")>-1?QA(n):n}});var rT=I((dZ,tT)=>{"use strict";p();var kc=function(){return typeof function(){}.name=="string"},Ec=Object.getOwnPropertyDescriptor;if(Ec)try{Ec([],"length")}catch(t){Ec=null}kc.functionsHaveConfigurableNames=function(){if(!kc()||!Ec)return!1;var e=Ec(function(){},"name");return!!e&&!!e.configurable};var g6=Function.prototype.bind;kc.boundFunctionsHaveNames=function(){return kc()&&typeof g6=="function"&&function(){}.bind().name!==""};tT.exports=kc});var aT=I((pZ,iT)=>{"use strict";p();var nT=uf(),v6=ff()(),w6=rT().functionsHaveConfigurableNames(),y6=fr();iT.exports=function(e,r){if(typeof e!="function")throw new y6("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||w6)&&(v6?nT(e,"name",r,!0,!0):nT(e,"name",r)),e}});var Jg=I((gZ,sT)=>{"use strict";p();var b6=aT(),_6=fr(),x6=Object;sT.exports=b6(function(){if(this==null||this!==x6(this))throw new _6("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var Qg=I((wZ,oT)=>{"use strict";p();var S6=Jg(),E6=va().supportsDescriptors,k6=Object.getOwnPropertyDescriptor;oT.exports=function(){if(E6&&/a/mig.flags==="gim"){var e=k6(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),e.get.call(n),r==="dy")return e.get}}return S6}});var uT=I((bZ,cT)=>{"use strict";p();var A6=va().supportsDescriptors,T6=Qg(),C6=Ki(),P6=Object.defineProperty,R6=tm(),lT=nf(),I6=/a/;cT.exports=function(){if(!A6||!lT)throw new R6("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=T6(),r=lT(I6),n=C6(r,"flags");return(!n||n.get!==e)&&P6(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var pT=I((xZ,hT)=>{"use strict";p();var $6=va(),F6=Ua(),O6=Jg(),fT=Qg(),M6=uT(),dT=F6(fT());$6(dT,{getPolyfill:fT,implementation:O6,shim:M6});hT.exports=dT});var tv=I((EZ,gT)=>{"use strict";p();var D6=Ji()(),L6=xt(),ev=L6("Object.prototype.toString"),ld=function(e){return D6&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:ev(e)==="[object Arguments]"},mT=function(e){return ld(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&ev(e)!=="[object Array]"&&"callee"in e&&ev(e.callee)==="[object Function]"},N6=function(){return ld(arguments)}();ld.isLegacyArguments=mT;gT.exports=N6?ld:mT});var vT=I(()=>{p()});var Rc=I((PZ,LT)=>{p();var fv=typeof Map=="function"&&Map.prototype,rv=Object.getOwnPropertyDescriptor&&fv?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ud=fv&&rv&&typeof rv.get=="function"?rv.get:null,wT=fv&&Map.prototype.forEach,dv=typeof Set=="function"&&Set.prototype,nv=Object.getOwnPropertyDescriptor&&dv?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,fd=dv&&nv&&typeof nv.get=="function"?nv.get:null,yT=dv&&Set.prototype.forEach,B6=typeof WeakMap=="function"&&WeakMap.prototype,Tc=B6?WeakMap.prototype.has:null,H6=typeof WeakSet=="function"&&WeakSet.prototype,Cc=H6?WeakSet.prototype.has:null,U6=typeof WeakRef=="function"&&WeakRef.prototype,bT=U6?WeakRef.prototype.deref:null,j6=Boolean.prototype.valueOf,G6=Object.prototype.toString,q6=Function.prototype.toString,z6=String.prototype.match,hv=String.prototype.slice,wa=String.prototype.replace,V6=String.prototype.toUpperCase,_T=String.prototype.toLowerCase,RT=RegExp.prototype.test,xT=Array.prototype.concat,Kn=Array.prototype.join,W6=Array.prototype.slice,ST=Math.floor,sv=typeof BigInt=="function"?BigInt.prototype.valueOf:null,iv=Object.getOwnPropertySymbols,ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,$o=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Pc=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===$o||!0)?Symbol.toStringTag:null,IT=Object.prototype.propertyIsEnumerable,ET=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function kT(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||RT.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-ST(-t):ST(t);if(n!==t){var i=String(n),a=hv.call(e,i.length+1);return wa.call(i,r,"$&_")+"."+wa.call(wa.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return wa.call(e,r,"$&_")}var lv=vT(),AT=lv.custom,TT=OT(AT)?AT:null,$T={__proto__:null,double:'"',single:"'"},Y6={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};LT.exports=function t(e,r,n,i){var a=r||{};if(Ti(a,"quoteStyle")&&!Ti($T,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ti(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Ti(a,"customInspect")?a.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ti(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ti(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return DT(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return o?kT(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return o?kT(e,c):c}var u=typeof a.depth=="undefined"?5:a.depth;if(typeof n=="undefined"&&(n=0),n>=u&&u>0&&typeof e=="object")return cv(e)?"[Array]":"[Object]";var f=d4(a,n);if(typeof i=="undefined")i=[];else if(MT(i,e)>=0)return"[Circular]";function d(N,M,re){if(M&&(i=W6.call(i),i.push(M)),re){var ye={depth:a.depth};return Ti(a,"quoteStyle")&&(ye.quoteStyle=a.quoteStyle),t(N,ye,n+1,i)}return t(N,a,n+1,i)}if(typeof e=="function"&&!CT(e)){var h=n4(e),m=cd(e,d);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+Kn.call(m,", ")+" }":"")}if(OT(e)){var g=$o?wa.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ov.call(e);return typeof e=="object"&&!$o?Ac(g):g}if(c4(e)){for(var v="<"+_T.call(String(e.nodeName)),w=e.attributes||[],b=0;b<w.length;b++)v+=" "+w[b].name+"="+FT(X6(w[b].value),"double",a);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+_T.call(String(e.nodeName))+">",v}if(cv(e)){if(e.length===0)return"[]";var S=cd(e,d);return f&&!f4(S)?"["+uv(S,f)+"]":"[ "+Kn.call(S,", ")+" ]"}if(K6(e)){var E=cd(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!IT.call(e,"cause")?"{ ["+String(e)+"] "+Kn.call(xT.call("[cause]: "+d(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Kn.call(E,", ")+" }"}if(typeof e=="object"&&s){if(TT&&typeof e[TT]=="function"&&lv)return lv(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(i4(e)){var k=[];return wT&&wT.call(e,function(N,M){k.push(d(M,e,!0)+" => "+d(N,e))}),PT("Map",ud.call(e),k,f)}if(o4(e)){var A=[];return yT&&yT.call(e,function(N){A.push(d(N,e))}),PT("Set",fd.call(e),A,f)}if(a4(e))return av("WeakMap");if(l4(e))return av("WeakSet");if(s4(e))return av("WeakRef");if(Q6(e))return Ac(d(Number(e)));if(t4(e))return Ac(d(sv.call(e)));if(e4(e))return Ac(j6.call(e));if(J6(e))return Ac(d(String(e)));if(typeof window!="undefined"&&e===window)return"{ [object Window] }";if(typeof globalThis!="undefined"&&e===globalThis||typeof global!="undefined"&&e===global)return"{ [object globalThis] }";if(!Z6(e)&&!CT(e)){var y=cd(e,d),_=ET?ET(e)===Object.prototype:e instanceof Object||e.constructor===Object,x=e instanceof Object?"":"null prototype",T=!_&&Pc&&Object(e)===e&&Pc in e?hv.call(ya(e),8,-1):x?"Object":"",P=_||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",F=P+(T||x?"["+Kn.call(xT.call([],T||[],x||[]),": ")+"] ":"");return y.length===0?F+"{}":f?F+"{"+uv(y,f)+"}":F+"{ "+Kn.call(y,", ")+" }"}return String(e)};function FT(t,e,r){var n=r.quoteStyle||e,i=$T[n];return i+t+i}function X6(t){return wa.call(String(t),/"/g,"&quot;")}function ns(t){return!Pc||!(typeof t=="object"&&(Pc in t||typeof t[Pc]!="undefined"))}function cv(t){return ya(t)==="[object Array]"&&ns(t)}function Z6(t){return ya(t)==="[object Date]"&&ns(t)}function CT(t){return ya(t)==="[object RegExp]"&&ns(t)}function K6(t){return ya(t)==="[object Error]"&&ns(t)}function J6(t){return ya(t)==="[object String]"&&ns(t)}function Q6(t){return ya(t)==="[object Number]"&&ns(t)}function e4(t){return ya(t)==="[object Boolean]"&&ns(t)}function OT(t){if($o)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ov)return!1;try{return ov.call(t),!0}catch(e){}return!1}function t4(t){if(!t||typeof t!="object"||!sv)return!1;try{return sv.call(t),!0}catch(e){}return!1}var r4=Object.prototype.hasOwnProperty||function(t){return t in this};function Ti(t,e){return r4.call(t,e)}function ya(t){return G6.call(t)}function n4(t){if(t.name)return t.name;var e=z6.call(q6.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function MT(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function i4(t){if(!ud||!t||typeof t!="object")return!1;try{ud.call(t);try{fd.call(t)}catch(e){return!0}return t instanceof Map}catch(e){}return!1}function a4(t){if(!Tc||!t||typeof t!="object")return!1;try{Tc.call(t,Tc);try{Cc.call(t,Cc)}catch(e){return!0}return t instanceof WeakMap}catch(e){}return!1}function s4(t){if(!bT||!t||typeof t!="object")return!1;try{return bT.call(t),!0}catch(e){}return!1}function o4(t){if(!fd||!t||typeof t!="object")return!1;try{fd.call(t);try{ud.call(t)}catch(e){return!0}return t instanceof Set}catch(e){}return!1}function l4(t){if(!Cc||!t||typeof t!="object")return!1;try{Cc.call(t,Cc);try{Tc.call(t,Tc)}catch(e){return!0}return t instanceof WeakSet}catch(e){}return!1}function c4(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function DT(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return DT(hv.call(t,0,e.maxStringLength),e)+n}var i=Y6[e.quoteStyle||"single"];i.lastIndex=0;var a=wa.call(wa.call(t,i,"\\$1"),/[\x00-\x1f]/g,u4);return FT(a,"single",e)}function u4(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+V6.call(e.toString(16))}function Ac(t){return"Object("+t+")"}function av(t){return t+" { ? }"}function PT(t,e,r,n){var i=n?uv(r,n):Kn.call(r,", ");return t+" ("+e+") {"+i+"}"}function f4(t){for(var e=0;e<t.length;e++)if(MT(t[e],`
`)>=0)return!1;return!0}function d4(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Kn.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Kn.call(Array(e+1),r)}}function uv(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Kn.call(t,","+r)+`
`+e.prev}function cd(t,e){var r=cv(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Ti(t,i)?e(t[i],t):""}var a=typeof iv=="function"?iv(t):[],s;if($o){s={};for(var o=0;o<a.length;o++)s["$"+a[o]]=a[o]}for(var l in t)Ti(t,l)&&(r&&String(Number(l))===l&&l<t.length||$o&&s["$"+l]instanceof Symbol||(RT.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof iv=="function")for(var c=0;c<a.length;c++)IT.call(t,a[c])&&n.push("["+e(a[c])+"]: "+e(t[a[c]],t));return n}});var BT=I((IZ,NT)=>{"use strict";p();var h4=Rc(),p4=fr(),dd=function(t,e,r){for(var n=t,i;(i=n.next)!=null;n=i)if(i.key===e)return n.next=i.next,r||(i.next=t.next,t.next=i),i},m4=function(t,e){if(t){var r=dd(t,e);return r&&r.value}},g4=function(t,e,r){var n=dd(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},v4=function(t,e){return t?!!dd(t,e):!1},w4=function(t,e){if(t)return dd(t,e,!0)};NT.exports=function(){var e,r={assert:function(n){if(!r.has(n))throw new p4("Side channel does not contain "+h4(n))},delete:function(n){var i=e&&e.next,a=w4(e,n);return a&&i&&i===a&&(e=void 0),!!a},get:function(n){return m4(e,n)},has:function(n){return v4(e,n)},set:function(n,i){e||(e={next:void 0}),g4(e,n,i)}};return r}});var pv=I((FZ,UT)=>{"use strict";p();var y4=Bn(),Ic=xt(),b4=Rc(),_4=fr(),HT=y4("%Map%",!0),x4=Ic("Map.prototype.get",!0),S4=Ic("Map.prototype.set",!0),E4=Ic("Map.prototype.has",!0),k4=Ic("Map.prototype.delete",!0),A4=Ic("Map.prototype.size",!0);UT.exports=!!HT&&function(){var e,r={assert:function(n){if(!r.has(n))throw new _4("Side channel does not contain "+b4(n))},delete:function(n){if(e){var i=k4(e,n);return A4(e)===0&&(e=void 0),i}return!1},get:function(n){if(e)return x4(e,n)},has:function(n){return e?E4(e,n):!1},set:function(n,i){e||(e=new HT),S4(e,n,i)}};return r}});var GT=I((MZ,jT)=>{"use strict";p();var T4=Bn(),pd=xt(),C4=Rc(),hd=pv(),P4=fr(),Fo=T4("%WeakMap%",!0),R4=pd("WeakMap.prototype.get",!0),I4=pd("WeakMap.prototype.set",!0),$4=pd("WeakMap.prototype.has",!0),F4=pd("WeakMap.prototype.delete",!0);jT.exports=Fo?function(){var e,r,n={assert:function(i){if(!n.has(i))throw new P4("Side channel does not contain "+C4(i))},delete:function(i){if(Fo&&i&&(typeof i=="object"||typeof i=="function")){if(e)return F4(e,i)}else if(hd&&r)return r.delete(i);return!1},get:function(i){return Fo&&i&&(typeof i=="object"||typeof i=="function")&&e?R4(e,i):r&&r.get(i)},has:function(i){return Fo&&i&&(typeof i=="object"||typeof i=="function")&&e?$4(e,i):!!r&&r.has(i)},set:function(i,a){Fo&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Fo),I4(e,i,a)):hd&&(r||(r=hd()),r.set(i,a))}};return n}:hd});var mv=I((LZ,qT)=>{"use strict";p();var O4=fr(),M4=Rc(),D4=BT(),L4=pv(),N4=GT(),B4=N4||L4||D4;qT.exports=function(){var e,r={assert:function(n){if(!r.has(n))throw new O4("Side channel does not contain "+M4(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,i){e||(e=B4()),e.set(n,i)}};return r}});var VT=I((BZ,zT)=>{"use strict";p();var H4=af(),$c=mv()(),Ci=fr(),gv={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Ci("`O` is not an object");if(typeof e!="string")throw new Ci("`slot` must be a string");if($c.assert(t),!gv.has(t,e))throw new Ci("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Ci("`O` is not an object");if(typeof e!="string")throw new Ci("`slot` must be a string");var r=$c.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Ci("`O` is not an object");if(typeof e!="string")throw new Ci("`slot` must be a string");var r=$c.get(t);return!!r&&H4(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Ci("`O` is not an object");if(typeof e!="string")throw new Ci("`slot` must be a string");var n=$c.get(t);n||(n={},$c.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(gv);zT.exports=gv});var XT=I((UZ,YT)=>{"use strict";p();var Fc=VT(),U4=Zu(),WT=typeof StopIteration=="object"?StopIteration:null;YT.exports=function(e){if(!WT)throw new U4("this environment lacks StopIteration");Fc.set(e,"[[Done]]",!1);var r={next:function(){var i=Fc.get(this,"[[Iterator]]"),a=!!Fc.get(i,"[[Done]]");try{return{done:a,value:a?void 0:i.next()}}catch(s){if(Fc.set(i,"[[Done]]",!0),s!==WT)throw s;return{done:!0,value:void 0}}}};return Fc.set(r,"[[Iterator]]",e),r}});var vv=I((GZ,KT)=>{"use strict";p();var ZT=xt(),j4=ZT("String.prototype.valueOf"),G4=function(e){try{return j4(e),!0}catch(r){return!1}},q4=ZT("Object.prototype.toString"),z4="[object String]",V4=Ji()();KT.exports=function(e){return typeof e=="string"?!0:!e||typeof e!="object"?!1:V4?G4(e):q4(e)===z4}});var yv=I((zZ,eC)=>{"use strict";p();var wv=typeof Map=="function"&&Map.prototype?Map:null,W4=typeof Set=="function"&&Set.prototype?Set:null,md;wv||(md=function(e){return!1});var QT=wv?Map.prototype.has:null,JT=W4?Set.prototype.has:null;!md&&!QT&&(md=function(e){return!1});eC.exports=md||function(e){if(!e||typeof e!="object")return!1;try{if(QT.call(e),JT)try{JT.call(e)}catch(r){return!0}return e instanceof wv}catch(r){}return!1}});var _v=I((WZ,nC)=>{"use strict";p();var Y4=typeof Map=="function"&&Map.prototype?Map:null,bv=typeof Set=="function"&&Set.prototype?Set:null,gd;bv||(gd=function(e){return!1});var tC=Y4?Map.prototype.has:null,rC=bv?Set.prototype.has:null;!gd&&!rC&&(gd=function(e){return!1});nC.exports=gd||function(e){if(!e||typeof e!="object")return!1;try{if(rC.call(e),tC)try{tC.call(e)}catch(r){return!0}return e instanceof bv}catch(r){}return!1}});var mC=I((XZ,yd)=>{"use strict";p();var iC=tv(),aC=XT();Qu()()||Rl()()?(vd=Symbol.iterator,yd.exports=function(e){if(e!=null&&typeof e[vd]!="undefined")return e[vd]();if(iC(e))return Array.prototype[vd].call(e)}):(sC=Yu(),oC=vv(),xv=Bn(),lC=xv("%Map%",!0),cC=xv("%Set%",!0),Qr=Kg(),Sv=Qr("Array.prototype.push"),Ev=Qr("String.prototype.charCodeAt"),uC=Qr("String.prototype.slice"),fC=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=Ev(e,r);if(i<55296||i>56319)return r+1;var a=Ev(e,r+1);return a<56320||a>57343?r+1:r+2},wd=function(e){var r=0;return{next:function(){var i=r>=e.length,a;return i||(a=e[r],r+=1),{done:i,value:a}}}},kv=function(e,r){if(sC(e)||iC(e))return wd(e);if(oC(e)){var n=0;return{next:function(){var a=fC(e,n),s=uC(e,n,a);return n=a,{done:a>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]!="undefined")return e["_es6-shim iterator_"]()},!lC&&!cC?yd.exports=function(e){if(e!=null)return kv(e,!0)}:(dC=yv(),hC=_v(),Av=Qr("Map.prototype.forEach",!0),Tv=Qr("Set.prototype.forEach",!0),(typeof process=="undefined"||!process.versions||!process.versions.node)&&(Cv=Qr("Map.prototype.iterator",!0),Pv=Qr("Set.prototype.iterator",!0)),Rv=Qr("Map.prototype.@@iterator",!0)||Qr("Map.prototype._es6-shim iterator_",!0),Iv=Qr("Set.prototype.@@iterator",!0)||Qr("Set.prototype._es6-shim iterator_",!0),pC=function(e){if(dC(e)){if(Cv)return aC(Cv(e));if(Rv)return Rv(e);if(Av){var r=[];return Av(e,function(i,a){Sv(r,[a,i])}),wd(r)}}if(hC(e)){if(Pv)return aC(Pv(e));if(Iv)return Iv(e);if(Tv){var n=[];return Tv(e,function(i){Sv(n,i)}),wd(n)}}},yd.exports=function(e){return pC(e)||kv(e)}));var vd,sC,oC,xv,lC,cC,Qr,Sv,Ev,uC,fC,wd,kv,dC,hC,Av,Tv,Cv,Pv,Rv,Iv,pC});var $v=I((KZ,vC)=>{"use strict";p();var gC=function(t){return t!==t};vC.exports=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||gC(e)&&gC(r))}});var Fv=I((QZ,wC)=>{"use strict";p();var X4=$v();wC.exports=function(){return typeof Object.is=="function"?Object.is:X4}});var bC=I((tK,yC)=>{"use strict";p();var Z4=Fv(),K4=va();yC.exports=function(){var e=Z4();return K4(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var EC=I((nK,SC)=>{"use strict";p();var J4=va(),Q4=Ua(),e5=$v(),_C=Fv(),t5=bC(),xC=Q4(_C(),Object);J4(xC,{getPolyfill:_C,implementation:e5,shim:t5});SC.exports=xC});var Mv=I((aK,CC)=>{"use strict";p();var r5=Ua(),TC=xt(),n5=Bn(),Ov=n5("%ArrayBuffer%",!0),bd=TC("ArrayBuffer.prototype.byteLength",!0),i5=TC("Object.prototype.toString"),kC=!!Ov&&!bd&&new Ov(0).slice,AC=!!kC&&r5(kC);CC.exports=bd||AC?function(e){if(!e||typeof e!="object")return!1;try{return bd?bd(e):AC(e,0),!0}catch(r){return!1}}:Ov?function(e){return i5(e)==="[object ArrayBuffer]"}:function(e){return!1}});var IC=I((oK,RC)=>{"use strict";p();var PC=xt(),a5=PC("Date.prototype.getDay"),s5=function(e){try{return a5(e),!0}catch(r){return!1}},o5=PC("Object.prototype.toString"),l5="[object Date]",c5=Ji()();RC.exports=function(e){return typeof e!="object"||e===null?!1:c5?s5(e):o5(e)===l5}});var Bv=I((cK,DC)=>{"use strict";p();var $C=xt(),u5=Ji()(),f5=af(),d5=Ki(),Nv;u5?(FC=$C("RegExp.prototype.exec"),Dv={},_d=function(){throw Dv},Lv={toString:_d,valueOf:_d},typeof Symbol.toPrimitive=="symbol"&&(Lv[Symbol.toPrimitive]=_d),Nv=function(e){if(!e||typeof e!="object")return!1;var r=d5(e,"lastIndex"),n=r&&f5(r,"value");if(!n)return!1;try{FC(e,Lv)}catch(i){return i===Dv}}):(OC=$C("Object.prototype.toString"),MC="[object RegExp]",Nv=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:OC(e)===MC});var FC,Dv,_d,Lv,OC,MC;DC.exports=Nv});var BC=I((fK,NC)=>{"use strict";p();var h5=xt(),LC=h5("SharedArrayBuffer.prototype.byteLength",!0);NC.exports=LC?function(e){if(!e||typeof e!="object")return!1;try{return LC(e),!0}catch(r){return!1}}:function(e){return!1}});var jC=I((hK,UC)=>{"use strict";p();var HC=xt(),p5=HC("Number.prototype.toString"),m5=function(e){try{return p5(e),!0}catch(r){return!1}},g5=HC("Object.prototype.toString"),v5="[object Number]",w5=Ji()();UC.exports=function(e){return typeof e=="number"?!0:!e||typeof e!="object"?!1:w5?m5(e):g5(e)===v5}});var zC=I((mK,qC)=>{"use strict";p();var GC=xt(),y5=GC("Boolean.prototype.toString"),b5=GC("Object.prototype.toString"),_5=function(e){try{return y5(e),!0}catch(r){return!1}},x5="[object Boolean]",S5=Ji()();qC.exports=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:S5?_5(e):b5(e)===x5}});var WC=I((vK,VC)=>{"use strict";p();var E5=xt(),k5=Bv(),A5=E5("RegExp.prototype.exec"),T5=fr();VC.exports=function(e){if(!k5(e))throw new T5("`regex` must be a RegExp");return function(n){return A5(e,n)!==null}}});var JC=I((yK,Hv)=>{"use strict";p();var KC=xt(),C5=KC("Object.prototype.toString"),P5=Qu()(),R5=WC();P5?(YC=KC("Symbol.prototype.toString"),XC=R5(/^Symbol\(.*\)$/),ZC=function(e){return typeof e.valueOf()!="symbol"?!1:XC(YC(e))},Hv.exports=function(e){if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||C5(e)!=="[object Symbol]")return!1;try{return ZC(e)}catch(r){return!1}}):Hv.exports=function(e){return!1};var YC,XC,ZC});var t2=I((_K,e2)=>{"use strict";p();var QC=typeof BigInt!="undefined"&&BigInt;e2.exports=function(){return typeof QC=="function"&&typeof BigInt=="function"&&typeof QC(42)=="bigint"&&typeof BigInt(42)=="bigint"}});var i2=I((SK,Uv)=>{"use strict";p();var I5=t2()();I5?(r2=BigInt.prototype.valueOf,n2=function(e){try{return r2.call(e),!0}catch(r){}return!1},Uv.exports=function(e){return e===null||typeof e=="undefined"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:n2(e)}):Uv.exports=function(e){return!1};var r2,n2});var s2=I((kK,a2)=>{"use strict";p();var $5=vv(),F5=jC(),O5=zC(),M5=JC(),D5=i2();a2.exports=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if($5(e))return"String";if(F5(e))return"Number";if(O5(e))return"Boolean";if(M5(e))return"Symbol";if(D5(e))return"BigInt"}});var c2=I((TK,l2)=>{"use strict";p();var xd=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,o2=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Sd;xd||(Sd=function(e){return!1});var Gv=xd?xd.prototype.has:null,jv=o2?o2.prototype.has:null;!Sd&&!Gv&&(Sd=function(e){return!1});l2.exports=Sd||function(e){if(!e||typeof e!="object")return!1;try{if(Gv.call(e,Gv),jv)try{jv.call(e,jv)}catch(r){return!0}return e instanceof xd}catch(r){}return!1}});var f2=I((PK,zv)=>{"use strict";p();var L5=Bn(),u2=xt(),N5=L5("%WeakSet%",!0),qv=u2("WeakSet.prototype.has",!0);qv?(Ed=u2("WeakMap.prototype.has",!0),zv.exports=function(e){if(!e||typeof e!="object")return!1;try{if(qv(e,qv),Ed)try{Ed(e,Ed)}catch(r){return!0}return e instanceof N5}catch(r){}return!1}):zv.exports=function(e){return!1};var Ed});var h2=I((IK,d2)=>{"use strict";p();var B5=yv(),H5=_v(),U5=c2(),j5=f2();d2.exports=function(e){if(e&&typeof e=="object"){if(B5(e))return"Map";if(H5(e))return"Set";if(U5(e))return"WeakMap";if(j5(e))return"WeakSet"}return!1}});var g2=I((FK,m2)=>{"use strict";p();var G5=xt(),p2=G5("ArrayBuffer.prototype.byteLength",!0),q5=Mv();m2.exports=function(e){return q5(e)?p2?p2(e):e.byteLength:NaN}});var U2=I((MK,H2)=>{"use strict";p();var L2=KA(),Jn=Kg(),v2=pT(),z5=Bn(),Oo=mC(),V5=mv(),w2=EC(),y2=tv(),b2=Yu(),_2=Mv(),x2=IC(),S2=Bv(),E2=BC(),k2=sd(),A2=s2(),T2=h2(),C2=vm(),P2=g2(),R2=Jn("SharedArrayBuffer.prototype.byteLength",!0),I2=Jn("Date.prototype.getTime"),Vv=Object.getPrototypeOf,$2=Jn("Object.prototype.toString"),Ad=z5("%Set%",!0),Wv=Jn("Map.prototype.has",!0),Td=Jn("Map.prototype.get",!0),F2=Jn("Map.prototype.size",!0),Cd=Jn("Set.prototype.add",!0),N2=Jn("Set.prototype.delete",!0),Pd=Jn("Set.prototype.has",!0),kd=Jn("Set.prototype.size",!0);function O2(t,e,r,n){for(var i=Oo(t),a;(a=i.next())&&!a.done;)if(yn(e,a.value,r,n))return N2(t,a.value),!0;return!1}function B2(t){if(typeof t=="undefined")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function W5(t,e,r,n,i,a){var s=B2(r);if(s!=null)return s;var o=Td(e,s),l=L2({},i,{strict:!1});return typeof o=="undefined"&&!Wv(e,s)||!yn(n,o,l,a)?!1:!Wv(t,s)&&yn(n,o,l,a)}function Y5(t,e,r){var n=B2(r);return n!=null?n:Pd(e,n)&&!Pd(t,n)}function M2(t,e,r,n,i,a){for(var s=Oo(t),o,l;(o=s.next())&&!o.done;)if(l=o.value,yn(r,l,i,a)&&yn(n,Td(e,l),i,a))return N2(t,l),!0;return!1}function yn(t,e,r,n){var i=r||{};if(i.strict?w2(t,e):t===e)return!0;var a=A2(t),s=A2(e);if(a!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?w2(t,e):t==e;var o=n.has(t),l=n.has(e),c;if(o&&l){if(n.get(t)===n.get(e))return!0}else c={};return o||n.set(t,c),l||n.set(e,c),K5(t,e,i,n)}function D2(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function X5(t,e,r,n){if(kd(t)!==kd(e))return!1;for(var i=Oo(t),a=Oo(e),s,o,l;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new Ad),Cd(l,s.value);else if(!Pd(e,s.value)){if(r.strict||!Y5(t,e,s.value))return!1;l||(l=new Ad),Cd(l,s.value)}if(l){for(;(o=a.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!O2(l,o.value,r.strict,n))return!1}else if(!r.strict&&!Pd(t,o.value)&&!O2(l,o.value,r.strict,n))return!1;return kd(l)===0}return!0}function Z5(t,e,r,n){if(F2(t)!==F2(e))return!1;for(var i=Oo(t),a=Oo(e),s,o,l,c,u,f;(s=i.next())&&!s.done;)if(c=s.value[0],u=s.value[1],c&&typeof c=="object")l||(l=new Ad),Cd(l,c);else if(f=Td(e,c),typeof f=="undefined"&&!Wv(e,c)||!yn(u,f,r,n)){if(r.strict||!W5(t,e,c,u,r,n))return!1;l||(l=new Ad),Cd(l,c)}if(l){for(;(o=a.next())&&!o.done;)if(c=o.value[0],f=o.value[1],c&&typeof c=="object"){if(!M2(l,t,c,f,r,n))return!1}else if(!r.strict&&(!t.has(c)||!yn(Td(t,c),f,r,n))&&!M2(l,t,c,f,L2({},r,{strict:!1}),n))return!1;return kd(l)===0}return!0}function K5(t,e,r,n){var i,a;if(typeof t!=typeof e||t==null||e==null||$2(t)!==$2(e)||y2(t)!==y2(e))return!1;var s=b2(t),o=b2(e);if(s!==o)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var u=S2(t),f=S2(e);if(u!==f||(u||f)&&(t.source!==e.source||v2(t)!==v2(e)))return!1;var d=x2(t),h=x2(e);if(d!==h||(d||h)&&I2(t)!==I2(e)||r.strict&&Vv&&Vv(t)!==Vv(e))return!1;var m=C2(t),g=C2(e);if(m!==g)return!1;if(m||g){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=D2(t),w=D2(e);if(v!==w)return!1;if(v||w){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var b=_2(t),S=_2(e);if(b!==S)return!1;if(b||S)return P2(t)!==P2(e)?!1:typeof Uint8Array=="function"&&yn(new Uint8Array(t),new Uint8Array(e),r,n);var E=E2(t),k=E2(e);if(E!==k)return!1;if(E||k)return R2(t)!==R2(e)?!1:typeof Uint8Array=="function"&&yn(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var A=k2(t),y=k2(e);if(A.length!==y.length)return!1;for(A.sort(),y.sort(),i=A.length-1;i>=0;i--)if(A[i]!=y[i])return!1;for(i=A.length-1;i>=0;i--)if(a=A[i],!yn(t[a],e[a],r,n))return!1;var _=T2(t),x=T2(e);return _!==x?!1:_==="Set"||x==="Set"?X5(t,e,r,n):_==="Map"?Z5(t,e,r,n):!0}H2.exports=function(e,r,n){return yn(e,r,n,V5())}});var tP=I((JK,eP)=>{p();var Bo=1e3,Ho=Bo*60,Uo=Ho*60,as=Uo*24,tU=as*7,rU=as*365.25;eP.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return nU(t);if(r==="number"&&isFinite(t))return e.long?aU(t):iU(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function nU(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*rU;case"weeks":case"week":case"w":return r*tU;case"days":case"day":case"d":return r*as;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Uo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ho;case"seconds":case"second":case"secs":case"sec":case"s":return r*Bo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function iU(t){var e=Math.abs(t);return e>=as?Math.round(t/as)+"d":e>=Uo?Math.round(t/Uo)+"h":e>=Ho?Math.round(t/Ho)+"m":e>=Bo?Math.round(t/Bo)+"s":t+"ms"}function aU(t){var e=Math.abs(t);return e>=as?$d(t,e,as,"day"):e>=Uo?$d(t,e,Uo,"hour"):e>=Ho?$d(t,e,Ho,"minute"):e>=Bo?$d(t,e,Bo,"second"):t+" ms"}function $d(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var nP=I((eJ,rP)=>{p();function sU(t){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=i,r.enabled=o,r.humanize=tP(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,d=null,h,m;function g(...v){if(!g.enabled)return;let w=g,b=Number(new Date),S=b-(f||b);w.diff=S,w.prev=f,w.curr=b,f=b,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let E=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(A,y)=>{if(A==="%%")return"%";E++;let _=r.formatters[y];if(typeof _=="function"){let x=v[E];A=_.call(w,x),v.splice(E,1),E--}return A}),r.formatArgs.call(w,v),(w.log||r.log).apply(w,v)}return g.namespace=u,g.useColors=r.useColors(),g.color=r.selectColor(u),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,m=r.enabled(u)),m),set:v=>{d=v}}),typeof r.init=="function"&&r.init(g),g}function n(u,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let d of f)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function a(u,f){let d=0,h=0,m=-1,g=0;for(;d<u.length;)if(h<f.length&&(f[h]===u[d]||f[h]==="*"))f[h]==="*"?(m=h,g=d,h++):(d++,h++);else if(m!==-1)h=m+1,g++,d=g;else return!1;for(;h<f.length&&f[h]==="*";)h++;return h===f.length}function s(){let u=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){for(let f of r.skips)if(a(u,f))return!1;for(let f of r.names)if(a(u,f))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}rP.exports=sU});var Od=I((vr,Fd)=>{p();vr.formatArgs=lU;vr.save=cU;vr.load=uU;vr.useColors=oU;vr.storage=fU();vr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();vr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function oU(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lU(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Fd.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}vr.log=console.debug||console.log||(()=>{});function cU(t){try{t?vr.storage.setItem("debug",t):vr.storage.removeItem("debug")}catch(e){}}function uU(){let t;try{t=vr.storage.getItem("debug")||vr.storage.getItem("DEBUG")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function fU(){try{return localStorage}catch(t){}}Fd.exports=nP()(vr);var{formatters:dU}=Fd.exports;dU.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var iP=I(Fr=>{"use strict";p();var hU=Fr&&Fr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fr,"__esModule",{value:!0});var pU=require("fs"),mU=hU(Od()),jo=mU.default("@kwsites/file-exists");function gU(t,e,r){jo("checking %s",t);try{let n=pU.statSync(t);return n.isFile()&&e?(jo("[OK] path represents a file"),!0):n.isDirectory()&&r?(jo("[OK] path represents a directory"),!0):(jo("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return jo("[FAIL] path is not accessible: %o",n),!1;throw jo("[FATAL] %o",n),n}}function vU(t,e=Fr.READABLE){return gU(t,(e&Fr.FILE)>0,(e&Fr.FOLDER)>0)}Fr.exists=vU;Fr.FILE=1;Fr.FOLDER=2;Fr.READABLE=Fr.FILE+Fr.FOLDER});var aP=I(Md=>{"use strict";p();function wU(t){for(var e in t)Md.hasOwnProperty(e)||(Md[e]=t[e])}Object.defineProperty(Md,"__esModule",{value:!0});wU(iP())});var ew=I(ss=>{"use strict";p();Object.defineProperty(ss,"__esModule",{value:!0});ss.createDeferred=ss.deferred=void 0;function Qv(){let t,e,r="pending";return{promise:new Promise((i,a)=>{t=i,e=a}),done(i){r==="pending"&&(r="resolved",t(i))},fail(i){r==="pending"&&(r="rejected",e(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}ss.deferred=Qv;ss.createDeferred=Qv;ss.default=Qv});var zw=I((exports,module)=>{p();(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(r){return new Sha256(e,!0).update(r)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(i){return e.create().update(i)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];e[n]=createOutputMethod(n,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if(typeof t=="string")return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(t==null)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(r,n){return new HmacSha256(r,e,!0).update(n)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(i){return new HmacSha256(i,t)},e.update=function(i,a){return e.create(i).update(a)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];e[n]=createHmacOutputMethod(n,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Sha256.prototype.update=function(t){if(!this.finalized){var e,r=typeof t;if(r!=="string"){if(r==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,i=0,a,s=t.length,o=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(a=this.start;i<s&&a<64;++i)o[a>>2]|=t[i]<<SHIFT[a++&3];else for(a=this.start;i<s&&a<64;++i)n=t.charCodeAt(i),n<128?o[a>>2]|=n<<SHIFT[a++&3]:n<2048?(o[a>>2]|=(192|n>>6)<<SHIFT[a++&3],o[a>>2]|=(128|n&63)<<SHIFT[a++&3]):n<55296||n>=57344?(o[a>>2]|=(224|n>>12)<<SHIFT[a++&3],o[a>>2]|=(128|n>>6&63)<<SHIFT[a++&3],o[a>>2]|=(128|n&63)<<SHIFT[a++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++i)&1023),o[a>>2]|=(240|n>>18)<<SHIFT[a++&3],o[a>>2]|=(128|n>>12&63)<<SHIFT[a++&3],o[a>>2]|=(128|n>>6&63)<<SHIFT[a++&3],o[a>>2]|=(128|n&63)<<SHIFT[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=o[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=this.blocks,c,u,f,d,h,m,g,v,w,b,S;for(c=16;c<64;++c)h=l[c-15],u=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=l[c-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,l[c]=l[c-16]+u+l[c-7]+f<<0;for(S=e&r,c=0;c<64;c+=4)this.first?(this.is224?(v=300032,h=l[0]-1413257819,o=h-150054599<<0,n=h+24177077<<0):(v=704751109,h=l[0]-210244248,o=h-1521486534<<0,n=h+143694565<<0),this.first=!1):(u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),v=t&e,d=v^t&r^S,g=i&a^~i&s,h=o+f+g+K[c]+l[c],m=u+d,o=n+h<<0,n=h+m<<0),u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),w=n&t,d=w^n&e^v,g=o&i^~o&a,h=s+f+g+K[c+1]+l[c+1],m=u+d,s=r+h<<0,r=h+m<<0,u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),b=r&n,d=b^r&t^w,g=s&o^~s&i,h=a+f+g+K[c+2]+l[c+2],m=u+d,a=e+h<<0,e=h+m<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),S=e&r,d=S^e&n^b,g=a&s^~a&o,h=i+f+g+K[c+3]+l[c+3],m=u+d,i=t+h<<0,t=h+m<<0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+a<<0,this.h6=this.h6+s<<0,this.h7=this.h7+o<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15];return this.is224||(l+=HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,a>>24&255,a>>16&255,a>>8&255,a&255,s>>24&255,s>>16&255,s>>8&255,s&255];return this.is224||l.push(o>>24&255,o>>16&255,o>>8&255,o&255),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};function HmacSha256(t,e,r){var n,i=typeof t;if(i==="string"){var a=[],s=t.length,o=0,l;for(n=0;n<s;++n)l=t.charCodeAt(n),l<128?a[o++]=l:l<2048?(a[o++]=192|l>>6,a[o++]=128|l&63):l<55296||l>=57344?(a[o++]=224|l>>12,a[o++]=128|l>>6&63,a[o++]=128|l&63):(l=65536+((l&1023)<<10|t.charCodeAt(++n)&1023),a[o++]=240|l>>18,a[o++]=128|l>>12&63,a[o++]=128|l>>6&63,a[o++]=128|l&63);t=a}else if(i==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);t.length>64&&(t=new Sha256(e,!0).update(t).array());var c=[],u=[];for(n=0;n<64;++n){var f=t[n]||0;c[n]=92^f,u[n]=54^f}Sha256.call(this,e,r),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=r}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var AF=I(P0=>{p();(function(t){var e=/\S/,r=/\"/g,n=/\n/g,i=/\r/g,a=/\\/g,s=/\u2028/,o=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(_,x){var T=_.length,P=0,F=1,N=2,M=P,re=null,ye=null,me="",fe=[],Ge=!1,oe=0,B=0,Z="{{",H="}}";function Oe(){me.length>0&&(fe.push({tag:"_t",text:new String(me)}),me="")}function cr(){for(var Ie=!0,Me=B;Me<fe.length;Me++)if(Ie=t.tags[fe[Me].tag]<t.tags._v||fe[Me].tag=="_t"&&fe[Me].text.match(e)===null,!Ie)return!1;return Ie}function Gt(Ie,Me){if(Oe(),Ie&&cr())for(var Rt=B,De;Rt<fe.length;Rt++)fe[Rt].text&&((De=fe[Rt+1])&&De.tag==">"&&(De.indent=fe[Rt].text.toString()),fe.splice(Rt,1));else Me||fe.push({tag:`
`});Ge=!1,B=fe.length}function Y(Ie,Me){var Rt="="+H,De=Ie.indexOf(Rt,Me),G=c(Ie.substring(Ie.indexOf("=",Me)+1,De)).split(" ");return Z=G[0],H=G[G.length-1],De+Rt.length-1}for(x&&(x=x.split(" "),Z=x[0],H=x[1]),oe=0;oe<T;oe++)M==P?u(Z,_,oe)?(--oe,Oe(),M=F):_.charAt(oe)==`
`?Gt(Ge):me+=_.charAt(oe):M==F?(oe+=Z.length-1,ye=t.tags[_.charAt(oe+1)],re=ye?_.charAt(oe+1):"_v",re=="="?(oe=Y(_,oe),M=P):(ye&&oe++,M=N),Ge=oe):u(H,_,oe)?(fe.push({tag:re,n:c(me),otag:Z,ctag:H,i:re=="/"?Ge-Z.length:oe+H.length}),me="",oe+=H.length-1,M=P,re=="{"&&(H=="}}"?oe++:l(fe[fe.length-1]))):me+=_.charAt(oe);return Gt(Ge,!0),fe};function l(y){y.n.substr(y.n.length-1)==="}"&&(y.n=y.n.substring(0,y.n.length-1))}function c(y){return y.trim?y.trim():y.replace(/^\s*|\s*$/g,"")}function u(y,_,x){if(_.charAt(x)!=y.charAt(0))return!1;for(var T=1,P=y.length;T<P;T++)if(_.charAt(x+T)!=y.charAt(T))return!1;return!0}var f={_t:!0,"\n":!0,$:!0,"/":!0};function d(y,_,x,T){var P=[],F=null,N=null,M=null;for(N=x[x.length-1];y.length>0;){if(M=y.shift(),N&&N.tag=="<"&&!(M.tag in f))throw new Error("Illegal content in < super tag.");if(t.tags[M.tag]<=t.tags.$||h(M,T))x.push(M),M.nodes=d(y,M.tag,x,T);else if(M.tag=="/"){if(x.length===0)throw new Error("Closing tag without opener: /"+M.n);if(F=x.pop(),M.n!=F.n&&!m(M.n,F.n,T))throw new Error("Nesting error: "+F.n+" vs. "+M.n);return F.end=M.i,P}else M.tag==`
`&&(M.last=y.length==0||y[0].tag==`
`);P.push(M)}if(x.length>0)throw new Error("missing closing tag: "+x.pop().n);return P}function h(y,_){for(var x=0,T=_.length;x<T;x++)if(_[x].o==y.n)return y.tag="#",!0}function m(y,_,x){for(var T=0,P=x.length;T<P;T++)if(x[T].c==y&&x[T].o==_)return!0}function g(y){var _=[];for(var x in y)_.push('"'+b(x)+'": function(c,p,t,i) {'+y[x]+"}");return"{ "+_.join(",")+" }"}function v(y){var _=[];for(var x in y.partials)_.push('"'+b(x)+'":{name:"'+b(y.partials[x].name)+'", '+v(y.partials[x])+"}");return"partials: {"+_.join(",")+"}, subs: "+g(y.subs)}t.stringify=function(y,_,x){return"{code: function (c,p,i) { "+t.wrapMain(y.code)+" },"+v(y)+"}"};var w=0;t.generate=function(y,_,x){w=0;var T={code:"",subs:{},partials:{}};return t.walk(y,T),x.asString?this.stringify(T,_,x):this.makeTemplate(T,_,x)},t.wrapMain=function(y){return'var t=this;t.b(i=i||"");'+y+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(y,_,x){var T=this.makePartials(y);return T.code=new Function("c","p","i",this.wrapMain(y.code)),new this.template(T,_,this,x)},t.makePartials=function(y){var _,x={subs:{},partials:y.partials,name:y.name};for(_ in x.partials)x.partials[_]=this.makePartials(x.partials[_]);for(_ in y.subs)x.subs[_]=new Function("c","p","t","i",y.subs[_]);return x};function b(y){return y.replace(a,"\\\\").replace(r,'\\"').replace(n,"\\n").replace(i,"\\r").replace(s,"\\u2028").replace(o,"\\u2029")}function S(y){return~y.indexOf(".")?"d":"f"}function E(y,_){var x="<"+(_.prefix||""),T=x+y.n+w++;return _.partials[T]={name:y.n,partials:{}},_.code+='t.b(t.rp("'+b(T)+'",c,p,"'+(y.indent||"")+'"));',T}t.codegen={"#":function(y,_){_.code+="if(t.s(t."+S(y.n)+'("'+b(y.n)+'",c,p,1),c,p,0,'+y.i+","+y.end+',"'+y.otag+" "+y.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(y.nodes,_),_.code+="});c.pop();}"},"^":function(y,_){_.code+="if(!t.s(t."+S(y.n)+'("'+b(y.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(y.nodes,_),_.code+="};"},">":E,"<":function(y,_){var x={partials:{},code:"",subs:{},inPartial:!0};t.walk(y.nodes,x);var T=_.partials[E(y,_)];T.subs=x.subs,T.partials=x.partials},$:function(y,_){var x={subs:{},code:"",partials:_.partials,prefix:y.n};t.walk(y.nodes,x),_.subs[y.n]=x.code,_.inPartial||(_.code+='t.sub("'+b(y.n)+'",c,p,i);')},"\n":function(y,_){_.code+=A('"\\n"'+(y.last?"":" + i"))},_v:function(y,_){_.code+="t.b(t.v(t."+S(y.n)+'("'+b(y.n)+'",c,p,0)));'},_t:function(y,_){_.code+=A('"'+b(y.text)+'"')},"{":k,"&":k};function k(y,_){_.code+="t.b(t.t(t."+S(y.n)+'("'+b(y.n)+'",c,p,0)));'}function A(y){return"t.b("+y+");"}t.walk=function(y,_){for(var x,T=0,P=y.length;T<P;T++)x=t.codegen[y[T].tag],x&&x(y[T],_);return _},t.parse=function(y,_,x){return x=x||{},d(y,"",[],x.sectionTags||[])},t.cache={},t.cacheKey=function(y,_){return[y,!!_.asString,!!_.disableLambda,_.delimiters,!!_.modelGet].join("||")},t.compile=function(y,_){_=_||{};var x=t.cacheKey(y,_),T=this.cache[x];if(T){var P=T.partials;for(var F in P)delete P[F].instance;return T}return T=this.generate(this.parse(this.scan(y,_.delimiters),y,_),y,_),this.cache[x]=T}})(typeof P0!="undefined"?P0:Hogan)});var TF=I(R0=>{p();var Bz={};(function(t){t.Template=function(d,h,m,g){d=d||{},this.r=d.code||this.r,this.c=m,this.options=g||{},this.text=h||"",this.partials=d.partials||{},this.subs=d.subs||{},this.buf=""},t.Template.prototype={r:function(d,h,m){return""},v:u,t:c,render:function(h,m,g){return this.ri([h],m||{},g)},ri:function(d,h,m){return this.r(d,h,m)},ep:function(d,h){var m=this.partials[d],g=h[m.name];if(m.instance&&m.base==g)return m.instance;if(typeof g=="string"){if(!this.c)throw new Error("No compiler available.");g=this.c.compile(g,this.options)}if(!g)return null;if(this.partials[d].base=g,m.subs){h.stackText||(h.stackText={});for(key in m.subs)h.stackText[key]||(h.stackText[key]=this.activeSub!==void 0&&h.stackText[this.activeSub]?h.stackText[this.activeSub]:this.text);g=r(g,m.subs,m.partials,this.stackSubs,this.stackPartials,h.stackText)}return this.partials[d].instance=g,g},rp:function(d,h,m,g){var v=this.ep(d,m);return v?v.ri(h,m,g):""},rs:function(d,h,m){var g=d[d.length-1];if(!f(g)){m(d,h,this);return}for(var v=0;v<g.length;v++)d.push(g[v]),m(d,h,this),d.pop()},s:function(d,h,m,g,v,w,b){var S;return f(d)&&d.length===0?!1:(typeof d=="function"&&(d=this.ms(d,h,m,g,v,w,b)),S=!!d,!g&&S&&h&&h.push(typeof d=="object"?d:h[h.length-1]),S)},d:function(d,h,m,g){var v,w=d.split("."),b=this.f(w[0],h,m,g),S=this.options.modelGet,E=null;if(d==="."&&f(h[h.length-2]))b=h[h.length-1];else for(var k=1;k<w.length;k++)v=e(w[k],b,S),v!==void 0?(E=b,b=v):b="";return g&&!b?!1:(!g&&typeof b=="function"&&(h.push(E),b=this.mv(b,h,m),h.pop()),b)},f:function(d,h,m,g){for(var v=!1,w=null,b=!1,S=this.options.modelGet,E=h.length-1;E>=0;E--)if(w=h[E],v=e(d,w,S),v!==void 0){b=!0;break}return b?(!g&&typeof v=="function"&&(v=this.mv(v,h,m)),v):g?!1:""},ls:function(d,h,m,g,v){var w=this.options.delimiters;return this.options.delimiters=v,this.b(this.ct(c(d.call(h,g)),h,m)),this.options.delimiters=w,!1},ct:function(d,h,m){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(d,this.options).render(h,m)},b:function(d){this.buf+=d},fl:function(){var d=this.buf;return this.buf="",d},ms:function(d,h,m,g,v,w,b){var S,E=h[h.length-1],k=d.call(E);return typeof k=="function"?g?!0:(S=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(k,E,m,S.substring(v,w),b)):k},mv:function(d,h,m){var g=h[h.length-1],v=d.call(g);return typeof v=="function"?this.ct(c(v.call(g)),g,m):v},sub:function(d,h,m,g){var v=this.subs[d];v&&(this.activeSub=d,v(h,m,this,g),this.activeSub=!1)}};function e(d,h,m){var g;return h&&typeof h=="object"&&(h[d]!==void 0?g=h[d]:m&&h.get&&typeof h.get=="function"&&(g=h.get(d))),g}function r(d,h,m,g,v,w){function b(){}b.prototype=d;function S(){}S.prototype=d.subs;var E,k=new b;k.subs=new S,k.subsText={},k.buf="",g=g||{},k.stackSubs=g,k.subsText=w;for(E in h)g[E]||(g[E]=h[E]);for(E in g)k.subs[E]=g[E];v=v||{},k.stackPartials=v;for(E in m)v[E]||(v[E]=m[E]);for(E in v)k.partials[E]=v[E];return k}var n=/&/g,i=/</g,a=/>/g,s=/\'/g,o=/\"/g,l=/[&<>\"\']/;function c(d){return String(d==null?"":d)}function u(d){return d=c(d),l.test(d)?d.replace(n,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(o,"&quot;"):d}var f=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"}})(typeof R0!="undefined"?R0:Bz)});var I0=I((mte,CF)=>{p();var Lh=AF();Lh.Template=TF().Template;Lh.template=Lh.Template;CF.exports=Lh});var IF=I(nn=>{"use strict";p();Object.defineProperty(nn,"__esModule",{value:!0});nn.ColorSchemeType=nn.DiffStyleType=nn.LineMatchingType=nn.OutputFormatType=nn.LineType=void 0;var PF;(function(t){t.INSERT="insert",t.DELETE="delete",t.CONTEXT="context"})(PF||(nn.LineType=PF={}));nn.OutputFormatType={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"};nn.LineMatchingType={LINES:"lines",WORDS:"words",NONE:"none"};nn.DiffStyleType={WORD:"word",CHAR:"char"};var RF;(function(t){t.AUTO="auto",t.DARK="dark",t.LIGHT="light"})(RF||(nn.ColorSchemeType=RF={}))});var f9={};HM(f9,{default:()=>Np});module.exports=UM(f9);p();var bM=Ft(Lg()),we=require("obsidian"),_M=Ft(require("path"));p();var Zn={};p();var Kf=class{constructor(e){this.plugin=e;this.tasks=[]}addTask(e,r){this.tasks.push({task:e,onFinished:r!=null?r:()=>{}}),this.tasks.length===1&&this.handleTask()}handleTask(){if(this.tasks.length>0){let e=this.tasks[0];e.task().then(r=>{e.onFinished(r),this.tasks.shift(),this.handleTask()},r=>{this.plugin.displayError(r),e.onFinished(void 0),this.tasks.shift(),this.handleTask()})}}clear(){this.tasks=[]}};p();var j=require("obsidian");p();var Qk=require("obsidian"),Jf="YYYY-MM-DD",Ng=`${Jf} HH:mm`,Bg=`${Jf} HH:mm:ss`,Qf=40,Po="conflict-files-obsidian-git.md",Xe={commitMessage:"vault backup: {{date}}",autoCommitMessage:"vault backup: {{date}}",commitMessageScript:"",commitDateFormat:Bg,autoSaveInterval:0,autoPushInterval:0,autoPullInterval:0,autoPullOnBoot:!1,autoCommitOnlyStaged:!1,disablePush:!1,pullBeforePush:!0,disablePopups:!1,showErrorNotices:!0,disablePopupsForNoChanges:!1,listChangedFilesInMessageBody:!1,showStatusBar:!0,updateSubmodules:!1,syncMethod:"merge",customMessageOnAutoBackup:!1,autoBackupAfterFileChange:!1,treeStructure:!1,refreshSourceControl:Qk.Platform.isDesktopApp,basePath:"",differentIntervalCommitAndPush:!1,changedFilesInStatusBar:!1,showedMobileNotice:!1,refreshSourceControlTimer:7e3,showBranchStatusBar:!0,setLastSaveToLastCommit:!1,submoduleRecurseCheckout:!1,gitDir:"",showFileMenu:!0,authorInHistoryView:"hide",dateInHistoryView:!1,diffStyle:"split",hunks:{showSigns:!1,hunkCommands:!1,statusBar:"disabled"},lineAuthor:{show:!1,followMovement:"inactive",authorDisplay:"initials",showCommitHash:!1,dateTimeFormatOptions:"date",dateTimeFormatCustomString:Ng,dateTimeTimezone:"viewer-local",coloringMaxAge:"1y",colorNew:{r:255,g:150,b:150},colorOld:{r:120,g:160,b:255},textColorCss:"var(--text-muted)",ignoreWhitespace:!1,gutterSpacingFallbackLength:5}},Dt={type:"git-view",name:"Source Control",icon:"git-pull-request"},Jr={type:"git-history-view",name:"History",icon:"history"},ma={type:"split-diff-view",name:"Diff view",icon:"diff"},ga={type:"diff-view",name:"Diff View",icon:"git-pull-request"},ed="C:\\Program Files\\Git\\cmd\\git.exe",td="git_credentials_input",rs="obsidian_askpass.sh",eA=`#!/bin/sh

PROMPT="$1"
TEMP_FILE="$OBSIDIAN_GIT_CREDENTIALS_INPUT"

cleanup() {
    rm -f "$TEMP_FILE" "$TEMP_FILE.response"
}
trap cleanup EXIT

echo "$PROMPT" > "$TEMP_FILE"

while [ ! -e "$TEMP_FILE.response" ]; do
    if [ ! -e "$TEMP_FILE" ]; then
        echo "Trigger file got removed: Abort" >&2
        exit 1
    fi
    sleep 0.1
done

RESPONSE=$(cat "$TEMP_FILE.response")

echo "$RESPONSE"
`,tA=["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];p();p();p();var yc=class{diff(e,r,n={}){let i;typeof n=="function"?(i=n,n={}):"callback"in n&&(i=n.callback);let a=this.castInput(e,n),s=this.castInput(r,n),o=this.removeEmpty(this.tokenize(a,n)),l=this.removeEmpty(this.tokenize(s,n));return this.diffWithOptionsObj(o,l,n,i)}diffWithOptionsObj(e,r,n,i){var a;let s=b=>{if(b=this.postProcess(b,n),i){setTimeout(function(){i(b)},0);return}else return b},o=r.length,l=e.length,c=1,u=o+l;n.maxEditLength!=null&&(u=Math.min(u,n.maxEditLength));let f=(a=n.timeout)!==null&&a!==void 0?a:1/0,d=Date.now()+f,h=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(h[0],r,e,0,n);if(h[0].oldPos+1>=l&&m+1>=o)return s(this.buildValues(h[0].lastComponent,r,e));let g=-1/0,v=1/0,w=()=>{for(let b=Math.max(g,-c);b<=Math.min(v,c);b+=2){let S,E=h[b-1],k=h[b+1];E&&(h[b-1]=void 0);let A=!1;if(k){let _=k.oldPos-b;A=k&&0<=_&&_<o}let y=E&&E.oldPos+1<l;if(!A&&!y){h[b]=void 0;continue}if(!y||A&&E.oldPos<k.oldPos?S=this.addToPath(k,!0,!1,0,n):S=this.addToPath(E,!1,!0,1,n),m=this.extractCommon(S,r,e,b,n),S.oldPos+1>=l&&m+1>=o)return s(this.buildValues(S.lastComponent,r,e))||!0;h[b]=S,S.oldPos+1>=l&&(v=Math.min(v,b-1)),m+1>=o&&(g=Math.max(g,b+1))}c++};if(i)(function b(){setTimeout(function(){if(c>u||Date.now()>d)return i(void 0);w()||b()},0)})();else for(;c<=u&&Date.now()<=d;){let b=w();if(b)return b}}addToPath(e,r,n,i,a){let s=e.lastComponent;return s&&!a.oneChangePerToken&&s.added===r&&s.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:n,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:s}}}extractCommon(e,r,n,i,a){let s=r.length,o=n.length,l=e.oldPos,c=l-i,u=0;for(;c+1<s&&l+1<o&&this.equals(n[l+1],r[c+1],a);)c++,l++,u++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!a.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c}equals(e,r,n){return n.comparator?n.comparator(e,r):e===r||!!n.ignoreCase&&e.toLowerCase()===r.toLowerCase()}removeEmpty(e){let r=[];for(let n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r}castInput(e,r){return e}tokenize(e,r){return Array.from(e)}join(e){return e.join("")}postProcess(e,r){return e}get useLongestToken(){return!1}buildValues(e,r,n){let i=[],a;for(;e;)i.push(e),a=e.previousComponent,delete e.previousComponent,e=a;i.reverse();let s=i.length,o=0,l=0,c=0;for(;o<s;o++){let u=i[o];if(u.removed)u.value=this.join(n.slice(c,c+u.count)),c+=u.count;else{if(!u.added&&this.useLongestToken){let f=r.slice(l,l+u.count);f=f.map(function(d,h){let m=n[c+h];return m.length>d.length?m:d}),u.value=this.join(f)}else u.value=this.join(r.slice(l,l+u.count));l+=u.count,u.added||(c+=u.count)}}return i}};p();var Hg=class extends yc{constructor(){super(...arguments),this.tokenize=$8}equals(e,r,n){return n.ignoreWhitespace?((!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!n.newlineIsToken||!r.includes(`
`))&&(r=r.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),r.endsWith(`
`)&&(r=r.slice(0,-1))),super.equals(e,r,n)}},I8=new Hg;function Ug(t,e,r){return I8.diff(t,e,r)}function $8(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));let r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(let i=0;i<n.length;i++){let a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r}p();function jg(t,e,r,n,i,a,s){let o;s?typeof s=="function"?o={callback:s}:o=s:o={},typeof o.context=="undefined"&&(o.context=4);let l=o.context;if(o.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(o.callback){let{callback:u}=o;Ug(r,n,Object.assign(Object.assign({},o),{callback:f=>{let d=c(f);u(d)}}))}else return c(Ug(r,n,o));function c(u){if(!u)return;u.push({value:"",lines:[]});function f(b){return b.map(function(S){return" "+S})}let d=[],h=0,m=0,g=[],v=1,w=1;for(let b=0;b<u.length;b++){let S=u[b],E=S.lines||F8(S.value);if(S.lines=E,S.added||S.removed){if(!h){let k=u[b-1];h=v,m=w,k&&(g=l>0?f(k.lines.slice(-l)):[],h-=g.length,m-=g.length)}for(let k of E)g.push((S.added?"+":"-")+k);S.added?w+=E.length:v+=E.length}else{if(h)if(E.length<=l*2&&b<u.length-2)for(let k of f(E))g.push(k);else{let k=Math.min(E.length,l);for(let y of f(E.slice(0,k)))g.push(y);let A={oldStart:h,oldLines:v-h+k,newStart:m,newLines:w-m+k,lines:g};d.push(A),h=0,m=0,g=[]}v+=E.length,w+=E.length}}for(let b of d)for(let S=0;S<b.lines.length;S++)b.lines[S].endsWith(`
`)?b.lines[S]=b.lines[S].slice(0,-1):(b.lines.splice(S+1,0,"\\ No newline at end of file"),S++);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}}function rd(t){if(Array.isArray(t))return t.map(rd).join(`
`);let e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(let r=0;r<t.hunks.length;r++){let n=t.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@");for(let i of n.lines)e.push(i)}return e.join(`
`)+`
`}function rA(t,e,r,n,i,a,s){if(typeof s=="function"&&(s={callback:s}),s!=null&&s.callback){let{callback:o}=s;jg(t,e,r,n,i,a,Object.assign(Object.assign({},s),{callback:l=>{o(l?rd(l):void 0)}}))}else{let o=jg(t,e,r,n,i,a,s);return o?rd(o):void 0}}function bc(t,e,r,n,i,a){return rA(t,t,e,r,n,i,a)}function F8(t){let e=t.endsWith(`
`),r=t.split(`
`).map(n=>n+`
`);return e?r.pop():r.push(r.pop().slice(0,-1)),r}var te=Ft(Lg()),is=require("obsidian");p();function nA(t,e){let r=Object.assign({},t.lineAuthor,e.lineAuthor);return Object.assign({},t,e,{lineAuthor:r})}var Ro=class extends Error{constructor(r){super("No network connection available");this.originalError=r}};p();var iA=require("obsidian"),O8={options:[],placeholder:"",allowEmpty:!1,onlySelection:!1,initialValue:void 0,obscure:!1},ze=class extends iA.SuggestModal{constructor(e,r){if(super(e.app),this.config={...O8,...r},this.setPlaceholder(this.config.placeholder),this.config.obscure){this.inputEl.type="password";let n=this.containerEl.querySelector(".prompt-input-container");n.addClass("git-obscure-prompt"),n.setAttr("git-is-obscured","true");let i=n==null?void 0:n.createDiv({cls:"search-input-clear-button"});i.style.marginRight="32px",i.id="git-show-password",i.addEventListener("click",()=>{n.getAttr("git-is-obscured")==="true"?(this.inputEl.type="text",n.setAttr("git-is-obscured","false")):(this.inputEl.type="password",n.setAttr("git-is-obscured","true"))})}}openAndGetResult(){return new Promise(e=>{this.resolve=e,this.open(),this.config.initialValue!=null&&(this.inputEl.value=this.config.initialValue,this.inputEl.dispatchEvent(new Event("input")))})}onClose(){new Promise(e=>setTimeout(e,10)).then(()=>{this.resolve&&this.resolve(void 0)})}getSuggestions(e){return this.config.onlySelection?this.config.options:this.config.allowEmpty?[e.length>0?e:" ",...this.config.options]:[e.length>0?e:"...",...this.config.options]}renderSuggestion(e,r){this.config.obscure?r.hide():r.setText(e)}onChooseSuggestion(e,r){if(this.resolve){let n;this.config.allowEmpty&&e===" "?n="":e==="..."?n=void 0:n=e,this.resolve(n)}}};p();var j2=Ft(xA()),G2=require("child_process"),q2=Ft(U2()),Pi=require("obsidian");function Rd(t){throw new Error(`Unexpected object: ${t}`)}function Oc(t,e,r){return t===1?`${t} ${e}`:`${t} ${r!=null?r:e+"s"}`}var Yv=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);function bn(t,e){let r;if(e){if(e.button===0||e.button===1){let n=Pi.Keymap.isModEvent(e);r=t.workspace.getLeaf(n)}}else r=t.workspace.getLeaf(!1);return r}function Qn(t,e,r,n,i){if(e.button==2){let a=t.vault.getAbstractFileByPath(r);if(a!=null){let s=new Pi.Menu;t.workspace.trigger("file-menu",s,a,i,n),s.showAtPosition({x:e.pageX,y:e.pageY})}else{let s=new Pi.Menu;t.workspace.trigger("obsidian-git:menu",s,r,i,n),s.showAtPosition({x:e.pageX,y:e.pageY})}}}function ba(t){throw new Error("Impossible branch: "+t)}function Xv(t){return`rgb(${t.r},${t.g},${t.b})`}function z2(t){var a;let e=(a=j2.fromString(t))==null?void 0:a.toRgbaArray();if(e===void 0)return;let[r,n,i]=e;return{r,g:n,b:i}}function V2(t){return t.diff(Pi.moment.unix(0),"seconds")}function W2(t){if(t.length!==0)return t.slice().sort()[Math.floor(t.length/2)]}function Y2(t,e){return(0,q2.default)(t,e,{strict:!0})}function Mc(t,e){return new Proxy(t,{get(r,n){return n==="length"?Math.min(e,r.length):r[n]}})}function X2(t,e,r){return t.length<=e?new Array(e-t.length).fill(r).join("")+t:t.substring(t.length-e)}function Z2(t,e){if(e<=0)return t;let r=new Array(e).fill(" ").join(""),n=t.substring(e,t.length);return r+n}function Zv(t,e,r){return t<=e&&e<=r}function Ri(t){let[e,...r]=t.split("/");return[e,r.length===0?void 0:r.join("/")]}function ei(t){return t.endsWith("/")?t:t.split("/").last().replace(/\.md$/,"")}function K2(t){return t===1?"1 minute":`${t} minutes`}function J5(t){let e=t.lastIndexOf(".");return t.substring(e+1)}function Mo(t){if(t.endsWith(".md"))return!1;let e=J5(t);return tA.includes(e)}function Kv(t){return(t.startsWith("https://github.com/")||t.startsWith("https://gitlab.com/"))&&(t.endsWith(".git")||(t=t+".git")),t}function Do(t,e){let r=e.vault.getAbstractFileByPath(t);if(!(r instanceof Pi.TFile))return!1;try{return!!e.viewRegistry.getTypeByExtension(r.extension)}catch(n){return!0}}function J2({isFolder:t,gitRelativePath:e}){let r="/";return r+=e,t&&(r+="/"),r.replace(/([\\!#*?[\]])/g,String.raw`\$1`).replace(/\s(?=\s*$)/g,String.raw`\ `)}function Lo(t,e,r,n){let i=e.target;t.workspace.trigger("hover-link",{event:e,source:r.getViewType(),hoverParent:r,targetEl:i,linktext:n})}function Dc(t,e,r={}){return new Promise((n,i)=>{let a=(0,G2.spawn)(t,e,r),s="",o="";a.stdout.on("data",l=>{s+=l.toString()}),a.stderr.on("data",l=>{o+=l.toString()}),a.on("error",l=>{n({error:new Error(l.message),stdout:s,stderr:s,code:1})}),a.on("close",l=>{n({stdout:s,stderr:o,code:l!=null?l:1,error:void 0})})})}p();var Q2=require("obsidian"),No=class{constructor(e){this.plugin=e,this.app=e.app}getRelativeVaultPath(e){return this.plugin.settings.basePath?this.plugin.settings.basePath+"/"+e:e}getRelativeRepoPath(e,r=!0){return r&&this.plugin.settings.basePath.length>0?e.substring(this.plugin.settings.basePath.length+1):e}unload(){}_getTreeStructure(e,r=0){let n=[];for(e=[...e];e.length>0;){let i=e.first(),a=i.path.substring(r);if(a.contains("/")){let s=a.substring(0,a.indexOf("/")),o=e.filter(c=>c.path.substring(r).startsWith(s+"/"));o.forEach(c=>e.remove(c));let l=i.path.substring(0,a.indexOf("/")+r);n.push({title:s,path:l,vaultPath:this.getRelativeVaultPath(l),children:this._getTreeStructure(o,(r>0?r+s.length:s.length)+1)})}else n.push({title:a,data:i,path:i.path,vaultPath:this.getRelativeVaultPath(i.path)}),e.remove(i)}return n}simplify(e){var r,n,i,a;for(let s of e){for(;;){let o=((r=s.children)==null?void 0:r.length)==1,l=((i=(n=s.children)==null?void 0:n.first())==null?void 0:i.data)==null;if(!(s.children!=null&&o&&l))break;let c=s.children.first();s.title+="/"+c.title,s.data=c.data,s.path=c.path,s.vaultPath=c.vaultPath,s.children=c.children}s.children!=null&&this.simplify(s.children),(a=s.children)==null||a.sort((o,l)=>{let c=(l.data==null?1:0)-(o.data==null?1:0);return c!=0?c:o.title.localeCompare(l.title)})}return e.sort((s,o)=>{let l=(o.data==null?1:0)-(s.data==null?1:0);return l!=0?l:s.title.localeCompare(o.title)})}getTreeStructure(e){let r=this._getTreeStructure(e);return this.simplify(r)}async formatCommitMessage(e){let r;if(e.includes("{{numFiles}}")){r=await this.status();let n=r.staged.length;e=e.replace("{{numFiles}}",String(n))}if(e.includes("{{hostname}}")){let n=this.plugin.localStorage.getHostname()||"";e=e.replace("{{hostname}}",n)}if(e.includes("{{files}}")){r=r!=null?r:await this.status();let n={},i="";if(r.staged.length<100){r.staged.forEach(s=>{s.index in n?n[s.index].push(s.path):n[s.index]=[s.path]});let a=[];for(let[s,o]of Object.entries(n))a.push(s+" "+o.join(" "));i=a.join(", ")}else i="Too many files to list";e=e.replace("{{files}}",i)}if(e=e.replace("{{date}}",(0,Q2.moment)().format(this.plugin.settings.commitDateFormat)),this.plugin.settings.listChangedFilesInMessageBody){let n=r!=null?r:await this.status(),i="";n.staged.length<100?i=n.staged.map(a=>a.path).join(`
`):i="Too many files to list",e=e+`

Affected files:
`+i}return e}};p();var _a=require("obsidian"),Id=class{constructor(e,r){this.plugin=r;this.promises={};this.adapter=e.adapter,this.vault=e,this.lastBasePath=this.plugin.settings.basePath,this.promises.readFile=this.readFile.bind(this),this.promises.writeFile=this.writeFile.bind(this),this.promises.readdir=this.readdir.bind(this),this.promises.mkdir=this.mkdir.bind(this),this.promises.rmdir=this.rmdir.bind(this),this.promises.stat=this.stat.bind(this),this.promises.unlink=this.unlink.bind(this),this.promises.lstat=this.lstat.bind(this),this.promises.readlink=this.readlink.bind(this),this.promises.symlink=this.symlink.bind(this)}async readFile(e,r){var n;if(this.maybeLog("Read: "+e+JSON.stringify(r)),r=="utf8"||r.encoding=="utf8"){let i=this.vault.getAbstractFileByPath(e);return i instanceof _a.TFile?(this.maybeLog("Reuse"),this.vault.read(i)):this.adapter.read(e)}else{if(e.endsWith(this.gitDir+"/index"))return this.plugin.settings.basePath!=this.lastBasePath?(this.clearIndex(),this.lastBasePath=this.plugin.settings.basePath,this.adapter.readBinary(e)):(n=this.index)!=null?n:this.adapter.readBinary(e);let i=this.vault.getAbstractFileByPath(e);return i instanceof _a.TFile?(this.maybeLog("Reuse"),this.vault.readBinary(i)):this.adapter.readBinary(e)}}async writeFile(e,r){if(this.maybeLog("Write: "+e),typeof r=="string"){let n=this.vault.getAbstractFileByPath(e);return n instanceof _a.TFile?this.vault.modify(n,r):this.adapter.write(e,r)}else if(e.endsWith(this.gitDir+"/index"))this.index=r,this.indexmtime=Date.now();else{let n=this.vault.getAbstractFileByPath(e);return n instanceof _a.TFile?this.vault.modifyBinary(n,r):this.adapter.writeBinary(e,r)}}async readdir(e){e==="."&&(e="/");let r=await this.adapter.list(e),n=[...r.files,...r.folders],i;return e!=="/"?i=n.map(a=>(0,_a.normalizePath)(a.substring(e.length))):i=n,i}async mkdir(e){return this.adapter.mkdir(e)}async rmdir(e,r){var n,i;return this.adapter.rmdir(e,(i=(n=r==null?void 0:r.options)==null?void 0:n.recursive)!=null?i:!1)}async stat(e){if(e.endsWith(this.gitDir+"/index")){if(this.index!==void 0&&this.indexctime!=null&&this.indexmtime!=null)return{isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1,size:this.index.byteLength,type:"file",ctimeMs:this.indexctime,mtimeMs:this.indexmtime};{let n=await this.adapter.stat(e);if(n==null)throw{code:"ENOENT"};return this.indexctime=n.ctime,this.indexmtime=n.mtime,{ctimeMs:n.ctime,mtimeMs:n.mtime,size:n.size,type:"file",isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1}}}e==="."&&(e="/");let r=this.vault.getAbstractFileByPath(e);if(this.maybeLog("Stat: "+e),r instanceof _a.TFile)return this.maybeLog("Reuse stat"),{ctimeMs:r.stat.ctime,mtimeMs:r.stat.mtime,size:r.stat.size,type:"file",isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1};{let n=await this.adapter.stat(e);if(n)return{ctimeMs:n.ctime,mtimeMs:n.mtime,size:n.size,type:n.type==="folder"?"directory":n.type,isFile:()=>n.type==="file",isDirectory:()=>n.type==="folder",isSymbolicLink:()=>!1};throw{code:"ENOENT"}}}async unlink(e){return this.adapter.remove(e)}async lstat(e){return this.stat(e)}async readlink(e){throw new Error(`readlink of (${e}) is not implemented.`)}async symlink(e){throw new Error(`symlink of (${e}) is not implemented.`)}async saveAndClear(){this.index!==void 0&&await this.adapter.writeBinary(this.plugin.gitManager.getRelativeVaultPath(this.gitDir+"/index"),this.index,{ctime:this.indexctime,mtime:this.indexmtime}),this.clearIndex()}clearIndex(){this.index=void 0,this.indexctime=void 0,this.indexmtime=void 0}get gitDir(){return this.plugin.settings.gitDir||".git"}maybeLog(e){}};var _n=class extends No{constructor(r){super(r);this.FILE=0;this.HEAD=1;this.WORKDIR=2;this.STAGE=3;this.status_mapping={"000":"  ","003":"AD","020":"??","022":"A ","023":"AM",100:"D ",101:" D",103:"MD",110:"DA",111:"  ",113:"MM",120:"DA",121:" M",122:"M ",123:"MM"};this.noticeLength=999999;this.fs=new Id(this.app.vault,this.plugin)}getRepo(){return{fs:this.fs,dir:this.plugin.settings.basePath,gitdir:this.plugin.settings.gitDir||void 0,onAuth:()=>{var r,n;return{username:(r=this.plugin.localStorage.getUsername())!=null?r:void 0,password:(n=this.plugin.localStorage.getPassword())!=null?n:void 0}},onAuthFailure:async()=>{new is.Notice("Authentication failed. Please try with different credentials");let r=await new ze(this.plugin,{placeholder:"Specify your username"}).openAndGetResult();if(r){let n=await new ze(this.plugin,{placeholder:"Specify your password/personal access token"}).openAndGetResult();if(n)return this.plugin.localStorage.setUsername(r),this.plugin.localStorage.setPassword(n),{username:r,password:n}}return{cancel:!0}},http:{async request({url:r,method:n,headers:i,body:a}){let s;a&&(s=await eU(a));let o=await(0,is.requestUrl)({url:r,method:n,headers:i,body:s,throw:!1});return{url:r,method:n,headers:o.headers,body:Q5(o.arrayBuffer),statusCode:o.status,statusMessage:o.status.toString()}}}}}async wrapFS(r){try{let n=await r;return await this.fs.saveAndClear(),n}catch(n){throw await this.fs.saveAndClear(),n}}async status(r){let n,i=window.setTimeout(()=>{n=new is.Notice("This takes longer: Getting status",this.noticeLength)},2e4);try{this.plugin.setPluginState({gitAction:1});let a={...this.getRepo()};(r==null?void 0:r.path)!=null&&(a.filepaths=[`${r.path}/`]);let s=(await this.wrapFS(te.default.statusMatrix(a))).map(f=>this.getFileStatusResult(f)),o=[],l=[],c=[];for(let f of s)f.workingDir!==" "&&o.push(f),f.index!==" "&&f.index!=="U"&&l.push(f),(f.index!=" "||f.workingDir!=" ")&&c.push(f);let u=[];return window.clearTimeout(i),n==null||n.hide(),{all:c,changed:o,staged:l,conflicted:u}}catch(a){throw window.clearTimeout(i),n==null||n.hide(),this.plugin.displayError(a),a}}async commitAll({message:r,status:n,unstagedFiles:i}){try{return await this.checkAuthorInfo(),await this.stageAll({status:n,unstagedFiles:i}),this.commit({message:r})}catch(a){throw this.plugin.displayError(a),a}}async commit({message:r}){try{await this.checkAuthorInfo(),this.plugin.setPluginState({gitAction:4});let n=await this.formatCommitMessage(r),i=this.plugin.localStorage.getConflict(),a;if(i){let s=await this.branchInfo();a=[s.current,s.tracking]}await this.wrapFS(te.default.commit({...this.getRepo(),message:n,parent:a})),this.plugin.localStorage.setConflict(!1);return}catch(n){throw this.plugin.displayError(n),n}}async stage(r,n){let i=this.getRelativeRepoPath(r,n),a;n?a=r:a=this.getRelativeVaultPath(r);try{this.plugin.setPluginState({gitAction:3}),await this.app.vault.adapter.exists(a)?await this.wrapFS(te.default.add({...this.getRepo(),filepath:i})):await this.wrapFS(te.default.remove({...this.getRepo(),filepath:i}))}catch(s){throw this.plugin.displayError(s),s}}async stageAll({dir:r,status:n,unstagedFiles:i}){try{if(n)await Promise.all(n.changed.map(a=>a.workingDir!=="D"?this.wrapFS(te.default.add({...this.getRepo(),filepath:a.path})):te.default.remove({...this.getRepo(),filepath:a.path})));else{let a=i!=null?i:await this.getUnstagedFiles(r!=null?r:".");await Promise.all(a.map(({path:s,type:o})=>o=="D"?te.default.remove({...this.getRepo(),filepath:s}):this.wrapFS(te.default.add({...this.getRepo(),filepath:s}))))}}catch(a){throw this.plugin.displayError(a),a}}async unstage(r,n){try{this.plugin.setPluginState({gitAction:3}),r=this.getRelativeRepoPath(r,n),await this.wrapFS(te.default.resetIndex({...this.getRepo(),filepath:r}))}catch(i){throw this.plugin.displayError(i),i}}async unstageAll({dir:r,status:n}){try{let i;n?i=n.staged.map(a=>a.path):i=(await this.getStagedFiles(r!=null?r:".")).map(({path:s})=>s),await this.wrapFS(Promise.all(i.map(a=>te.default.resetIndex({...this.getRepo(),filepath:a}))))}catch(i){throw this.plugin.displayError(i),i}}async discard(r){try{this.plugin.setPluginState({gitAction:3}),await this.wrapFS(te.default.checkout({...this.getRepo(),filepaths:[r],force:!0}))}catch(n){throw this.plugin.displayError(n),n}}async discardAll({dir:r,status:n}){let i=[];n?r!=null?i=n.changed.filter(a=>a.workingDir!="U"&&a.path.startsWith(r)).map(a=>a.path):i=n.changed.filter(a=>a.workingDir!="U").map(a=>a.path):i=(await this.getUnstagedFiles(r)).filter(a=>a.type!="A").map(({path:a})=>a);try{await this.wrapFS(te.default.checkout({...this.getRepo(),filepaths:i,force:!0}))}catch(a){throw this.plugin.displayError(a),a}}async getUntrackedPaths(r){let n=[];if(r.status)for(let i of r.status.changed)i.index=="U"&&i.workingDir==="U"&&i.path.startsWith(r.path!=null?`${r.path}/`:"")&&n.push(i.path);else{let i=await this.status({path:r==null?void 0:r.path});for(let a of i.changed)a.index==="U"&&a.workingDir==="U"&&n.push(a.path)}return n}getProgressText(r,n){let i=`${r} progress:`;return n.phase&&(i=`${i} ${n.phase}:`),n.loaded&&(i=`${i} ${n.loaded}`,n.total&&(i=`${i} of ${n.total}`)),i}resolveRef(r){return this.wrapFS(te.default.resolveRef({...this.getRepo(),ref:r}))}async pull(){let r=this.showNotice("Initializing pull");try{this.plugin.setPluginState({gitAction:2});let n=await this.resolveRef("HEAD");await this.fetch();let i=await this.branchInfo();await this.checkAuthorInfo(),(await this.wrapFS(te.default.merge({...this.getRepo(),ours:i.current,theirs:i.tracking,abortOnConflict:!1}))).alreadyMerged||await this.wrapFS(te.default.checkout({...this.getRepo(),ref:i.current,onProgress:l=>{r!==void 0&&(r.noticeEl.innerText=this.getProgressText("Checkout",l))},remote:i.remote})),r==null||r.hide();let s=await this.resolveRef("HEAD"),o=await this.getFileChangesCount(n,s);return this.showNotice("Finished pull",!1),o.map(l=>({path:l.path,workingDir:"P",index:"P",vaultPath:this.getRelativeVaultPath(l.path)}))}catch(n){throw r==null||r.hide(),n instanceof te.Errors.MergeConflictError&&await this.plugin.handleConflict(n.data.filepaths.map(i=>this.getRelativeVaultPath(i))),this.plugin.displayError(n),n}}async push(){if(!await this.canPush())return 0;let r=this.showNotice("Initializing push");try{this.plugin.setPluginState({gitAction:1});let n=await this.branchInfo(),i=n.tracking,a=n.current,s=(await this.getFileChangesCount(a,i)).length;this.plugin.setPluginState({gitAction:5});let o=await this.getCurrentRemote();return await this.wrapFS(te.default.push({...this.getRepo(),remote:o,onProgress:l=>{r!==void 0&&(r.noticeEl.innerText=this.getProgressText("Pushing",l))}})),r==null||r.hide(),s}catch(n){throw r==null||r.hide(),this.plugin.displayError(n),n}}async getUnpushedCommits(){let r=await this.branchInfo(),n=r.tracking,i=r.current;if(n==null||i==null)return 0;let a=await this.resolveRef(i),s=await this.resolveRef(n);return(await this.getFileChangesCount(a,s)).length}async canPush(){let r=await this.branchInfo(),n=r.tracking,i=r.current,a=await this.resolveRef(i),s=await this.resolveRef(n);return a!=s}async checkRequirements(){return await this.plugin.app.vault.adapter.exists(`${this.getRepo().dir}/.git/HEAD`)?"valid":"missing-repo"}async branchInfo(){var r,n;try{let i=await te.default.currentBranch(this.getRepo())||"",a=await te.default.listBranches(this.getRepo()),s=(r=await this.getConfig(`branch.${i}.remote`))!=null?r:"origin",o=(n=await this.getConfig(`branch.${i}.merge`))==null?void 0:n.split("refs/heads")[1],l=o?s+o:void 0;return{current:i,tracking:l,branches:a,remote:s}}catch(i){throw this.plugin.displayError(i),i}}async getCurrentRemote(){var i;let r=await te.default.currentBranch(this.getRepo())||"";return(i=await this.getConfig(`branch.${r}.remote`))!=null?i:"origin"}async checkout(r,n){try{return this.wrapFS(te.default.checkout({...this.getRepo(),ref:r,force:!!n,remote:n}))}catch(i){throw this.plugin.displayError(i),i}}async createBranch(r){try{await this.wrapFS(te.default.branch({...this.getRepo(),ref:r,checkout:!0}))}catch(n){throw this.plugin.displayError(n),n}}async deleteBranch(r){try{await this.wrapFS(te.default.deleteBranch({...this.getRepo(),ref:r}))}catch(n){throw this.plugin.displayError(n),n}}branchIsMerged(r){return Promise.resolve(!0)}async init(){try{await this.wrapFS(te.default.init(this.getRepo()))}catch(r){throw this.plugin.displayError(r),r}}async clone(r,n,i){let a=this.showNotice("Initializing clone");try{await this.wrapFS(te.default.clone({...this.getRepo(),dir:n,url:r,depth:i,onProgress:s=>{a!==void 0&&(a.noticeEl.innerText=this.getProgressText("Cloning",s))}})),a==null||a.hide()}catch(s){throw a==null||a.hide(),this.plugin.displayError(s),s}}async setConfig(r,n){try{return this.wrapFS(te.default.setConfig({...this.getRepo(),path:r,value:n}))}catch(i){throw this.plugin.displayError(i),i}}async getConfig(r){try{return this.wrapFS(te.default.getConfig({...this.getRepo(),path:r}))}catch(n){throw this.plugin.displayError(n),n}}async fetch(r){let n=this.showNotice("Initializing fetch");try{let i={...this.getRepo(),onProgress:a=>{n!==void 0&&(n.noticeEl.innerText=this.getProgressText("Fetching",a))},remote:r!=null?r:await this.getCurrentRemote()};await this.wrapFS(te.default.fetch(i)),n==null||n.hide()}catch(i){throw this.plugin.displayError(i),n==null||n.hide(),i}}async setRemote(r,n){try{await this.wrapFS(te.default.addRemote({...this.getRepo(),remote:r,url:n,force:!0}))}catch(i){throw this.plugin.displayError(i),i}}async getRemoteBranches(r){let n=[];return n.push(...await this.wrapFS(te.default.listBranches({...this.getRepo(),remote:r}))),n.remove("HEAD"),n=n.map(i=>`${r}/${i}`),n}async getRemotes(){return(await this.wrapFS(te.default.listRemotes({...this.getRepo()}))).map(r=>r.remote)}async removeRemote(r){await this.wrapFS(te.default.deleteRemote({...this.getRepo(),remote:r}))}async getRemoteUrl(r){var n;return(n=(await this.wrapFS(te.default.listRemotes({...this.getRepo()}))).filter(i=>i.remote==r)[0])==null?void 0:n.url}async log(r,n=!0,i,a){let s=await this.wrapFS(te.default.log({...this.getRepo(),depth:i,ref:a}));return Promise.all(s.map(async o=>{let l=o.commit.message.split(`

`);return{message:l[0],author:{name:o.commit.author.name,email:o.commit.author.email},body:l.slice(1).join(`

`),date:new Date(o.commit.committer.timestamp).toDateString(),diff:{changed:0,files:(await this.getFileChangesCount(o.commit.parent.first(),o.oid)).map(c=>({path:c.path,status:c.type,vaultPath:this.getRelativeVaultPath(c.path),hash:o.oid}))},hash:o.oid,refs:[]}}))}updateBasePath(r){return this.getRepo().dir=r,Promise.resolve()}async updateUpstreamBranch(r){let[n,i]=Ri(r),a=await this.branchInfo();await this.wrapFS(te.default.push({...this.getRepo(),remote:n,remoteRef:i})),await this.setConfig(`branch.${a.current}.merge`,`refs/heads/${i}`)}updateGitPath(r){return Promise.resolve()}async getFileChangesCount(r,n){return this.walkDifference({walkers:[te.default.TREE({ref:r}),te.default.TREE({ref:n})]})}async walkDifference({walkers:r,dir:n}){return await this.wrapFS(te.default.walk({...this.getRepo(),trees:r,map:async function(a,[s,o]){if(!Yv(a,n))return null;if(await(s==null?void 0:s.type())==="tree"||await(o==null?void 0:o.type())==="tree")return;let l=await(s==null?void 0:s.oid()),c=await(o==null?void 0:o.oid()),u="equal";if(l!==c&&(u="M"),l===void 0&&(u="A"),c===void 0&&(u="D"),l===void 0&&c===void 0&&(console.log("Something weird happened:"),console.log(s),console.log(o)),u!=="equal")return{path:a,type:u}}}))}async getStagedFiles(r="."){return(await this.walkDifference({walkers:[te.default.TREE({ref:"HEAD"}),te.default.STAGE()],dir:r})).map(i=>({vaultPath:this.getRelativeVaultPath(i.path),path:i.path}))}async getUnstagedFiles(r="."){let n,i=window.setTimeout(()=>{n=new is.Notice("This takes longer: Getting status",this.noticeLength)},2e4);try{let a=this.getRepo(),s=await this.wrapFS(te.default.walk({...a,trees:[te.default.WORKDIR(),te.default.STAGE()],map:async function(o,[l,c]){if(!c&&l&&await te.default.isIgnored({...a,filepath:o})||!Yv(o,r))return null;let[u,f]=await Promise.all([l&&l.type(),c&&c.type()]),d=[u,f].includes("blob");if((u==="tree"||u==="special")&&!d)return;if(f==="commit")return null;if((f==="tree"||f==="special")&&!d)return;let h=f==="blob"?await c.oid():void 0,m;return u==="blob"&&f!=="blob"?m="42":u==="blob"&&(m=await l.oid()),m?h?m!==h?{path:o,type:"M"}:null:{path:o,type:"A"}:{path:o,type:"D"}}}));return window.clearTimeout(i),n==null||n.hide(),s}catch(a){throw window.clearTimeout(i),n==null||n.hide(),this.plugin.displayError(a),a}}async getDiffString(r,n=!1,i){let a=this.getRelativeVaultPath(r),s=async(c,[u])=>{if(r==c){let f=await u.oid();return(await te.default.readBlob({...this.getRepo(),oid:f})).blob}};if(i){let c=await(0,te.readBlob)({...this.getRepo(),filepath:r,oid:i}).then(h=>new TextDecoder().decode(h.blob)).catch(h=>{if(!(h instanceof te.default.Errors.NotFoundError))throw h}),u=await te.default.readCommit({...this.getRepo(),oid:i}),f=await(0,te.readBlob)({...this.getRepo(),filepath:r,oid:u.commit.parent.first()}).then(h=>new TextDecoder().decode(h.blob)).catch(h=>{if(!(h instanceof te.default.Errors.NotFoundError))throw h});return bc(a,f!=null?f:"",c!=null?c:"")}let o=(await te.default.walk({...this.getRepo(),trees:[te.default.STAGE()],map:s})).first(),l=new TextDecoder().decode(o);if(n){let c=await this.resolveRef("HEAD").then(f=>(0,te.readBlob)({...this.getRepo(),filepath:r,oid:f})).then(f=>new TextDecoder().decode(f.blob)).catch(f=>{if(!(f instanceof te.default.Errors.NotFoundError))throw f});return bc(a,c!=null?c:"",l)}else{let c;return await this.app.vault.adapter.exists(a)?c=await this.app.vault.adapter.read(a):c="",bc(a,l,c)}}async getLastCommitTime(){let r=this.getRepo(),n=await this.resolveRef("HEAD"),a=(await te.default.readCommit({...r,oid:n})).commit.committer.timestamp;return new Date(a*1e3)}getFileStatusResult(r){let n=this.status_mapping[`${r[this.HEAD]}${r[this.WORKDIR]}${r[this.STAGE]}`];return{index:n[0]=="?"?"U":n[0],workingDir:n[1]=="?"?"U":n[1],path:r[this.FILE],vaultPath:this.getRelativeVaultPath(r[this.FILE])}}async checkAuthorInfo(){let r=await this.getConfig("user.name"),n=await this.getConfig("user.email");if(!r||!n)throw Error("Git author name and email are not set. Please set both fields in the settings.")}showNotice(r,n=!0){if(!this.plugin.settings.disablePopups)return new is.Notice(r,n?this.noticeLength:void 0)}};async function*Q5(t){yield new Uint8Array(t)}async function eU(t){let e=new ReadableStream({async start(n){for await(let i of t)n.enqueue(i);n.close()}});return await new Response(e).arrayBuffer()}p();var GI=Ft(Od()),Mr=Ft(require("fs/promises")),$i=require("obsidian"),He=Ft(require("path")),Vc=require("path");p();var Wd=Ft(aP(),1),qd=Ft(Od(),1),RR=require("child_process"),hI=Ft(ew(),1),Go=Ft(ew(),1),BI=require("node:events"),bw=Object.defineProperty,yU=Object.getOwnPropertyDescriptor,_w=Object.getOwnPropertyNames,bU=Object.prototype.hasOwnProperty,V=(t,e)=>function(){return t&&(e=(0,t[_w(t)[0]])(t=0)),e},_U=(t,e)=>function(){return e||(0,t[_w(t)[0]])((e={exports:{}}).exports,e),e.exports},ft=(t,e)=>{for(var r in e)bw(t,r,{get:e[r],enumerable:!0})},xU=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _w(e))!bU.call(t,i)&&i!==r&&bw(t,i,{get:()=>e[i],enumerable:!(n=yU(e,i))||n.enumerable});return t},it=t=>xU(bw({},"__esModule",{value:!0}),t);function SU(...t){let e=new String(t);return Vd.set(e,t),e}function Ud(t){return t instanceof String&&Vd.has(t)}function sP(t){return Vd.get(t)||[]}var Vd,Hc=V({"src/lib/args/pathspec.ts"(){"use strict";Vd=new WeakMap}}),br,Sa=V({"src/lib/errors/git-error.ts"(){"use strict";br=class extends Error{constructor(t,e){super(e),this.task=t,Object.setPrototypeOf(this,new.target.prototype)}}}}),Uc,zo=V({"src/lib/errors/git-response-error.ts"(){"use strict";Sa(),Uc=class extends br{constructor(t,e){super(void 0,e||String(t)),this.git=t}}}}),LP,NP=V({"src/lib/errors/task-configuration-error.ts"(){"use strict";Sa(),LP=class extends br{constructor(t){super(void 0,t)}}}});function BP(t){return typeof t!="function"?cs:t}function HP(t){return typeof t=="function"&&t!==cs}function UP(t,e){let r=t.indexOf(e);return r<=0?[t,""]:[t.substr(0,r),t.substr(r+1)]}function jP(t,e=0){return GP(t)&&t.length>e?t[e]:void 0}function ls(t,e=0){if(GP(t)&&t.length>e)return t[t.length-1-e]}function GP(t){return!!(t&&typeof t.length=="number")}function jc(t="",e=!0,r=`
`){return t.split(r).reduce((n,i)=>{let a=e?i.trim():i;return a&&n.push(a),n},[])}function xw(t,e){return jc(t,!0).map(r=>e(r))}function Sw(t){return(0,Wd.exists)(t,Wd.FOLDER)}function Re(t,e){return Array.isArray(t)?t.includes(e)||t.push(e):t.add(e),e}function qP(t,e){return Array.isArray(t)&&!t.includes(e)&&t.push(e),t}function Yd(t,e){if(Array.isArray(t)){let r=t.indexOf(e);r>=0&&t.splice(r,1)}else t.delete(e);return e}function ti(t){return Array.isArray(t)?t:[t]}function zP(t){return t.replace(/[\s-]+(.)/g,(e,r)=>r.toUpperCase())}function VP(t){return ti(t).map(String)}function Ue(t,e=0){if(t==null)return e;let r=parseInt(t,10);return isNaN(r)?e:r}function Nc(t,e){let r=[];for(let n=0,i=t.length;n<i;n++)r.push(e,t[n]);return r}function Bc(t){return(Array.isArray(t)?Buffer.concat(t):t).toString("utf-8")}function WP(t,e){return Object.assign({},...e.map(r=>r in t?{[r]:t[r]}:{}))}function ow(t=0){return new Promise(e=>setTimeout(e,t))}function lw(t){if(t!==!1)return t}var qo,cs,Gc,Xd=V({"src/lib/utils/util.ts"(){"use strict";qo="\0",cs=()=>{},Gc=Object.prototype.toString.call.bind(Object.prototype.toString)}});function ri(t,e,r){return e(t)?t:arguments.length>2?r:void 0}function cw(t,e){let r=Ud(t)?"string":typeof t;return/number|string|boolean/.test(r)&&(!e||!e.includes(r))}function Zd(t){return!!t&&Gc(t)==="[object Object]"}function YP(t){return typeof t=="function"}var qc,Vt,XP,jd,Ew,ZP=V({"src/lib/utils/argument-filters.ts"(){"use strict";Xd(),Hc(),qc=t=>Array.isArray(t),Vt=t=>typeof t=="string",XP=t=>Array.isArray(t)&&t.every(Vt),jd=t=>Vt(t)||Array.isArray(t)&&t.every(Vt),Ew=t=>t==null||"number|boolean|function".includes(typeof t)?!1:Array.isArray(t)||typeof t=="string"||typeof t.length=="number"}}),uw,EU=V({"src/lib/utils/exit-codes.ts"(){"use strict";uw=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.ERROR=1]="ERROR",t[t.NOT_FOUND=-2]="NOT_FOUND",t[t.UNCLEAN=128]="UNCLEAN",t))(uw||{})}}),Gd,kU=V({"src/lib/utils/git-output-streams.ts"(){"use strict";Gd=class KP{constructor(e,r){this.stdOut=e,this.stdErr=r}asStrings(){return new KP(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),he,xa,AU=V({"src/lib/utils/line-parser.ts"(){"use strict";he=class{constructor(t,e){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,a)=>this.addMatch(i,a,r(a)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],e&&(this.useMatches=e)}useMatches(t,e){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,e,r){let n=r&&t.exec(r);return n&&this.pushMatch(e,n),!!n}pushMatch(t,e){this.matches.push(...e.slice(1))}},xa=class extends he{addMatch(t,e,r){return/^remote:\s/.test(String(r))&&super.addMatch(t,e,r)}pushMatch(t,e){(t>0||e.length>1)&&super.pushMatch(t,e)}}}});function JP(...t){let e=process.cwd(),r=Object.assign({baseDir:e,...QP},...t.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||e,r.trimmed=r.trimmed===!0,r}var QP,TU=V({"src/lib/utils/simple-git-options.ts"(){"use strict";QP={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function kw(t,e=[]){return Zd(t)?Object.keys(t).reduce((r,n)=>{let i=t[n];if(Ud(i))r.push(i);else if(cw(i,["boolean"]))r.push(n+"="+i);else if(Array.isArray(i))for(let a of i)cw(a,["string","number"])||r.push(n+"="+a);else r.push(n);return r},e):e}function wr(t,e=0,r=!1){let n=[];for(let i=0,a=e<0?t.length:e;i<a;i++)"string|number".includes(typeof t[i])&&n.push(String(t[i]));return kw(Aw(t),n),r||n.push(...CU(t)),n}function CU(t){let e=typeof ls(t)=="function";return ri(ls(t,e?1:0),qc,[])}function Aw(t){let e=YP(ls(t));return ri(ls(t,e?1:0),Zd)}function at(t,e=!0){let r=BP(ls(t));return e||HP(r)?r:void 0}var PU=V({"src/lib/utils/task-options.ts"(){"use strict";ZP(),Xd(),Hc()}});function fw(t,e){return t(e.stdOut,e.stdErr)}function _r(t,e,r,n=!0){return ti(r).forEach(i=>{for(let a=jc(i,n),s=0,o=a.length;s<o;s++){let l=(c=0)=>{if(!(s+c>=o))return a[s+c]};e.some(({parse:c})=>c(l,t))}}),t}var RU=V({"src/lib/utils/task-parser.ts"(){"use strict";Xd()}}),eR={};ft(eR,{ExitCodes:()=>uw,GitOutputStreams:()=>Gd,LineParser:()=>he,NOOP:()=>cs,NULL:()=>qo,RemoteLineParser:()=>xa,append:()=>Re,appendTaskOptions:()=>kw,asArray:()=>ti,asCamelCase:()=>zP,asFunction:()=>BP,asNumber:()=>Ue,asStringArray:()=>VP,bufferToString:()=>Bc,callTaskParser:()=>fw,createInstanceConfig:()=>JP,delay:()=>ow,filterArray:()=>qc,filterFunction:()=>YP,filterHasLength:()=>Ew,filterPlainObject:()=>Zd,filterPrimitives:()=>cw,filterString:()=>Vt,filterStringArray:()=>XP,filterStringOrStringArray:()=>jd,filterType:()=>ri,first:()=>jP,folderExists:()=>Sw,forEachLineWithContent:()=>xw,getTrailingOptions:()=>wr,including:()=>qP,isUserFunction:()=>HP,last:()=>ls,objectToString:()=>Gc,orVoid:()=>lw,parseStringResponse:()=>_r,pick:()=>WP,prefixedArray:()=>Nc,remove:()=>Yd,splitOn:()=>UP,toLinesWithContent:()=>jc,trailingFunctionArgument:()=>at,trailingOptionsArgument:()=>Aw});var ue=V({"src/lib/utils/index.ts"(){"use strict";ZP(),EU(),kU(),AU(),TU(),PU(),RU(),Xd()}}),tR={};ft(tR,{CheckRepoActions:()=>dw,checkIsBareRepoTask:()=>nR,checkIsRepoRootTask:()=>rR,checkIsRepoTask:()=>IU});function IU(t){switch(t){case"bare":return nR();case"root":return rR()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:Kd,parser:Tw}}function rR(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:Kd,parser(e){return/^\.(git)?$/.test(e.trim())}}}function nR(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:Kd,parser:Tw}}function $U(t){return/(Not a git repository|Kein Git-Repository)/i.test(String(t))}var dw,Kd,Tw,iR=V({"src/lib/tasks/check-is-repo.ts"(){"use strict";ue(),dw=(t=>(t.BARE="bare",t.IN_TREE="tree",t.IS_REPO_ROOT="root",t))(dw||{}),Kd=({exitCode:t},e,r,n)=>{if(t===128&&$U(e))return r(Buffer.from("false"));n(e)},Tw=t=>t.trim()==="true"}});function FU(t,e){let r=new aR(t),n=t?oR:sR;return jc(e).forEach(i=>{let a=i.replace(n,"");r.paths.push(a),(lR.test(a)?r.folders:r.files).push(a)}),r}var aR,sR,oR,lR,OU=V({"src/lib/responses/CleanSummary.ts"(){"use strict";ue(),aR=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}},sR=/^[a-z]+\s*/i,oR=/^[a-z]+\s+[a-z]+\s*/i,lR=/\/$/}}),hw={};ft(hw,{EMPTY_COMMANDS:()=>Jd,adhocExecTask:()=>cR,configurationErrorTask:()=>yr,isBufferTask:()=>fR,isEmptyTask:()=>dR,straightThroughBufferTask:()=>uR,straightThroughStringTask:()=>ir});function cR(t){return{commands:Jd,format:"empty",parser:t}}function yr(t){return{commands:Jd,format:"empty",parser(){throw typeof t=="string"?new LP(t):t}}}function ir(t,e=!1){return{commands:t,format:"utf-8",parser(r){return e?String(r).trim():r}}}function uR(t){return{commands:t,format:"buffer",parser(e){return e}}}function fR(t){return t.format==="buffer"}function dR(t){return t.format==="empty"||!t.commands.length}var Jd,ut=V({"src/lib/tasks/task.ts"(){"use strict";NP(),Jd=[]}}),hR={};ft(hR,{CONFIG_ERROR_INTERACTIVE_MODE:()=>Cw,CONFIG_ERROR_MODE_REQUIRED:()=>Pw,CONFIG_ERROR_UNKNOWN_OPTION:()=>Rw,CleanOptions:()=>Ld,cleanTask:()=>pR,cleanWithOptionsTask:()=>MU,isCleanOptionsArray:()=>DU});function MU(t,e){let{cleanMode:r,options:n,valid:i}=LU(t);return r?i.options?(n.push(...e),n.some(HU)?yr(Cw):pR(r,n)):yr(Rw+JSON.stringify(t)):yr(Pw)}function pR(t,e){return{commands:["clean",`-${t}`,...e],format:"utf-8",parser(n){return FU(t==="n",n)}}}function DU(t){return Array.isArray(t)&&t.every(e=>Iw.has(e))}function LU(t){let e,r=[],n={cleanMode:!1,options:!0};return t.replace(/[^a-z]i/g,"").split("").forEach(i=>{NU(i)?(e=i,n.cleanMode=!0):n.options=n.options&&BU(r[r.length]=`-${i}`)}),{cleanMode:e,options:r,valid:n}}function NU(t){return t==="f"||t==="n"}function BU(t){return/^-[a-z]$/i.test(t)&&Iw.has(t.charAt(1))}function HU(t){return/^-[^\-]/.test(t)?t.indexOf("i")>0:t==="--interactive"}var Cw,Pw,Rw,Ld,Iw,mR=V({"src/lib/tasks/clean.ts"(){"use strict";OU(),ue(),ut(),Cw="Git clean interactive mode is not supported",Pw='Git clean mode parameter ("n" or "f") is required',Rw="Git clean unknown option found in: ",Ld=(t=>(t.DRY_RUN="n",t.FORCE="f",t.IGNORED_INCLUDED="x",t.IGNORED_ONLY="X",t.EXCLUDING="e",t.QUIET="q",t.RECURSIVE="d",t))(Ld||{}),Iw=new Set(["i",...VP(Object.values(Ld))])}});function UU(t){let e=new vR;for(let r of gR(t))e.addValue(r.file,String(r.key),r.value);return e}function jU(t,e){let r=null,n=[],i=new Map;for(let a of gR(t,e))a.key===e&&(n.push(r=a.value),i.has(a.file)||i.set(a.file,[]),i.get(a.file).push(r));return{key:e,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function GU(t){return t.replace(/^(file):/,"")}function*gR(t,e=null){let r=t.split("\0");for(let n=0,i=r.length-1;n<i;){let a=GU(r[n++]),s=r[n++],o=e;if(s.includes(`
`)){let l=UP(s,`
`);o=l[0],s=l[1]}yield{file:a,key:o,value:s}}}var vR,qU=V({"src/lib/responses/ConfigList.ts"(){"use strict";ue(),vR=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,e)=>Object.assign(t,this.values[e]),{})),this._all}addFile(t){if(!(t in this.values)){let e=ls(this.files);this.values[t]=e?Object.create(this.values[e]):{},this.files.push(t)}return this.values[t]}addValue(t,e,r){let n=this.addFile(t);n.hasOwnProperty(e)?Array.isArray(n[e])?n[e].push(r):n[e]=[n[e],r]:n[e]=r,this._all=void 0}}}});function tw(t,e){return typeof t=="string"&&pw.hasOwnProperty(t)?t:e}function zU(t,e,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(t,e),{commands:i,format:"utf-8",parser(a){return a}}}function VU(t,e){let r=["config","--null","--show-origin","--get-all",t];return e&&r.splice(1,0,`--${e}`),{commands:r,format:"utf-8",parser(n){return jU(n,t)}}}function WU(t){let e=["config","--list","--show-origin","--null"];return t&&e.push(`--${t}`),{commands:e,format:"utf-8",parser(r){return UU(r)}}}function YU(){return{addConfig(t,e,...r){return this._runTask(zU(t,e,r[0]===!0,tw(r[1],"local")),at(arguments))},getConfig(t,e){return this._runTask(VU(t,tw(e,void 0)),at(arguments))},listConfig(...t){return this._runTask(WU(tw(t[0],void 0)),at(arguments))}}}var pw,wR=V({"src/lib/tasks/config.ts"(){"use strict";qU(),ue(),pw=(t=>(t.system="system",t.global="global",t.local="local",t.worktree="worktree",t))(pw||{})}});function XU(t){return yR.has(t)}var rw,yR,bR=V({"src/lib/tasks/diff-name-status.ts"(){"use strict";rw=(t=>(t.ADDED="A",t.COPIED="C",t.DELETED="D",t.MODIFIED="M",t.RENAMED="R",t.CHANGED="T",t.UNMERGED="U",t.UNKNOWN="X",t.BROKEN="B",t))(rw||{}),yR=new Set(Object.values(rw))}});function ZU(...t){return new xR().param(...t)}function KU(t){let e=new Set,r={};return xw(t,n=>{let[i,a,s]=n.split(qo);e.add(i),(r[i]=r[i]||[]).push({line:Ue(a),path:i,preview:s})}),{paths:e,results:r}}function JU(){return{grep(t){let e=at(arguments),r=wr(arguments);for(let i of _R)if(r.includes(i))return this._runTask(yr(`git.grep: use of "${i}" is not supported.`),e);typeof t=="string"&&(t=ZU().param(t));let n=["grep","--null","-n","--full-name",...r,...t];return this._runTask({commands:n,format:"utf-8",parser(i){return KU(i)}},e)}}}var _R,Lc,oP,xR,SR=V({"src/lib/tasks/grep.ts"(){"use strict";ue(),ut(),_R=["-h"],Lc=Symbol("grepQuery"),xR=class{constructor(){this[oP]=[]}*[(oP=Lc,Symbol.iterator)](){for(let t of this[Lc])yield t}and(...t){return t.length&&this[Lc].push("--and","(",...Nc(t,"-e"),")"),this}param(...t){return this[Lc].push(...Nc(t,"-e")),this}}}}),ER={};ft(ER,{ResetMode:()=>Nd,getResetMode:()=>ej,resetTask:()=>QU});function QU(t,e){let r=["reset"];return kR(t)&&r.push(`--${t}`),r.push(...e),ir(r)}function ej(t){if(kR(t))return t;switch(typeof t){case"string":case"undefined":return"soft"}}function kR(t){return AR.includes(t)}var Nd,AR,TR=V({"src/lib/tasks/reset.ts"(){"use strict";ut(),Nd=(t=>(t.MIXED="mixed",t.SOFT="soft",t.HARD="hard",t.MERGE="merge",t.KEEP="keep",t))(Nd||{}),AR=Array.from(Object.values(Nd))}});function tj(){return(0,qd.default)("simple-git")}function lP(t,e,r){return!e||!String(e).replace(/\s*/,"")?r?(n,...i)=>{t(n,...i),r(n,...i)}:t:(n,...i)=>{t(`%s ${n}`,e,...i),r&&r(n,...i)}}function rj(t,e,{namespace:r}){if(typeof t=="string")return t;let n=e&&e.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function $w(t,e,r,n=tj()){let i=t&&`[${t}]`||"",a=[],s=typeof e=="string"?n.extend(e):e,o=rj(ri(e,Vt),s,n);return c(r);function l(u,f){return Re(a,$w(t,o.replace(/^[^:]+/,u),f,n))}function c(u){let f=u&&`[${u}]`||"",d=s&&lP(s,f)||cs,h=lP(n,`${i} ${f}`,d);return Object.assign(s?d:h,{label:t,sibling:l,info:h,step:c})}}var CR=V({"src/lib/git-logger.ts"(){"use strict";ue(),qd.default.formatters.L=t=>String(Ew(t)?t.length:"-"),qd.default.formatters.B=t=>Buffer.isBuffer(t)?t.toString("utf8"):Gc(t)}}),PR,nj=V({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";var t;Sa(),CR(),PR=(t=class{constructor(r="GitExecutor"){this.logLabel=r,this._queue=new Map}withProgress(r){return this._queue.get(r)}createProgress(r){let n=t.getName(r.commands[0]),i=$w(this.logLabel,n);return{task:r,logger:i,name:n}}push(r){let n=this.createProgress(r);return n.logger("Adding task to the queue, commands = %o",r.commands),this._queue.set(r,n),n}fatal(r){for(let[n,{logger:i}]of Array.from(this._queue.entries()))n===r.task?(i.info("Failed %o",r),i("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):i.info("A fatal exception occurred in a previous task, the queue has been purged: %o",r.message),this.complete(n);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(r){this.withProgress(r)&&this._queue.delete(r)}attempt(r){let n=this.withProgress(r);if(!n)throw new br(void 0,"TasksPendingQueue: attempt called for an unknown task");return n.logger("Starting task"),n}static getName(r="empty"){return`task:${r}:${++t.counter}`}},t.counter=0,t)}});function os(t,e){return{method:jP(t.commands)||"",commands:e}}function ij(t,e){return r=>{e("[ERROR] child process exception %o",r),t.push(Buffer.from(String(r.stack),"ascii"))}}function cP(t,e,r,n){return i=>{r("%s received %L bytes",e,i),n("%B",i),t.push(i)}}var mw,aj=V({"src/lib/runners/git-executor-chain.ts"(){"use strict";Sa(),ut(),ue(),nj(),mw=class{constructor(t,e,r){this._executor=t,this._scheduler=e,this._plugins=r,this._chain=Promise.resolve(),this._queue=new PR}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}async attemptTask(t){let e=await this._scheduler.next(),r=()=>this._queue.complete(t);try{let{logger:n}=this._queue.attempt(t);return await(dR(t)?this.attemptEmptyTask(t,n):this.attemptRemoteTask(t,n))}catch(n){throw this.onFatalException(t,n)}finally{r(),e()}}onFatalException(t,e){let r=e instanceof br?Object.assign(e,{task:t}):new br(t,e&&String(e));return this._chain=Promise.resolve(),this._queue.fatal(r),r}async attemptRemoteTask(t,e){let r=this._plugins.exec("spawn.binary","",os(t,t.commands)),n=this._plugins.exec("spawn.args",[...t.commands],os(t,t.commands)),i=await this.gitResponse(t,r,n,this.outputHandler,e.step("SPAWN")),a=await this.handleTaskData(t,n,i,e.step("HANDLE"));return e("passing response to task's parser as a %s",t.format),fR(t)?fw(t.parser,a):fw(t.parser,a.asStrings())}async attemptEmptyTask(t,e){return e("empty task bypassing child process to call to task's parser"),t.parser(this)}handleTaskData(t,e,r,n){let{exitCode:i,rejection:a,stdOut:s,stdErr:o}=r;return new Promise((l,c)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:u}=this._plugins.exec("task.error",{error:a},{...os(t,e),...r});if(u&&t.onError)return n.info("exitCode=%s handling with custom error handler"),t.onError(r,u,f=>{n.info("custom error handler treated as success"),n("custom error returned a %s",Gc(f)),l(new Gd(Array.isArray(f)?Buffer.concat(f):f,Buffer.concat(o)))},c);if(u)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,o.length,a),c(u);n.info("retrieving task output complete"),l(new Gd(Buffer.concat(s),Buffer.concat(o)))})}async gitResponse(t,e,r,n,i){let a=i.sibling("output"),s=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},os(t,t.commands));return new Promise(o=>{let l=[],c=[];i.info("%s %o",e,r),i("%O",s);let u=this._beforeSpawn(t,r);if(u)return o({stdOut:l,stdErr:c,exitCode:9901,rejection:u});this._plugins.exec("spawn.before",void 0,{...os(t,r),kill(d){u=d||u}});let f=(0,RR.spawn)(e,r,s);f.stdout.on("data",cP(l,"stdOut",i,a.step("stdOut"))),f.stderr.on("data",cP(c,"stdErr",i,a.step("stdErr"))),f.on("error",ij(c,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(e,f.stdout,f.stderr,[...r])),this._plugins.exec("spawn.after",void 0,{...os(t,r),spawned:f,close(d,h){o({stdOut:l,stdErr:c,exitCode:d,rejection:u||h})},kill(d){f.killed||(u=d,f.kill("SIGINT"))}})})}_beforeSpawn(t,e){let r;return this._plugins.exec("spawn.before",void 0,{...os(t,e),kill(n){r=n||r}}),r}}}}),IR={};ft(IR,{GitExecutor:()=>$R});var $R,sj=V({"src/lib/runners/git-executor.ts"(){"use strict";aj(),$R=class{constructor(t,e,r){this.cwd=t,this._scheduler=e,this._plugins=r,this._chain=new mw(this,this._scheduler,this._plugins)}chain(){return new mw(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}}}});function oj(t,e,r=cs){let n=a=>{r(null,a)},i=a=>{(a==null?void 0:a.task)===t&&r(a instanceof Uc?lj(a):a,void 0)};e.then(n,i)}function lj(t){let e=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),e=cs};return Object.create(t,Object.getOwnPropertyNames(t.git).reduce(r,{}));function r(n,i){return i in t||(n[i]={enumerable:!1,configurable:!1,get(){return e(i),t.git[i]}}),n}}var cj=V({"src/lib/task-callback.ts"(){"use strict";zo(),ue()}});function uP(t,e){return cR(r=>{if(!Sw(t))throw new Error(`Git.cwd: cannot change to non-directory "${t}"`);return(e||r).cwd=t})}var uj=V({"src/lib/tasks/change-working-directory.ts"(){"use strict";ue(),ut()}});function nw(t){let e=["checkout",...t];return e[1]==="-b"&&e.includes("-B")&&(e[1]=Yd(e,"-B")),ir(e)}function fj(){return{checkout(){return this._runTask(nw(wr(arguments,1)),at(arguments))},checkoutBranch(t,e){return this._runTask(nw(["-b",t,e,...wr(arguments)]),at(arguments))},checkoutLocalBranch(t){return this._runTask(nw(["-b",t,...wr(arguments)]),at(arguments))}}}var dj=V({"src/lib/tasks/checkout.ts"(){"use strict";ue(),ut()}});function hj(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function pj(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(t){return _r(hj(),[FR],t)}})}}}var FR,mj=V({"src/lib/tasks/count-objects.ts"(){"use strict";ue(),FR=new he(/([a-z-]+): (\d+)$/,(t,[e,r])=>{let n=zP(e);t.hasOwnProperty(n)&&(t[n]=Ue(r))})}});function gj(t){return _r({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},OR,t)}var OR,vj=V({"src/lib/parsers/parse-commit.ts"(){"use strict";ue(),OR=[new he(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(t,[e,r,n])=>{t.branch=e,t.commit=n,t.root=!!r}),new he(/\s*Author:\s(.+)/i,(t,[e])=>{let r=e.split("<"),n=r.pop();!n||!n.includes("@")||(t.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new he(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0,t.summary.insertions=parseInt(r,10)||0,t.summary.deletions=parseInt(n,10)||0}),new he(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0;let i=parseInt(r,10)||0;n==="-"?t.summary.deletions=i:n==="+"&&(t.summary.insertions=i)})]}});function wj(t,e,r){return{commands:["-c","core.abbrev=40","commit",...Nc(t,"-m"),...e,...r],format:"utf-8",parser:gj}}function yj(){return{commit(e,...r){let n=at(arguments),i=t(e)||wj(ti(e),ti(ri(r[0],jd,[])),[...ri(r[1],qc,[]),...wr(arguments,0,!0)]);return this._runTask(i,n)}};function t(e){return!jd(e)&&yr("git.commit: requires the commit message to be supplied as a string/string[]")}}var bj=V({"src/lib/tasks/commit.ts"(){"use strict";vj(),ue(),ut()}});function _j(){return{firstCommit(){return this._runTask(ir(["rev-list","--max-parents=0","HEAD"],!0),at(arguments))}}}var xj=V({"src/lib/tasks/first-commit.ts"(){"use strict";ue(),ut()}});function Sj(t,e){let r=["hash-object",t];return e&&r.push("-w"),ir(r,!0)}var Ej=V({"src/lib/tasks/hash-object.ts"(){"use strict";ut()}});function kj(t,e,r){let n=String(r).trim(),i;if(i=MR.exec(n))return new Bd(t,e,!1,i[1]);if(i=DR.exec(n))return new Bd(t,e,!0,i[1]);let a="",s=n.split(" ");for(;s.length;)if(s.shift()==="in"){a=s.join(" ");break}return new Bd(t,e,/^re/i.test(n),a)}var Bd,MR,DR,Aj=V({"src/lib/responses/InitSummary.ts"(){"use strict";Bd=class{constructor(t,e,r,n){this.bare=t,this.path=e,this.existing=r,this.gitDir=n}},MR=/^Init.+ repository in (.+)$/,DR=/^Rein.+ in (.+)$/}});function Tj(t){return t.includes(Fw)}function Cj(t=!1,e,r){let n=["init",...r];return t&&!Tj(n)&&n.splice(1,0,Fw),{commands:n,format:"utf-8",parser(i){return kj(n.includes("--bare"),e,i)}}}var Fw,Pj=V({"src/lib/tasks/init.ts"(){"use strict";Aj(),Fw="--bare"}});function Ow(t){for(let e=0;e<t.length;e++){let r=Mw.exec(t[e]);if(r)return`--${r[1]}`}return""}function Rj(t){return Mw.test(t)}var Mw,zc=V({"src/lib/args/log-format.ts"(){"use strict";Mw=/^--(stat|numstat|name-only|name-status)(=|$)/}}),LR,Ij=V({"src/lib/responses/DiffSummary.ts"(){"use strict";LR=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function NR(t=""){let e=BR[t];return r=>_r(new LR,e,r,!1)}var iw,fP,dP,hP,BR,HR=V({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";zc(),Ij(),bR(),ue(),iw=[new he(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(t,[e,r,n=""])=>{t.files.push({file:e.trim(),changes:Ue(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new he(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(t,[e,r,n])=>{t.files.push({file:e.trim(),before:Ue(r),after:Ue(n),binary:!0})}),new he(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(t,[e,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);t.changed=Ue(e),t.insertions=Ue(n==null?void 0:n[1]),t.deletions=Ue(i==null?void 0:i[1])})],fP=[new he(/(\d+)\t(\d+)\t(.+)$/,(t,[e,r,n])=>{let i=Ue(e),a=Ue(r);t.changed++,t.insertions+=i,t.deletions+=a,t.files.push({file:n,changes:i+a,insertions:i,deletions:a,binary:!1})}),new he(/-\t-\t(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,after:0,before:0,binary:!0})})],dP=[new he(/(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,changes:0,insertions:0,deletions:0,binary:!1})})],hP=[new he(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(t,[e,r,n,i,a])=>{t.changed++,t.files.push({file:a!=null?a:n,changes:0,insertions:0,deletions:0,binary:!1,status:lw(XU(e)&&e),from:lw(!!a&&n!==a&&n),similarity:Ue(r)})})],BR={"":iw,"--stat":iw,"--numstat":fP,"--name-status":hP,"--name-only":dP}}});function $j(t,e){return e.reduce((r,n,i)=>(r[n]=t[i]||"",r),Object.create({diff:null}))}function UR(t=Nw,e=jR,r=""){let n=NR(r);return function(i){let a=jc(i.trim(),!1,Dw).map(function(s){let o=s.split(Lw),l=$j(o[0].split(t),e);return o.length>1&&o[1].trim()&&(l.diff=n(o[1])),l});return{all:a,latest:a.length&&a[0]||null,total:a.length}}}var Dw,Lw,Nw,jR,GR=V({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";ue(),HR(),zc(),Dw="\xF2\xF2\xF2\xF2\xF2\xF2 ",Lw=" \xF2\xF2",Nw=" \xF2 ",jR=["hash","date","message","refs","author_name","author_email"]}}),qR={};ft(qR,{diffSummaryTask:()=>Fj,validateLogFormatConfig:()=>Qd});function Fj(t){let e=Ow(t),r=["diff"];return e===""&&(e="--stat",r.push("--stat=4096")),r.push(...t),Qd(r)||{commands:r,format:"utf-8",parser:NR(e)}}function Qd(t){let e=t.filter(Rj);if(e.length>1)return yr(`Summary flags are mutually exclusive - pick one of ${e.join(",")}`);if(e.length&&t.includes("-z"))return yr(`Summary flag ${e} parsing is not compatible with null termination option '-z'`)}var Bw=V({"src/lib/tasks/diff.ts"(){"use strict";zc(),HR(),ut()}});function Oj(t,e){let r=[],n=[];return Object.keys(t).forEach(i=>{r.push(i),n.push(String(t[i]))}),[r,n.join(e)]}function Mj(t){return Object.keys(t).reduce((e,r)=>(r in gw||(e[r]=t[r]),e),{})}function zR(t={},e=[]){let r=ri(t.splitter,Vt,Nw),n=Zd(t.format)?t.format:{hash:"%H",date:t.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:t.multiLine?"%B":"%b",author_name:t.mailMap!==!1?"%aN":"%an",author_email:t.mailMap!==!1?"%aE":"%ae"},[i,a]=Oj(n,r),s=[],o=[`--pretty=format:${Dw}${a}${Lw}`,...e],l=t.n||t["max-count"]||t.maxCount;if(l&&o.push(`--max-count=${l}`),t.from||t.to){let c=t.symmetric!==!1?"...":"..";s.push(`${t.from||""}${c}${t.to||""}`)}return Vt(t.file)&&o.push("--follow",SU(t.file)),kw(Mj(t),o),{fields:i,splitter:r,commands:[...o,...s]}}function Dj(t,e,r){let n=UR(t,e,Ow(r));return{commands:["log",...r],format:"utf-8",parser:n}}function Lj(){return{log(...r){let n=at(arguments),i=zR(Aw(arguments),ri(arguments[0],qc)),a=e(...r)||Qd(i.commands)||t(i);return this._runTask(a,n)}};function t(r){return Dj(r.splitter,r.fields,r.commands)}function e(r,n){return Vt(r)&&Vt(n)&&yr("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var gw,VR=V({"src/lib/tasks/log.ts"(){"use strict";zc(),Hc(),GR(),ue(),ut(),Bw(),gw=(t=>(t[t["--pretty"]=0]="--pretty",t[t["max-count"]=1]="max-count",t[t.maxCount=2]="maxCount",t[t.n=3]="n",t[t.file=4]="file",t[t.format=5]="format",t[t.from=6]="from",t[t.to=7]="to",t[t.splitter=8]="splitter",t[t.symmetric=9]="symmetric",t[t.mailMap=10]="mailMap",t[t.multiLine=11]="multiLine",t[t.strictDate=12]="strictDate",t))(gw||{})}}),Hd,WR,Nj=V({"src/lib/responses/MergeSummary.ts"(){"use strict";Hd=class{constructor(t,e=null,r){this.reason=t,this.file=e,this.meta=r}toString(){return`${this.file}:${this.reason}`}},WR=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),vw,YR,Bj=V({"src/lib/responses/PullSummary.ts"(){"use strict";vw=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},YR=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function aw(t){return t.objects=t.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function pP(t){let e=/^\s*(\d+)/.exec(t),r=/delta (\d+)/i.exec(t);return{count:Ue(e&&e[1]||"0"),delta:Ue(r&&r[1]||"0")}}var XR,Hj=V({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";ue(),XR=[new xa(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=aw(t.remoteMessages);Object.assign(i,{[n]:Ue(r)})}),new xa(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=aw(t.remoteMessages);Object.assign(i,{[n]:Ue(r)})}),new xa(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(t,[e,r,n])=>{let i=aw(t.remoteMessages);i.total=pP(e),i.reused=pP(r),i.packReused=Ue(n)})]}});function ZR(t,e){return _r({remoteMessages:new JR},KR,e)}var KR,JR,QR=V({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";ue(),Hj(),KR=[new xa(/^remote:\s*(.+)$/,(t,[e])=>(t.remoteMessages.all.push(e.trim()),!1)),...XR,new xa([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(t,[e])=>{t.remoteMessages.pullRequestUrl=e}),new xa([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(t,[e,r,n])=>{t.remoteMessages.vulnerabilities={count:Ue(e),summary:r,url:n}})],JR=class{constructor(){this.all=[]}}}});function Uj(t,e){let r=_r(new YR,eI,[t,e]);return r.message&&r}var mP,gP,vP,wP,eI,yP,Hw,tI=V({"src/lib/parsers/parse-pull.ts"(){"use strict";Bj(),ue(),QR(),mP=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,gP=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,vP=/^(create|delete) mode \d+ (.+)/,wP=[new he(mP,(t,[e,r,n])=>{t.files.push(e),r&&(t.insertions[e]=r.length),n&&(t.deletions[e]=n.length)}),new he(gP,(t,[e,,r,,n])=>r!==void 0||n!==void 0?(t.summary.changes=+e||0,t.summary.insertions=+r||0,t.summary.deletions=+n||0,!0):!1),new he(vP,(t,[e,r])=>{Re(t.files,r),Re(e==="create"?t.created:t.deleted,r)})],eI=[new he(/^from\s(.+)$/i,(t,[e])=>void(t.remote=e)),new he(/^fatal:\s(.+)$/,(t,[e])=>void(t.message=e)),new he(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(t,[e,r,n,i])=>{t.branch.local=n,t.hash.local=e,t.branch.remote=i,t.hash.remote=r})],yP=(t,e)=>_r(new vw,wP,[t,e]),Hw=(t,e)=>Object.assign(new vw,yP(t,e),ZR(t,e))}}),bP,rI,_P,jj=V({"src/lib/parsers/parse-merge.ts"(){"use strict";Nj(),ue(),tI(),bP=[new he(/^Auto-merging\s+(.+)$/,(t,[e])=>{t.merges.push(e)}),new he(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(t,[e,r])=>{t.conflicts.push(new Hd(e,r))}),new he(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(t,[e,r,n])=>{t.conflicts.push(new Hd(e,r,{deleteRef:n}))}),new he(/^CONFLICT\s+\((.+)\):/,(t,[e])=>{t.conflicts.push(new Hd(e,null))}),new he(/^Automatic merge failed;\s+(.+)$/,(t,[e])=>{t.result=e})],rI=(t,e)=>Object.assign(_P(t,e),Hw(t,e)),_P=t=>_r(new WR,bP,t)}});function xP(t){return t.length?{commands:["merge",...t],format:"utf-8",parser(e,r){let n=rI(e,r);if(n.failed)throw new Uc(n);return n}}:yr("Git.merge requires at least one option")}var Gj=V({"src/lib/tasks/merge.ts"(){"use strict";zo(),jj(),ut()}});function qj(t,e,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(t),a=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!a,alreadyUpdated:a,local:t,remote:e}}var SP,nI,EP,zj=V({"src/lib/parsers/parse-push.ts"(){"use strict";ue(),QR(),SP=[new he(/^Pushing to (.+)$/,(t,[e])=>{t.repo=e}),new he(/^updating local tracking ref '(.+)'/,(t,[e])=>{t.ref={...t.ref||{},local:e}}),new he(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(t,[e,r,n])=>{t.pushed.push(qj(e,r,n))}),new he(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(t,[e,r,n])=>{t.branch={...t.branch||{},local:e,remote:r,remoteName:n}}),new he(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(t,[e,r,n,i])=>{t.update={head:{local:e,remote:r},hash:{from:n,to:i}}})],nI=(t,e)=>{let r=EP(t,e),n=ZR(t,e);return{...r,...n}},EP=(t,e)=>_r({pushed:[]},SP,[t,e])}}),iI={};ft(iI,{pushTagsTask:()=>Vj,pushTask:()=>Uw});function Vj(t={},e){return Re(e,"--tags"),Uw(t,e)}function Uw(t={},e){let r=["push",...e];return t.branch&&r.splice(1,0,t.branch),t.remote&&r.splice(1,0,t.remote),Yd(r,"-v"),Re(r,"--verbose"),Re(r,"--porcelain"),{commands:r,format:"utf-8",parser:nI}}var aI=V({"src/lib/tasks/push.ts"(){"use strict";zj(),ue()}});function Wj(){return{showBuffer(){let t=["show",...wr(arguments,1)];return t.includes("--binary")||t.splice(1,0,"--binary"),this._runTask(uR(t),at(arguments))},show(){let t=["show",...wr(arguments,1)];return this._runTask(ir(t),at(arguments))}}}var Yj=V({"src/lib/tasks/show.ts"(){"use strict";ue(),ut()}}),kP,sI,Xj=V({"src/lib/responses/FileStatusSummary.ts"(){"use strict";kP=/^(.+)\0(.+)$/,sI=class{constructor(t,e,r){if(this.path=t,this.index=e,this.working_dir=r,e==="R"||r==="R"){let n=kP.exec(t)||[null,t,t];this.from=n[2]||"",this.path=n[1]||""}}}}});function AP(t){let[e,r]=t.split(qo);return{from:r||e,to:e}}function Or(t,e,r){return[`${t}${e}`,r]}function sw(t,...e){return e.map(r=>Or(t,r,(n,i)=>Re(n.conflicted,i)))}function Zj(t,e){let r=e.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,a,s){let o=`${i}${a}`,l=oI.get(o);l&&l(t,s),o!=="##"&&o!=="!!"&&t.files.push(new sI(s,i,a))}}var TP,oI,lI,Kj=V({"src/lib/responses/StatusSummary.ts"(){"use strict";ue(),Xj(),TP=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},oI=new Map([Or(" ","A",(t,e)=>Re(t.created,e)),Or(" ","D",(t,e)=>Re(t.deleted,e)),Or(" ","M",(t,e)=>Re(t.modified,e)),Or("A"," ",(t,e)=>Re(t.created,e)&&Re(t.staged,e)),Or("A","M",(t,e)=>Re(t.created,e)&&Re(t.staged,e)&&Re(t.modified,e)),Or("D"," ",(t,e)=>Re(t.deleted,e)&&Re(t.staged,e)),Or("M"," ",(t,e)=>Re(t.modified,e)&&Re(t.staged,e)),Or("M","M",(t,e)=>Re(t.modified,e)&&Re(t.staged,e)),Or("R"," ",(t,e)=>{Re(t.renamed,AP(e))}),Or("R","M",(t,e)=>{let r=AP(e);Re(t.renamed,r),Re(t.modified,r.to)}),Or("!","!",(t,e)=>{Re(t.ignored=t.ignored||[],e)}),Or("?","?",(t,e)=>Re(t.not_added,e)),...sw("A","A","U"),...sw("D","D","U"),...sw("U","A","D","U"),["##",(t,e)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,a=/\.{3}(\S*)/,s=/\son\s([\S]+)$/,o;o=r.exec(e),t.ahead=o&&+o[1]||0,o=n.exec(e),t.behind=o&&+o[1]||0,o=i.exec(e),t.current=o&&o[1],o=a.exec(e),t.tracking=o&&o[1],o=s.exec(e),t.current=o&&o[1]||t.current,t.detached=/\(no branch\)/.test(e)}]]),lI=function(t){let e=t.split(qo),r=new TP;for(let n=0,i=e.length;n<i;){let a=e[n++].trim();a&&(a.charAt(0)==="R"&&(a+=qo+(e[n++]||"")),Zj(r,a))}return r}}});function Jj(t){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...t.filter(r=>!cI.includes(r))],parser(r){return lI(r)}}}var cI,Qj=V({"src/lib/tasks/status.ts"(){"use strict";Kj(),cI=["--null","-z"]}});function zd(t=0,e=0,r=0,n="",i=!0){return Object.defineProperty({major:t,minor:e,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function eG(){return zd(0,0,0,"",!1)}function tG(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:rG,onError(t,e,r,n){if(t.exitCode===-2)return r(Buffer.from(jw));n(e)}})}}}function rG(t){return t===jw?eG():_r(zd(0,0,0,t),uI,t)}var jw,uI,nG=V({"src/lib/tasks/version.ts"(){"use strict";ue(),jw="installed=false",uI=[new he(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(t,[e,r,n,i=""])=>{Object.assign(t,zd(Ue(e),Ue(r),Ue(n),i))}),new he(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(t,[e,r,n,i=""])=>{Object.assign(t,zd(Ue(e),Ue(r),n,i))})]}}),fI={};ft(fI,{SimpleGitApi:()=>ww});var ww,iG=V({"src/lib/simple-git-api.ts"(){"use strict";cj(),uj(),dj(),mj(),bj(),wR(),xj(),SR(),Ej(),Pj(),VR(),Gj(),aI(),Yj(),Qj(),ut(),nG(),ue(),ww=class{constructor(t){this._executor=t}_runTask(t,e){let r=this._executor.chain(),n=r.push(t);return e&&oj(t,n,e),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(t){return this._runTask(ir(["add",...ti(t)]),at(arguments))}cwd(t){let e=at(arguments);return typeof t=="string"?this._runTask(uP(t,this._executor),e):typeof(t==null?void 0:t.path)=="string"?this._runTask(uP(t.path,t.root&&this._executor||void 0),e):this._runTask(yr("Git.cwd: workingDirectory must be supplied as a string"),e)}hashObject(t,e){return this._runTask(Sj(t,e===!0),at(arguments))}init(t){return this._runTask(Cj(t===!0,this._executor.cwd,wr(arguments)),at(arguments))}merge(){return this._runTask(xP(wr(arguments)),at(arguments))}mergeFromTo(t,e){return Vt(t)&&Vt(e)?this._runTask(xP([t,e,...wr(arguments)]),at(arguments,!1)):this._runTask(yr("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=Uw({remote:ri(arguments[0],Vt),branch:ri(arguments[1],Vt)},wr(arguments));return this._runTask(t,at(arguments))}stash(){return this._runTask(ir(["stash",...wr(arguments)]),at(arguments))}status(){return this._runTask(Jj(wr(arguments)),at(arguments))}},Object.assign(ww.prototype,fj(),yj(),YU(),pj(),_j(),JU(),Lj(),Wj(),tG())}}),dI={};ft(dI,{Scheduler:()=>pI});var CP,pI,aG=V({"src/lib/runners/scheduler.ts"(){"use strict";ue(),CR(),CP=(()=>{let t=0;return()=>{t++;let{promise:e,done:r}=(0,hI.createDeferred)();return{promise:e,done:r,id:t}}})(),pI=class{constructor(t=2){this.concurrency=t,this.logger=$w("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=Re(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),Yd(this.running,t),this.schedule()})}next(){let{promise:t,id:e}=Re(this.pending,CP());return this.logger("Scheduling id=%s",e),this.schedule(),t}}}}),mI={};ft(mI,{applyPatchTask:()=>sG});function sG(t,e){return ir(["apply",...e,...t])}var oG=V({"src/lib/tasks/apply-patch.ts"(){"use strict";ut()}});function lG(t,e){return{branch:t,hash:e,success:!0}}function cG(t){return{branch:t,hash:null,success:!1}}var gI,uG=V({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";gI=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function vI(t,e){return e===1&&yw.test(t)}var PP,yw,RP,eh,fG=V({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";uG(),ue(),PP=/(\S+)\s+\(\S+\s([^)]+)\)/,yw=/^error[^']+'([^']+)'/m,RP=[new he(PP,(t,[e,r])=>{let n=lG(e,r);t.all.push(n),t.branches[e]=n}),new he(yw,(t,[e])=>{let r=cG(e);t.errors.push(r),t.all.push(r),t.branches[e]=r})],eh=(t,e)=>_r(new gI,RP,[t,e])}}),wI,dG=V({"src/lib/responses/BranchSummary.ts"(){"use strict";wI=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,e,r,n,i){t==="*"&&(this.detached=e,this.current=r),this.all.push(r),this.branches[r]={current:t==="*",linkedWorkTree:t==="+",name:r,commit:n,label:i}}}}});function IP(t){return t?t.charAt(0):""}function yI(t){return _r(new wI,bI,t)}var bI,hG=V({"src/lib/parsers/parse-branch.ts"(){"use strict";dG(),ue(),bI=[new he(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(t,[e,r,n,i])=>{t.push(IP(e),!0,r,n,i)}),new he(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(t,[e,r,n,i])=>{t.push(IP(e),!1,r,n,i)})]}}),_I={};ft(_I,{branchLocalTask:()=>mG,branchTask:()=>pG,containsDeleteBranchCommand:()=>xI,deleteBranchTask:()=>vG,deleteBranchesTask:()=>gG});function xI(t){let e=["-d","-D","--delete"];return t.some(r=>e.includes(r))}function pG(t){let e=xI(t),r=["branch",...t];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return e?eh(n,i).all[0]:yI(n)}}}function mG(){return{format:"utf-8",commands:["branch","-v"],parser:yI}}function gG(t,e=!1){return{format:"utf-8",commands:["branch","-v",e?"-D":"-d",...t],parser(r,n){return eh(r,n)},onError({exitCode:r,stdOut:n},i,a,s){if(!vI(String(i),r))return s(i);a(n)}}}function vG(t,e=!1){let r={format:"utf-8",commands:["branch","-v",e?"-D":"-d",t],parser(n,i){return eh(n,i).branches[t]},onError({exitCode:n,stdErr:i,stdOut:a},s,o,l){if(!vI(String(s),n))return l(s);throw new Uc(r.parser(Bc(a),Bc(i)),String(s))}};return r}var wG=V({"src/lib/tasks/branch.ts"(){"use strict";zo(),fG(),hG(),ue()}}),SI,yG=V({"src/lib/responses/CheckIgnore.ts"(){"use strict";SI=t=>t.split(/\n/g).map(e=>e.trim()).filter(e=>!!e)}}),EI={};ft(EI,{checkIgnoreTask:()=>bG});function bG(t){return{commands:["check-ignore",...t],format:"utf-8",parser:SI}}var _G=V({"src/lib/tasks/check-ignore.ts"(){"use strict";yG()}}),kI={};ft(kI,{cloneMirrorTask:()=>SG,cloneTask:()=>AI});function xG(t){return/^--upload-pack(=|$)/.test(t)}function AI(t,e,r){let n=["clone",...r];return Vt(t)&&n.push(t),Vt(e)&&n.push(e),n.find(xG)?yr("git.fetch: potential exploit argument blocked."):ir(n)}function SG(t,e,r){return Re(r,"--mirror"),AI(t,e,r)}var EG=V({"src/lib/tasks/clone.ts"(){"use strict";ut(),ue()}});function kG(t,e){return _r({raw:t,remote:null,branches:[],tags:[],updated:[],deleted:[]},TI,[t,e])}var TI,AG=V({"src/lib/parsers/parse-fetch.ts"(){"use strict";ue(),TI=[new he(/From (.+)$/,(t,[e])=>{t.remote=e}),new he(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.branches.push({name:e,tracking:r})}),new he(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.tags.push({name:e,tracking:r})}),new he(/- \[deleted]\s+\S+\s*-> (.+)$/,(t,[e])=>{t.deleted.push({tracking:e})}),new he(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(t,[e,r,n,i])=>{t.updated.push({name:n,tracking:i,to:r,from:e})})]}}),CI={};ft(CI,{fetchTask:()=>CG});function TG(t){return/^--upload-pack(=|$)/.test(t)}function CG(t,e,r){let n=["fetch",...r];return t&&e&&n.push(t,e),n.find(TG)?yr("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:kG}}var PG=V({"src/lib/tasks/fetch.ts"(){"use strict";AG(),ut()}});function RG(t){return _r({moves:[]},PI,t)}var PI,IG=V({"src/lib/parsers/parse-move.ts"(){"use strict";ue(),PI=[new he(/^Renaming (.+) to (.+)$/,(t,[e,r])=>{t.moves.push({from:e,to:r})})]}}),RI={};ft(RI,{moveTask:()=>$G});function $G(t,e){return{commands:["mv","-v",...ti(t),e],format:"utf-8",parser:RG}}var FG=V({"src/lib/tasks/move.ts"(){"use strict";IG(),ue()}}),II={};ft(II,{pullTask:()=>OG});function OG(t,e,r){let n=["pull",...r];return t&&e&&n.splice(1,0,t,e),{commands:n,format:"utf-8",parser(i,a){return Hw(i,a)},onError(i,a,s,o){let l=Uj(Bc(i.stdOut),Bc(i.stdErr));if(l)return o(new Uc(l));o(a)}}}var MG=V({"src/lib/tasks/pull.ts"(){"use strict";zo(),tI(),ue()}});function DG(t){let e={};return $I(t,([r])=>e[r]={name:r}),Object.values(e)}function LG(t){let e={};return $I(t,([r,n,i])=>{e.hasOwnProperty(r)||(e[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(e[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(e)}function $I(t,e){xw(t,r=>e(r.split(/\s+/)))}var NG=V({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";ue()}}),FI={};ft(FI,{addRemoteTask:()=>BG,getRemotesTask:()=>HG,listRemotesTask:()=>UG,remoteTask:()=>jG,removeRemoteTask:()=>GG});function BG(t,e,r){return ir(["remote","add",...r,t,e])}function HG(t){let e=["remote"];return t&&e.push("-v"),{commands:e,format:"utf-8",parser:t?LG:DG}}function UG(t){let e=[...t];return e[0]!=="ls-remote"&&e.unshift("ls-remote"),ir(e)}function jG(t){let e=[...t];return e[0]!=="remote"&&e.unshift("remote"),ir(e)}function GG(t){return ir(["remote","remove",t])}var qG=V({"src/lib/tasks/remote.ts"(){"use strict";NG(),ut()}}),OI={};ft(OI,{stashListTask:()=>zG});function zG(t={},e){let r=zR(t),n=["stash","list",...r.commands,...e],i=UR(r.splitter,r.fields,Ow(n));return Qd(n)||{commands:n,format:"utf-8",parser:i}}var VG=V({"src/lib/tasks/stash-list.ts"(){"use strict";zc(),GR(),Bw(),VR()}}),MI={};ft(MI,{addSubModuleTask:()=>WG,initSubModuleTask:()=>YG,subModuleTask:()=>th,updateSubModuleTask:()=>XG});function WG(t,e){return th(["add",t,e])}function YG(t){return th(["init",...t])}function th(t){let e=[...t];return e[0]!=="submodule"&&e.unshift("submodule"),ir(e)}function XG(t){return th(["update",...t])}var ZG=V({"src/lib/tasks/sub-module.ts"(){"use strict";ut()}});function KG(t,e){let r=isNaN(t),n=isNaN(e);return r!==n?r?1:-1:r?DI(t,e):0}function DI(t,e){return t===e?0:t>e?1:-1}function JG(t){return t.trim()}function Dd(t){return typeof t=="string"&&parseInt(t.replace(/^\D+/g,""),10)||0}var $P,LI,QG=V({"src/lib/responses/TagList.ts"(){"use strict";$P=class{constructor(t,e){this.all=t,this.latest=e}},LI=function(t,e=!1){let r=t.split(`
`).map(JG).filter(Boolean);e||r.sort(function(i,a){let s=i.split("."),o=a.split(".");if(s.length===1||o.length===1)return KG(Dd(s[0]),Dd(o[0]));for(let l=0,c=Math.max(s.length,o.length);l<c;l++){let u=DI(Dd(s[l]),Dd(o[l]));if(u)return u}return 0});let n=e?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new $P(r,n)}}}),NI={};ft(NI,{addAnnotatedTagTask:()=>rq,addTagTask:()=>tq,tagListTask:()=>eq});function eq(t=[]){let e=t.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...t],parser(r){return LI(r,e)}}}function tq(t){return{format:"utf-8",commands:["tag",t],parser(){return{name:t}}}}function rq(t,e){return{format:"utf-8",commands:["tag","-a","-m",e,t],parser(){return{name:t}}}}var nq=V({"src/lib/tasks/tag.ts"(){"use strict";QG()}}),iq=_U({"src/git.js"(t,e){"use strict";var{GitExecutor:r}=(sj(),it(IR)),{SimpleGitApi:n}=(iG(),it(fI)),{Scheduler:i}=(aG(),it(dI)),{configurationErrorTask:a}=(ut(),it(hw)),{asArray:s,filterArray:o,filterPrimitives:l,filterString:c,filterStringOrStringArray:u,filterType:f,getTrailingOptions:d,trailingFunctionArgument:h,trailingOptionsArgument:m}=(ue(),it(eR)),{applyPatchTask:g}=(oG(),it(mI)),{branchTask:v,branchLocalTask:w,deleteBranchesTask:b,deleteBranchTask:S}=(wG(),it(_I)),{checkIgnoreTask:E}=(_G(),it(EI)),{checkIsRepoTask:k}=(iR(),it(tR)),{cloneTask:A,cloneMirrorTask:y}=(EG(),it(kI)),{cleanWithOptionsTask:_,isCleanOptionsArray:x}=(mR(),it(hR)),{diffSummaryTask:T}=(Bw(),it(qR)),{fetchTask:P}=(PG(),it(CI)),{moveTask:F}=(FG(),it(RI)),{pullTask:N}=(MG(),it(II)),{pushTagsTask:M}=(aI(),it(iI)),{addRemoteTask:re,getRemotesTask:ye,listRemotesTask:me,remoteTask:fe,removeRemoteTask:Ge}=(qG(),it(FI)),{getResetMode:oe,resetTask:B}=(TR(),it(ER)),{stashListTask:Z}=(VG(),it(OI)),{addSubModuleTask:H,initSubModuleTask:Oe,subModuleTask:cr,updateSubModuleTask:Gt}=(ZG(),it(MI)),{addAnnotatedTagTask:Y,addTagTask:Ie,tagListTask:Me}=(nq(),it(NI)),{straightThroughBufferTask:Rt,straightThroughStringTask:De}=(ut(),it(hw));function G(L,X){this._plugins=X,this._executor=new r(L.baseDir,new i(L.maxConcurrentProcesses),X),this._trimmed=L.trimmed}(G.prototype=Object.create(n.prototype)).constructor=G,G.prototype.customBinary=function(L){return this._plugins.reconfigure("binary",L),this},G.prototype.env=function(L,X){return arguments.length===1&&typeof L=="object"?this._executor.env=L:(this._executor.env=this._executor.env||{})[L]=X,this},G.prototype.stashList=function(L){return this._runTask(Z(m(arguments)||{},o(L)&&L||[]),h(arguments))};function Je(L,X,Ee,We){return typeof Ee!="string"?a(`git.${L}() requires a string 'repoPath'`):X(Ee,f(We,c),d(arguments))}G.prototype.clone=function(){return this._runTask(Je("clone",A,...arguments),h(arguments))},G.prototype.mirror=function(){return this._runTask(Je("mirror",y,...arguments),h(arguments))},G.prototype.mv=function(L,X){return this._runTask(F(L,X),h(arguments))},G.prototype.checkoutLatestTag=function(L){var X=this;return this.pull(function(){X.tags(function(Ee,We){X.checkout(We.latest,L)})})},G.prototype.pull=function(L,X,Ee,We){return this._runTask(N(f(L,c),f(X,c),d(arguments)),h(arguments))},G.prototype.fetch=function(L,X){return this._runTask(P(f(L,c),f(X,c),d(arguments)),h(arguments))},G.prototype.silent=function(L){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},G.prototype.tags=function(L,X){return this._runTask(Me(d(arguments)),h(arguments))},G.prototype.rebase=function(){return this._runTask(De(["rebase",...d(arguments)]),h(arguments))},G.prototype.reset=function(L){return this._runTask(B(oe(L),d(arguments)),h(arguments))},G.prototype.revert=function(L){let X=h(arguments);return typeof L!="string"?this._runTask(a("Commit must be a string"),X):this._runTask(De(["revert",...d(arguments,0,!0),L]),X)},G.prototype.addTag=function(L){let X=typeof L=="string"?Ie(L):a("Git.addTag requires a tag name");return this._runTask(X,h(arguments))},G.prototype.addAnnotatedTag=function(L,X){return this._runTask(Y(L,X),h(arguments))},G.prototype.deleteLocalBranch=function(L,X,Ee){return this._runTask(S(L,typeof X=="boolean"?X:!1),h(arguments))},G.prototype.deleteLocalBranches=function(L,X,Ee){return this._runTask(b(L,typeof X=="boolean"?X:!1),h(arguments))},G.prototype.branch=function(L,X){return this._runTask(v(d(arguments)),h(arguments))},G.prototype.branchLocal=function(L){return this._runTask(w(),h(arguments))},G.prototype.raw=function(L){let X=!Array.isArray(L),Ee=[].slice.call(X?arguments:L,0);for(let It=0;It<Ee.length&&X;It++)if(!l(Ee[It])){Ee.splice(It,Ee.length-It);break}Ee.push(...d(arguments,0,!0));var We=h(arguments);return Ee.length?this._runTask(De(Ee,this._trimmed),We):this._runTask(a("Raw: must supply one or more command to execute"),We)},G.prototype.submoduleAdd=function(L,X,Ee){return this._runTask(H(L,X),h(arguments))},G.prototype.submoduleUpdate=function(L,X){return this._runTask(Gt(d(arguments,!0)),h(arguments))},G.prototype.submoduleInit=function(L,X){return this._runTask(Oe(d(arguments,!0)),h(arguments))},G.prototype.subModule=function(L,X){return this._runTask(cr(d(arguments)),h(arguments))},G.prototype.listRemote=function(){return this._runTask(me(d(arguments)),h(arguments))},G.prototype.addRemote=function(L,X,Ee){return this._runTask(re(L,X,d(arguments)),h(arguments))},G.prototype.removeRemote=function(L,X){return this._runTask(Ge(L),h(arguments))},G.prototype.getRemotes=function(L,X){return this._runTask(ye(L===!0),h(arguments))},G.prototype.remote=function(L,X){return this._runTask(fe(d(arguments)),h(arguments))},G.prototype.tag=function(L,X){let Ee=d(arguments);return Ee[0]!=="tag"&&Ee.unshift("tag"),this._runTask(De(Ee),h(arguments))},G.prototype.updateServerInfo=function(L){return this._runTask(De(["update-server-info"]),h(arguments))},G.prototype.pushTags=function(L,X){let Ee=M({remote:f(L,c)},d(arguments));return this._runTask(Ee,h(arguments))},G.prototype.rm=function(L){return this._runTask(De(["rm","-f",...s(L)]),h(arguments))},G.prototype.rmKeepLocal=function(L){return this._runTask(De(["rm","--cached",...s(L)]),h(arguments))},G.prototype.catFile=function(L,X){return this._catFile("utf-8",arguments)},G.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},G.prototype._catFile=function(L,X){var Ee=h(X),We=["cat-file"],It=X[0];if(typeof It=="string")return this._runTask(a("Git.catFile: options must be supplied as an array of strings"),Ee);Array.isArray(It)&&We.push.apply(We,It);let kl=L==="buffer"?Rt(We):De(We);return this._runTask(kl,Ee)},G.prototype.diff=function(L,X){let Ee=c(L)?a("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):De(["diff",...d(arguments)]);return this._runTask(Ee,h(arguments))},G.prototype.diffSummary=function(){return this._runTask(T(d(arguments,1)),h(arguments))},G.prototype.applyPatch=function(L){let X=u(L)?g(s(L),d([].slice.call(arguments,1))):a("git.applyPatch requires one or more string patches as the first argument");return this._runTask(X,h(arguments))},G.prototype.revparse=function(){let L=["rev-parse",...d(arguments,!0)];return this._runTask(De(L,!0),h(arguments))},G.prototype.clean=function(L,X,Ee){let We=x(L),It=We&&L.join("")||f(L,c)||"",kl=d([].slice.call(arguments,We?1:0));return this._runTask(_(It,kl),h(arguments))},G.prototype.exec=function(L){let X={commands:[],format:"utf-8",parser(){typeof L=="function"&&L()}};return this._runTask(X)},G.prototype.clearQueue=function(){return this},G.prototype.checkIgnore=function(L,X){return this._runTask(E(s(f(L,u,[]))),h(arguments))},G.prototype.checkIsRepo=function(L,X){return this._runTask(k(f(L,c)),h(arguments))},e.exports=G}});Hc();Sa();var aq=class extends br{constructor(t,e){super(void 0,e),this.config=t}};Sa();Sa();var Ii=class extends br{constructor(t,e,r){super(t,r),this.task=t,this.plugin=e,Object.setPrototypeOf(this,new.target.prototype)}};zo();NP();iR();mR();wR();bR();SR();TR();function sq(t){return t?[{type:"spawn.before",action(n,i){t.aborted&&i.kill(new Ii(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function a(){i.kill(new Ii(void 0,"abort","Abort signal received"))}t.addEventListener("abort",a),i.spawned.on("close",()=>t.removeEventListener("abort",a))}}]:void 0}function oq(t){return typeof t=="string"&&t.trim().toLowerCase()==="-c"}function lq(t,e){if(oq(t)&&/^\s*protocol(.[a-z]+)?.allow/.test(e))throw new Ii(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function cq(t,e){if(/^\s*--(upload|receive)-pack/.test(t))throw new Ii(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(e==="clone"&&/^\s*-u\b/.test(t))throw new Ii(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(e==="push"&&/^\s*--exec\b/.test(t))throw new Ii(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function uq({allowUnsafeProtocolOverride:t=!1,allowUnsafePack:e=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,a)=>{let s=a<r.length?r[a+1]:"";t||lq(i,s),e||cq(i,n.method)}),r}}}ue();function fq(t){let e=Nc(t,"-c");return{type:"spawn.args",action(r){return[...e,...r]}}}ue();var FP=(0,Go.deferred)().promise;function dq({onClose:t=!0,onExit:e=50}={}){function r(){let i=-1,a={close:(0,Go.deferred)(),closeTimeout:(0,Go.deferred)(),exit:(0,Go.deferred)(),exitTimeout:(0,Go.deferred)()},s=Promise.race([t===!1?FP:a.closeTimeout.promise,e===!1?FP:a.exitTimeout.promise]);return n(t,a.close,a.closeTimeout),n(e,a.exit,a.exitTimeout),{close(o){i=o,a.close.done()},exit(o){i=o,a.exit.done()},get exitCode(){return i},result:s}}function n(i,a,s){i!==!1&&(i===!0?a.promise:a.promise.then(()=>ow(i))).then(s.done)}return{type:"spawn.after",async action(i,{spawned:a,close:s}){var u,f;let o=r(),l=!0,c=()=>void(l=!1);(u=a.stdout)==null||u.on("data",c),(f=a.stderr)==null||f.on("data",c),a.on("error",c),a.on("close",d=>o.close(d)),a.on("exit",d=>o.exit(d));try{await o.result,l&&await ow(50),s(o.exitCode)}catch(d){s(o.exitCode,d)}}}}ue();var hq="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",OP="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function pq(t){return!t||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(t)}function MP(t,e){if(t.length<1||t.length>2)throw new Ii(void 0,"binary",hq);if(t.some(pq))if(e)console.warn(OP);else throw new Ii(void 0,"binary",OP);let[n,i]=t;return{binary:n,prefix:i}}function mq(t,e=["git"],r=!1){let n=MP(ti(e),r);t.on("binary",i=>{n=MP(ti(i),r)}),t.append("spawn.binary",()=>n.binary),t.append("spawn.args",i=>n.prefix?[n.prefix,...i]:i)}Sa();function gq(t){return!!(t.exitCode&&t.stdErr.length)}function vq(t){return Buffer.concat([...t.stdOut,...t.stdErr])}function wq(t=!1,e=gq,r=vq){return(n,i)=>!t&&n||!e(i)?n:r(i)}function DP(t){return{type:"task.error",action(e,r){let n=t(e.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new br(void 0,n.toString("utf-8"))}:{error:n}}}}ue();var yq=class{constructor(){this.plugins=new Set,this.events=new BI.EventEmitter}on(t,e){this.events.on(t,e)}reconfigure(t,e){this.events.emit(t,e)}append(t,e){let r=Re(this.plugins,{type:t,action:e});return()=>this.plugins.delete(r)}add(t){let e=[];return ti(t).forEach(r=>r&&this.plugins.add(Re(e,r))),()=>{e.forEach(r=>this.plugins.delete(r))}}exec(t,e,r){let n=e,i=Object.freeze(Object.create(r));for(let a of this.plugins)a.type===t&&(n=a.action(n,i));return n}};ue();function bq(t){let e="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(a,s){return r.includes(s.method)?qP(a,e):a}},{type:"spawn.after",action(a,s){var o;s.commands.includes(e)&&((o=s.spawned.stderr)==null||o.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));c&&t({method:s.method,stage:_q(c[1]),progress:Ue(c[2]),processed:Ue(c[3]),total:Ue(c[4])})}))}}]}function _q(t){return String(t.toLowerCase().split(" ",1))||"unknown"}ue();function xq(t){let e=WP(t,["uid","gid"]);return{type:"spawn.options",action(r){return{...e,...r}}}}function Sq({block:t,stdErr:e=!0,stdOut:r=!0}){if(t>0)return{type:"spawn.after",action(n,i){var c,u;let a;function s(){a&&clearTimeout(a),a=setTimeout(l,t)}function o(){var f,d;(f=i.spawned.stdout)==null||f.off("data",s),(d=i.spawned.stderr)==null||d.off("data",s),i.spawned.off("exit",o),i.spawned.off("close",o),a&&clearTimeout(a)}function l(){o(),i.kill(new Ii(void 0,"timeout","block timeout reached"))}r&&((c=i.spawned.stdout)==null||c.on("data",s)),e&&((u=i.spawned.stderr)==null||u.on("data",s)),i.spawned.on("exit",o),i.spawned.on("close",o),s()}}}Hc();function Eq(){return{type:"spawn.args",action(t){let e=[],r;function n(i){(r=r||[]).push(...i)}for(let i=0;i<t.length;i++){let a=t[i];if(Ud(a)){n(sP(a));continue}if(a==="--"){n(t.slice(i+1).flatMap(s=>Ud(s)&&sP(s)||s));break}e.push(a)}return r?[...e,"--",...r.map(String)]:e}}}ue();var kq=iq();function Aq(t,e){var i;let r=new yq,n=JP(t&&(typeof t=="string"?{baseDir:t}:t)||{},e);if(!Sw(n.baseDir))throw new aq(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(fq(n.config)),r.add(uq(n.unsafe)),r.add(Eq()),r.add(dq(n.completion)),n.abort&&r.add(sq(n.abort)),n.progress&&r.add(bq(n.progress)),n.timeout&&r.add(Sq(n.timeout)),n.spawnOptions&&r.add(xq(n.spawnOptions)),r.add(DP(wq(!0))),n.errors&&r.add(DP(n.errors)),mq(r,n.binary,(i=n.unsafe)==null?void 0:i.allowUnsafeCustomBinary),new kq(n,r)}zo();var HI=Aq;var _e=class extends No{constructor(r){super(r);this.useDefaultWindowsGitPath=!1}async setGitInstance(r=!1){var n;if(await this.isGitInstalled()){let i=this.app.vault.adapter,a=i.getBasePath(),s=a;this.plugin.settings.basePath&&(await i.exists((0,$i.normalizePath)(this.plugin.settings.basePath))?s=He.join(a,this.plugin.settings.basePath):r||new $i.Notice("ObsidianGit: Base path does not exist")),this.absoluteRepoPath=s,this.git=HI({baseDir:s,binary:this.plugin.localStorage.getGitPath()||(this.useDefaultWindowsGitPath?ed:void 0),config:["core.quotepath=off"],unsafe:{allowUnsafeCustomBinary:!0}});let o=this.plugin.localStorage.getPATHPaths(),l=this.plugin.localStorage.getEnvVars(),c=this.plugin.settings.gitDir;if(o.length>0){let v=process.env.PATH+":"+o.join(":");process.env.PATH=v}c&&(process.env.GIT_DIR=c);for(let v of l){let[w,b]=v.split("=");process.env[w]=b}let u="simple-git",f=",",h=((n=localStorage.debug)!=null?n:"").split(f);if(!h.includes(u)&&!h.includes(`-${u}`)&&(h.push(u),GI.default.enable(h.join(f))),await this.git.checkIsRepo()){let v=await this.git.revparse("--show-cdup"),w=(0,Vc.resolve)(s+Vc.sep+v);this.absoluteRepoPath=w,await this.git.cwd(w)}let m=He.join(a,this.app.vault.configDir,"plugins","obsidian-git"),g=He.join(m,rs);process.env.SSH_ASKPASS==null&&(process.env.SSH_ASKPASS=g),process.env.OBSIDIAN_GIT_CREDENTIALS_INPUT=He.join(m,td),process.env.SSH_ASKPASS==g&&this.askpass().catch(v=>this.plugin.displayError(v))}}getRelativeVaultPath(r){let i=this.app.vault.adapter.getBasePath(),a=He.join(this.absoluteRepoPath,r),s=He.relative(i,a);return $i.Platform.isWin&&(s=s.replace(/\\/g,"/")),s}getRelativeRepoPath(r,n=!0){if(n){let a=this.plugin.app.vault.adapter.getBasePath(),s=this.absoluteRepoPath,o=He.join(a,r),l=He.relative(s,o);return $i.Platform.isWin&&(l=l.replace(/\\/g,"/")),l}return r}get absPluginConfigPath(){let n=this.app.vault.adapter.getBasePath();return He.join(n,this.app.vault.configDir,"plugins","obsidian-git")}get relPluginConfigPath(){return He.join(this.app.vault.configDir,"plugins","obsidian-git")}async askpass(){let r=this.app.vault.adapter,n=this.app.vault.configDir+"/plugins/obsidian-git/";await this.addAskPassScriptToExclude(),await Mr.writeFile(He.join(this.absPluginConfigPath,rs),eA),await Mr.chmod(He.join(this.absPluginConfigPath,rs),493),this.watchAbortController=new AbortController;let{signal:i}=this.watchAbortController;try{let a=Mr.watch(this.absPluginConfigPath,{signal:i});for await(let s of a){if(s.filename!=td)continue;let o=n+td;if(!await r.exists(o))continue;let l=await r.read(o),c;l.length>60&&(c=new $i.Notice(l,999999));let u=await new ze(this.plugin,{allowEmpty:!0,obscure:!0,placeholder:l.length>60?"Enter a response to the message.":l}).openAndGetResult();c==null||c.hide(),await r.exists(o)&&await r.write(`${o}.response`,u!=null?u:"")}}catch(a){this.plugin.displayError(a),await Mr.rm(He.join(this.absPluginConfigPath,rs),{force:!0}),await Mr.rm(He.join(this.absPluginConfigPath,`${rs}.response`),{force:!0}),await new Promise(s=>setTimeout(s,5e3)),this.plugin.log("Retry watch for ask pass"),await this.askpass()}}async addAskPassScriptToExclude(){try{let r=await this.git.revparse(["--path-format=absolute","--git-path","info/exclude"]),n=He.join(this.app.vault.configDir,"plugins","obsidian-git",rs),i=this.getRelativeRepoPath(n,!0);(await Mr.readFile(r,"utf-8")).split(`
`).some(l=>l.contains(i))||await Mr.appendFile(r,i+`
`)}catch(r){console.error("Error while adding askpass script to exclude file:",r)}}unload(){var r;(r=this.watchAbortController)==null||r.abort()}async status(r){let n=r==null?void 0:r.path;this.plugin.setPluginState({gitAction:1});let i=await this.git.status(n!=null?["--",n]:[]);this.plugin.setPluginState({gitAction:0});let a=i.files.map(s=>{let o=this.formatPath(s);return{path:o.path,from:o.from,index:s.index==="?"?"U":s.index,workingDir:s.working_dir==="?"?"U":s.working_dir,vaultPath:this.getRelativeVaultPath(o.path)}});return{all:a,changed:a.filter(s=>s.workingDir!==" "),staged:a.filter(s=>s.index!==" "&&s.index!="U"),conflicted:i.conflicted.map(s=>this.formatPath({path:s}).path)}}async submoduleAwareHeadRevisonInContainingDirectory(r){let n=this.getRelativeRepoPath(r),a=["-C",He.dirname(n),"rev-parse","HEAD"],s=this.git.raw(a);return s.catch(o=>console.warn("obsidian-git: rev-parse error:",o)),(await s).trim()}async getSubmodulePaths(){return new Promise(r=>{this.git.outputHandler((n,i,a,s)=>{if(!(s.contains("submodule")&&s.contains("foreach")))return;let o="",l=this.app.vault.adapter.getBasePath()+(this.plugin.settings.basePath?"/"+this.plugin.settings.basePath:"");i.on("data",c=>{o+=c.toString("utf8")}),i.on("end",()=>{let u=o.split(`
`).map(f=>{let d=f.match(/'([^']*)'/);if(d!=null)return l+"/"+d[1]+Vc.sep}).filter(f=>!!f);u.reverse(),r(u)})}),this.git.subModule(["foreach","--recursive",""]).then(()=>{this.git.outputHandler(()=>{})},n=>this.plugin.displayError(n))})}formatPath(r){function n(i){if(i!=null)return i.startsWith('"')&&i.endsWith('"')?i.substring(1,i.length-1):i}return r.from!=null?{from:n(r.from),path:n(r.path)}:{path:n(r.path)}}async blame(r,n,i){if(r=this.getRelativeRepoPath(r),!await this.isTracked(r))return"untracked";let a=await this.getSubmoduleOfFile(r),s=a?["-C",a.submodule]:[],o=a?a.relativeFilepath:r;s.push("blame","--porcelain"),i&&s.push("-w");let l=`-C${Qf}`;switch(n){case"inactive":break;case"same-commit":s.push("-C",l);break;case"all-commits":s.push("-C","-C",l);break;default:ba(n)}s.push("--",o);let c=await this.git.raw(s);return Tq(c)}async isTracked(r){let n=await this.getSubmoduleOfFile(r),i=n?["-C",n.submodule]:[],a=n?n.relativeFilepath:r;return i.push("ls-files","--",a),this.git.raw(i).then(s=>s.trim()!=="")}async commitAll({message:r}){if(this.plugin.settings.updateSubmodules){this.plugin.setPluginState({gitAction:4});let i=await this.getSubmodulePaths();for(let a of i)await this.git.cwd({path:a,root:!1}).add("-A"),await this.git.cwd({path:a,root:!1}).commit(await this.formatCommitMessage(r))}this.plugin.setPluginState({gitAction:3}),await this.git.add("-A"),this.plugin.setPluginState({gitAction:4});let n=await this.git.commit(await this.formatCommitMessage(r));return this.app.workspace.trigger("obsidian-git:head-change"),n.summary.changes}async commit({message:r,amend:n}){this.plugin.setPluginState({gitAction:4});let i=(await this.git.commit(await this.formatCommitMessage(r),n?["--amend"]:[])).summary.changes;return this.app.workspace.trigger("obsidian-git:head-change"),this.plugin.setPluginState({gitAction:0}),i}async stage(r,n){this.plugin.setPluginState({gitAction:3}),r=this.getRelativeRepoPath(r,n),await this.git.add(["--",r]),this.plugin.setPluginState({gitAction:0})}async stageAll({dir:r}){this.plugin.setPluginState({gitAction:3}),await this.git.add(r!=null?r:"-A"),this.plugin.setPluginState({gitAction:0})}async unstageAll({dir:r}){this.plugin.setPluginState({gitAction:3}),await this.git.reset(r!=null?["--",r]:[]),this.plugin.setPluginState({gitAction:0})}async unstage(r,n){this.plugin.setPluginState({gitAction:3}),r=this.getRelativeRepoPath(r,n),await this.git.reset(["--",r]),this.plugin.setPluginState({gitAction:0})}async discard(r){this.plugin.setPluginState({gitAction:3}),await this.isTracked(r)&&await this.git.checkout(["--",r]),this.plugin.setPluginState({gitAction:0})}async applyPatch(r){let n=He.join(this.relPluginConfigPath,"patch");await this.app.vault.adapter.write(n,r),await this.git.applyPatch(n,{"--cached":null,"--unidiff-zero":null,"--whitespace":"nowarn"}),await this.app.vault.adapter.remove(n)}async getUntrackedPaths(r){let n=r==null?void 0:r.path;this.plugin.setPluginState({gitAction:1});let i=["ls-files","--others","--exclude-standard","--directory"];n!=null&&i.push("--",n);let a=await this.git.raw(i);return this.plugin.setPluginState({gitAction:0}),a.split(/\r\n|\r|\n/).filter(s=>s.length>0)}async hashObject(r){r=this.getRelativeRepoPath(r);let n=await this.getSubmoduleOfFile(r),i=n?["-C",n.submodule]:[],a=n?n.relativeFilepath:r;return i.push("hash-object","--",a),this.git.raw(i)}async discardAll({dir:r}){return this.discard(r!=null?r:".")}async pull(){this.plugin.setPluginState({gitAction:2});try{this.plugin.settings.updateSubmodules&&await this.git.subModule(["update","--remote","--merge","--recursive"]);let r=await this.branchInfo(),n=await this.git.revparse([r.current]);if(!r.tracking&&this.plugin.settings.updateSubmodules){this.plugin.log("No tracking branch found. Ignoring pull of main repo and updating submodules only.");return}await this.git.fetch();let i=await this.git.revparse([r.tracking]);if(n!==i){if(this.plugin.settings.syncMethod==="merge"||this.plugin.settings.syncMethod==="rebase")try{switch(this.plugin.settings.syncMethod){case"merge":await this.git.merge([r.tracking]);break;case"rebase":await this.git.rebase([r.tracking])}}catch(o){this.plugin.displayError(`Pull failed (${this.plugin.settings.syncMethod}): ${"message"in o?o.message:o}`);return}else if(this.plugin.settings.syncMethod==="reset")try{await this.git.raw(["update-ref",`refs/heads/${r.current}`,i]),await this.unstageAll({})}catch(o){this.plugin.displayError(`Sync failed (${this.plugin.settings.syncMethod}): ${"message"in o?o.message:o}`)}this.app.workspace.trigger("obsidian-git:head-change");let a=await this.git.revparse([r.current]);return(await this.git.diff([`${n}..${a}`,"--name-only"])).split(/\r\n|\r|\n/).filter(o=>o.length>0).map(o=>({path:o,workingDir:"P",vaultPath:this.getRelativeVaultPath(o)}))}else return[]}catch(r){this.convertErrors(r)}}async push(){this.plugin.setPluginState({gitAction:5});try{if(this.plugin.settings.updateSubmodules){let s=await this.git.env({...process.env,OBSIDIAN_GIT:1}).subModule(["foreach","--recursive",`tracking=$(git for-each-ref --format='%(upstream:short)' "$(git symbolic-ref -q HEAD)"); echo $tracking; if [ ! -z "$(git diff --shortstat $tracking)" ]; then git push; fi`]);console.log(s)}let r=await this.git.status(),n=r.tracking,i=r.current;if(!n&&this.plugin.settings.updateSubmodules){this.plugin.log("No tracking branch found. Ignoring push of main repo and updating submodules only.");return}let a=(await this.git.diffSummary([i,n,"--"])).changed;return await this.git.env({...process.env,OBSIDIAN_GIT:1}).push(),a}catch(r){this.convertErrors(r)}}async getUnpushedCommits(){let r=await this.git.status(),n=r.tracking,i=r.current;if(n==null||i==null)return 0;let[a,s]=Ri(n);return(await this.getRemoteBranches(a)).includes(n)?(await this.git.diffSummary([i,n,"--"])).changed:(this.plugin.log(`Tracking branch ${n} does not exist on remote ${a}.`),0)}async canPush(){if(this.plugin.settings.updateSubmodules===!0)return!0;let r=await this.git.status(),n=r.tracking,i=r.current;return n?(await this.git.diffSummary([i,n,"--"])).changed!==0:!1}async checkRequirements(){return await this.isGitInstalled()?await this.git.checkIsRepo()?"valid":"missing-repo":"missing-git"}async branchInfo(){let r=await this.git.status(),n=await this.git.branch(["--no-color"]);return{current:r.current||void 0,tracking:r.tracking||void 0,branches:n.all}}async getRemoteUrl(r){try{return await this.git.remote(["get-url",r])||void 0}catch(n){if(String(n).contains(r))return;throw n}}async log(r,n=!0,i,a){let s;r&&(s=this.getRelativeRepoPath(r,n));let o={file:s,maxCount:i,"--diff-merges":"first-parent","--name-status":null};return a&&(o[a]=null),(await this.git.log(o)).all.map(c=>{var u,f,d,h;return{...c,author:{name:c.author_name,email:c.author_email},refs:c.refs.split(", ").filter(m=>m.length>0),diff:{...c.diff,files:(f=(u=c.diff)==null?void 0:u.files.map(m=>({...m,status:m.status,path:m.file,hash:c.hash,vaultPath:this.getRelativeVaultPath(m.file),fromPath:m.from,fromVaultPath:m.from!=null?this.getRelativeVaultPath(m.from):void 0,binary:m.binary})))!=null?f:[]},fileName:(h=(d=c.diff)==null?void 0:d.files.first())==null?void 0:h.file}})}async show(r,n,i=!0){let a=this.getRelativeRepoPath(n,i);return this.git.show([r+":"+a])}async checkout(r,n){if(n&&(r=`${n}/${r}`),await this.git.checkout(r),this.plugin.settings.submoduleRecurseCheckout){let i=await this.getSubmodulePaths();for(let a of i){let s=await this.git.cwd({path:a,root:!1}).branch();Object.keys(s.branches).includes(r)&&await this.git.cwd({path:a,root:!1}).checkout(r)}}}async createBranch(r){await this.git.checkout(["-b",r])}async deleteBranch(r,n){await this.git.branch([n?"-D":"-d",r])}async branchIsMerged(r){return!(await this.git.branch(["--no-merged"])).all.contains(r)}async init(){await this.git.init(!1)}async clone(r,n,i){await this.git.clone(r,He.join(this.app.vault.adapter.getBasePath(),n),i?["--depth",`${i}`]:[])}async setConfig(r,n){n==null?await this.git.raw(["config","--local","--unset",r]):await this.git.addConfig(r,n)}async getConfig(r){let i=(await this.git.listConfig("local")).all[r];if(typeof i=="string"||i==null)return i;throw new Error("Config value is not a string")}async fetch(r){await this.git.fetch(r!=null?[r]:[])}async setRemote(r,n){(await this.getRemotes()).includes(r)?await this.git.remote(["set-url",r,n]):await this.git.remote(["add",r,n])}async getRemoteBranches(r){let n=await this.git.branch(["-r","--list",`${r}*`]),i=[];for(let a in n.branches)i.push(n.branches[a].name);return i}async getRemotes(){let r=await this.git.remote([]);return r?r.trim().split(`
`):[]}async removeRemote(r){await this.git.removeRemote(r)}async updateUpstreamBranch(r){try{await this.git.branch(["--set-upstream-to",r])}catch(n){try{await this.git.branch(["--set-upstream",r])}catch(i){let[a,s]=Ri(r),o=await this.branchInfo();await this.git.push(["--set-upstream",a,`${o.current}:${s}`])}}}updateGitPath(r){return this.setGitInstance()}updateBasePath(r){return this.setGitInstance(!0)}async getDiffString(r,n=!1,i){return n?await this.git.diff(["--cached","--",r]):i?await this.git.show([`${i}`,"--",r]):await this.git.diff(["--",r])}async diff(r,n,i){return await this.git.diff([`${n}..${i}`,"--",r])}async rawCommand(r){let n=r.split(" ");return await this.git.raw(n[0],...n.slice(1))}async getSubmoduleOfFile(r){if(!await this.app.vault.adapter.exists(He.dirname(r)))return;let n=await this.git.raw(["-C",He.dirname(r),"rev-parse","--show-toplevel"],l=>l&&console.warn("get-submodule-of-file",l==null?void 0:l.message));if(n=n.trim(),(await this.git.raw(["-C",He.dirname(r),"rev-parse","--show-superproject-working-tree"],l=>l&&console.warn("get-submodule-of-file",l==null?void 0:l.message))).trim()==="")return;let s=this.app.vault.adapter.getFullPath(He.normalize(r)),o=He.relative(n,s);return{submodule:n,relativeFilepath:o}}async getLastCommitTime(){try{let r=await this.git.log({n:1});if(r!=null&&r.latest!=null)return new Date(r.latest.date)}catch(r){if(r instanceof br){if(r.message.contains("does not have any commits yet"))return}else throw r}}async isGitInstalled(){let r=this.plugin.localStorage.getGitPath(),n=await Dc(r||"git",["--version"],{});if(n.error)if($i.Platform.isWin&&!r){this.plugin.log(`Git not found in PATH. Checking standard installation path(${ed}) of Git for Windows.`);let i=await Dc(ed,["--version"]);if(i.error)return console.error(i.error),!1;this.useDefaultWindowsGitPath=!0}else return console.error(n.error),!1;else this.useDefaultWindowsGitPath=!1;return!0}convertErrors(r){if(r instanceof br){let n=String(r.message);if(n.contains("Could not resolve host")||n.contains("Unable to resolve host")||n.match(/ssh: connect to host .*? port .*?: Operation timed out/)!=null||n.match(/ssh: connect to host .*? port .*?: Network is unreachable/)!=null||n.match(/ssh: connect to host .*? port .*?: Undefined error: 0/)!=null)throw new Ro(n)}throw r}async isFileTrackedByLFS(r){try{return(await this.git.raw(["check-attr","filter",r])).includes("filter: lfs")}catch(n){let i=n instanceof Error?n.message:String(n);return this.plugin.displayError(`Error checking LFS status: ${i}`),!1}}},qI={hash:"000000",isZeroCommit:!0,summary:""};function Tq(t){let r=t.replace(`\r
`,`
`).split(`
`),n={commits:new Map,hashPerLine:[void 0],originalFileLineNrPerLine:[void 0],finalFileLineNrPerLine:[void 0],groupSizePerStartingLine:new Map},i=1;for(let a=0;a<r.length;){if(UI(r[a])){let s=r[a].split(" "),o=Cq(s,i,n);for(a++;UI(r[a]);a++){let l=r[a].split(" ");Pq(l,n,i)}Rq(n.commits.get(o)),i+=1}else if(!(r[a]===""&&a===r.length-1))throw Error(`Expected non-whitespace line or EOF, but found: ${r[a]}`);a++}return n}function Cq(t,e,r){let n=t[0];if(r.hashPerLine.push(n),r.originalFileLineNrPerLine.push(parseInt(t[1])),r.finalFileLineNrPerLine.push(parseInt(t[2])),t.length>=4&&r.groupSizePerStartingLine.set(e,parseInt(t[3])),parseInt(t[2])!==e)throw Error(`git-blame output is out of order: ${e} vs ${t[2]}`);return n}function Pq(t,e,r){let n=t[0],i=t.slice(1).join(" "),a=e.hashPerLine[r],s=e.commits.get(a)||{hash:a,author:{},committer:{},previous:{}};switch(n){case"summary":s.summary=i;break;case"author":s.author.name=i;break;case"author-mail":s.author.email=jI(i);break;case"author-time":s.author.epochSeconds=parseInt(i);break;case"author-tz":s.author.tz=i;break;case"committer":s.committer.name=i;break;case"committer-mail":s.committer.email=jI(i);break;case"committer-time":s.committer.epochSeconds=parseInt(i);break;case"committer-tz":s.committer.tz=i;break;case"previous":s.previous.commitHash=i;break;case"filename":s.previous.filename=i;break}e.commits.set(a,s)}function Rq(t){if(t.summary===void 0)throw Error(`Summary not provided for commit: ${t.hash}`);Gw(t.author)&&(t.author=void 0),Gw(t.committer)&&(t.committer=void 0),Gw(t.previous)&&(t.previous=void 0),t.isZeroCommit=!!t.hash.match(/^0*$/)}function Gw(t){return!t||Object.keys(t).length===0}function UI(t){return t.length>0&&t[0].trim()===t[0]}function jI(t){let e=t.startsWith("<")?t.substring(1):t;return e.endsWith(">")?e.substring(0,e.length-1):e}p();var m$=require("@codemirror/state");p();var qw=class{constructor(){this.eventsPerFilepath=new Map;this.startRemoveStalesSubscribersInterval()}ifFilepathDefinedTransformSubscribers(e,r){if(e)return this.ensureInitialized(e),r(this.eventsPerFilepath.get(e))}forEachSubscriber(e){this.eventsPerFilepath.forEach(r=>r.forEach(e))}ensureInitialized(e){this.eventsPerFilepath.get(e)||this.eventsPerFilepath.set(e,new Set)}startRemoveStalesSubscribersInterval(){this.removeStalesSubscribersTimer=window.setInterval(()=>this==null?void 0:this.forEachSubscriber(e=>e==null?void 0:e.removeIfStale()),6e4)}clear(){window.clearInterval(this.removeStalesSubscribersTimer),this.eventsPerFilepath.clear()}},Fi=new qw;p();var nh=require("@codemirror/state"),zI=Ft(zw());function VI(t,e,r){if(!(t===void 0||e===void 0||r===void 0))return`head${t}-obj${e}-path${r}`}var WI=nh.StateEffect.define();function YI(t,e,r){return r.update({effects:WI.of({key:t,la:e,lineOffsetsFromUnsavedChanges:new Map})})}var Vo=nh.StateField.define({create:t=>{},update:(t,e)=>{for(let r of e.effects)if(r.is(WI))return r.value;return Iq(e,t)},compare:(t,e)=>(t==null?void 0:t.key)===(e==null?void 0:e.key)});function ih(t){var a;let e=zI.sha256.create();if(!t)return e;let{la:r,key:n,lineOffsetsFromUnsavedChanges:i}=t;e.update(r==="untracked"?"t":"f"),e.update(n);for(let[s,o]of(a=i.entries())!=null?a:[])e.update([s,o]);return e}var en={get:void 0,save:void 0};function XI(t,e){en.get=t,en.save=e}function ah(t){var e,r;return(r=(e=rh(t.coloringMaxAge))==null?void 0:e.asDays())!=null?r:rh(Xe.lineAuthor.coloringMaxAge).asDays()}function Iq(t,e){if(e)return t.changes.empty||t.changes.iterChanges((r,n,i,a)=>{var m;let s=t.startState.doc,{newDoc:o}=t,l=s.lineAt(r).number,c=s.lineAt(n).number,u=o.lineAt(i).number,f=o.lineAt(a).number,d=c-l+1,h=f-u+1;for(let g=u;g<=f;g++){let v=(m=e.lineOffsetsFromUnsavedChanges.get(g))!=null?m:0,w=f===g,b=h-d;w&&(v+=b),e.lineOffsetsFromUnsavedChanges.set(g,v)}}),e}p();function ZI(){Wo=void 0,Vw=[],sh=0,lh.clear(),ch.clear(),Yo.clear()}var Wo,oh=()=>Wo;function KI(t,e){var i;let r=e.length;if(r<((i=Wo==null?void 0:Wo.length)!=null?i:0))return;Wo={gutter:t,length:r,text:e};let n=en.get();r!==n.gutterSpacingFallbackLength&&(n.gutterSpacingFallbackLength=r,en.save(n))}var Vw=[],$q=15,sh=0;function JI(t){Vw[sh]=t,sh=(sh+1)%$q}function QI(){return W2(Vw)}var lh=new Map,ch=new Map,Yo=new Set;p();var d$=require("@codemirror/state"),h$=require("@codemirror/view");p();var Zw=require("@codemirror/view"),l$=Ft(zw()),hh=require("obsidian");p();p();var uh={x:-10,y:-10};function e$(){uh.x===-10&&window.addEventListener("mousedown",t=>{uh.x=t.clientX,uh.y=t.clientY})}function t$(){for(let t of Yo)if(Fq(t,uh))return t}function Fq(t,e){let{x:r,y:n,width:i,height:a}=t.getBoundingClientRect();return r<=e.x&&e.x<=r+i&&n<=e.y&&e.y<=n+a}var r$="data-commit";function n$(t,e,r){if(e.hasFocus())return;let n=t$();if(!n)return;let i=Mq(n);i&&(!i.isZeroCommit&&!i.isWaitingGutter&&Oq(i,t),Ww("showCommitHash",t),Ww("authorDisplay",t),Ww("dateTimeFormatOptions",t))}function Oq(t,e){e.addItem(r=>r.setTitle("Copy commit hash").setIcon("copy").setSection("obs-git-line-author-copy").onClick(n=>navigator.clipboard.writeText(t.hash)))}function Ww(t,e){var l,c;let r,n,i=Zn.plugin.settings.lineAuthor,a=i[t],s=typeof a=="boolean"?a:a!=="hide",o=Xe.lineAuthor[t];if(t==="showCommitHash")r="Show commit hash",n=a;else if(t==="authorDisplay"){let u=(l=i.lastShownAuthorDisplay)!=null?l:o;r="Show author "+(s?a:u),n=s?"hide":u}else if(t==="dateTimeFormatOptions"){let u=(c=i.lastShownDateTimeFormatOptions)!=null?c:o;r="Show "+(s?a:u),r+=r.contains("date")?"":" date",n=s?"hide":u}else ba(t);e.addItem(u=>u.setTitle(r).setSection("obs-git-line-author-configure").setChecked(s).onClick(f=>{var d,h;return(h=(d=Zn.plugin)==null?void 0:d.settingsTab)==null?void 0:h.lineAuthorSettingHandler(t,n)}))}function i$(t,e,r){r.setAttr(r$,JSON.stringify({hash:t.hash,isZeroCommit:t.isZeroCommit,isWaitingGutter:e}))}function Mq(t){let e=t.getAttr(r$);return e?JSON.parse(e):void 0}p();function dh(t,e){return t==="oldest"?fh(0,!1,e).color:fh(void 0,!0,e).color}function fh(t,e,r){let n=ah(r),i=Date.now()/1e3,a=t!=null?t:0,o=(e?0:i-a)/60/60/24,l=Math.pow(Math.clamp(o/n,0,1),1/2.3),c=Dq(),u=r.colorNew,f=r.colorOld,d=c?.4:1,h=Yw(u.r,f.r,l)*d,m=Yw(u.g,f.g,l)*d,g=Yw(u.b,f.b,l)*d;return{color:`rgba(${h},${m},${g},${c?.75:.25})`,daysSinceCommit:o}}function Yw(t,e,r){return t+(e-t)*r}function Dq(){var t;return((t=window.app)==null?void 0:t.getTheme())==="obsidian"}function a$(t){document.body.style.setProperty("--obs-git-gutter-text",t.textColorCss)}p();function s$(t,e,r){let n;for(let i=e;i<=r;i++){let a=t.hashPerLine[i],s=t.commits.get(a);(!n||s.isZeroCommit||Lq(s,n))&&(n=s)}return n}function Lq(t,e){var i,a,s,o;let r=(a=(i=t.author)==null?void 0:i.epochSeconds)!=null?a:0,n=(o=(s=e.author)==null?void 0:s.epochSeconds)!=null?o:0;return r>n}var o$="-",Nq="+",Bq=3,Hq="*",Uq=/\S/g,jq="%",Xo=class t extends Zw.GutterMarker{constructor(r){super();this.text=r}eq(r){return r instanceof t&&this.text===r.text}toDOM(){return document.createTextNode(this.text)}destroy(r){}},Xw=class extends Zw.GutterMarker{constructor(r,n,i,a,s,o){super();this.lineAuthoring=r;this.startLine=n;this.endLine=i;this.key=a;this.settings=s;this.options=o;this.point=!1;this.elementClass="obs-git-blame-gutter"}eq(r){return this.key===(r==null?void 0:r.key)&&this.startLine===(r==null?void 0:r.startLine)&&this.endLine===(r==null?void 0:r.endLine)&&(this==null?void 0:this.options)===(r==null?void 0:r.options)}toDOM(){var r;return this.precomputedDomProvider=(r=this.precomputedDomProvider)!=null?r:this.computeDom(),this.precomputedDomProvider()}destroy(r){r&&(document.body.contains(r)||Yo.delete(r))}computeDom(){let r=s$(this.lineAuthoring,this.startLine,this.endLine),n=r.isZeroCommit?"":this.renderNonZeroCommit(r);return!r.isZeroCommit&&this.options!=="waiting-for-result"?KI(this,n):n=this.adaptTextForFakeCommit(r,n,this.options),this.createHtmlNode(r,n,this.options==="waiting-for-result")}createHtmlNode(r,n,i){var c;let a=window.createDiv();a.innerText=n;let{color:s,daysSinceCommit:o}=fh((c=r==null?void 0:r.author)==null?void 0:c.epochSeconds,r==null?void 0:r.isZeroCommit,this.settings);a.style.backgroundColor=s,i$(r,i,a);function l(){let u=a.cloneNode(!0);return Yo.add(u),i||JI(o),u}return l}renderNonZeroCommit(r){let n=this.settings.showCommitHash?this.renderHash(r):"",i=this.settings.authorDisplay==="hide"?"":`${this.renderAuthorName(r,this.settings.authorDisplay)}`,a=this.settings.dateTimeFormatOptions==="hide"?"":`${this.renderAuthoringDate(r,this.settings.dateTimeFormatOptions,this.settings.dateTimeFormatCustomString,this.settings.dateTimeTimezone)}`;return[n,i,a].filter(o=>o.length>=1).join(" ")}renderHash(r){return r.hash.substring(0,6)}renderAuthorName(r,n){var o,l,c,u;let i=(l=(o=r==null?void 0:r.author)==null?void 0:o.name)!=null?l:"",a=i.split(" ").filter(f=>f.length>=1),s;switch(n){case"initials":s=a.map(f=>f[0].toUpperCase()).join("");break;case"first name":s=(c=a.first())!=null?c:o$;break;case"last name":s=(u=a.last())!=null?u:o$;break;case"full":s=i;break;default:return ba(n)}return Y2(r==null?void 0:r.author,r==null?void 0:r.committer)||(s=s+Hq),s}renderAuthoringDate(r,n,i,a){var c;let s="?";if(((c=r==null?void 0:r.author)==null?void 0:c.epochSeconds)===void 0)return s;let o;switch(n){case"date":o=Jf;break;case"datetime":o=Ng;break;case"custom":o=i;break;case"natural language":o=u=>{let f=u.diff((0,hh.moment)());return hh.moment.duration(f).humanize(!0)};break;default:return ba(n)}let l=hh.moment.unix(r.author.epochSeconds);switch(a){case"viewer-local":break;case"author-local":l=l.utcOffset(r.author.tz),typeof o=="string"&&(o+=" Z");break;case"utc0000":l=l.utc(),typeof o=="string"&&(o+="[Z]");break;default:return ba(a)}return typeof o=="string"?l.format(o):o(l)}adaptTextForFakeCommit(r,n,i){var l,c,u,f;let a=(c=(l=oh())==null?void 0:l.text)!=null?c:n,s=i!=="waiting-for-result"&&r.isZeroCommit?Nq:jq;n=a.replace(Uq,s);let o=(f=(u=en.get())==null?void 0:u.gutterSpacingFallbackLength)!=null?f:n.length;if(n=X2(n,o,s),i!=="waiting-for-result"&&r.isZeroCommit){let d=Math.min(o,Bq);n=Z2(n,o-d)}return n}};function us(t,e,r,n,i,a){let s=l$.sha256.create();s.update(JSON.stringify(i)),s.update(`s${e}-e${r}-k${n}-o${a}`);let o=s.hex(),l=lh.get(o);if(l)return l;let c=new Xw(t,e,r,n,i,a);return lh.set(o,c),c}p();var c$=require("obsidian");function Kw(){var e,r;let t=(r=(e=en.get())==null?void 0:e.gutterSpacingFallbackLength)!=null?r:Xe.lineAuthor.gutterSpacingFallbackLength;return new Xo(Array(t).fill("-").join(""))}function Jw(t){let{lineAuthoring:e,ageForInitialRender:r}=Gq(t);return us(e,1,1,"initialGutter"+r,t,"waiting-for-result")}function Gq(t){var a;let e=(a=QI())!=null?a:ah(t)*.25,r=(0,c$.moment)().add(-e,"days"),n={name:"",epochSeconds:V2(r),tz:"+0000"},i={hash:"waiting-for-result",author:n,committer:n,isZeroCommit:!1};return{lineAuthoring:{hashPerLine:[void 0,"waiting-for-result"],commits:new Map([["waiting-for-result",i]])},ageForInitialRender:e}}p();function u$(t,e){return us({hashPerLine:[void 0,"000000"],commits:new Map([["000000",qI]])},1,1,t,e)}var Qw=new Xo(""),p$=(0,h$.gutter)({class:"line-author-gutter-container",markers(t){let e=t.state.field(Vo,!1);return qq(t,e)},lineMarkerChange(t){let e=ih(t.state.field(Vo));return ih(t.startState.field(Vo))!==e},renderEmptyElements:!0,initialSpacer:t=>(f$(t),Kw()),updateSpacer:(t,e)=>{var r,n;return f$(e.view),(n=(r=oh())==null?void 0:r.gutter)!=null?n:Kw()}});function qq(t,e){let r=ih(e),n=t.state.doc,i=new Map;for(let u=1;u<=n.lines;u++){let f=n.line(u).from,d=t.lineBlockAt(f).to;i.set(u,[f,d]),r.update([f,d,0])}let a=en.get();r.update("s"+Object.values(en).join(","));let s=r.hex(),o=ch.get(s);if(o)return o;let{result:l,allowCache:c}=zq(n,i,a,e);return c&&ch.set(s,l),l}function zq(t,e,r,n){let i=!0,a=t.lines,s=[];function o(f,d,h){return s.push(h.range(f,d))}let l=Vq(a,n),c=t.length===0,u=t.iterLines(a,a+1).next().value==="";for(let f=1;f<=a;f++){let[d,h]=e.get(f),m=t.lineAt(h).number;if(c){o(d,h,Qw);continue}if(f===a&&u){o(d,h,Qw);continue}if(n===void 0){o(d,h,Jw(r)),i=!1;continue}let{key:g,la:v}=n;if(v==="untracked"){o(d,h,u$(v,r));continue}let w=v.hashPerLine.length-1,b=l[f],S=l[m];if(S&&S>w&&o(d,h,Qw),b!==void 0&&Zv(1,b,w)&&S!==void 0&&Zv(1,S,w)){o(d,h,us(v,b,S,g,r));continue}if(w<1){o(d,h,Jw(r)),i=!1;continue}let E=Math.clamp(b!=null?b:f,1,w),k=Math.clamp(S!=null?S:m,1,w);o(d,h,us(v,E,k,g+"computing",r,"waiting-for-result"))}return{result:d$.RangeSet.of(s,!0),allowCache:i}}function Vq(t,e){if(!(e!=null&&e.lineOffsetsFromUnsavedChanges))return Array.from(new Array(t+1),i=>i);let r=[void 0],n=0;for(let i=1;i<=t;i++){let a=e.lineOffsetsFromUnsavedChanges.get(i);n+=a!=null?a:0,r[i]=a===void 0?i-n:void 0}return r}function f$(t){t.dom.querySelectorAll(".cm-gutters").forEach(r=>{r!=null&&r.style&&(r.style.marginLeft||(r.style.marginLeft="unset"))})}var ph=class{constructor(e){this.plugin=e;this.lineAuthorings=new Map}async trackChanged(e){return this.trackChangedHelper(e).catch(r=>(console.warn("Git: Error in trackChanged."+r),Promise.reject(r)))}async trackChangedHelper(e){if(e){if(e.path===void 0){console.warn("Git: Attempted to track change of undefined filepath. Unforeseen situation.");return}return this.computeLineAuthorInfo(e.path)}}destroy(){this.lineAuthorings.clear(),ZI()}async computeLineAuthorInfo(e){let r=this.plugin.editorIntegration.lineAuthoringFeature.isAvailableOnCurrentPlatform().gitManager,n=await r.submoduleAwareHeadRevisonInContainingDirectory(e),i=await r.hashObject(e),a=VI(n,i,e);if(a!==void 0){if(!this.lineAuthorings.has(a)){let s=await r.blame(e,this.plugin.settings.lineAuthor.followMovement,this.plugin.settings.lineAuthor.ignoreWhitespace);this.lineAuthorings.set(a,s)}this.notifyComputationResultToSubscribers(e,a)}}notifyComputationResultToSubscribers(e,r){Fi.ifFilepathDefinedTransformSubscribers(e,n=>n.forEach(i=>i.notifyLineAuthoring(r,this.lineAuthorings.get(r))))}},g$=m$.Prec.high([Vo,p$]);var Wq="https://momentjs.com/docs/#/parsing/string-format/",Yq="https://publish.obsidian.md/git-doc/Line+Authoring",mh=class extends j.PluginSettingTab{constructor(r,n){super(r,n);this.plugin=n;this.lineAuthorColorSettings=new Map}get settings(){return this.plugin.settings}display(){let{containerEl:r}=this,n=this.plugin,i;n.settings.differentIntervalCommitAndPush?i="commit":i="commit-and-sync";let a=n.gitReady;r.empty(),a||(r.createEl("p",{text:"Git is not ready. When all settings are correct you can configure commit-sync, etc."}),r.createEl("br"));let s;if(a){new j.Setting(r).setName("Automatic").setHeading(),new j.Setting(r).setName("Split timers for automatic commit and sync").setDesc("Enable to use one interval for commit and another for sync.").addToggle(u=>u.setValue(n.settings.differentIntervalCommitAndPush).onChange(async f=>{n.settings.differentIntervalCommitAndPush=f,await n.saveSettings(),n.automaticsManager.reload("commit","push"),this.refreshDisplayWithDelay()})),new j.Setting(r).setName(`Auto ${i} interval (minutes)`).setDesc(`${n.settings.differentIntervalCommitAndPush?"Commit":"Commit and sync"} changes every X minutes. Set to 0 (default) to disable. (See below setting for further configuration!)`).addText(u=>{u.inputEl.type="number",this.setNonDefaultValue({text:u,settingsProperty:"autoSaveInterval"}),u.setPlaceholder(String(Xe.autoSaveInterval)),u.onChange(async f=>{f!==""?n.settings.autoSaveInterval=Number(f):n.settings.autoSaveInterval=Xe.autoSaveInterval,await n.saveSettings(),n.automaticsManager.reload("commit")})}),s=new j.Setting(r).setName(`Auto ${i} after stopping file edits`).setDesc(`Requires the ${i} interval not to be 0.
                        If turned on, do auto ${i} every ${K2(n.settings.autoSaveInterval)} after stopping file edits.
                        This also prevents auto ${i} while editing a file. If turned off, it's independent from the last file edit.`).addToggle(u=>u.setValue(n.settings.autoBackupAfterFileChange).onChange(async f=>{n.settings.autoBackupAfterFileChange=f,this.refreshDisplayWithDelay(),await n.saveSettings(),n.automaticsManager.reload("commit")})),this.mayDisableSetting(s,n.settings.setLastSaveToLastCommit),s=new j.Setting(r).setName(`Auto ${i} after latest commit`).setDesc(`If turned on, sets last auto ${i} timestamp to the latest commit timestamp. This reduces the frequency of auto ${i} when doing manual commits.`).addToggle(u=>u.setValue(n.settings.setLastSaveToLastCommit).onChange(async f=>{n.settings.setLastSaveToLastCommit=f,await n.saveSettings(),n.automaticsManager.reload("commit"),this.refreshDisplayWithDelay()})),this.mayDisableSetting(s,n.settings.autoBackupAfterFileChange),s=new j.Setting(r).setName("Auto push interval (minutes)").setDesc("Push commits every X minutes. Set to 0 (default) to disable.").addText(u=>{u.inputEl.type="number",this.setNonDefaultValue({text:u,settingsProperty:"autoPushInterval"}),u.setPlaceholder(String(Xe.autoPushInterval)),u.onChange(async f=>{f!==""?n.settings.autoPushInterval=Number(f):n.settings.autoPushInterval=Xe.autoPushInterval,await n.saveSettings(),n.automaticsManager.reload("push")})}),this.mayDisableSetting(s,!n.settings.differentIntervalCommitAndPush),new j.Setting(r).setName("Auto pull interval (minutes)").setDesc("Pull changes every X minutes. Set to 0 (default) to disable.").addText(u=>{u.inputEl.type="number",this.setNonDefaultValue({text:u,settingsProperty:"autoPullInterval"}),u.setPlaceholder(String(Xe.autoPullInterval)),u.onChange(async f=>{f!==""?n.settings.autoPullInterval=Number(f):n.settings.autoPullInterval=Xe.autoPullInterval,await n.saveSettings(),n.automaticsManager.reload("pull")})}),new j.Setting(r).setName(`Auto ${i} only staged files`).setDesc(`If turned on, only staged files are committed on ${i}. If turned off, all changed files are committed.`).addToggle(u=>u.setValue(n.settings.autoCommitOnlyStaged).onChange(async f=>{n.settings.autoCommitOnlyStaged=f,await n.saveSettings()})),new j.Setting(r).setName(`Specify custom commit message on auto ${i}`).setDesc("You will get a pop up to specify your message.").addToggle(u=>u.setValue(n.settings.customMessageOnAutoBackup).onChange(async f=>{n.settings.customMessageOnAutoBackup=f,await n.saveSettings(),this.refreshDisplayWithDelay()})),s=new j.Setting(r).setName(`Commit message on auto ${i}`).setDesc("Available placeholders: {{date}} (see below), {{hostname}} (see below), {{numFiles}} (number of changed files in the commit) and {{files}} (changed files in commit message).").addTextArea(u=>{u.setPlaceholder(Xe.autoCommitMessage).onChange(async f=>{f===""?n.settings.autoCommitMessage=Xe.autoCommitMessage:n.settings.autoCommitMessage=f,await n.saveSettings()}),this.setNonDefaultValue({text:u,settingsProperty:"autoCommitMessage"})}),this.mayDisableSetting(s,n.settings.customMessageOnAutoBackup),new j.Setting(r).setName("Commit message").setHeading(),new j.Setting(r).setName("Commit message on manual commit").setDesc("Available placeholders: {{date}} (see below), {{hostname}} (see below), {{numFiles}} (number of changed files in the commit) and {{files}} (changed files in commit message).").addTextArea(u=>{u.setPlaceholder(Xe.commitMessage).onChange(async f=>{f===""?n.settings.commitMessage=Xe.commitMessage:n.settings.commitMessage=f,await n.saveSettings()}),this.setNonDefaultValue({text:u,settingsProperty:"commitMessage"})}),new j.Setting(r).setName("Commit message script").setDesc("A script that is run using 'sh -c' to generate the commit message. May be used to generate commit messages using AI tools. Available placeholders: {{hostname}}, {{date}}.").addText(u=>{u.onChange(async f=>{f===""?n.settings.commitMessageScript=Xe.commitMessageScript:n.settings.commitMessageScript=f,await n.saveSettings()}),this.setNonDefaultValue({text:u,settingsProperty:"commitMessageScript"})});let c=new j.Setting(r).setName("{{date}} placeholder format").addMomentFormat(u=>u.setDefaultFormat(n.settings.commitDateFormat).setValue(n.settings.commitDateFormat).onChange(async f=>{n.settings.commitDateFormat=f,await n.saveSettings()}));c.descEl.innerHTML=`
            Specify custom date format. E.g. "${Bg}. See <a href="https://momentjs.com">Moment.js</a> for more formats.`,new j.Setting(r).setName("{{hostname}} placeholder replacement").setDesc("Specify custom hostname for every device.").addText(u=>{var f;return u.setValue((f=n.localStorage.getHostname())!=null?f:"").onChange(d=>{n.localStorage.setHostname(d)})}),new j.Setting(r).setName("Preview commit message").addButton(u=>u.setButtonText("Preview").onClick(async()=>{let f=await n.gitManager.formatCommitMessage(n.settings.commitMessage);new j.Notice(`${f}`)})),new j.Setting(r).setName("List filenames affected by commit in the commit body").addToggle(u=>u.setValue(n.settings.listChangedFilesInMessageBody).onChange(async f=>{n.settings.listChangedFilesInMessageBody=f,await n.saveSettings()})),new j.Setting(r).setName("Pull").setHeading(),n.gitManager instanceof _e&&new j.Setting(r).setName("Merge strategy").setDesc("Decide how to integrate commits from your remote branch into your local branch.").addDropdown(u=>{let f={merge:"Merge",rebase:"Rebase",reset:"Other sync service (Only updates the HEAD without touching the working directory)"};u.addOptions(f),u.setValue(n.settings.syncMethod),u.onChange(async d=>{n.settings.syncMethod=d,await n.saveSettings()})}),new j.Setting(r).setName("Pull on startup").setDesc("Automatically pull commits when Obsidian starts.").addToggle(u=>u.setValue(n.settings.autoPullOnBoot).onChange(async f=>{n.settings.autoPullOnBoot=f,await n.saveSettings()})),new j.Setting(r).setName("Commit-and-sync").setDesc("Commit-and-sync with default settings means staging everything -> committing -> pulling -> pushing. Ideally this is a single action that you do regularly to keep your local and remote repository in sync.").setHeading(),s=new j.Setting(r).setName("Push on commit-and-sync").setDesc(`Most of the time you want to push after committing. Turning this off turns a commit-and-sync action into commit ${n.settings.pullBeforePush?"and pull ":""}only. It will still be called commit-and-sync.`).addToggle(u=>u.setValue(!n.settings.disablePush).onChange(async f=>{n.settings.disablePush=!f,this.refreshDisplayWithDelay(),await n.saveSettings()})),new j.Setting(r).setName("Pull on commit-and-sync").setDesc(`On commit-and-sync, pull commits as well. Turning this off turns a commit-and-sync action into commit ${n.settings.disablePush?"":"and push "}only.`).addToggle(u=>u.setValue(n.settings.pullBeforePush).onChange(async f=>{n.settings.pullBeforePush=f,this.refreshDisplayWithDelay(),await n.saveSettings()})),n.gitManager instanceof _e&&(new j.Setting(r).setName("Hunk management").setDesc("Hunks are sections of grouped line changes right in your editor.").setHeading(),new j.Setting(r).setName("Signs").setDesc("This allows you to see your changes right in your editor via colored markers and stage/reset/preview individual hunks.").addToggle(u=>u.setValue(n.settings.hunks.showSigns).onChange(async f=>{n.settings.hunks.showSigns=f,await n.saveSettings(),n.editorIntegration.refreshSignsSettings()})),new j.Setting(r).setName("Hunk commands").setDesc("Adds commands to stage/reset individual Git diff hunks and navigate between them via 'Go to next/prev hunk' commands.").addToggle(u=>u.setValue(n.settings.hunks.hunkCommands).onChange(async f=>{n.settings.hunks.hunkCommands=f,await n.saveSettings(),n.editorIntegration.refreshSignsSettings()})),new j.Setting(r).setName("Status bar with summary of line changes").addDropdown(u=>u.addOptions({disabled:"Disabled",colored:"Colored",monochrome:"Monochrome"}).setValue(n.settings.hunks.statusBar).onChange(async f=>{n.settings.hunks.statusBar=f,await n.saveSettings(),n.editorIntegration.refreshSignsSettings()})),new j.Setting(r).setName("Line author information").setHeading(),this.addLineAuthorInfoSettings())}new j.Setting(r).setName("History view").setHeading(),new j.Setting(r).setName("Show Author").setDesc("Show the author of the commit in the history view.").addDropdown(c=>{let u={hide:"Hide",full:"Full",initials:"Initials"};c.addOptions(u),c.setValue(n.settings.authorInHistoryView),c.onChange(async f=>{n.settings.authorInHistoryView=f,await n.saveSettings(),await n.refresh()})}),new j.Setting(r).setName("Show Date").setDesc("Show the date of the commit in the history view. The {{date}} placeholder format is used to display the date.").addToggle(c=>c.setValue(n.settings.dateInHistoryView).onChange(async u=>{n.settings.dateInHistoryView=u,await n.saveSettings(),await n.refresh()})),new j.Setting(r).setName("Source control view").setHeading(),new j.Setting(r).setName("Automatically refresh source control view on file changes").setDesc("On slower machines this may cause lags. If so, just disable this option.").addToggle(c=>c.setValue(n.settings.refreshSourceControl).onChange(async u=>{n.settings.refreshSourceControl=u,await n.saveSettings()})),new j.Setting(r).setName("Source control view refresh interval").setDesc("Milliseconds to wait after file change before refreshing the Source Control View.").addText(c=>{c.inputEl.type="number",this.setNonDefaultValue({text:c,settingsProperty:"refreshSourceControlTimer"}),c.setPlaceholder(String(Xe.refreshSourceControlTimer)),c.onChange(async f=>{f!==""&&Number.isInteger(Number(f))?n.settings.refreshSourceControlTimer=Math.max(Number(f),500):n.settings.refreshSourceControlTimer=Xe.refreshSourceControlTimer,await n.saveSettings(),n.setRefreshDebouncer()})}),new j.Setting(r).setName("Miscellaneous").setHeading(),n.gitManager instanceof _e&&new j.Setting(r).setName("Diff view style").setDesc('Set the style for the diff view. Note that the actual diff in "Split" mode is not generated by Git, but the editor itself instead so it may differ from the diff generated by Git. One advantage of this is that you can edit the text in that view.').addDropdown(c=>{let u={split:"Split",git_unified:"Unified"};c.addOptions(u),c.setValue(n.settings.diffStyle),c.onChange(async f=>{n.settings.diffStyle=f,await n.saveSettings()})}),new j.Setting(r).setName("Disable informative notifications").setDesc("Disable informative notifications for git operations to minimize distraction (refer to status bar for updates).").addToggle(c=>c.setValue(n.settings.disablePopups).onChange(async u=>{n.settings.disablePopups=u,this.refreshDisplayWithDelay(),await n.saveSettings()})),new j.Setting(r).setName("Disable error notifications").setDesc("Disable error notifications of any kind to minimize distraction (refer to status bar for updates).").addToggle(c=>c.setValue(!n.settings.showErrorNotices).onChange(async u=>{n.settings.showErrorNotices=!u,await n.saveSettings()})),n.settings.disablePopups||new j.Setting(r).setName("Hide notifications for no changes").setDesc("Don't show notifications when there are no changes to commit or push.").addToggle(c=>c.setValue(n.settings.disablePopupsForNoChanges).onChange(async u=>{n.settings.disablePopupsForNoChanges=u,await n.saveSettings()})),new j.Setting(r).setName("Show status bar").setDesc("Obsidian must be restarted for the changes to take affect.").addToggle(c=>c.setValue(n.settings.showStatusBar).onChange(async u=>{n.settings.showStatusBar=u,await n.saveSettings()})),new j.Setting(r).setName("File menu integration").setDesc('Add "Stage", "Unstage" and "Add to .gitignore" actions to the file menu.').addToggle(c=>c.setValue(n.settings.showFileMenu).onChange(async u=>{n.settings.showFileMenu=u,await n.saveSettings()})),new j.Setting(r).setName("Show branch status bar").setDesc("Obsidian must be restarted for the changes to take affect.").addToggle(c=>c.setValue(n.settings.showBranchStatusBar).onChange(async u=>{n.settings.showBranchStatusBar=u,await n.saveSettings()})),new j.Setting(r).setName("Show the count of modified files in the status bar").addToggle(c=>c.setValue(n.settings.changedFilesInStatusBar).onChange(async u=>{n.settings.changedFilesInStatusBar=u,await n.saveSettings()})),n.gitManager instanceof _n?new j.Setting(r).setName("Authentication/commit author").setHeading():new j.Setting(r).setName("Commit author").setHeading(),n.gitManager instanceof _n&&new j.Setting(r).setName("Username on your git server. E.g. your username on GitHub").addText(c=>{var u;c.setValue((u=n.localStorage.getUsername())!=null?u:""),c.onChange(f=>{n.localStorage.setUsername(f)})}),n.gitManager instanceof _n&&new j.Setting(r).setName("Password/Personal access token").setDesc("Type in your password. You won't be able to see it again.").addText(c=>{c.inputEl.autocapitalize="off",c.inputEl.autocomplete="off",c.inputEl.spellcheck=!1,c.onChange(u=>{n.localStorage.setPassword(u)})}),n.gitReady&&new j.Setting(r).setName("Author name for commit").addText(async c=>{var u;c.setValue((u=await n.gitManager.getConfig("user.name"))!=null?u:""),c.onChange(async f=>{await n.gitManager.setConfig("user.name",f==""?void 0:f)})}),n.gitReady&&new j.Setting(r).setName("Author email for commit").addText(async c=>{var u;c.setValue((u=await n.gitManager.getConfig("user.email"))!=null?u:""),c.onChange(async f=>{await n.gitManager.setConfig("user.email",f==""?void 0:f)})}),new j.Setting(r).setName("Advanced").setDesc("These settings usually don't need to be changed, but may be required for special setups.").setHeading(),n.gitManager instanceof _e&&(new j.Setting(r).setName("Update submodules").setDesc('"Commit-and-sync" and "pull" takes care of submodules. Missing features: Conflicted files, count of pulled/pushed/committed files. Tracking branch needs to be set for each submodule.').addToggle(c=>c.setValue(n.settings.updateSubmodules).onChange(async u=>{n.settings.updateSubmodules=u,await n.saveSettings()})),n.settings.updateSubmodules&&new j.Setting(r).setName("Submodule recurse checkout/switch").setDesc("Whenever a checkout happens on the root repository, recurse the checkout on the submodules (if the branches exist).").addToggle(c=>c.setValue(n.settings.submoduleRecurseCheckout).onChange(async u=>{n.settings.submoduleRecurseCheckout=u,await n.saveSettings()}))),n.gitManager instanceof _e&&new j.Setting(r).setName("Custom Git binary path").addText(c=>{var u;c.setValue((u=n.localStorage.getGitPath())!=null?u:""),c.setPlaceholder("git"),c.onChange(f=>{n.localStorage.setGitPath(f),n.gitManager.updateGitPath(f||"git").catch(d=>n.displayError(d))})}),n.gitManager instanceof _e&&new j.Setting(r).setName("Additional environment variables").setDesc("Use each line for a new environment variable in the format KEY=VALUE .").addTextArea(c=>{c.setPlaceholder("GIT_DIR=/path/to/git/dir"),c.setValue(n.localStorage.getEnvVars().join(`
`)),c.onChange(u=>{n.localStorage.setEnvVars(u.split(`
`))})}),n.gitManager instanceof _e&&new j.Setting(r).setName("Additional PATH environment variable paths").setDesc("Use each line for one path").addTextArea(c=>{c.setValue(n.localStorage.getPATHPaths().join(`
`)),c.onChange(u=>{n.localStorage.setPATHPaths(u.split(`
`))})}),n.gitManager instanceof _e&&new j.Setting(r).setName("Reload with new environment variables").setDesc("Removing previously added environment variables will not take effect until Obsidian is restarted.").addButton(c=>{c.setButtonText("Reload"),c.setCta(),c.onClick(async()=>{await n.gitManager.setGitInstance()})}),new j.Setting(r).setName("Custom base path (Git repository path)").setDesc(`
            Sets the relative path to the vault from which the Git binary should be executed.
             Mostly used to set the path to the Git repository, which is only required if the Git repository is below the vault root directory. Use "\\" instead of "/" on Windows.
            `).addText(c=>{c.setValue(n.settings.basePath),c.setPlaceholder("directory/directory-with-git-repo"),c.onChange(async u=>{n.settings.basePath=u,await n.saveSettings(),n.gitManager.updateBasePath(u||"").catch(f=>n.displayError(f))})}),new j.Setting(r).setName("Custom Git directory path (Instead of '.git')").setDesc('Requires restart of Obsidian to take effect. Use "\\" instead of "/" on Windows.').addText(c=>{c.setValue(n.settings.gitDir),c.setPlaceholder(".git"),c.onChange(async u=>{n.settings.gitDir=u,await n.saveSettings()})}),new j.Setting(r).setName("Disable on this device").setDesc("Disables the plugin on this device. This setting is not synced.").addToggle(c=>c.setValue(n.localStorage.getPluginDisabled()).onChange(u=>{n.localStorage.setPluginDisabled(u),u?n.unloadPlugin():n.init({fromReload:!0}).catch(f=>n.displayError(f)),new j.Notice("Obsidian must be restarted for the changes to take affect.")})),new j.Setting(r).setName("Support").setHeading(),new j.Setting(r).setName("Donate").setDesc("If you like this Plugin, consider donating to support continued development.").addButton(c=>{c.buttonEl.outerHTML="<a href='https://ko-fi.com/F1F195IQ5' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://cdn.ko-fi.com/cdn/kofi3.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>"});let o=r.createDiv();o.setAttr("align","center"),o.setAttr("style","margin: var(--size-4-2)");let l=o.createEl("button");if(l.setText("Copy Debug Information"),l.onclick=async()=>{await window.navigator.clipboard.writeText(JSON.stringify({settings:this.plugin.settings,pluginVersion:this.plugin.manifest.version},null,4)),new j.Notice("Debug information copied to clipboard. May contain sensitive information!")},j.Platform.isDesktopApp){let c=r.createDiv();c.setAttr("align","center"),c.setText(`Debugging and logging:
You can always see the logs of this and every other plugin by opening the console with`);let u=r.createDiv();u.setAttr("align","center"),u.addClass("obsidian-git-shortcuts"),j.Platform.isMacOS===!0?u.createEl("kbd",{text:"CMD (\u2318) + OPTION (\u2325) + I"}):u.createEl("kbd",{text:"CTRL + SHIFT + I"})}}mayDisableSetting(r,n){n&&(r.setDisabled(n),r.setClass("obsidian-git-disabled"))}configureLineAuthorShowStatus(r){this.settings.lineAuthor.show=r,this.plugin.saveSettings(),r?this.plugin.editorIntegration.activateLineAuthoring():this.plugin.editorIntegration.deactiveLineAuthoring()}async lineAuthorSettingHandler(r,n){this.settings.lineAuthor[r]=n,await this.plugin.saveSettings(),this.plugin.editorIntegration.lineAuthoringFeature.refreshLineAuthorViews()}beforeSaveSettings(){let r=this.settings.lineAuthor;r.authorDisplay!=="hide"&&(r.lastShownAuthorDisplay=r.authorDisplay),r.dateTimeFormatOptions!=="hide"&&(r.lastShownDateTimeFormatOptions=r.dateTimeFormatOptions)}addLineAuthorInfoSettings(){let r=new j.Setting(this.containerEl).setName("Show commit authoring information next to each line");if(this.plugin.editorIntegration.lineAuthoringFeature.isAvailableOnCurrentPlatform()||r.setDesc("Only available on desktop currently.").setDisabled(!0),r.descEl.innerHTML=`
            <a href="${Yq}">Feature guide and quick examples</a></br>
            The commit hash, author name and authoring date can all be individually toggled.</br>Hide everything, to only show the age-colored sidebar.`,r.addToggle(n=>n.setValue(this.settings.lineAuthor.show).onChange(i=>{this.configureLineAuthorShowStatus(i),this.refreshDisplayWithDelay()})),this.settings.lineAuthor.show){let n=new j.Setting(this.containerEl).setName("Follow movement and copies across files and commits").setDesc("").addDropdown(a=>{a.addOptions({inactive:"Do not follow (default)","same-commit":"Follow within same commit","all-commits":"Follow within all commits (maybe slow)"}),a.setValue(this.settings.lineAuthor.followMovement),a.onChange(s=>this.lineAuthorSettingHandler("followMovement",s))});if(n.descEl.innerHTML=`
                By default (deactivated), each line only shows the newest commit where it was changed.
                <br/>
                With <i>same commit</i>, cut-copy-paste-ing of text is followed within the same commit and the original commit of authoring will be shown.
                <br/>
                With <i>all commits</i>, cut-copy-paste-ing text inbetween multiple commits will be detected.
                <br/>
                It uses <a href="https://git-scm.com/docs/git-blame">git-blame</a> and
                for matches (at least ${Qf} characters) within the same (or all) commit(s), <em>the originating</em> commit's information is shown.`,new j.Setting(this.containerEl).setName("Show commit hash").addToggle(a=>{a.setValue(this.settings.lineAuthor.showCommitHash),a.onChange(s=>this.lineAuthorSettingHandler("showCommitHash",s))}),new j.Setting(this.containerEl).setName("Author name display").setDesc("If and how the author is displayed").addDropdown(a=>{let s={hide:"Hide",initials:"Initials (default)","first name":"First name","last name":"Last name",full:"Full name"};a.addOptions(s),a.setValue(this.settings.lineAuthor.authorDisplay),a.onChange(async o=>this.lineAuthorSettingHandler("authorDisplay",o))}),new j.Setting(this.containerEl).setName("Authoring date display").setDesc("If and how the date and time of authoring the line is displayed").addDropdown(a=>{let s={hide:"Hide",date:"Date (default)",datetime:"Date and time","natural language":"Natural language",custom:"Custom"};a.addOptions(s),a.setValue(this.settings.lineAuthor.dateTimeFormatOptions),a.onChange(async o=>{await this.lineAuthorSettingHandler("dateTimeFormatOptions",o),this.refreshDisplayWithDelay()})}),this.settings.lineAuthor.dateTimeFormatOptions==="custom"){let a=new j.Setting(this.containerEl);a.setName("Custom authoring date format").addText(s=>{s.setValue(this.settings.lineAuthor.dateTimeFormatCustomString),s.setPlaceholder("YYYY-MM-DD HH:mm"),s.onChange(async o=>{await this.lineAuthorSettingHandler("dateTimeFormatCustomString",o),a.descEl.innerHTML=this.previewCustomDateTimeDescriptionHtml(o)})}),a.descEl.innerHTML=this.previewCustomDateTimeDescriptionHtml(this.settings.lineAuthor.dateTimeFormatCustomString)}new j.Setting(this.containerEl).setName("Authoring date display timezone").addDropdown(a=>{let s={"viewer-local":"My local (default)","author-local":"Author's local",utc0000:"UTC+0000/Z"};a.addOptions(s),a.setValue(this.settings.lineAuthor.dateTimeTimezone),a.onChange(async o=>this.lineAuthorSettingHandler("dateTimeTimezone",o))}).descEl.innerHTML=`
                    The time-zone in which the authoring date should be shown.
                    Either your local time-zone (default),
                    the author's time-zone during commit creation or
                    <a href="https://en.wikipedia.org/wiki/UTC%C2%B100:00">UTC\xB100:00</a>.
            `;let i=new j.Setting(this.containerEl).setName("Oldest age in coloring");i.descEl.innerHTML=this.previewOldestAgeDescriptionHtml(this.settings.lineAuthor.coloringMaxAge)[0],i.addText(a=>{a.setPlaceholder("1y"),a.setValue(this.settings.lineAuthor.coloringMaxAge),a.onChange(async s=>{let[o,l]=this.previewOldestAgeDescriptionHtml(s);i.descEl.innerHTML=o,l&&(await this.lineAuthorSettingHandler("coloringMaxAge",s),this.refreshColorSettingsName("oldest"))})}),this.createColorSetting("newest"),this.createColorSetting("oldest"),new j.Setting(this.containerEl).setName("Text color").addText(a=>{a.setValue(this.settings.lineAuthor.textColorCss),a.onChange(async s=>{await this.lineAuthorSettingHandler("textColorCss",s)})}).descEl.innerHTML=`
                    The CSS color of the gutter text.<br/>

                    It is highly recommended to use
                    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">
                    CSS variables</a>
                    defined by themes
                    (e.g. <pre style="display:inline">var(--text-muted)</pre> or
                    <pre style="display:inline">var(--text-on-accent)</pre>,
                    because they automatically adapt to theme changes.<br/>

                    See: <a href="https://github.com/obsidian-community/obsidian-theme-template/blob/main/obsidian.css">
                    List of available CSS variables in Obsidian
                    <a/>
                `,new j.Setting(this.containerEl).setName("Ignore whitespace and newlines in changes").addToggle(a=>{a.setValue(this.settings.lineAuthor.ignoreWhitespace),a.onChange(s=>this.lineAuthorSettingHandler("ignoreWhitespace",s))}).descEl.innerHTML=`
                    Whitespace and newlines are interpreted as
                    part of the document and in changes
                    by default (hence not ignored).
                    This makes the last line being shown as 'changed'
                    when a new subsequent line is added,
                    even if the previously last line's text is the same.
                    <br>
                    If you don't care about purely-whitespace changes
                    (e.g. list nesting / quote indentation changes),
                    then activating this will provide more meaningful change detection.
                `}}createColorSetting(r){let n=new j.Setting(this.containerEl).setName("").addText(i=>{let a=e0(r,this.settings.lineAuthor),s=e0(r,Xe.lineAuthor);i.setPlaceholder(Xv(s)),i.setValue(Xv(a)),i.onChange(async o=>{let l=z2(o);if(l!==void 0){let c=r==="newest"?"colorNew":"colorOld";await this.lineAuthorSettingHandler(c,l)}this.refreshColorSettingsDesc(r,l)})});this.lineAuthorColorSettings.set(r,n),this.refreshColorSettingsName(r),this.refreshColorSettingsDesc(r,e0(r,this.settings.lineAuthor))}refreshColorSettingsName(r){let n=this.lineAuthorColorSettings.get(r);if(n){let i=r==="oldest"?`oldest (${this.settings.lineAuthor.coloringMaxAge} or older)`:"newest";n.nameEl.innerText=`Color for ${i} commits`}}refreshColorSettingsDesc(r,n){let i=this.lineAuthorColorSettings.get(r);i&&(i.descEl.innerHTML=this.colorSettingPreviewDescHtml(r,this.settings.lineAuthor,n!==void 0))}colorSettingPreviewDescHtml(r,n,i){let a=i?dh(r,n):"rgba(127,127,127,0.3)",s=j.moment.unix(j.moment.now()/1e3).format("YYYY-MM-DD"),o=i?`abcdef Author Name ${s}`:"invalid color";return`Supports 'rgb(r,g,b)', 'hsl(h,s,l)', hex (#) and
            named colors (e.g. 'black', 'purple'). Color preview: ${`<div
            class="line-author-settings-preview"
            style="background-color: ${a}; width: 30ch;"
            >${o}</div>`}`}previewCustomDateTimeDescriptionHtml(r){let n=(0,j.moment)().format(r);return`<a href="${Wq}">Format string</a> to display the authoring date.</br>Currently: ${n}`}previewOldestAgeDescriptionHtml(r){let n=rh(r);return[`The oldest age in the line author coloring. Everything older will have the same color.
            </br>Smallest valid age is "1d". Currently: ${n!==void 0?`${n.asDays()} days`:"invalid!"}`,n]}setNonDefaultValue({settingsProperty:r,text:n}){let i=this.plugin.settings[r];Xe[r]!==i&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean"?n.setValue(String(i)):n.setValue(JSON.stringify(i)))}refreshDisplayWithDelay(r=80){setTimeout(()=>this.display(),r)}};function e0(t,e){return t==="oldest"?e.colorOld:e.colorNew}function rh(t){let e=j.moment.duration("P"+t.toUpperCase());return e.isValid()&&e.asDays()&&e.asDays()>=1?e:void 0}p();var Dr=require("obsidian");var gh=class{constructor(e,r){this.statusBarEl=e;this.plugin=r;this.messages=[];this.base="obsidian-git-statusbar-";this.statusBarEl.setAttribute("data-tooltip-position","top"),r.registerEvent(r.app.workspace.on("obsidian-git:refreshed",()=>{this.refreshCommitTimestamp().catch(console.error)}))}displayMessage(e,r){this.messages.push({message:`Git: ${e.slice(0,100)}`,timeout:r}),this.display()}display(){this.messages.length>0&&!this.currentMessage?(this.currentMessage=this.messages.shift(),this.statusBarEl.addClass(this.base+"message"),this.statusBarEl.ariaLabel="",this.statusBarEl.setText(this.currentMessage.message),this.lastMessageTimestamp=Date.now()):this.currentMessage?Date.now()-this.lastMessageTimestamp>=this.currentMessage.timeout&&(this.currentMessage=null,this.lastMessageTimestamp=null):this.displayState()}displayState(){switch((this.statusBarEl.getText().length>3||!this.statusBarEl.hasChildNodes())&&(this.statusBarEl.empty(),this.conflictEl=this.statusBarEl.createDiv(),this.conflictEl.setAttribute("data-tooltip-position","top"),this.conflictEl.style.float="left",this.pausedEl=this.statusBarEl.createDiv(),this.pausedEl.setAttribute("data-tooltip-position","top"),this.pausedEl.style.float="left",this.iconEl=this.statusBarEl.createDiv(),this.iconEl.style.float="left",this.textEl=this.statusBarEl.createDiv(),this.textEl.style.float="right",this.textEl.style.marginLeft="5px"),this.plugin.localStorage.getConflict()?((0,Dr.setIcon)(this.conflictEl,"alert-circle"),this.conflictEl.ariaLabel="You have merge conflicts. Resolve them and commit afterwards.",this.conflictEl.style.marginRight="5px",this.conflictEl.addClass(this.base+"conflict")):(this.conflictEl.empty(),this.conflictEl.style.marginRight=""),this.plugin.localStorage.getPausedAutomatics()?((0,Dr.setIcon)(this.pausedEl,"pause-circle"),this.pausedEl.ariaLabel="Automatic routines are currently paused.",this.pausedEl.style.marginRight="5px",this.pausedEl.addClass(this.base+"paused")):(this.pausedEl.empty(),this.pausedEl.style.marginRight=""),this.plugin.state.gitAction){case 0:this.displayFromNow();break;case 1:this.statusBarEl.ariaLabel="Checking repository status...",(0,Dr.setIcon)(this.iconEl,"refresh-cw"),this.statusBarEl.addClass(this.base+"status");break;case 3:this.statusBarEl.ariaLabel="Adding files...",(0,Dr.setIcon)(this.iconEl,"archive"),this.statusBarEl.addClass(this.base+"add");break;case 4:this.statusBarEl.ariaLabel="Committing changes...",(0,Dr.setIcon)(this.iconEl,"git-commit"),this.statusBarEl.addClass(this.base+"commit");break;case 5:this.statusBarEl.ariaLabel="Pushing changes...",(0,Dr.setIcon)(this.iconEl,"upload"),this.statusBarEl.addClass(this.base+"push");break;case 2:this.statusBarEl.ariaLabel="Pulling changes...",(0,Dr.setIcon)(this.iconEl,"download"),this.statusBarEl.addClass(this.base+"pull");break;default:this.statusBarEl.ariaLabel="Failed on initialization!",(0,Dr.setIcon)(this.iconEl,"alert-triangle"),this.statusBarEl.addClass(this.base+"failed-init");break}}displayFromNow(){var n;let e=this.lastCommitTimestamp,r=this.plugin.state.offlineMode;if(e){let i=(0,Dr.moment)(e).fromNow();this.statusBarEl.ariaLabel=`${r?"Offline: ":""}Last Commit: ${i}`,(n=this.unPushedCommits)!=null&&n&&(this.statusBarEl.ariaLabel+=`
(${this.unPushedCommits} unpushed commits)`)}else this.statusBarEl.ariaLabel=r?"Git is offline":"Git is ready";r?(0,Dr.setIcon)(this.iconEl,"globe"):(0,Dr.setIcon)(this.iconEl,"check"),this.plugin.settings.changedFilesInStatusBar&&this.plugin.cachedStatus&&this.textEl.setText(this.plugin.cachedStatus.changed.length.toString()),this.statusBarEl.addClass(this.base+"idle")}async refreshCommitTimestamp(){this.lastCommitTimestamp=await this.plugin.gitManager.getLastCommitTime(),this.unPushedCommits=await this.plugin.gitManager.getUnpushedCommits()}remove(){this.statusBarEl.remove()}};p();var wh=require("obsidian"),vh=class extends wh.SuggestModal{constructor(r){super(r.app);this.plugin=r;this.resolve=null;this.setPlaceholder("Type your message and select optional the version with the added date.")}openAndGetResult(){return new Promise(r=>{this.resolve=r,this.open()})}onClose(){new Promise(r=>setTimeout(r,10)).then(()=>{this.resolve&&this.resolve(void 0)})}getSuggestions(r){let n=(0,wh.moment)().format(this.plugin.settings.commitDateFormat);return r==""&&(r="..."),[r,`${n}: ${r}`,`${r}: ${n}`]}renderSuggestion(r,n){n.innerText=r}onChooseSuggestion(r,n){this.resolve&&this.resolve(r)}};p();var v$=require("obsidian"),Wc=class{constructor(e){this.plugin=e}saveLastAuto(e,r){r==="backup"?this.plugin.localStorage.setLastAutoBackup(e.toString()):r==="pull"?this.plugin.localStorage.setLastAutoPull(e.toString()):r==="push"&&this.plugin.localStorage.setLastAutoPush(e.toString())}loadLastAuto(){var e,r,n;return{backup:new Date((e=this.plugin.localStorage.getLastAutoBackup())!=null?e:""),pull:new Date((r=this.plugin.localStorage.getLastAutoPull())!=null?r:""),push:new Date((n=this.plugin.localStorage.getLastAutoPush())!=null?n:"")}}async init(){await this.setUpAutoCommitAndSync();let e=this.loadLastAuto();if(this.plugin.settings.differentIntervalCommitAndPush&&this.plugin.settings.autoPushInterval>0){let r=this.diff(this.plugin.settings.autoPushInterval,e.push);this.startAutoPush(r)}if(this.plugin.settings.autoPullInterval>0){let r=this.diff(this.plugin.settings.autoPullInterval,e.pull);this.startAutoPull(r)}}unload(){this.clearAutoPull(),this.clearAutoPush(),this.clearAutoCommitAndSync()}reload(...e){this.plugin.localStorage.getPausedAutomatics()||(e.contains("commit")&&(this.clearAutoCommitAndSync(),this.plugin.settings.autoSaveInterval>0&&this.startAutoCommitAndSync(this.plugin.settings.autoSaveInterval)),e.contains("push")&&(this.clearAutoPush(),this.plugin.settings.differentIntervalCommitAndPush&&this.plugin.settings.autoPushInterval>0&&this.startAutoPush(this.plugin.settings.autoPushInterval)),e.contains("pull")&&(this.clearAutoPull(),this.plugin.settings.autoPullInterval>0&&this.startAutoPull(this.plugin.settings.autoPullInterval)))}async setUpAutoCommitAndSync(){if(this.plugin.settings.setLastSaveToLastCommit){this.clearAutoCommitAndSync();let e=await this.plugin.gitManager.getLastCommitTime();e&&this.saveLastAuto(e,"backup")}if(!this.timeoutIDCommitAndSync&&!this.plugin.autoCommitDebouncer){let e=this.loadLastAuto();if(this.plugin.settings.autoSaveInterval>0){let r=this.diff(this.plugin.settings.autoSaveInterval,e.backup);this.startAutoCommitAndSync(r)}}}startAutoCommitAndSync(e){let r=(e!=null?e:this.plugin.settings.autoSaveInterval)*6e4;this.plugin.settings.autoBackupAfterFileChange?e===0?this.doAutoCommitAndSync():this.plugin.autoCommitDebouncer=(0,v$.debounce)(()=>this.doAutoCommitAndSync(),r,!0):(r>2147483647&&(r=2147483647),this.timeoutIDCommitAndSync=window.setTimeout(()=>this.doAutoCommitAndSync(),r))}doAutoCommitAndSync(){this.plugin.promiseQueue.addTask(async()=>{if(this.plugin.settings.setLastSaveToLastCommit){let r=await this.plugin.gitManager.getLastCommitTime();if(r){this.saveLastAuto(r,"backup");let n=this.diff(this.plugin.settings.autoSaveInterval,r);if(n>0)return this.startAutoCommitAndSync(n),!1}}let e=this.plugin.settings.autoCommitOnlyStaged;return this.plugin.settings.differentIntervalCommitAndPush?await this.plugin.commit({fromAuto:!0,onlyStaged:e}):await this.plugin.commitAndSync({fromAutoBackup:!0,onlyStaged:e}),!0},e=>{e!==!1&&(this.saveLastAuto(new Date,"backup"),this.startAutoCommitAndSync())})}startAutoPull(e){let r=(e!=null?e:this.plugin.settings.autoPullInterval)*6e4;r>2147483647&&(r=2147483647),this.timeoutIDPull=window.setTimeout(()=>this.doAutoPull(),r)}doAutoPull(){this.plugin.promiseQueue.addTask(()=>this.plugin.pullChangesFromRemote(),()=>{this.saveLastAuto(new Date,"pull"),this.startAutoPull()})}startAutoPush(e){let r=(e!=null?e:this.plugin.settings.autoPushInterval)*6e4;r>2147483647&&(r=2147483647),this.timeoutIDPush=window.setTimeout(()=>this.doAutoPush(),r)}doAutoPush(){this.plugin.promiseQueue.addTask(()=>this.plugin.push(),()=>{this.saveLastAuto(new Date,"push"),this.startAutoPush()})}clearAutoCommitAndSync(){var r;let e=!1;return this.timeoutIDCommitAndSync&&(window.clearTimeout(this.timeoutIDCommitAndSync),this.timeoutIDCommitAndSync=void 0,e=!0),this.plugin.autoCommitDebouncer&&((r=this.plugin.autoCommitDebouncer)==null||r.cancel(),this.plugin.autoCommitDebouncer=void 0,e=!0),e}clearAutoPull(){return this.timeoutIDPull?(window.clearTimeout(this.timeoutIDPull),this.timeoutIDPull=void 0,!0):!1}clearAutoPush(){return this.timeoutIDPush?(window.clearTimeout(this.timeoutIDPush),this.timeoutIDPush=void 0,!0):!1}diff(e,r){let i=e-Math.round((new Date().getTime()-r.getTime())/1e3/60);return Math.max(0,i)}};p();var kn=require("obsidian");p();var Yc=require("obsidian");async function w$(t,e,r){let n=await b$(e,r);if(n.result==="failure"){new Yc.Notice(n.reason);return}let{isGitHub:i,branch:a,repo:s,user:o,filePath:l}=n;if(i){let c=t.getCursor("from").line+1,u=t.getCursor("to").line+1;c===u?window.open(`https://github.com/${o}/${s}/blob/${a}/${l}?plain=1#L${c}`):window.open(`https://github.com/${o}/${s}/blob/${a}/${l}?plain=1#L${c}-L${u}`)}else new Yc.Notice("It seems like you are not using GitHub")}async function y$(t,e){let r=await b$(t,e);if(r.result==="failure"){new Yc.Notice(r.reason);return}let{isGitHub:n,branch:i,repo:a,user:s,filePath:o}=r;n?window.open(`https://github.com/${s}/${a}/commits/${i}/${o}`):new Yc.Notice("It seems like you are not using GitHub")}async function b$(t,e){let r=await e.branchInfo(),n=r.tracking,i=r.current,a,s=e.getRelativeRepoPath(t.path);if(e instanceof _e){let l=await e.getSubmoduleOfFile(e.getRelativeRepoPath(t.path));if(l){s=l.relativeFilepath;let c=await e.git.cwd({path:l.submodule,root:!1}).status();if(n=c.tracking||void 0,i=c.current||void 0,n){let u=n.substring(0,n.indexOf("/")),f=await e.git.cwd({path:l.submodule,root:!1}).getConfig(`remote.${u}.url`,"local");if(f.value!=null)a=f.value;else return{result:"failure",reason:"Failed to get remote url of submodule"}}}}if(n==null)return{result:"failure",reason:"Remote branch is not configured"};if(i==null)return{result:"failure",reason:"Failed to get current branch name"};if(a==null){let l=n.substring(0,n.indexOf("/"));if(a=await e.getConfig(`remote.${l}.url`),a==null)return{result:"failure",reason:"Failed to get remote url"}}let o=a.match(/(?:^https:\/\/github\.com\/(.+)\/(.+?)(?:\.git)?$)|(?:^[a-zA-Z]+@github\.com:(.+)\/(.+?)(?:\.git)?$)/);if(o==null)return{result:"failure",reason:"Could not parse remote url"};{let[l,c,u,f,d]=o;return{result:"success",isGitHub:!!l,repo:u||d,user:c||f,branch:i,filePath:s}}}p();var _$=require("obsidian"),yh=class extends _$.FuzzySuggestModal{constructor(e,r){super(e.app),this.plugin=e,this.changedFiles=r,this.setPlaceholder("Not supported files will be opened by default app!")}getItems(){return this.changedFiles}getItemText(e){if(e.index=="U"&&e.workingDir=="U")return`Untracked | ${e.vaultPath}`;let r="",n="";return e.workingDir!=" "&&(r=`Working Dir: ${e.workingDir} `),e.index!=" "&&(n=`Index: ${e.index}`),`${r}${n} | ${e.vaultPath}`}onChooseItem(e,r){this.plugin.app.metadataCache.getFirstLinkpathDest(e.vaultPath,"")==null?this.app.openWithDefaultApp(e.vaultPath):this.plugin.app.workspace.openLinkText(e.vaultPath,"/")}};p();var x$=require("obsidian"),bh=class extends x$.Modal{constructor(r,n){super(r);this.content=n;this.resolve=null}openAndGetReslt(){return new Promise(r=>{this.resolve=r,this.open()})}onOpen(){let{contentEl:r,titleEl:n}=this;n.setText("Edit .gitignore");let i=r.createDiv(),a=i.createEl("textarea",{text:this.content,cls:["obsidian-git-textarea"],attr:{rows:10,cols:30,wrap:"off"}});i.createEl("button",{cls:["mod-cta","obsidian-git-center-button"],text:"Save"}).addEventListener("click",()=>{this.resolve(a.value),this.close()})}onClose(){let{contentEl:r}=this;r.empty(),this.resolve&&this.resolve(void 0)}};p();var au=require("@codemirror/state"),Bh=require("@codemirror/view");p();var Rh=require("@codemirror/state");p();var St=class t{static createHunk(e,r,n,i){return{removed:{start:e,count:r,lines:[]},added:{start:n,count:i,lines:[]},head:`@@ -${e}${r>0?`,${r}`:""} +${n}${i>0?`,${i}`:""} @@`,vend:n+Math.max(i-1,0),type:i===0?"delete":r===0?"add":"change"}}static createPartialHunk(e,r,n){let i=r,a=n-r+1,s=0;for(let o of e){let l=o.added.count-o.removed.count,c=0;if(o.added.start>=r&&o.vend<=n)c=l;else{let u=Math.max(0,n+1-(o.added.start+o.removed.count)),f=Math.max(0,r-(o.added.start+o.removed.count));o.added.start>=r&&o.added.start<=n?c=u:o.vend>=r&&o.vend<=n?(c=l-f,i=i-f):o.added.start<=r&&o.vend>=n?(c=u-f,i=i-f):s++,r>o.vend&&(i=i-l)}a=a-c}if(s!==e.length)return a===0&&(i=i-1),this.createHunk(i,a,r,n-r+1)}patchLines(e,r=!1){let n=[];for(let i of e.removed.lines)n.push("-"+i);for(let i of e.added.lines)n.push("+"+i);return r?n.map(i=>i.replace(/\r$/,"")):n}static parseDiffLine(e){let i=e.split("@@")[1].trim().split(" "),a=i[0].substring(1).split(","),s=i[1].substring(1).split(","),o=this.createHunk(parseInt(a[0]),parseInt(a[1]||"1"),parseInt(s[0]),parseInt(s[1]||"1"));return o.head=e,o}static changeEnd(e){return e.added.count===0?e.added.start:e.removed.count===0?e.added.start+e.added.count-1:e.added.start+Math.min(e.added.count,e.removed.count)-1}static calcSigns(e,r,n,i=1,a=1/0,s){if(s&&r.type!=="add")return console.error(`Invalid hunk with untracked=${s} hunk="${r.head}"`),[];i=Math.max(1,i);let{start:o,added:l,removed:c}={start:r.added.start,added:r.added.count,removed:r.removed.count},u=this.changeEnd(r),f=r.type==="delete"&&(o===0||e&&this.changeEnd(e)===o)&&(!n||n.added.start!==o+1);f&&i===1&&(i=0);let d=[];for(let h=Math.max(o,i);h<=Math.min(u,a);h++){let m=r.type==="change"&&(c>l&&h===u||e&&e.added.start===0);d.push({type:f?"topdelete":m?"changedelete":s?"untracked":r.type,count:h===o?r.type==="add"?l:c:void 0,lnum:h+(f?1:0)})}if(r.type==="change"&&l>c&&r.vend>=i&&u<=a)for(let h=Math.max(u,i);h<=Math.min(r.vend,a);h++)d.push({type:"add",count:h===r.vend?l-c:void 0,lnum:h});return d}static createPatch(e,r,n,i=!1){let a=[`diff --git a/${e} b/${e}`,`index 000000..000000 ${n}`,`--- a/${e}`,`+++ b/${e}`],s=0;r=structuredClone(r);for(let o of r){let l=o.removed.start,c=o.removed.count,u=o.added.count;o.type==="add"&&(l=l+1);let f=o.removed.lines,d=o.added.lines;i&&([c,u]=[u,c],[f,d]=[d,f]),a.push(`@@ -${l},${c} +${l+s},${u} @@`);for(let h of f)a.push("-"+h);(i?o.added:o.removed).no_nl_at_eof&&a.push("\\ No newline at end of file");for(let h of d)a.push("+"+h);(i?o.removed:o.added).no_nl_at_eof&&a.push("\\ No newline at end of file"),o.removed.start=l+s,s=s+(u-c)}return a}getSummary(e){let r={added:0,changed:0,removed:0};for(let n of e)if(n.type==="add")r.added+=n.added.count;else if(n.type==="delete")r.removed+=n.removed.count;else if(n.type==="change"){let i=n.added.count,a=n.removed.count,s=Math.min(i,a);r.changed+=s,r.added+=i-s,r.removed+=a-s}return r}static findHunk(e,r){if(!r)return[void 0,void 0];for(let n=0;n<r.length;n++){let i=r[n];if(e===1&&i.added.start===0&&i.vend===0)return[i,n];if(i.added.start<=e&&i.vend>=e)return[i,n]}return[void 0,void 0]}static findNearestHunk(e,r,n,i){if(r.length!==0){if(n==="first")return 0;if(n==="last")return r.length-1;if(n==="next"){if(r[0].added.start>e)return 0;for(let a=r.length-1;a>=0;a--)if(r[a].added.start<=e){if(a+1<r.length&&r[a+1].added.start>e)return a+1;if(i)return 0}}else if(n==="prev"){if(Math.max(r[r.length-1].vend)<e)return r.length-1;for(let a=0;a<r.length;a++)if(e<=Math.max(r[a].vend,1)){if(a>0&&Math.max(r[a-1].vend,1)<e)return a-1;if(i)return r.length-1}}}}compareHeads(e,r){if(e===void 0!=(r===void 0))return!0;if(e&&r&&e.length!==r.length)return!0;for(let n=0;n<(e||[]).length;n++)if(r[n].head!==e[n].head)return!0;return!1}static compare(e,r){if(e.added.start!==r.added.start||e.added.count!==r.added.count)return!1;for(let n=0;n<e.added.count;n++)if(e.added.lines[n]!==r.added.lines[n])return!1;return!0}static filterCommon(e,r){if(!e&&!r)return;e=e||[],r=r||[];let n=0,i=0,a=[];for(let s=0;s<Math.max(e.length,r.length)+1;s++){let o=e[n],l=r[i];if(!o)break;if(!l){for(let c=n;c<e.length;c++)a.push(e[c]);break}o.added.start>l.added.start?i++:o.added.start<l.added.start?(a.push(o),n++):(this.compare(o,l)||a.push(o),n++,i++)}return a}static computeStagedHunks(e,r,n){return t.filterCommon(e,r)}linespecForHunk(e,r=!1){let n=[],i=e.removed.lines,a=e.added.lines;r&&(i=i.map(s=>s.replace(/\r$/,"")),a=a.map(s=>s.replace(/\r$/,"")));for(let s of[{sym:"-",lines:i,hl:"GitSignsDeletePreview"},{sym:"+",lines:a,hl:"GitSignsAddPreview"}])for(let o of s.lines){let l={start_row:0,hl_group:s.hl,end_row:1};n.push([[s.sym+o,[l]]])}return n}};p();p();var $e=require("@codemirror/view"),Te=require("@codemirror/state");p();var t0="\u037C",S$=typeof Symbol=="undefined"?"__"+t0:Symbol.for(t0),r0=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),E$=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{},_h=class{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function a(s,o,l,c){let u=[],f=/^@(\w+)\b/.exec(s[0]),d=f&&f[1]=="keyframes";if(f&&o==null)return l.push(s[0]+";");for(let h in o){let m=o[h];if(/&/.test(h))a(h.split(/,\s*/).map(g=>s.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),m,l);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");a(i(h),m,u,d)}else m!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||d)&&l.push((n&&!f&&!c?s.map(n):s).join(", ")+" {"+u.join(" ")+"}")}for(let s in e)a(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=E$[S$]||1;return E$[S$]=e+1,t0+e.toString(36)}static mount(e,r,n){let i=e[r0],a=n&&n.nonce;i?a&&i.setNonce(a):i=new n0(e,a),i.mount(Array.isArray(r)?r:[r],e)}},k$=new Map,n0=class{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=k$.get(n);if(a)return e[r0]=a;this.sheet=new i.CSSStyleSheet,k$.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[r0]=this}mount(e,r){let n=this.sheet,i=0,a=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,o),n)for(let c=0;c<o.rules.length;c++)n.insertRule(o.rules[c],i++)}else{for(;a<l;)i+=this.modules[a++].rules.length;i+=o.rules.length,a++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let s="";for(let l=0;l<this.modules.length;l++)s+=this.modules[l].getRules()+`
`;this.styleTag.textContent=s;let o=r.head||r;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var G$=require("@codemirror/language"),Xq=require("@lezer/highlight"),ht=class t{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}offset(e,r=e){return new t(this.fromA+e,this.toA+e,this.fromB+r,this.toB+r)}};function ds(t,e,r,n,i,a){if(t==n)return[];let s=f0(t,e,r,n,i,a),o=d0(t,e+s,r,n,i+s,a);e+=s,r-=o,i+=s,a-=o;let l=r-e,c=a-i;if(!l||!c)return[new ht(e,r,i,a)];if(l>c){let f=t.slice(e,r).indexOf(n.slice(i,a));if(f>-1)return[new ht(e,e+f,i,i),new ht(e+f+c,r,a,a)]}else if(c>l){let f=n.slice(i,a).indexOf(t.slice(e,r));if(f>-1)return[new ht(e,e,i,i+f),new ht(r,r,i+f+l,a)]}if(l==1||c==1)return[new ht(e,r,i,a)];let u=z$(t,e,r,n,i,a);if(u){let[f,d,h]=u;return ds(t,e,f,n,i,d).concat(ds(t,f+h,r,n,d+h,a))}return Zq(t,e,r,n,i,a)}var Xc=1e9,Zc=0,u0=!1;function Zq(t,e,r,n,i,a){let s=r-e,o=a-i;if(Xc<1e9&&Math.min(s,o)>Xc*16||Zc>0&&Date.now()>Zc)return Math.min(s,o)>Xc*64?[new ht(e,r,i,a)]:A$(t,e,r,n,i,a);let l=Math.ceil((s+o)/2);i0.reset(l),a0.reset(l);let c=(h,m)=>t.charCodeAt(e+h)==n.charCodeAt(i+m),u=(h,m)=>t.charCodeAt(r-h-1)==n.charCodeAt(a-m-1),f=(s-o)%2!=0?a0:null,d=f?null:i0;for(let h=0;h<l;h++){if(h>Xc||Zc>0&&!(h&63)&&Date.now()>Zc)return A$(t,e,r,n,i,a);let m=i0.advance(h,s,o,l,f,!1,c)||a0.advance(h,s,o,l,d,!0,u);if(m)return Kq(t,e,r,e+m[0],n,i,a,i+m[1])}return[new ht(e,r,i,a)]}var Ah=class{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let r=0;r<this.len;r++)this.vec[r]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,r,n,i,a,s,o){for(let l=-e+this.start;l<=e-this.end;l+=2){let c=i+l,u=l==-e||l!=e&&this.vec[c-1]<this.vec[c+1]?this.vec[c+1]:this.vec[c-1]+1,f=u-l;for(;u<r&&f<n&&o(u,f);)u++,f++;if(this.vec[c]=u,u>r)this.end+=2;else if(f>n)this.start+=2;else if(a){let d=i+(r-n)-l;if(d>=0&&d<this.len&&a.vec[d]!=-1)if(s){let h=a.vec[d];if(h>=r-u)return[h,i+h-d]}else{let h=r-a.vec[d];if(u>=h)return[u,f]}}}return null}},i0=new Ah,a0=new Ah;function Kq(t,e,r,n,i,a,s,o){let l=!1;return!Ko(t,n)&&++n==r&&(l=!0),!Ko(i,o)&&++o==s&&(l=!0),l?[new ht(e,r,a,s)]:ds(t,e,n,i,a,o).concat(ds(t,n,r,i,o,s))}function q$(t,e){let r=1,n=Math.min(t,e);for(;r<n;)r=r<<1;return r}function f0(t,e,r,n,i,a){if(e==r||e==a||t.charCodeAt(e)!=n.charCodeAt(i))return 0;let s=q$(r-e,a-i);for(let o=e,l=i;;){let c=o+s,u=l+s;if(c>r||u>a||t.slice(o,c)!=n.slice(l,u)){if(s==1)return o-e-(Ko(t,o)?0:1);s=s>>1}else{if(c==r||u==a)return c-e;o=c,l=u}}}function d0(t,e,r,n,i,a){if(e==r||i==a||t.charCodeAt(r-1)!=n.charCodeAt(a-1))return 0;let s=q$(r-e,a-i);for(let o=r,l=a;;){let c=o-s,u=l-s;if(c<e||u<i||t.slice(c,o)!=n.slice(u,l)){if(s==1)return r-o-(Ko(t,o)?0:1);s=s>>1}else{if(c==e||u==i)return r-c;o=c,l=u}}}function s0(t,e,r,n,i,a,s,o){let l=n.slice(i,a),c=null;for(;;){if(c||s<o)return c;for(let u=e+s;;){Ko(t,u)||u++;let f=u+s;if(Ko(t,f)||(f+=f==u+1?1:-1),f>=r)break;let d=t.slice(u,f),h=-1;for(;(h=l.indexOf(d,h+1))!=-1;){let m=f0(t,f,r,n,i+h+d.length,a),g=d0(t,e,u,n,i,i+h),v=d.length+m+g;(!c||c[2]<v)&&(c=[u-g,i+h-g,v])}u=f}if(o<0)return c;s=s>>1}}function z$(t,e,r,n,i,a){let s=r-e,o=a-i;if(s<o){let l=z$(n,i,a,t,e,r);return l&&[l[1],l[0],l[2]]}return s<4||o*2<s?null:s0(t,e,r,n,i,a,Math.floor(s/4),-1)}function A$(t,e,r,n,i,a){u0=!0;let s=r-e,o=a-i,l;if(s<o){let d=s0(n,i,a,t,e,r,Math.floor(s/6),50);l=d&&[d[1],d[0],d[2]]}else l=s0(t,e,r,n,i,a,Math.floor(o/6),50);if(!l)return[new ht(e,r,i,a)];let[c,u,f]=l;return ds(t,e,c,n,i,u).concat(ds(t,c+f,r,n,u+f,a))}function V$(t,e){for(let r=1;r<t.length;r++){let n=t[r-1],i=t[r];n.toA>i.fromA-e&&n.toB>i.fromB-e&&(t[r-1]=new ht(n.fromA,i.toA,n.fromB,i.toB),t.splice(r--,1))}}function Jq(t,e,r){for(;;){V$(r,1);let n=!1;for(let i=0;i<r.length;i++){let a=r[i],s,o;(s=f0(t,a.fromA,a.toA,e,a.fromB,a.toB))&&(a=r[i]=new ht(a.fromA+s,a.toA,a.fromB+s,a.toB)),(o=d0(t,a.fromA,a.toA,e,a.fromB,a.toB))&&(a=r[i]=new ht(a.fromA,a.toA-o,a.fromB,a.toB-o));let l=a.toA-a.fromA,c=a.toB-a.fromB;if(l&&c)continue;let u=a.fromA-(i?r[i-1].toA:0),f=(i<r.length-1?r[i+1].fromA:t.length)-a.toA;if(!u||!f)continue;let d=l?t.slice(a.fromA,a.toA):e.slice(a.fromB,a.toB);u<=d.length&&t.slice(a.fromA-u,a.fromA)==d.slice(d.length-u)?(r[i]=new ht(a.fromA-u,a.toA-u,a.fromB-u,a.toB-u),n=!0):f<=d.length&&t.slice(a.toA,a.toA+f)==d.slice(0,f)&&(r[i]=new ht(a.fromA+f,a.toA+f,a.fromB+f,a.toB+f),n=!0)}if(!n)break}return r}function Qq(t,e,r){for(let n=0,i=0;i<t.length;i++){let a=t[i],s=a.toA-a.fromA,o=a.toB-a.fromB;if(s&&o||s>3||o>3){let l=i==t.length-1?e.length:t[i+1].fromA,c=a.fromA-n,u=l-a.toA,f=C$(e,a.fromA,c),d=T$(e,a.toA,u),h=a.fromA-f,m=d-a.toA;if((!s||!o)&&h&&m){let g=Math.max(s,o),[v,w,b]=s?[e,a.fromA,a.toA]:[r,a.fromB,a.toB];g>h&&e.slice(f,a.fromA)==v.slice(b-h,b)?(a=t[i]=new ht(f,f+s,a.fromB-h,a.toB-h),f=a.fromA,d=T$(e,a.toA,l-a.toA)):g>m&&e.slice(a.toA,d)==v.slice(w,w+m)&&(a=t[i]=new ht(d-s,d,a.fromB+m,a.toB+m),d=a.toA,f=C$(e,a.fromA,a.fromA-n)),h=a.fromA-f,m=d-a.toA}if(h||m)a=t[i]=new ht(a.fromA-h,a.toA+m,a.fromB-h,a.toB+m);else if(s){if(!o){let g=R$(e,a.fromA,a.toA),v,w=g<0?-1:P$(e,a.toA,a.fromA);g>-1&&(v=g-a.fromA)<=u&&e.slice(a.fromA,g)==e.slice(a.toA,a.toA+v)?a=t[i]=a.offset(v):w>-1&&(v=a.toA-w)<=c&&e.slice(a.fromA-v,a.fromA)==e.slice(w,a.toA)&&(a=t[i]=a.offset(-v))}}else{let g=R$(r,a.fromB,a.toB),v,w=g<0?-1:P$(r,a.toB,a.fromB);g>-1&&(v=g-a.fromB)<=u&&r.slice(a.fromB,g)==r.slice(a.toB,a.toB+v)?a=t[i]=a.offset(v):w>-1&&(v=a.toB-w)<=c&&r.slice(a.fromB-v,a.fromB)==r.slice(w,a.toB)&&(a=t[i]=a.offset(-v))}}n=a.toA}return V$(t,3),t}var fs;try{fs=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(t){}function W$(t){return t>48&&t<58||t>64&&t<91||t>96&&t<123}function Y$(t,e){if(e==t.length)return 0;let r=t.charCodeAt(e);return r<192?W$(r)?1:0:fs?!K$(r)||e==t.length-1?fs.test(String.fromCharCode(r))?1:0:fs.test(t.slice(e,e+2))?2:0:0}function X$(t,e){if(!e)return 0;let r=t.charCodeAt(e-1);return r<192?W$(r)?1:0:fs?!J$(r)||e==1?fs.test(String.fromCharCode(r))?1:0:fs.test(t.slice(e-2,e))?2:0:0}var Z$=8;function T$(t,e,r){if(e==t.length||!X$(t,e))return e;for(let n=e,i=e+r,a=0;a<Z$;a++){let s=Y$(t,n);if(!s||n+s>i)return n;n+=s}return e}function C$(t,e,r){if(!e||!Y$(t,e))return e;for(let n=e,i=e-r,a=0;a<Z$;a++){let s=X$(t,n);if(!s||n-s<i)return n;n-=s}return e}function P$(t,e,r){for(;e!=r;e--)if(t.charCodeAt(e-1)==10)return e;return-1}function R$(t,e,r){for(;e!=r;e++)if(t.charCodeAt(e)==10)return e;return-1}var K$=t=>t>=55296&&t<=56319,J$=t=>t>=56320&&t<=57343;function Ko(t,e){return!e||e==t.length||!K$(t.charCodeAt(e-1))||!J$(t.charCodeAt(e))}function ez(t,e,r){var n;return Xc=((n=r==null?void 0:r.scanLimit)!==null&&n!==void 0?n:1e9)>>1,Zc=r!=null&&r.timeout?Date.now()+r.timeout:0,u0=!1,Jq(t,e,ds(t,0,t.length,e,0,e.length))}function Q$(){return!u0}function eF(t,e,r){return Qq(ez(t,e,r),t,e)}var xn=Te.Facet.define({combine:t=>t[0]}),o0=Te.StateEffect.define(),tz=Te.Facet.define(),hs=Te.StateField.define({create(t){return null},update(t,e){for(let r of e.effects)r.is(o0)&&(t=r.value);for(let r of e.state.facet(tz))t=r(t,e);return t}});function h0(t){let e=t.field(hs,!1);if(!e)return null;let r=t.facet(xn);return{chunks:e,side:r?r.side:null}}var Oi=class t{constructor(e,r,n,i,a,s=!0){this.changes=e,this.fromA=r,this.toA=n,this.fromB=i,this.toB=a,this.precise=s}offset(e,r){return e||r?new t(this.changes,this.fromA+e,this.toA+e,this.fromB+r,this.toB+r,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,r,n){let i=eF(e.toString(),r.toString(),n);return tF(i,e,r,0,0,Q$())}static updateA(e,r,n,i,a){return M$(O$(e,i,!0,n.length),e,r,n,a)}static updateB(e,r,n,i,a){return M$(O$(e,i,!1,r.length),e,r,n,a)}};function I$(t,e,r,n){let i=r.lineAt(t),a=n.lineAt(e);return i.to==t&&a.to==e&&t<r.length&&e<n.length?[t+1,e+1]:[i.from,a.from]}function $$(t,e,r,n){let i=r.lineAt(t),a=n.lineAt(e);return i.from==t&&a.from==e?[t,e]:[i.to+1,a.to+1]}function tF(t,e,r,n,i,a){let s=[];for(let o=0;o<t.length;o++){let l=t[o],[c,u]=I$(l.fromA+n,l.fromB+i,e,r),[f,d]=$$(l.toA+n,l.toB+i,e,r),h=[l.offset(-c+n,-u+i)];for(;o<t.length-1;){let m=t[o+1],[g,v]=I$(m.fromA+n,m.fromB+i,e,r);if(g>f+1&&v>d+1)break;h.push(m.offset(-c+n,-u+i)),[f,d]=$$(m.toA+n,m.toB+i,e,r),o++}s.push(new Oi(h,c,Math.max(c,f),u,Math.max(u,d),a))}return s}var xh=1e3;function F$(t,e,r,n){let i=0,a=t.length;for(;;){if(i==a){let u=0,f=0;i&&({toA:u,toB:f}=t[i-1]);let d=e-(r?u:f);return[u+d,f+d]}let s=i+a>>1,o=t[s],[l,c]=r?[o.fromA,o.toA]:[o.fromB,o.toB];if(l>e)a=s;else if(c<=e)i=s+1;else return n?[o.fromA,o.fromB]:[o.toA,o.toB]}}function O$(t,e,r,n){let i=[];return e.iterChangedRanges((a,s,o,l)=>{let c=0,u=r?e.length:n,f=0,d=r?n:e.length;a>xh&&([c,f]=F$(t,a-xh,r,!0)),s<e.length-xh&&([u,d]=F$(t,s+xh,r,!1));let h=l-o-(s-a),m,[g,v]=r?[h,0]:[0,h];i.length&&(m=i[i.length-1]).toA>=c?i[i.length-1]={fromA:m.fromA,fromB:m.fromB,toA:u,toB:d,diffA:m.diffA+g,diffB:m.diffB+v}:i.push({fromA:c,toA:u,fromB:f,toB:d,diffA:g,diffB:v})}),i}function M$(t,e,r,n,i){if(!t.length)return e;let a=[];for(let s=0,o=0,l=0,c=0;;s++){let u=s==t.length?null:t[s],f=u?u.fromA+o:r.length,d=u?u.fromB+l:n.length;for(;c<e.length;){let v=e[c];if(v.toA+o>f||v.toB+l>d)break;a.push(v.offset(o,l)),c++}if(!u)break;let h=u.toA+o+u.diffA,m=u.toB+l+u.diffB,g=eF(r.sliceString(f,h),n.sliceString(d,m),i);for(let v of tF(g,r,n,f,d,Q$()))a.push(v);for(o+=u.diffA,l+=u.diffB;c<e.length;){let v=e[c];if(v.fromA+o>h&&v.fromB+l>m)break;c++}}return a}var rz={scanLimit:500},rF=$e.ViewPlugin.fromClass(class{constructor(t){({deco:this.deco,gutter:this.gutter}=N$(t))}update(t){(t.docChanged||t.viewportChanged||nz(t.startState,t.state)||iz(t.startState,t.state))&&({deco:this.deco,gutter:this.gutter}=N$(t.view))}},{decorations:t=>t.deco}),Sh=Te.Prec.low((0,$e.gutter)({class:"cm-changeGutter",markers:t=>{var e;return((e=t.plugin(rF))===null||e===void 0?void 0:e.gutter)||Te.RangeSet.empty}}));function nz(t,e){return t.field(hs,!1)!=e.field(hs,!1)}function iz(t,e){return t.facet(xn)!=e.facet(xn)}var D$=$e.Decoration.line({class:"cm-changedLine"}),az=$e.Decoration.mark({class:"cm-changedText"}),sz=$e.Decoration.mark({tagName:"ins",class:"cm-insertedLine"}),oz=$e.Decoration.mark({tagName:"del",class:"cm-deletedLine"}),L$=new class extends $e.GutterMarker{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function lz(t,e,r,n,i,a){let s=r?t.fromA:t.fromB,o=r?t.toA:t.toB,l=0;if(s!=o){i.add(s,s,D$),i.add(s,o,r?oz:sz),a&&a.add(s,s,L$);for(let c=e.iterRange(s,o-1),u=s;!c.next().done;){if(c.lineBreak){u++,i.add(u,u,D$),a&&a.add(u,u,L$);continue}let f=u+c.value.length;if(n)for(;l<t.changes.length;){let d=t.changes[l],h=s+(r?d.fromA:d.fromB),m=s+(r?d.toA:d.toB),g=Math.max(u,h),v=Math.min(f,m);if(g<v&&i.add(g,v,az),m<f)l++;else break}u=f}}}function N$(t){let e=t.state.field(hs),{side:r,highlightChanges:n,markGutter:i,overrideChunk:a}=t.state.facet(xn),s=r=="a",o=new Te.RangeSetBuilder,l=i?new Te.RangeSetBuilder:null,{from:c,to:u}=t.viewport;for(let f of e){if((s?f.fromA:f.fromB)>=u)break;(s?f.toA:f.toB)>c&&(!a||!a(t.state,f,o,l))&&lz(f,t.state.doc,s,n,o,l)}return{deco:o.finish(),gutter:l&&l.finish()}}var Zo=class extends $e.WidgetType{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},Th=Te.StateEffect.define({map:(t,e)=>t.map(e)}),Kc=Te.StateField.define({create:()=>$e.Decoration.none,update:(t,e)=>{for(let r of e.effects)if(r.is(Th))return r.value;return t.map(e.changes)},provide:t=>$e.EditorView.decorations.from(t)}),Eh=.01;function B$(t,e){if(t.size!=e.size)return!1;let r=t.iter(),n=e.iter();for(;r.value;){if(r.from!=n.from||Math.abs(r.value.spec.widget.height-n.value.spec.widget.height)>1)return!1;r.next(),n.next()}return!0}function cz(t,e,r){let n=new Te.RangeSetBuilder,i=new Te.RangeSetBuilder,a=t.state.field(Kc).iter(),s=e.state.field(Kc).iter(),o=0,l=0,c=0,u=0,f=t.viewport,d=e.viewport;for(let v=0;;v++){let w=v<r.length?r[v]:null,b=w?w.fromA:t.state.doc.length,S=w?w.fromB:e.state.doc.length;if(o<b){let E=t.lineBlockAt(o).top+c,k=e.lineBlockAt(l).top+u,A=E-k;A<-Eh?(c-=A,n.add(o,o,$e.Decoration.widget({widget:new Zo(-A),block:!0,side:-1}))):A>Eh&&(u+=A,i.add(l,l,$e.Decoration.widget({widget:new Zo(A),block:!0,side:-1})))}if(b>o+1e3&&o<f.from&&b>f.from&&l<d.from&&S>d.from){let E=Math.min(f.from-o,d.from-l);o+=E,l+=E,v--}else if(w)o=w.toA,l=w.toB;else break;for(;a.value&&a.from<o;)c-=a.value.spec.widget.height,a.next();for(;s.value&&s.from<l;)u-=s.value.spec.widget.height,s.next()}for(;a.value;)c-=a.value.spec.widget.height,a.next();for(;s.value;)u-=s.value.spec.widget.height,s.next();let h=t.contentHeight+c-(e.contentHeight+u);h<Eh?n.add(t.state.doc.length,t.state.doc.length,$e.Decoration.widget({widget:new Zo(-h),block:!0,side:1})):h>Eh&&i.add(e.state.doc.length,e.state.doc.length,$e.Decoration.widget({widget:new Zo(h),block:!0,side:1}));let m=n.finish(),g=i.finish();B$(m,t.state.field(Kc))||t.dispatch({effects:Th.of(m)}),B$(g,e.state.field(Kc))||e.dispatch({effects:Th.of(g)})}var l0=Te.StateEffect.define({map:(t,e)=>e.mapPos(t)}),c0=class extends $e.WidgetType{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let r=document.createElement("div");return r.className="cm-collapsedLines",r.textContent=e.state.phrase("$ unchanged lines",this.lines),r.addEventListener("click",n=>{let i=e.posAtDOM(n.target);e.dispatch({effects:l0.of(i)});let{side:a,sibling:s}=e.state.facet(xn);s&&s().dispatch({effects:l0.of(uz(i,e.state.field(hs),a=="a"))})}),r}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}};function uz(t,e,r){let n=0,i=0;for(let a=0;;a++){let s=a<e.length?e[a]:null;if(!s||(r?s.fromA:s.fromB)>=t)return i+(t-n);[n,i]=r?[s.toA,s.toB]:[s.toB,s.toA]}}var fz=Te.StateField.define({create(t){return $e.Decoration.none},update(t,e){t=t.map(e.changes);for(let r of e.effects)r.is(l0)&&(t=t.update({filter:n=>n!=r.value}));return t},provide:t=>$e.EditorView.decorations.from(t)});function H$({margin:t=3,minSize:e=4}){return fz.init(r=>dz(r,t,e))}function dz(t,e,r){let n=new Te.RangeSetBuilder,i=t.facet(xn).side=="a",a=t.field(hs),s=1;for(let o=0;;o++){let l=o<a.length?a[o]:null,c=o?s+e:1,u=l?t.doc.lineAt(i?l.fromA:l.fromB).number-1-e:t.doc.lines,f=u-c+1;if(f>=r&&n.add(t.doc.line(c).from,t.doc.line(u).to,$e.Decoration.replace({widget:new c0(f),block:!0})),!l)break;s=t.doc.lineAt(Math.min(t.doc.length,i?l.toA:l.toB)).number}return n.finish()}var hz=$e.EditorView.styleModule.of(new _h({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),pz=$e.EditorView.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'"\u299A"',marginInlineEnd:"7px"},"&:after":{content:'"\u299A"',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),U$=new Te.Compartment,kh=new Te.Compartment,Ch=class{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig||rz;let r=[Te.Prec.low(rF),pz,hz,Kc,$e.EditorView.updateListener.of(f=>{this.measuring<0&&(f.heightChanged||f.viewportChanged)&&!f.transactions.some(d=>d.effects.some(h=>h.is(Th)))&&this.measure()})],n=[xn.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&n.push(Sh);let i=Te.EditorState.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],$e.EditorView.editorAttributes.of({class:"cm-merge-a"}),kh.of(n),r]}),a=[xn.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&a.push(Sh);let s=Te.EditorState.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],$e.EditorView.editorAttributes.of({class:"cm-merge-b"}),kh.of(a),r]});this.chunks=Oi.build(i.doc,s.doc,this.diffConf);let o=[hs.init(()=>this.chunks),U$.of(e.collapseUnchanged?H$(e.collapseUnchanged):[])];i=i.update({effects:Te.StateEffect.appendConfig.of(o)}).state,s=s.update({effects:Te.StateEffect.appendConfig.of(o)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let l=e.orientation||"a-b",c=document.createElement("div");c.className="cm-mergeViewEditor";let u=document.createElement("div");u.className="cm-mergeViewEditor",this.editorDOM.appendChild(l=="a-b"?c:u),this.editorDOM.appendChild(l=="a-b"?u:c),this.a=new $e.EditorView({state:i,parent:c,root:e.root,dispatchTransactions:f=>this.dispatch(f,this.a)}),this.b=new $e.EditorView({state:s,parent:u,root:e.root,dispatchTransactions:f=>this.dispatch(f,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,r){if(e.some(n=>n.docChanged)){let n=e[e.length-1],i=e.reduce((s,o)=>s.compose(o.changes),Te.ChangeSet.empty(e[0].startState.doc.length));this.chunks=r==this.a?Oi.updateA(this.chunks,n.newDoc,this.b.state.doc,i,this.diffConf):Oi.updateB(this.chunks,this.a.state.doc,n.newDoc,i,this.diffConf),r.update([...e,n.state.update({effects:o0.of(this.chunks)})]);let a=r==this.a?this.b:this.a;a.update([a.state.update({effects:o0.of(this.chunks)})]),this.scheduleMeasure()}else r.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let a=e.orientation!="b-a";if(a!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let s=this.a.dom.parentNode,o=this.b.dom.parentNode;s.remove(),o.remove(),this.editorDOM.insertBefore(a?s:o,this.editorDOM.firstChild),this.editorDOM.appendChild(a?o:s),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let a=!!this.revertDOM,s=this.revertToA,o=this.renderRevert;"revertControls"in e&&(a=!!e.revertControls,s=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(o=e.renderRevertControl),this.setupRevertControls(a,s,o)}let r="highlightChanges"in e,n="gutter"in e,i="collapseUnchanged"in e;if(r||n||i){let a=[],s=[];if(r||n){let o=this.a.state.facet(xn),l=n?e.gutter!==!1:o.markGutter,c=r?e.highlightChanges!==!1:o.highlightChanges;a.push(kh.reconfigure([xn.of({side:"a",sibling:()=>this.b,highlightChanges:c,markGutter:l}),l?Sh:[]])),s.push(kh.reconfigure([xn.of({side:"b",sibling:()=>this.a,highlightChanges:c,markGutter:l}),l?Sh:[]]))}if(i){let o=U$.reconfigure(e.collapseUnchanged?H$(e.collapseUnchanged):[]);a.push(o),s.push(o)}this.a.dispatch({effects:a}),this.b.dispatch({effects:s})}this.scheduleMeasure()}setupRevertControls(e,r,n){this.revertToA=r,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=n,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",i=>this.revertClicked(i)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){cz(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,r=e.firstChild,n=this.a.viewport,i=this.b.viewport;for(let a=0;a<this.chunks.length;a++){let s=this.chunks[a];if(s.fromA>n.to||s.fromB>i.to)break;if(s.fromA<n.from||s.fromB<i.from)continue;let o=this.a.lineBlockAt(s.fromA).top+"px";for(;r&&+r.dataset.chunk<a;)r=j$(r);r&&r.dataset.chunk==String(a)?(r.style.top!=o&&(r.style.top=o),r=r.nextSibling):e.insertBefore(this.renderRevertButton(o,a),r)}for(;r;)r=j$(r)}renderRevertButton(e,r){let n;if(this.renderRevert)n=this.renderRevert();else{n=document.createElement("button");let i=this.a.state.phrase("Revert this chunk");n.setAttribute("aria-label",i),n.setAttribute("title",i),n.textContent=this.revertToLeft?"\u21DC":"\u21DD"}return n.style.top=e,n.setAttribute("data-chunk",String(r)),n}revertClicked(e){let r=e.target,n;for(;r&&r.parentNode!=this.revertDOM;)r=r.parentNode;if(r&&(n=this.chunks[r.dataset.chunk])){let[i,a,s,o,l,c]=this.revertToA?[this.b,this.a,n.fromB,n.toB,n.fromA,n.toA]:[this.a,this.b,n.fromA,n.toA,n.fromB,n.toB],u=i.state.sliceDoc(s,Math.max(s,o-1));s!=o&&c<=a.state.doc.length&&(u+=i.state.lineBreak),a.dispatch({changes:{from:l,to:Math.min(a.state.doc.length,c),insert:u},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}};function j$(t){let e=t.nextSibling;return t.remove(),e}var p0=require("@codemirror/state");function m0(t,e,r){let n=[],i=t.split(`
`),a=e.split(`
`);for(let s of r){let{oldStart:o,oldLines:l,newStart:c,newLines:u}=s,f=St.createHunk(o,l,c,u);if(s.oldLines>0){for(let d=o;d<o+l;d++)f.removed.lines.push(i[d-1]);o+l>i.length&&i.last()!=""&&(f.removed.no_nl_at_eof=!0)}if(s.newLines>0){for(let d=c;d<c+u;d++)f.added.lines.push(a[d-1]);c+u>a.length&&a.last()!=""&&(f.added.no_nl_at_eof=!0)}n.push(f)}return n}function g0(t,e,r){let n=e.lineAt(t.fromA).number,i=t.fromA==t.toA?0:Ph(e,t.endA)-n+1,a=r.lineAt(t.fromB).number,s=t.fromB==t.toB?0:Ph(r,t.endB)-a+1,o={oldStart:n,oldLines:i,newStart:a,newLines:s};return o.oldLines==0&&(o.oldStart-=1),o.newLines==0&&(o.newStart-=1),o}function mz(t,e,r,n){let i=p0.Text.of(t.split(`
`)),a=p0.Text.of(e.split(`
`)),s=r&&n?Oi.updateB(r,i,a,n):Oi.build(i,a),o=[];for(let l=0;l<s.length;l++){let c=s[l],u=g0(c,i,a);o.push(u)}return{hunks:m0(t,e,o),chunks:s}}function nF(t,e,r,n){return mz(t,e,r,n)}var iF=require("obsidian");function Ph(t,e){let r=t.lineAt(e);return!(r.text.length==0&&r.number==t.lines)?r.number:r.number-1}var Sn=class{static hasHunksData(e){return!!e.field(tn,!1)}static getHunks(e,r){let n=e.field(tn);return n?r?n.stagedHunks:n.hunks:[]}static getHunkAtPos(e,r,n){if(!e.field(tn))return;let a=e.doc.lineAt(r).number,s=this.getHunks(e,n);return St.findHunk(a,s)[0]}static getCursorHunk(e,r){if(!e.field(tn))return;let i=e.selection.main.head;return this.getHunkAtPos(e,i,r)}static getHunk(e,r,n){if(n!=null)return this.getHunkAtPos(e,n,r);if(e.selection.main.empty)return this.getCursorHunk(e,r);let i=e.selection.main.from,a=e.selection.main.to,s=e.doc.lineAt(i).number,o=Ph(e.doc,a),l=this.getHunks(e,r),c=St.createPartialHunk(l,s,o);if(!c)return;let u=e.field(tn);if(r){let f=s,d=o;for(let h of u.hunks)s>h.vend&&(f=f-(h.added.count-h.removed.count)),o>h.vend&&(d=d-(h.added.count-h.removed.count));c.added.lines=u.compareText.split(`
`).slice(f-1,d),u.compareTextHead?c.removed.lines=u.compareTextHead.split(`
`).slice(c.removed.start-1,c.removed.start-1+c.removed.count):c.removed.lines=[]}else c.added.lines=e.doc.toString().split(`
`).slice(s-1,o),o===e.doc.lines&&!e.doc.toString().endsWith(`
`)&&(c.added.no_nl_at_eof=!0),c.removed.lines=u.compareText.split(`
`).slice(c.removed.start-1,c.removed.start-1+c.removed.count),c.removed.start+c.removed.count-1===u.compareText.split(`
`).length&&!u.compareText.endsWith(`
`)&&(c.removed.no_nl_at_eof=!0);return c}},tn=Rh.StateField.define({create:t=>{},update:(t,e)=>{var i,a;let r=t?{...t}:{hunks:[],stagedHunks:[],chunks:void 0},n=!1;for(let s of e.effects)s.is(Jo)&&(n=!0,r.compareText=s.value.compareText,r.compareTextHead=s.value.compareTextHead);if(r.compareText!==void 0){let s=e.state.doc.toString();if(n&&(r.chunks=void 0),n||e.docChanged){let{hunks:o,chunks:l}=nF(r.compareText,s,r.chunks,e.changes);r.hunks=o,r.chunks=l;let c=e.state.field(iF.editorInfoField).file;(a=(i=Zn.plugin)==null?void 0:i.editorIntegration.signsFeature.changeStatusBar)==null||a.display(o,c)}}else r.compareText=void 0,r.compareTextHead=void 0,r.chunks=void 0,r.hunks=[],r.stagedHunks=[];return r}}),Jo=Rh.StateEffect.define();function aF(t,e){return e.update({effects:Jo.of(t)})}p();p();p();var Ze;(function(t){t.INSERT="insert",t.DELETE="delete",t.CONTEXT="context"})(Ze||(Ze={}));var sF={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"},oF={LINES:"lines",WORDS:"words",NONE:"none"},lF={WORD:"word",CHAR:"char"},ps;(function(t){t.AUTO="auto",t.DARK="dark",t.LIGHT="light"})(ps||(ps={}));p();var gz=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],vz=RegExp("["+gz.join("\\")+"]","g");function cF(t){return t.replace(vz,"\\$&")}function v0(t){return t&&t.replace(/\\/g,"/")}function uF(t){let e,r,n,i=0;for(e=0,n=t.length;e<n;e++)r=t.charCodeAt(e),i=(i<<5)-i+r,i|=0;return i}function Ih(t){let e=t.length,r=-1/0;for(let n=0;n<e;n++)r=Math.max(r,t[n]);return r}function fF(t,e){let r=t.split(".");return r.length>1?r[r.length-1]:e}function dF(t,e){return e.reduce((r,n)=>r||t.startsWith(n),!1)}var hF=["a/","b/","i/","w/","c/","o/"];function Ea(t,e,r){let n=r!==void 0?[...hF,r]:hF,i=e?new RegExp(`^${cF(e)} "?(.+?)"?$`):new RegExp('^"?(.+?)"?$'),[,a=""]=i.exec(t)||[],s=n.find(l=>a.indexOf(l)===0);return(s?a.slice(s.length):a).replace(/\s+\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}(?:\.\d+)? [+-]\d{4}.*$/,"")}function wz(t,e){return Ea(t,"---",e)}function yz(t,e){return Ea(t,"+++",e)}function pF(t,e={}){let r=[],n=null,i=null,a=null,s=null,o=null,l=null,c=null,u="--- ",f="+++ ",d="@@",h=/^old mode (\d{6})/,m=/^new mode (\d{6})/,g=/^deleted file mode (\d{6})/,v=/^new file mode (\d{6})/,w=/^copy from "?(.+)"?/,b=/^copy to "?(.+)"?/,S=/^rename from "?(.+)"?/,E=/^rename to "?(.+)"?/,k=/^similarity index (\d+)%/,A=/^dissimilarity index (\d+)%/,y=/^index ([\da-z]+)\.\.([\da-z]+)\s*(\d{6})?/,_=/^Binary files (.*) and (.*) differ/,x=/^GIT binary patch/,T=/^index ([\da-z]+),([\da-z]+)\.\.([\da-z]+)/,P=/^mode (\d{6}),(\d{6})\.\.(\d{6})/,F=/^new file mode (\d{6})/,N=/^deleted file mode (\d{6}),(\d{6})/,M=t.replace(/\\ No newline at end of file/g,"").replace(/\r\n?/g,`
`).split(`
`);function re(){i!==null&&n!==null&&(n.blocks.push(i),i=null)}function ye(){n!==null&&(!n.oldName&&l!==null&&(n.oldName=l),!n.newName&&c!==null&&(n.newName=c),n.newName&&(r.push(n),n=null)),l=null,c=null}function me(){re(),ye(),n={blocks:[],deletedLines:0,addedLines:0}}function fe(B){re();let Z;n!==null&&((Z=/^@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@.*/.exec(B))?(n.isCombined=!1,a=parseInt(Z[1],10),o=parseInt(Z[2],10)):(Z=/^@@@ -(\d+)(?:,\d+)? -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@@.*/.exec(B))?(n.isCombined=!0,a=parseInt(Z[1],10),s=parseInt(Z[2],10),o=parseInt(Z[3],10)):(B.startsWith(d)&&console.error("Failed to parse lines, starting in 0!"),a=0,o=0,n.isCombined=!1)),i={lines:[],oldStartLine:a,oldStartLine2:s,newStartLine:o,header:B}}function Ge(B){if(n===null||i===null||a===null||o===null)return;let Z={content:B},H=n.isCombined?["+ "," +","++"]:["+"],Oe=n.isCombined?["- "," -","--"]:["-"];dF(B,H)?(n.addedLines++,Z.type=Ze.INSERT,Z.oldNumber=void 0,Z.newNumber=o++):dF(B,Oe)?(n.deletedLines++,Z.type=Ze.DELETE,Z.oldNumber=a++,Z.newNumber=void 0):(Z.type=Ze.CONTEXT,Z.oldNumber=a++,Z.newNumber=o++),i.lines.push(Z)}function oe(B,Z){let H=Z;for(;H<M.length-3;){if(B.startsWith("diff"))return!1;if(M[H].startsWith(u)&&M[H+1].startsWith(f)&&M[H+2].startsWith(d))return!0;H++}return!1}return M.forEach((B,Z)=>{if(!B||B.startsWith("*"))return;let H,Oe=M[Z-1],cr=M[Z+1],Gt=M[Z+2];if(B.startsWith("diff --git")||B.startsWith("diff --combined")){if(me(),(H=/^diff --git "?([a-ciow]\/.+)"? "?([a-ciow]\/.+)"?/.exec(B))&&(l=Ea(H[1],void 0,e.dstPrefix),c=Ea(H[2],void 0,e.srcPrefix)),n===null)throw new Error("Where is my file !!!");n.isGitDiff=!0;return}if(B.startsWith("Binary files")&&!(n!=null&&n.isGitDiff)){if(me(),(H=/^Binary files "?([a-ciow]\/.+)"? and "?([a-ciow]\/.+)"? differ/.exec(B))&&(l=Ea(H[1],void 0,e.dstPrefix),c=Ea(H[2],void 0,e.srcPrefix)),n===null)throw new Error("Where is my file !!!");n.isBinary=!0;return}if((!n||!n.isGitDiff&&n&&B.startsWith(u)&&cr.startsWith(f)&&Gt.startsWith(d))&&me(),n!=null&&n.isTooBig)return;if(n&&(typeof e.diffMaxChanges=="number"&&n.addedLines+n.deletedLines>e.diffMaxChanges||typeof e.diffMaxLineLength=="number"&&B.length>e.diffMaxLineLength)){n.isTooBig=!0,n.addedLines=0,n.deletedLines=0,n.blocks=[],i=null;let Ie=typeof e.diffTooBigMessage=="function"?e.diffTooBigMessage(r.length):"Diff too big to be displayed";fe(Ie);return}if(B.startsWith(u)&&cr.startsWith(f)||B.startsWith(f)&&Oe.startsWith(u)){if(n&&!n.oldName&&B.startsWith("--- ")&&(H=wz(B,e.srcPrefix))){n.oldName=H,n.language=fF(n.oldName,n.language);return}if(n&&!n.newName&&B.startsWith("+++ ")&&(H=yz(B,e.dstPrefix))){n.newName=H,n.language=fF(n.newName,n.language);return}}if(n&&(B.startsWith(d)||n.isGitDiff&&n.oldName&&n.newName&&!i)){fe(B);return}if(i&&(B.startsWith("+")||B.startsWith("-")||B.startsWith(" "))){Ge(B);return}let Y=!oe(B,Z);if(n===null)throw new Error("Where is my file !!!");(H=h.exec(B))?n.oldMode=H[1]:(H=m.exec(B))?n.newMode=H[1]:(H=g.exec(B))?(n.deletedFileMode=H[1],n.isDeleted=!0):(H=v.exec(B))?(n.newFileMode=H[1],n.isNew=!0):(H=w.exec(B))?(Y&&(n.oldName=H[1]),n.isCopy=!0):(H=b.exec(B))?(Y&&(n.newName=H[1]),n.isCopy=!0):(H=S.exec(B))?(Y&&(n.oldName=H[1]),n.isRename=!0):(H=E.exec(B))?(Y&&(n.newName=H[1]),n.isRename=!0):(H=_.exec(B))?(n.isBinary=!0,n.oldName=Ea(H[1],void 0,e.srcPrefix),n.newName=Ea(H[2],void 0,e.dstPrefix),fe("Binary file")):x.test(B)?(n.isBinary=!0,fe(B)):(H=k.exec(B))?n.unchangedPercentage=parseInt(H[1],10):(H=A.exec(B))?n.changedPercentage=parseInt(H[1],10):(H=y.exec(B))?(n.checksumBefore=H[1],n.checksumAfter=H[2],H[3]&&(n.mode=H[3])):(H=T.exec(B))?(n.checksumBefore=[H[2],H[3]],n.checksumAfter=H[1]):(H=P.exec(B))?(n.oldMode=[H[2],H[3]],n.newMode=H[1]):(H=F.exec(B))?(n.newFileMode=H[1],n.isNew=!0):(H=N.exec(B))&&(n.deletedFileMode=H[1],n.isDeleted=!0)}),re(),ye(),r}p();p();p();function En(){}En.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var s=this;function o(E){return E=s.postProcess(E,i),a?(setTimeout(function(){a(E)},0),!0):E}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,c=e.length,u=1,f=l+c;i.maxEditLength!=null&&(f=Math.min(f,i.maxEditLength));var d=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+d,m=[{oldPos:-1,lastComponent:void 0}],g=this.extractCommon(m[0],r,e,0,i);if(m[0].oldPos+1>=c&&g+1>=l)return o(mF(s,m[0].lastComponent,r,e,s.useLongestToken));var v=-1/0,w=1/0;function b(){for(var E=Math.max(v,-u);E<=Math.min(w,u);E+=2){var k=void 0,A=m[E-1],y=m[E+1];A&&(m[E-1]=void 0);var _=!1;if(y){var x=y.oldPos-E;_=y&&0<=x&&x<l}var T=A&&A.oldPos+1<c;if(!_&&!T){m[E]=void 0;continue}if(!T||_&&A.oldPos<y.oldPos?k=s.addToPath(y,!0,!1,0,i):k=s.addToPath(A,!1,!0,1,i),g=s.extractCommon(k,r,e,E,i),k.oldPos+1>=c&&g+1>=l)return o(mF(s,k.lastComponent,r,e,s.useLongestToken));m[E]=k,k.oldPos+1>=c&&(w=Math.min(w,E-1)),g+1>=l&&(v=Math.max(v,E+1))}u++}if(a)(function E(){setTimeout(function(){if(u>f||Date.now()>h)return a();b()||E()},0)})();else for(;u<=f&&Date.now()<=h;){var S=b();if(S)return S}},addToPath:function(e,r,n,i,a){var s=e.lastComponent;return s&&!a.oneChangePerToken&&s.added===r&&s.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:n,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:s}}},extractCommon:function(e,r,n,i,a){for(var s=r.length,o=n.length,l=e.oldPos,c=l-i,u=0;c+1<s&&l+1<o&&this.equals(n[l+1],r[c+1],a);)c++,l++,u++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!a.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function mF(t,e,r,n,i){for(var a=[],s;e;)a.push(e),s=e.previousComponent,delete e.previousComponent,e=s;a.reverse();for(var o=0,l=a.length,c=0,u=0;o<l;o++){var f=a[o];if(f.removed)f.value=t.join(n.slice(u,u+f.count)),u+=f.count;else{if(!f.added&&i){var d=r.slice(c,c+f.count);d=d.map(function(h,m){var g=n[u+m];return g.length>h.length?g:h}),f.value=t.join(d)}else f.value=t.join(r.slice(c,c+f.count));c+=f.count,f.added||(u+=f.count)}}return a}var _z=new En;function bF(t,e,r){return _z.diff(t,e,r)}function gF(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function vF(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function w0(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function y0(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function Jc(t,e){return w0(t,e,"")}function $h(t,e){return y0(t,e,"")}function wF(t,e){return e.slice(0,xz(t,e))}function xz(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var s=1;s<n;s++){for(e[s]==e[a]?i[s]=i[a]:i[s]=a;a>0&&e[s]!=e[a];)a=i[a];e[s]==e[a]&&a++}a=0;for(var o=r;o<t.length;o++){for(;a>0&&t[o]!=e[a];)a=i[a];t[o]==e[a]&&a++}return a}var Fh="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Sz=new RegExp("[".concat(Fh,"]+|\\s+|[^").concat(Fh,"]"),"ug"),Oh=new En;Oh.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};Oh.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(Sz)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};Oh.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};Oh.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&yF(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&yF(r,i,n,null),t};function yF(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],s=r.value.match(/^\s*/)[0],o=r.value.match(/\s*$/)[0];if(t){var l=gF(i,s);t.value=y0(t.value,s,l),e.value=Jc(e.value,l),r.value=Jc(r.value,l)}if(n){var c=vF(a,o);n.value=w0(n.value,o,c),e.value=$h(e.value,c),r.value=$h(r.value,c)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var u=n.value.match(/^\s*/)[0],f=e.value.match(/^\s*/)[0],d=e.value.match(/\s*$/)[0],h=gF(u,f);e.value=Jc(e.value,h);var m=vF(Jc(u,h),d);e.value=$h(e.value,m),n.value=w0(n.value,u,m),t.value=y0(t.value,u,u.slice(0,u.length-m.length))}else if(n){var g=n.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],w=wF(v,g);e.value=$h(e.value,w)}else if(t){var b=t.value.match(/\s*$/)[0],S=e.value.match(/^\s*/)[0],E=wF(b,S);e.value=Jc(e.value,E)}}var _F=new En;_F.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(Fh,"]+|[^\\S\\n\\r]+|[^").concat(Fh,"]"),"ug");return t.match(e)||[]};function xF(t,e,r){return _F.diff(t,e,r)}var S0=new En;S0.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};S0.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),En.prototype.equals.call(this,t,e,r)};var Ez=new En;Ez.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var kz=new En;kz.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function b0(t){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b0(t)}var Qc=new En;Qc.useLongestToken=!0;Qc.tokenize=S0.tokenize;Qc.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,s){return typeof s=="undefined"?r:s}:n;return typeof t=="string"?t:JSON.stringify(_0(t,null,null,i),i,"  ")};Qc.equals=function(t,e,r){return En.prototype.equals.call(Qc,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function _0(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var s;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),r.push(s),a=0;a<t.length;a+=1)s[a]=_0(t[a],e,r,n,i);return e.pop(),r.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),b0(t)==="object"&&t!==null){e.push(t),s={},r.push(s);var o=[],l;for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&o.push(l);for(o.sort(),a=0;a<o.length;a+=1)l=o[a],s[l]=_0(t[l],e,r,n,l);e.pop(),r.pop()}else s=t;return s}var x0=new En;x0.tokenize=function(t){return t.slice()};x0.join=x0.removeEmpty=function(t){return t};p();function Tz(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}function Qo(t){return(e,r)=>{let n=t(e).trim(),i=t(r).trim();return Tz(n,i)/(n.length+i.length)}}function el(t){function e(n,i,a=new Map){let s=1/0,o;for(let l=0;l<n.length;++l)for(let c=0;c<i.length;++c){let u=JSON.stringify([n[l],i[c]]),f;a.has(u)&&(f=a.get(u))||(f=t(n[l],i[c]),a.set(u,f)),f<s&&(s=f,o={indexA:l,indexB:c,score:s})}return o}function r(n,i,a=0,s=new Map){let o=e(n,i,s);if(!o||n.length+i.length<3)return[[n,i]];let l=n.slice(0,o.indexA),c=i.slice(0,o.indexB),u=[n[o.indexA]],f=[i[o.indexB]],d=o.indexA+1,h=o.indexB+1,m=n.slice(d),g=i.slice(h),v=r(l,c,a+1,s),w=r(u,f,a+1,s),b=r(m,g,a+1,s),S=w;return(o.indexA>0||o.indexB>0)&&(S=v.concat(S)),(n.length>d||i.length>h)&&(S=S.concat(b)),S}return r}var Lt={INSERTS:"d2h-ins",DELETES:"d2h-del",CONTEXT:"d2h-cntx",INFO:"d2h-info",INSERT_CHANGES:"d2h-ins d2h-change",DELETE_CHANGES:"d2h-del d2h-change"},ms={matching:oF.NONE,matchWordsThreshold:.25,maxLineLengthHighlight:1e4,diffStyle:lF.WORD,colorScheme:ps.LIGHT},ni="/",SF=Qo(t=>t.value),Cz=el(SF);function k0(t){return t.indexOf("dev/null")!==-1}function Pz(t){return t.replace(/(<ins[^>]*>((.|\n)*?)<\/ins>)/g,"")}function Rz(t){return t.replace(/(<del[^>]*>((.|\n)*?)<\/del>)/g,"")}function tl(t){switch(t){case Ze.CONTEXT:return Lt.CONTEXT;case Ze.INSERT:return Lt.INSERTS;case Ze.DELETE:return Lt.DELETES}}function rl(t){switch(t){case ps.DARK:return"d2h-dark-color-scheme";case ps.AUTO:return"d2h-auto-color-scheme";case ps.LIGHT:default:return"d2h-light-color-scheme"}}function Iz(t){return t?2:1}function ka(t){return t.slice(0).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function rn(t,e,r=!0){let n=Iz(e);return{prefix:t.substring(0,n),content:r?ka(t.substring(n)):t.substring(n)}}function gs(t){let e=v0(t.oldName),r=v0(t.newName);if(e!==r&&!k0(e)&&!k0(r)){let n=[],i=[],a=e.split(ni),s=r.split(ni),o=a.length,l=s.length,c=0,u=o-1,f=l-1;for(;c<u&&c<f&&a[c]===s[c];)n.push(s[c]),c+=1;for(;u>c&&f>c&&a[u]===s[f];)i.unshift(s[f]),u-=1,f-=1;let d=n.join(ni),h=i.join(ni),m=a.slice(c,u+1).join(ni),g=s.slice(c,f+1).join(ni);return d.length&&h.length?d+ni+"{"+m+" \u2192 "+g+"}"+ni+h:d.length?d+ni+"{"+m+" \u2192 "+g+"}":h.length?"{"+m+" \u2192 "+g+"}"+ni+h:e+" \u2192 "+r}else return k0(r)?e:r}function nl(t){return`d2h-${uF(gs(t)).toString().slice(-6)}`}function il(t){let e="file-changed";return t.isRename||t.isCopy?e="file-renamed":t.isNew?e="file-added":t.isDeleted?e="file-deleted":t.newName!==t.oldName&&(e="file-renamed"),e}function Mh(t,e,r,n={}){let{matching:i,maxLineLengthHighlight:a,matchWordsThreshold:s,diffStyle:o}=Object.assign(Object.assign({},ms),n),l=rn(t,r,!1),c=rn(e,r,!1);if(l.content.length>a||c.content.length>a)return{oldLine:{prefix:l.prefix,content:ka(l.content)},newLine:{prefix:c.prefix,content:ka(c.content)}};let u=o==="char"?bF(l.content,c.content):xF(l.content,c.content),f=[];if(o==="word"&&i==="words"){let h=u.filter(v=>v.removed),m=u.filter(v=>v.added);Cz(m,h).forEach(v=>{v[0].length===1&&v[1].length===1&&SF(v[0][0],v[1][0])<s&&(f.push(v[0][0]),f.push(v[1][0]))})}let d=u.reduce((h,m)=>{let g=m.added?"ins":m.removed?"del":null,v=f.indexOf(m)>-1?' class="d2h-change"':"",w=ka(m.value);return g!==null?`${h}<${g}${v}>${w}</${g}>`:`${h}${w}`},"");return{oldLine:{prefix:l.prefix,content:Pz(d)},newLine:{prefix:c.prefix,content:Rz(d)}}}var EF="file-summary",$z="icon",Fz={colorScheme:ms.colorScheme},Dh=class{constructor(e,r={}){this.hoganUtils=e,this.config=Object.assign(Object.assign({},Fz),r)}render(e){let r=e.map(n=>this.hoganUtils.render(EF,"line",{fileHtmlId:nl(n),oldName:n.oldName,newName:n.newName,fileName:gs(n),deletedLines:"-"+n.deletedLines,addedLines:"+"+n.addedLines},{fileIcon:this.hoganUtils.template($z,il(n))})).join(`
`);return this.hoganUtils.render(EF,"wrapper",{colorScheme:rl(this.config.colorScheme),filesNumber:e.length,files:r})}};p();var T0=Object.assign(Object.assign({},ms),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),eu="generic",kF="line-by-line",Oz="icon",Mz="tag",tu=class{constructor(e,r={}){this.hoganUtils=e,this.config=Object.assign(Object.assign({},T0),r)}render(e){let r=e.map(n=>{let i;return n.blocks.length?i=this.generateFileHtml(n):i=this.generateEmptyDiff(),this.makeFileDiffHtml(n,i)}).join(`
`);return this.hoganUtils.render(eu,"wrapper",{colorScheme:rl(this.config.colorScheme),content:r})}makeFileDiffHtml(e,r){if(this.config.renderNothingWhenEmpty&&Array.isArray(e.blocks)&&e.blocks.length===0)return"";let n=this.hoganUtils.template(kF,"file-diff"),i=this.hoganUtils.template(eu,"file-path"),a=this.hoganUtils.template(Oz,"file"),s=this.hoganUtils.template(Mz,il(e));return n.render({file:e,fileHtmlId:nl(e),diffs:r,filePath:i.render({fileDiffName:gs(e)},{fileIcon:a,fileTag:s})})}generateEmptyDiff(){return this.hoganUtils.render(eu,"empty-diff",{contentClass:"d2h-code-line",CSSLineClass:Lt})}generateFileHtml(e){let r=el(Qo(n=>rn(n.content,e.isCombined).content));return e.blocks.map(n=>{let i=this.hoganUtils.render(eu,"block-header",{CSSLineClass:Lt,blockHeader:e.isTooBig?n.header:ka(n.header),lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line"});return this.applyLineGroupping(n).forEach(([a,s,o])=>{if(s.length&&o.length&&!a.length)this.applyRematchMatching(s,o,r).map(([l,c])=>{let{left:u,right:f}=this.processChangedLines(e,e.isCombined,l,c);i+=u,i+=f});else if(a.length)a.forEach(l=>{let{prefix:c,content:u}=rn(l.content,e.isCombined);i+=this.generateSingleLineHtml(e,{type:Lt.CONTEXT,prefix:c,content:u,oldNumber:l.oldNumber,newNumber:l.newNumber})});else if(s.length||o.length){let{left:l,right:c}=this.processChangedLines(e,e.isCombined,s,o);i+=l,i+=c}else console.error("Unknown state reached while processing groups of lines",a,s,o)}),i}).join(`
`)}applyLineGroupping(e){let r=[],n=[],i=[];for(let a=0;a<e.lines.length;a++){let s=e.lines[a];(s.type!==Ze.INSERT&&i.length||s.type===Ze.CONTEXT&&n.length>0)&&(r.push([[],n,i]),n=[],i=[]),s.type===Ze.CONTEXT?r.push([[s],[],[]]):s.type===Ze.INSERT&&n.length===0?r.push([[],[],[s]]):s.type===Ze.INSERT&&n.length>0?i.push(s):s.type===Ze.DELETE&&n.push(s)}return(n.length||i.length)&&(r.push([[],n,i]),n=[],i=[]),r}applyRematchMatching(e,r,n){let i=e.length*r.length,a=Ih(e.concat(r).map(o=>o.content.length));return i<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?n(e,r):[[e,r]]}processChangedLines(e,r,n,i){let a={right:"",left:""},s=Math.max(n.length,i.length);for(let o=0;o<s;o++){let l=n[o],c=i[o],u=l!==void 0&&c!==void 0?Mh(l.content,c.content,r,this.config):void 0,f=l!==void 0&&l.oldNumber!==void 0?Object.assign(Object.assign({},u!==void 0?{prefix:u.oldLine.prefix,content:u.oldLine.content,type:Lt.DELETE_CHANGES}:Object.assign(Object.assign({},rn(l.content,r)),{type:tl(l.type)})),{oldNumber:l.oldNumber,newNumber:l.newNumber}):void 0,d=c!==void 0&&c.newNumber!==void 0?Object.assign(Object.assign({},u!==void 0?{prefix:u.newLine.prefix,content:u.newLine.content,type:Lt.INSERT_CHANGES}:Object.assign(Object.assign({},rn(c.content,r)),{type:tl(c.type)})),{oldNumber:c.oldNumber,newNumber:c.newNumber}):void 0,{left:h,right:m}=this.generateLineHtml(e,f,d);a.left+=h,a.right+=m}return a}generateLineHtml(e,r,n){return{left:this.generateSingleLineHtml(e,r),right:this.generateSingleLineHtml(e,n)}}generateSingleLineHtml(e,r){if(r===void 0)return"";let n=this.hoganUtils.render(kF,"numbers",{oldNumber:r.oldNumber||"",newNumber:r.newNumber||""});return this.hoganUtils.render(eu,"line",{type:r.type,lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line",prefix:r.prefix===" "?"&nbsp;":r.prefix,content:r.content,lineNumber:n,line:r,file:e})}};p();var C0=Object.assign(Object.assign({},ms),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),ru="generic",Dz="side-by-side",Lz="icon",Nz="tag",nu=class{constructor(e,r={}){this.hoganUtils=e,this.config=Object.assign(Object.assign({},C0),r)}render(e){let r=e.map(n=>{let i;return n.blocks.length?i=this.generateFileHtml(n):i=this.generateEmptyDiff(),this.makeFileDiffHtml(n,i)}).join(`
`);return this.hoganUtils.render(ru,"wrapper",{colorScheme:rl(this.config.colorScheme),content:r})}makeFileDiffHtml(e,r){if(this.config.renderNothingWhenEmpty&&Array.isArray(e.blocks)&&e.blocks.length===0)return"";let n=this.hoganUtils.template(Dz,"file-diff"),i=this.hoganUtils.template(ru,"file-path"),a=this.hoganUtils.template(Lz,"file"),s=this.hoganUtils.template(Nz,il(e));return n.render({file:e,fileHtmlId:nl(e),diffs:r,filePath:i.render({fileDiffName:gs(e)},{fileIcon:a,fileTag:s})})}generateEmptyDiff(){return{right:"",left:this.hoganUtils.render(ru,"empty-diff",{contentClass:"d2h-code-side-line",CSSLineClass:Lt})}}generateFileHtml(e){let r=el(Qo(n=>rn(n.content,e.isCombined).content));return e.blocks.map(n=>{let i={left:this.makeHeaderHtml(n.header,e),right:this.makeHeaderHtml("")};return this.applyLineGroupping(n).forEach(([a,s,o])=>{if(s.length&&o.length&&!a.length)this.applyRematchMatching(s,o,r).map(([l,c])=>{let{left:u,right:f}=this.processChangedLines(e.isCombined,l,c);i.left+=u,i.right+=f});else if(a.length)a.forEach(l=>{let{prefix:c,content:u}=rn(l.content,e.isCombined),{left:f,right:d}=this.generateLineHtml({type:Lt.CONTEXT,prefix:c,content:u,number:l.oldNumber},{type:Lt.CONTEXT,prefix:c,content:u,number:l.newNumber});i.left+=f,i.right+=d});else if(s.length||o.length){let{left:l,right:c}=this.processChangedLines(e.isCombined,s,o);i.left+=l,i.right+=c}else console.error("Unknown state reached while processing groups of lines",a,s,o)}),i}).reduce((n,i)=>({left:n.left+i.left,right:n.right+i.right}),{left:"",right:""})}applyLineGroupping(e){let r=[],n=[],i=[];for(let a=0;a<e.lines.length;a++){let s=e.lines[a];(s.type!==Ze.INSERT&&i.length||s.type===Ze.CONTEXT&&n.length>0)&&(r.push([[],n,i]),n=[],i=[]),s.type===Ze.CONTEXT?r.push([[s],[],[]]):s.type===Ze.INSERT&&n.length===0?r.push([[],[],[s]]):s.type===Ze.INSERT&&n.length>0?i.push(s):s.type===Ze.DELETE&&n.push(s)}return(n.length||i.length)&&(r.push([[],n,i]),n=[],i=[]),r}applyRematchMatching(e,r,n){let i=e.length*r.length,a=Ih(e.concat(r).map(o=>o.content.length));return i<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?n(e,r):[[e,r]]}makeHeaderHtml(e,r){return this.hoganUtils.render(ru,"block-header",{CSSLineClass:Lt,blockHeader:r!=null&&r.isTooBig?e:ka(e),lineClass:"d2h-code-side-linenumber",contentClass:"d2h-code-side-line"})}processChangedLines(e,r,n){let i={right:"",left:""},a=Math.max(r.length,n.length);for(let s=0;s<a;s++){let o=r[s],l=n[s],c=o!==void 0&&l!==void 0?Mh(o.content,l.content,e,this.config):void 0,u=o!==void 0&&o.oldNumber!==void 0?Object.assign(Object.assign({},c!==void 0?{prefix:c.oldLine.prefix,content:c.oldLine.content,type:Lt.DELETE_CHANGES}:Object.assign(Object.assign({},rn(o.content,e)),{type:tl(o.type)})),{number:o.oldNumber}):void 0,f=l!==void 0&&l.newNumber!==void 0?Object.assign(Object.assign({},c!==void 0?{prefix:c.newLine.prefix,content:c.newLine.content,type:Lt.INSERT_CHANGES}:Object.assign(Object.assign({},rn(l.content,e)),{type:tl(l.type)})),{number:l.newNumber}):void 0,{left:d,right:h}=this.generateLineHtml(u,f);i.left+=d,i.right+=h}return i}generateLineHtml(e,r){return{left:this.generateSingleHtml(e),right:this.generateSingleHtml(r)}}generateSingleHtml(e){let r="d2h-code-side-linenumber",n="d2h-code-side-line";return this.hoganUtils.render(ru,"line",{type:(e==null?void 0:e.type)||`${Lt.CONTEXT} d2h-emptyplaceholder`,lineClass:e!==void 0?r:`${r} d2h-code-side-emptyplaceholder`,contentClass:e!==void 0?n:`${n} d2h-code-side-emptyplaceholder`,prefix:(e==null?void 0:e.prefix)===" "?"&nbsp;":e==null?void 0:e.prefix,content:e==null?void 0:e.content,lineNumber:e==null?void 0:e.number})}};p();var $0=Ft(I0());p();var pt=Ft(I0()),dt={};dt["file-summary-line"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<li class="d2h-file-list-line">'),n.b(`
`+r),n.b('    <span class="d2h-file-name-wrapper">'),n.b(`
`+r),n.b(n.rp("<fileIcon0",t,e,"      ")),n.b('      <a href="#'),n.b(n.v(n.f("fileHtmlId",t,e,0))),n.b('" class="d2h-file-name">'),n.b(n.v(n.f("fileName",t,e,0))),n.b("</a>"),n.b(`
`+r),n.b('      <span class="d2h-file-stats">'),n.b(`
`+r),n.b('          <span class="d2h-lines-added">'),n.b(n.v(n.f("addedLines",t,e,0))),n.b("</span>"),n.b(`
`+r),n.b('          <span class="d2h-lines-deleted">'),n.b(n.v(n.f("deletedLines",t,e,0))),n.b("</span>"),n.b(`
`+r),n.b("      </span>"),n.b(`
`+r),n.b("    </span>"),n.b(`
`+r),n.b("</li>"),n.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}}},subs:{}});dt["file-summary-wrapper"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div class="d2h-file-list-wrapper '),n.b(n.v(n.f("colorScheme",t,e,0))),n.b('">'),n.b(`
`+r),n.b('    <div class="d2h-file-list-header">'),n.b(`
`+r),n.b('        <span class="d2h-file-list-title">Files changed ('),n.b(n.v(n.f("filesNumber",t,e,0))),n.b(")</span>"),n.b(`
`+r),n.b('        <a class="d2h-file-switch d2h-hide">hide</a>'),n.b(`
`+r),n.b('        <a class="d2h-file-switch d2h-show">show</a>'),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b('    <ol class="d2h-file-list">'),n.b(`
`+r),n.b("    "),n.b(n.t(n.f("files",t,e,0))),n.b(`
`+r),n.b("    </ol>"),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});dt["generic-block-header"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b("<tr>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.f("lineClass",t,e,0))),n.b(" "),n.b(n.v(n.d("CSSLineClass.INFO",t,e,0))),n.b('"></td>'),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.d("CSSLineClass.INFO",t,e,0))),n.b('">'),n.b(`
`+r),n.b('        <div class="'),n.b(n.v(n.f("contentClass",t,e,0))),n.b('">'),n.s(n.f("blockHeader",t,e,1),t,e,0,156,173,"{{ }}")&&(n.rs(t,e,function(i,a,s){s.b(s.t(s.f("blockHeader",i,a,0)))}),t.pop()),n.s(n.f("blockHeader",t,e,1),t,e,1,0,0,"")||n.b("&nbsp;"),n.b("</div>"),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b("</tr>"),n.fl()},partials:{},subs:{}});dt["generic-empty-diff"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b("<tr>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.d("CSSLineClass.INFO",t,e,0))),n.b('">'),n.b(`
`+r),n.b('        <div class="'),n.b(n.v(n.f("contentClass",t,e,0))),n.b('">'),n.b(`
`+r),n.b("            File without changes"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b("</tr>"),n.fl()},partials:{},subs:{}});dt["generic-file-path"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-file-name-wrapper">'),n.b(`
`+r),n.b(n.rp("<fileIcon0",t,e,"    ")),n.b('    <span class="d2h-file-name">'),n.b(n.v(n.f("fileDiffName",t,e,0))),n.b("</span>"),n.b(`
`+r),n.b(n.rp("<fileTag1",t,e,"    ")),n.b("</span>"),n.b(`
`+r),n.b('<label class="d2h-file-collapse">'),n.b(`
`+r),n.b('    <input class="d2h-file-collapse-input" type="checkbox" name="viewed" value="viewed">'),n.b(`
`+r),n.b("    Viewed"),n.b(`
`+r),n.b("</label>"),n.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}},"<fileTag1":{name:"fileTag",partials:{},subs:{}}},subs:{}});dt["generic-line"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b("<tr>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.f("lineClass",t,e,0))),n.b(" "),n.b(n.v(n.f("type",t,e,0))),n.b('">'),n.b(`
`+r),n.b("      "),n.b(n.t(n.f("lineNumber",t,e,0))),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.f("type",t,e,0))),n.b('">'),n.b(`
`+r),n.b('        <div class="'),n.b(n.v(n.f("contentClass",t,e,0))),n.b('">'),n.b(`
`+r),n.s(n.f("prefix",t,e,1),t,e,0,162,238,"{{ }}")&&(n.rs(t,e,function(i,a,s){s.b('            <span class="d2h-code-line-prefix">'),s.b(s.t(s.f("prefix",i,a,0))),s.b("</span>"),s.b(`
`+r)}),t.pop()),n.s(n.f("prefix",t,e,1),t,e,1,0,0,"")||(n.b('            <span class="d2h-code-line-prefix">&nbsp;</span>'),n.b(`
`+r)),n.s(n.f("content",t,e,1),t,e,0,371,445,"{{ }}")&&(n.rs(t,e,function(i,a,s){s.b('            <span class="d2h-code-line-ctn">'),s.b(s.t(s.f("content",i,a,0))),s.b("</span>"),s.b(`
`+r)}),t.pop()),n.s(n.f("content",t,e,1),t,e,1,0,0,"")||(n.b('            <span class="d2h-code-line-ctn"><br></span>'),n.b(`
`+r)),n.b("        </div>"),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b("</tr>"),n.fl()},partials:{},subs:{}});dt["generic-wrapper"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div class="d2h-wrapper '),n.b(n.v(n.f("colorScheme",t,e,0))),n.b('">'),n.b(`
`+r),n.b("    "),n.b(n.t(n.f("content",t,e,0))),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});dt["icon-file-added"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-added" height="16" title="added" version="1.1" viewBox="0 0 14 16"'),n.b(`
`+r),n.b('     width="14">'),n.b(`
`+r),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});dt["icon-file-changed"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"'),n.b(`
`+r),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+r),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});dt["icon-file-deleted"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-deleted" height="16" title="removed" version="1.1"'),n.b(`
`+r),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+r),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM11 9H3V7h8v2z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});dt["icon-file-renamed"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-moved" height="16" title="renamed" version="1.1"'),n.b(`
`+r),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+r),n.b('    <path d="M6 9H3V7h3V4l5 4-5 4V9z m8-7v12c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h12c0.55 0 1 0.45 1 1z m-1 0H1v12h12V2z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});dt["icon-file"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">'),n.b(`
`+r),n.b('    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});dt["line-by-line-file-diff"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div id="'),n.b(n.v(n.f("fileHtmlId",t,e,0))),n.b('" class="d2h-file-wrapper" data-lang="'),n.b(n.v(n.d("file.language",t,e,0))),n.b('">'),n.b(`
`+r),n.b('    <div class="d2h-file-header">'),n.b(`
`+r),n.b("    "),n.b(n.t(n.f("filePath",t,e,0))),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b('    <div class="d2h-file-diff">'),n.b(`
`+r),n.b('        <div class="d2h-code-wrapper">'),n.b(`
`+r),n.b('            <table class="d2h-diff-table">'),n.b(`
`+r),n.b('                <tbody class="d2h-diff-tbody">'),n.b(`
`+r),n.b("                "),n.b(n.t(n.f("diffs",t,e,0))),n.b(`
`+r),n.b("                </tbody>"),n.b(`
`+r),n.b("            </table>"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});dt["line-by-line-numbers"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div class="line-num1">'),n.b(n.v(n.f("oldNumber",t,e,0))),n.b("</div>"),n.b(`
`+r),n.b('<div class="line-num2">'),n.b(n.v(n.f("newNumber",t,e,0))),n.b("</div>"),n.fl()},partials:{},subs:{}});dt["side-by-side-file-diff"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div id="'),n.b(n.v(n.f("fileHtmlId",t,e,0))),n.b('" class="d2h-file-wrapper" data-lang="'),n.b(n.v(n.d("file.language",t,e,0))),n.b('">'),n.b(`
`+r),n.b('    <div class="d2h-file-header">'),n.b(`
`+r),n.b("      "),n.b(n.t(n.f("filePath",t,e,0))),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b('    <div class="d2h-files-diff">'),n.b(`
`+r),n.b('        <div class="d2h-file-side-diff">'),n.b(`
`+r),n.b('            <div class="d2h-code-wrapper">'),n.b(`
`+r),n.b('                <table class="d2h-diff-table">'),n.b(`
`+r),n.b('                    <tbody class="d2h-diff-tbody">'),n.b(`
`+r),n.b("                    "),n.b(n.t(n.d("diffs.left",t,e,0))),n.b(`
`+r),n.b("                    </tbody>"),n.b(`
`+r),n.b("                </table>"),n.b(`
`+r),n.b("            </div>"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b('        <div class="d2h-file-side-diff">'),n.b(`
`+r),n.b('            <div class="d2h-code-wrapper">'),n.b(`
`+r),n.b('                <table class="d2h-diff-table">'),n.b(`
`+r),n.b('                    <tbody class="d2h-diff-tbody">'),n.b(`
`+r),n.b("                    "),n.b(n.t(n.d("diffs.right",t,e,0))),n.b(`
`+r),n.b("                    </tbody>"),n.b(`
`+r),n.b("                </table>"),n.b(`
`+r),n.b("            </div>"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});dt["tag-file-added"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-added d2h-added-tag">ADDED</span>'),n.fl()},partials:{},subs:{}});dt["tag-file-changed"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span>'),n.fl()},partials:{},subs:{}});dt["tag-file-deleted"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-deleted d2h-deleted-tag">DELETED</span>'),n.fl()},partials:{},subs:{}});dt["tag-file-renamed"]=new pt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-moved d2h-moved-tag">RENAMED</span>'),n.fl()},partials:{},subs:{}});var iu=class{constructor({compiledTemplates:e={},rawTemplates:r={}}){let n=Object.entries(r).reduce((i,[a,s])=>{let o=$0.compile(s,{asString:!1});return Object.assign(Object.assign({},i),{[a]:o})},{});this.preCompiledTemplates=Object.assign(Object.assign(Object.assign({},dt),e),n)}static compile(e){return $0.compile(e,{asString:!1})}render(e,r,n,i,a){let s=this.templateKey(e,r);try{return this.preCompiledTemplates[s].render(n,i,a)}catch(o){throw new Error(`Could not find template to render '${s}'`)}}template(e,r){return this.preCompiledTemplates[this.templateKey(e,r)]}templateKey(e,r){return`${e}-${r}`}};var Hz=Object.assign(Object.assign(Object.assign({},T0),C0),{outputFormat:sF.LINE_BY_LINE,drawFileList:!0});function Nh(t,e={}){let r=Object.assign(Object.assign({},Hz),e),n=typeof t=="string"?pF(t,r):t,i=new iu(r),{colorScheme:a}=r,s={colorScheme:a},o=r.drawFileList?new Dh(i,s).render(n):"",l=r.outputFormat==="side-by-side"?new nu(i,r).render(n):new tu(i,r).render(n);return o+l}var FF=Ft(IF());var su=require("obsidian"),F0=au.StateEffect.define();function vs(t,e){let r=t.state,n=r.field(Hh),i=r.field(tn),a=r.doc.lineAt(e!=null?e:r.selection.main.head).number,s=St.findHunk(a,i==null?void 0:i.hunks)[0];if(!s)return;let o=r.doc.line(Math.max(1,s.added.start)).from,l=n.has(o);return r.field(su.editorEditorField).dispatch({effects:F0.of({pos:o,add:!l})})}var Hh=au.StateField.define({create:()=>new Set,update(t,e){let r=new Set;for(let n of e.effects)n.is(F0)&&(n.value.add?t.add(n.value.pos):t.delete(n.value.pos));for(let n of t)r.add(e.changes.mapPos(n));return r}}),OF=au.StateField.define({create:t=>$F(t),update(t,e){return e.docChanged||e.effects.some(r=>r.is(Jo)||r.is(F0))?$F(e.state):t},provide:t=>Bh.showTooltip.computeN([t],e=>e.field(t))}),MF=Bh.EditorView.baseTheme({".cm-tooltip.git-diff-tooltip":{"z-index":"var(--layer-popover)",backgroundColor:"var(--background-primary-alt)",border:"var(--border-width) solid var(--background-primary-alt)",borderRadius:"var(--radius-s)"},".cm-tooltip.git-diff-tooltip .tooltip-toolbar":{display:"flex",padding:"var(--size-2-1)"}});function $F(t){let e=t.field(tn);return e?[...t.field(Hh)].map(n=>{let i=t.doc.lineAt(n),a=St.findHunk(i.number,e.hunks)[0];if(a)return{pos:n,above:!1,arrow:!1,strictSide:!0,clip:!1,create:()=>Uz(a,t,n)}}).filter(n=>n!==void 0):[]}function Uz(t,e,r){let n=St.createPatch("file",[t],"10064",!1).join(`
`)+`
`,i=Nh(n,{colorScheme:FF.ColorSchemeType.AUTO,diffStyle:"word",drawFileList:!1}),a=new DOMParser().parseFromString(i,"text/html").querySelector(".d2h-file-diff"),s=document.createElement("div"),o=document.createElement("div");o.addClass("tooltip-toolbar");let l=(h,m)=>{let g=document.createElement("div");return(0,su.setIcon)(g,h),g.setAttr("aria-label",m),g.addClass("clickable-icon"),g},c=l("x","Close hunk"),u=l("plus","Stage hunk"),f=l("undo","Reset hunk");o.appendChild(c),o.appendChild(u),o.appendChild(f),s.appendChild(o),s.appendChild(a),s.addClass("git-diff-tooltip","git-diff");let d=e.field(su.editorEditorField);return c.onclick=()=>{vs(d,r)},u.onclick=()=>{let h=Zn.plugin;h&&(h.promiseQueue.addTask(()=>h.hunkActions.stageHunk(r)),vs(d,r))},f.onclick=()=>{let h=Zn.plugin;h&&(h.hunkActions.resetHunk(r),vs(d,r))},{dom:s,update:h=>{r=h.changes.mapPos(r)}}}function DF(t){let e=t.app;t.addCommand({id:"edit-gitignore",name:"Edit .gitignore",callback:async()=>{let r=t.gitManager.getRelativeVaultPath(".gitignore");await e.vault.adapter.exists(r)||await e.vault.adapter.write(r,"");let n=await e.vault.adapter.read(r),a=await new bh(e,n).openAndGetReslt();a!==void 0&&(await e.vault.adapter.write(r,a),await t.refresh())}}),t.addCommand({id:"open-git-view",name:"Open source control view",callback:async()=>{var i;let r=e.workspace.getLeavesOfType(Dt.type),n;r.length===0?(n=(i=e.workspace.getRightLeaf(!1))!=null?i:e.workspace.getLeaf(),await n.setViewState({type:Dt.type})):n=r.first(),await e.workspace.revealLeaf(n),e.workspace.trigger("obsidian-git:refresh")}}),t.addCommand({id:"open-history-view",name:"Open history view",callback:async()=>{var i;let r=e.workspace.getLeavesOfType(Jr.type),n;r.length===0?(n=(i=e.workspace.getRightLeaf(!1))!=null?i:e.workspace.getLeaf(),await n.setViewState({type:Jr.type})):n=r.first(),await e.workspace.revealLeaf(n),e.workspace.trigger("obsidian-git:refresh")}}),t.addCommand({id:"open-diff-view",name:"Open diff view",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;{let i=t.gitManager.getRelativeRepoPath(n.path,!0);t.tools.openDiff({aFile:i,aRef:""})}}}),t.addCommand({id:"view-file-on-github",name:"Open file on GitHub",editorCallback:(r,{file:n})=>{if(n)return w$(r,n,t.gitManager)}}),t.addCommand({id:"view-history-on-github",name:"Open file history on GitHub",editorCallback:(r,{file:n})=>{if(n)return y$(n,t.gitManager)}}),t.addCommand({id:"pull",name:"Pull",callback:()=>t.promiseQueue.addTask(()=>t.pullChangesFromRemote())}),t.addCommand({id:"fetch",name:"Fetch",callback:()=>t.promiseQueue.addTask(()=>t.fetch())}),t.addCommand({id:"switch-to-remote-branch",name:"Switch to remote branch",callback:()=>t.promiseQueue.addTask(()=>t.switchRemoteBranch())}),t.addCommand({id:"add-to-gitignore",name:"Add file to .gitignore",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;t.addFileToGitignore(n.path,n instanceof kn.TFolder).catch(i=>t.displayError(i))}}),t.addCommand({id:"push",name:"Commit-and-sync",callback:()=>t.promiseQueue.addTask(()=>t.commitAndSync({fromAutoBackup:!1}))}),t.addCommand({id:"backup-and-close",name:"Commit-and-sync and then close Obsidian",callback:()=>t.promiseQueue.addTask(async()=>{await t.commitAndSync({fromAutoBackup:!1}),window.close()})}),t.addCommand({id:"commit-push-specified-message",name:"Commit-and-sync with specific message",callback:()=>t.promiseQueue.addTask(()=>t.commitAndSync({fromAutoBackup:!1,requestCustomMessage:!0}))}),t.addCommand({id:"commit",name:"Commit all changes",callback:()=>t.promiseQueue.addTask(()=>t.commit({fromAuto:!1}))}),t.addCommand({id:"commit-specified-message",name:"Commit all changes with specific message",callback:()=>t.promiseQueue.addTask(()=>t.commit({fromAuto:!1,requestCustomMessage:!0}))}),t.addCommand({id:"commit-smart",name:"Commit",callback:()=>t.promiseQueue.addTask(async()=>{let n=(await t.updateCachedStatus()).staged.length>0;return t.commit({fromAuto:!1,requestCustomMessage:!1,onlyStaged:n})})}),t.addCommand({id:"commit-staged",name:"Commit staged",checkCallback:function(r){if(r)return!1;t.promiseQueue.addTask(async()=>t.commit({fromAuto:!1,requestCustomMessage:!1}))}}),kn.Platform.isDesktopApp&&t.addCommand({id:"commit-amend-staged-specified-message",name:"Amend staged",callback:()=>t.promiseQueue.addTask(()=>t.commit({fromAuto:!1,requestCustomMessage:!0,onlyStaged:!0,amend:!0}))}),t.addCommand({id:"commit-smart-specified-message",name:"Commit with specific message",callback:()=>t.promiseQueue.addTask(async()=>{let n=(await t.updateCachedStatus()).staged.length>0;return t.commit({fromAuto:!1,requestCustomMessage:!0,onlyStaged:n})})}),t.addCommand({id:"commit-staged-specified-message",name:"Commit staged with specific message",checkCallback:function(r){return r?!1:t.promiseQueue.addTask(()=>t.commit({fromAuto:!1,requestCustomMessage:!0,onlyStaged:!0}))}}),t.addCommand({id:"push2",name:"Push",callback:()=>t.promiseQueue.addTask(()=>t.push())}),t.addCommand({id:"stage-current-file",name:"Stage current file",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;t.promiseQueue.addTask(()=>t.stageFile(n))}}),t.addCommand({id:"unstage-current-file",name:"Unstage current file",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;t.promiseQueue.addTask(()=>t.unstageFile(n))}}),t.addCommand({id:"edit-remotes",name:"Edit remotes",callback:()=>t.editRemotes().catch(r=>t.displayError(r))}),t.addCommand({id:"remove-remote",name:"Remove remote",callback:()=>t.removeRemote().catch(r=>t.displayError(r))}),t.addCommand({id:"set-upstream-branch",name:"Set upstream branch",callback:()=>t.setUpstreamBranch().catch(r=>t.displayError(r))}),t.addCommand({id:"delete-repo",name:"CAUTION: Delete repository",callback:async()=>{await e.vault.adapter.exists(`${t.settings.basePath}/.git`)?await new ze(t,{options:["NO","YES"],placeholder:"Do you really want to delete the repository (.git directory)? plugin action cannot be undone.",onlySelection:!0}).openAndGetResult()==="YES"&&(await e.vault.adapter.rmdir(`${t.settings.basePath}/.git`,!0),new kn.Notice("Successfully deleted repository. Reloading plugin..."),t.unloadPlugin(),await t.init({fromReload:!0})):new kn.Notice("No repository found")}}),t.addCommand({id:"init-repo",name:"Initialize a new repo",callback:()=>t.createNewRepo().catch(r=>t.displayError(r))}),t.addCommand({id:"clone-repo",name:"Clone an existing remote repo",callback:()=>t.cloneNewRepo().catch(r=>t.displayError(r))}),t.addCommand({id:"list-changed-files",name:"List changed files",callback:async()=>{if(await t.isAllInitialized())try{let r=await t.updateCachedStatus();if(r.changed.length+r.staged.length>500){t.displayError("Too many changes to display");return}new yh(t,r.all).open()}catch(r){t.displayError(r)}}}),t.addCommand({id:"switch-branch",name:"Switch branch",callback:()=>{t.switchBranch().catch(r=>t.displayError(r))}}),t.addCommand({id:"create-branch",name:"Create new branch",callback:()=>{t.createBranch().catch(r=>t.displayError(r))}}),t.addCommand({id:"delete-branch",name:"Delete branch",callback:()=>{t.deleteBranch().catch(r=>t.displayError(r))}}),t.addCommand({id:"discard-all",name:"CAUTION: Discard all changes",callback:async()=>{let r=await t.discardAll();switch(r){case"discard":new kn.Notice("Discarded all changes in tracked files.");break;case"delete":new kn.Notice("Discarded all files.");break;case!1:break;default:Rd(r)}}}),t.addCommand({id:"pause-automatic-routines",name:"Pause/Resume automatic routines",callback:()=>{let r=!t.localStorage.getPausedAutomatics();t.localStorage.setPausedAutomatics(r),r?(t.automaticsManager.unload(),new kn.Notice("Paused automatic routines.")):(t.automaticsManager.reload("commit","push","pull"),new kn.Notice("Resumed automatic routines."))}}),t.addCommand({id:"raw-command",name:"Raw command",checkCallback:r=>{let n=t.gitManager;if(r)return n instanceof _e;t.tools.runRawCommand().catch(i=>t.displayError(i))}}),t.addCommand({id:"toggle-line-author-info",name:"Toggle line author information",callback:()=>{var r;return(r=t.settingsTab)==null?void 0:r.configureLineAuthorShowStatus(!t.settings.lineAuthor.show)}}),t.addCommand({id:"reset-hunk",name:"Reset hunk",editorCheckCallback(r,n,i){if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.hunkActions.resetHunk()}}),t.addCommand({id:"stage-hunk",name:"Stage hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.promiseQueue.addTask(()=>t.hunkActions.stageHunk())}}),t.addCommand({id:"preview-hunk",name:"Preview hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;let a=t.hunkActions.editor.editor;vs(a)}}),t.addCommand({id:"next-hunk",name:"Go to next hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.hunkActions.goToHunk("next")}}),t.addCommand({id:"prev-hunk",name:"Go to previous hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.hunkActions.goToHunk("prev")}})}p();var Uh=class{constructor(e){this.plugin=e;this.prefix=this.plugin.manifest.id+":",this.app=e.app}migrate(){let e=["password","hostname","conflict","lastAutoPull","lastAutoBackup","lastAutoPush","gitPath","pluginDisabled"];for(let r of e){let n=localStorage.getItem(this.prefix+r);this.app.loadLocalStorage(this.prefix+r)==null&&n!=null&&n!=null&&(this.app.saveLocalStorage(this.prefix+r,n),localStorage.removeItem(this.prefix+r))}}getPassword(){return this.app.loadLocalStorage(this.prefix+"password")}setPassword(e){return this.app.saveLocalStorage(this.prefix+"password",e)}getUsername(){return this.app.loadLocalStorage(this.prefix+"username")}setUsername(e){return this.app.saveLocalStorage(this.prefix+"username",e)}getHostname(){return this.app.loadLocalStorage(this.prefix+"hostname")}setHostname(e){return this.app.saveLocalStorage(this.prefix+"hostname",e)}getConflict(){return this.app.loadLocalStorage(this.prefix+"conflict")=="true"}setConflict(e){return this.app.saveLocalStorage(this.prefix+"conflict",`${e}`)}getLastAutoPull(){return this.app.loadLocalStorage(this.prefix+"lastAutoPull")}setLastAutoPull(e){return this.app.saveLocalStorage(this.prefix+"lastAutoPull",e)}getLastAutoBackup(){return this.app.loadLocalStorage(this.prefix+"lastAutoBackup")}setLastAutoBackup(e){return this.app.saveLocalStorage(this.prefix+"lastAutoBackup",e)}getLastAutoPush(){return this.app.loadLocalStorage(this.prefix+"lastAutoPush")}setLastAutoPush(e){return this.app.saveLocalStorage(this.prefix+"lastAutoPush",e)}getGitPath(){return this.app.loadLocalStorage(this.prefix+"gitPath")}setGitPath(e){return this.app.saveLocalStorage(this.prefix+"gitPath",e)}getPATHPaths(){var e,r;return(r=(e=this.app.loadLocalStorage(this.prefix+"PATHPaths"))==null?void 0:e.split(":"))!=null?r:[]}setPATHPaths(e){return this.app.saveLocalStorage(this.prefix+"PATHPaths",e.join(":"))}getEnvVars(){var e;return JSON.parse((e=this.app.loadLocalStorage(this.prefix+"envVars"))!=null?e:"[]")}setEnvVars(e){return this.app.saveLocalStorage(this.prefix+"envVars",JSON.stringify(e))}getPluginDisabled(){return this.app.loadLocalStorage(this.prefix+"pluginDisabled")=="true"}setPluginDisabled(e){return this.app.saveLocalStorage(this.prefix+"pluginDisabled",`${e}`)}getPausedAutomatics(){return this.app.loadLocalStorage(this.prefix+"pausedAutomatics")=="true"}setPausedAutomatics(e){return this.app.saveLocalStorage(this.prefix+"pausedAutomatics",`${e}`)}};p();var al=require("obsidian");var ou=class{constructor(e){this.plugin=e}async hasTooBigFiles(e){let r=await this.plugin.gitManager.branchInfo(),n=r.tracking?Ri(r.tracking)[0]:null;if(!n)return!1;let i=await this.plugin.gitManager.getRemoteUrl(n);if(i!=null&&i.includes("github.com")){let a=[],s=this.plugin.gitManager;for(let o of e){let l=this.plugin.app.vault.getAbstractFileByPath(o.vaultPath),c=!1;if(l instanceof al.TFile)l.stat.size>=1e8&&(c=!0);else{let u=await this.plugin.app.vault.adapter.stat(o.vaultPath);u&&u.size>=1e8&&(c=!0)}if(c){let u=!1;s instanceof _e&&(u=await s.isFileTrackedByLFS(o.path)),u||a.push(o)}}if(a.length>0)return this.plugin.displayError(`Aborted commit, because the following files are too big:
- ${a.map(o=>o.vaultPath).join(`
- `)}
Please remove them or add to .gitignore.`),!0}return!1}async writeAndOpenFile(e){e!==void 0&&await this.plugin.app.vault.adapter.write(Po,e);let r=!1;this.plugin.app.workspace.iterateAllLeaves(n=>{n.getDisplayText()!=""&&Po.startsWith(n.getDisplayText())&&(r=!0)}),r||await this.plugin.app.workspace.openLinkText(Po,"/",!0)}openDiff({aFile:e,bFile:r,aRef:n,bRef:i,event:a}){var l,c;let s=this.plugin.settings.diffStyle;al.Platform.isMobileApp&&(s="git_unified");let o={aFile:e,bFile:r!=null?r:e,aRef:n,bRef:i};s=="split"?(l=bn(this.plugin.app,a))==null||l.setViewState({type:ma.type,active:!0,state:o}):s=="git_unified"&&((c=bn(this.plugin.app,a))==null||c.setViewState({type:ga.type,active:!0,state:o}))}async runRawCommand(){let e=this.plugin.gitManager;if(!(e instanceof _e))return;let n=await new ze(this.plugin,{placeholder:"push origin master",allowEmpty:!1}).openAndGetResult();n!==void 0&&this.plugin.promiseQueue.addTask(async()=>{let i=new al.Notice(`Running '${n}'...`,999999);try{let a=await e.rawCommand(n);a?(i.setMessage(a),window.setTimeout(()=>i.hide(),5e3)):i.hide()}catch(a){throw i.hide(),a}})}};p();var jh=require("obsidian");var ws=class extends jh.ItemView{constructor(r,n){super(r);this.plugin=n;this.gettingDiff=!1;this.parser=new DOMParser,this.navigation=!0,this.contentEl.addClass("git-diff"),this.gitRefreshRef=this.app.workspace.on("obsidian-git:status-changed",()=>{this.refresh().catch(console.error)})}getViewType(){return ga.type}getDisplayText(){var r;if(((r=this.state)==null?void 0:r.bFile)!=null){let n=this.state.bFile.split("/").last();return n!=null&&n.endsWith(".md")&&(n=n.slice(0,-3)),`Diff: ${n}`}return ga.name}getIcon(){return ga.icon}async setState(r,n){this.state=r,jh.Platform.isMobile&&(this.leaf.view.titleEl.textContent=this.getDisplayText()),await this.refresh()}getState(){return this.state}onClose(){return this.app.workspace.offref(this.gitRefreshRef),this.app.workspace.offref(this.gitViewRefreshRef),super.onClose()}async onOpen(){return await this.refresh(),super.onOpen()}async refresh(){var r;if((r=this.state)!=null&&r.bFile&&!this.gettingDiff&&this.plugin.gitManager){this.gettingDiff=!0;try{let n=await this.plugin.gitManager.getDiffString(this.state.bFile,this.state.aRef=="HEAD",this.state.bRef);this.contentEl.empty();let i=this.plugin.gitManager.getRelativeVaultPath(this.state.bFile);if(!n){if(this.plugin.gitManager instanceof _e&&await this.plugin.gitManager.isTracked(this.state.bFile))n=[`--- ${this.state.aFile}`,`+++ ${this.state.bFile}`,""].join(`
`);else if(await this.app.vault.adapter.exists(i)){let a=await this.app.vault.adapter.read(i);n=[...`--- /dev/null
+++ ${this.state.bFile}
@@ -0,0 +1,${a.split(`
`).length} @@`.split(`
`),...a.split(`
`).map(o=>`+${o}`)].join(`
`)}}if(n){let a=this.parser.parseFromString(Nh(n),"text/html").querySelector(".d2h-file-diff");this.contentEl.append(a)}else{let a=this.contentEl.createDiv({cls:"obsidian-git-center"});a.createSpan({text:"\u26A0\uFE0F",attr:{style:"font-size: 2em"}}),a.createEl("br"),a.createSpan({text:"File not found: "+this.state.bFile})}}finally{this.gettingDiff=!1}}}};p();var Mi=require("obsidian");var ol=require("@codemirror/commands");var Gh=require("@codemirror/search"),sl=require("@codemirror/state"),an=require("@codemirror/view");var ys=class extends Mi.ItemView{constructor(r,n){super(r);this.plugin=n;this.refreshing=!1;this.ignoreNextModification=!1;this.navigation=!0,this.registerEvent(this.app.workspace.on("obsidian-git:status-changed",()=>{this.mergeView?this.updateRefEditors().catch(console.error):this.createMergeView().catch(console.error)})),this.intervalRef=window.setInterval(()=>{this.mergeView&&this.updateRefEditors().catch(console.error)},30*1e3),this.registerEvent(this.app.vault.on("modify",i=>{this.state.bRef==null&&i.path===this.state.bFile&&(this.ignoreNextModification?this.ignoreNextModification=!1:this.updateModifiableEditor().catch(console.error))})),this.registerEvent(this.app.vault.on("delete",i=>{this.state.bRef==null&&i.path===this.state.bFile&&this.createMergeView().catch(console.error)})),this.registerEvent(this.app.vault.on("create",i=>{this.state.bRef==null&&i.path===this.state.bFile&&this.createMergeView().catch(console.error)})),this.registerEvent(this.app.vault.on("rename",(i,a)=>{this.state.bRef==null&&(i.path===this.state.bFile||a===this.state.bFile)&&this.createMergeView().catch(console.error)})),this.fileSaveDebouncer=(0,Mi.debounce)(i=>{let a=this.state.bFile;a&&(this.ignoreNextModification=!0,this.plugin.app.vault.adapter.write(a,i).catch(s=>this.plugin.displayError(s)))},1e3,!1)}getViewType(){return ma.type}getDisplayText(){var r;if(((r=this.state)==null?void 0:r.bFile)!=null){let n=this.state.bFile.split("/").last();n!=null&&n.endsWith(".md")&&(n=n.slice(0,-3));let i;return this.state.bRef==null?i=" (Working Tree)":this.state.bRef==""?i=" (Index)":i="("+this.state.bRef.substring(0,7)+")",`Diff: ${n} ${i}`}return ma.name}getIcon(){return ma.icon}async setState(r,n){this.state=r,Mi.Platform.isMobile&&(this.leaf.view.titleEl.textContent=this.getDisplayText()),await super.setState(r,n),await this.createMergeView()}getState(){return this.state}onClose(){return window.clearInterval(this.intervalRef),super.onClose()}async onOpen(){return await this.createMergeView(),super.onOpen()}async gitShow(r,n){try{return await this.plugin.gitManager.show(r,n,!1)}catch(i){if(i instanceof br&&(i.message.includes("does not exist")||i.message.includes("unknown revision or path")||i.message.includes("exists on disk, but not in")||i.message.includes("fatal: bad object")))return i.message.includes("fatal: bad object")&&this.plugin.displayError(i.message),"";throw i}}async bShouldBeEditable(){if(this.state.bRef!=null)return!1;let r=this.plugin.gitManager.getRelativeVaultPath(this.state.bFile);return await this.app.vault.adapter.exists(r)}async updateModifiableEditor(){if(!this.mergeView||this.refreshing)return;let r=this.mergeView.b;this.refreshing=!0;let n=await this.app.vault.adapter.read(this.state.bFile);if(n!=r.state.doc.toString()){let i=r.state.update({changes:{from:0,to:r.state.doc.length,insert:n},annotations:[sl.Transaction.remote.of(!0)]});r.dispatch(i)}this.refreshing=!1}async updateRefEditors(){if(!this.mergeView||this.refreshing)return;let r=this.mergeView.a,n=this.mergeView.b;this.refreshing=!0;let i=await this.gitShow(this.state.aRef,this.state.aFile),a;if(this.state.bRef!=null&&(a=await this.gitShow(this.state.bRef,this.state.bFile)),i!=r.state.doc.toString()){let s=r.state.update({changes:{from:0,to:r.state.doc.length,insert:i}});r.dispatch(s)}if(a!=null&&a!=n.state.doc.toString()){let s=n.state.update({changes:{from:0,to:n.state.doc.length,insert:a}});n.dispatch(s)}this.refreshing=!1}renderButtons(){let r=document.createElement("div"),n=r.createDiv();if(n.addClass("clickable-icon"),n.setAttr("aria-label",this.state.bRef==null?"Stage hunk":"Unstage hunk"),(0,Mi.setIcon)(n,this.state.bRef==null?"plus":"minus"),n.onmousedown=async i=>{var h;let a=this.mergeView.b,s=this.mergeView.a,o=h0(a.state),l=(h=r.parentElement)==null?void 0:h.indexOf(r),c=o.chunks[l],u=g0(c,s.state.doc,a.state.doc),f=m0(this.mergeView.a.state.doc.toString(),this.mergeView.b.state.doc.toString(),[u])[0],d=St.createPatch(this.state.bFile,[f],"100644",this.state.bRef!=null).join(`
`)+`
`;await this.plugin.gitManager.applyPatch(d),this.plugin.app.workspace.trigger("obsidian-git:refresh")},this.state.bRef==null){let i=r.createDiv();i.addClass("clickable-icon"),i.setAttr("aria-label","Reset hunk"),(0,Mi.setIcon)(i,"undo"),i.onmousedown=a=>{var f;let s=this.mergeView.a,o=this.mergeView.b,l=h0(o.state),c=(f=r.parentElement)==null?void 0:f.indexOf(r),u=l.chunks[c];if(u){let d=u.fromA,h=u.toA,m=u.fromB,g=u.toB,v=s.state.sliceDoc(d,Math.max(d,h-1));d!=h&&g<=o.state.doc.length&&(v+=s.state.lineBreak),o.dispatch({changes:{from:m,to:Math.min(o.state.doc.length,g),insert:v},userEvent:"revert"})}}}return r.onmousedown=i=>{i.preventDefault(),i.stopPropagation()},r}async createMergeView(){var r,n,i;if((r=this.state)!=null&&r.aFile&&((n=this.state)!=null&&n.bFile)&&!this.refreshing&&this.plugin.gitManager){this.refreshing=!0,(i=this.mergeView)==null||i.destroy();let a=this.containerEl.children[1];a.empty(),this.contentEl.addClass("git-split-diff-view","git-diff"),this.bIsEditable=await this.bShouldBeEditable();let s=await this.gitShow(this.state.aRef,this.state.aFile),o;if(this.state.bRef!=null)o=await this.gitShow(this.state.bRef,this.state.bFile);else{let g=this.plugin.gitManager.getRelativeVaultPath(this.state.bFile);await this.app.vault.adapter.exists(g)?o=await this.app.vault.adapter.read(g):o=""}let l=[(0,an.lineNumbers)(),(0,Gh.highlightSelectionMatches)(),(0,an.drawSelection)(),an.keymap.of([...ol.standardKeymap,ol.indentWithTab]),(0,ol.history)(),(0,Gh.search)(),an.EditorView.lineWrapping],c=this,u=an.ViewPlugin.define(g=>({update(v){if(v.docChanged&&!v.transactions.some(w=>w.annotation(sl.Transaction.remote))){let w=g.state.doc.toString();c.fileSaveDebouncer(w)}}})),f={doc:s,extensions:[...l,an.EditorView.editable.of(!1),sl.EditorState.readOnly.of(!0)]},d=[...l];this.bIsEditable?d.push(u):d.push(an.EditorView.editable.of(!1),sl.EditorState.readOnly.of(!0));let h={doc:o,extensions:d};a.addClasses(["cm-s-obsidian","mod-cm6","markdown-source-view","cm-content"]);let m=this.plugin.gitManager instanceof _e&&(this.state.bRef===void 0||this.state.bRef==="");this.mergeView=new Ch({b:h,a:f,collapseUnchanged:{minSize:6,margin:4},renderRevertControl:m?()=>this.renderButtons():void 0,revertControls:m?"a-to-b":void 0,diffConfig:{scanLimit:this.bIsEditable?1e3:1e4},parent:a}),this.refreshing=!1}}};p();var oM=require("obsidian");p();p();p();var LF="5";var NF,BF,HF;typeof window!="undefined"&&((HF=(BF=(NF=window.__svelte)!=null?NF:window.__svelte={}).v)!=null?HF:BF.v=new Set).add(LF);p();p();p();var ll="[",Aa="[!",bs="]",Di={};var Ve=Symbol(),sn=Symbol("filename"),UF=Symbol("hmr"),jF="http://www.w3.org/1999/xhtml";p();p();p();p();var qh=!0;p();var D=!1;p();var on=Array.isArray,GF=Array.prototype.indexOf,lu=Array.from,O0=Object.keys,Wt=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,M0=Object.getOwnPropertyDescriptors,D0=Object.prototype,qF=Array.prototype,cl=Object.getPrototypeOf,L0=Object.isExtensible;function N0(t){return typeof t=="function"}var ar=()=>{};function cu(t){for(var e=0;e<t.length;e++)t[e]()}function zF(){var t,e,r=new Promise((n,i)=>{t=n,e=i});return{promise:r,resolve:t,reject:e}}p();p();var Sr=Symbol("$state"),uu=Symbol("legacy props"),VF=Symbol(""),zh=Symbol("proxy path"),ul=new class extends Error{constructor(){super(...arguments);vt(this,"name","StaleReactionError");vt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var fu=3,ln=8;p();p();function WF(){if(D){let t=new Error("await_outside_boundary\nCannot await outside a `<svelte:boundary>` with a `pending` snippet\nhttps://svelte.dev/e/await_outside_boundary");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/await_outside_boundary")}function du(t){if(D){let e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function YF(){if(D){let t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function B0(){if(D){let t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function XF(){if(D){let t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function ZF(t){if(D){let e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function KF(){if(D){let t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function JF(t){if(D){let e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function QF(){if(D){let t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function eO(){if(D){let t=new Error("flush_sync_in_effect\nCannot use `flushSync` inside an effect\nhttps://svelte.dev/e/flush_sync_in_effect");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/flush_sync_in_effect")}function tO(){if(D){let t=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/hydration_failed")}function rO(t){if(D){let e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function nO(t){if(D){let e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function iO(){if(D){let t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function aO(){if(D){let t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function sO(){if(D){let t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}p();p();p();var _s="font-weight: bold",xs="font-weight: normal";function oO(t){D?console.warn(`%c[svelte] await_reactivity_loss
%cDetected reactivity loss when reading \`${t}\`. This happens when state is read in an async function after an earlier \`await\`
https://svelte.dev/e/await_reactivity_loss`,_s,xs):console.warn("https://svelte.dev/e/await_reactivity_loss")}function lO(t,e){D?console.warn(`%c[svelte] await_waterfall
%cAn async derived, \`${t}\` (${e}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app
https://svelte.dev/e/await_waterfall`,_s,xs):console.warn("https://svelte.dev/e/await_waterfall")}function cO(t,e,r){D?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${t}\` attribute on \`${e}\` changed its value between server and client renders. The client value, \`${r}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,_s,xs):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function Ss(t){D?console.warn(`%c[svelte] hydration_mismatch
%c${t?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${t}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,_s,xs):console.warn("https://svelte.dev/e/hydration_mismatch")}function uO(){D?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,_s,xs):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function Vh(t){D?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,_s,xs):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function fO(t){D?console.warn(`%c[svelte] transition_slide_display
%cThe \`slide\` transition does not work correctly for elements with \`display: ${t}\`
https://svelte.dev/e/transition_slide_display`,_s,xs):console.warn("https://svelte.dev/e/transition_slide_display")}var ae=!1;function Xt(t){ae=t}var pe;function et(t){if(t===null)throw Ss(),Di;return pe=t}function Zt(){return et(Bt(pe))}function U(t){if(ae){if(Bt(pe)!==null)throw Ss(),Di;pe=t}}function fl(t=1){if(ae){for(var e=t,r=pe;e--;)r=Bt(r);pe=r}}function Es(){for(var t=0,e=pe;;){if(e.nodeType===ln){var r=e.data;if(r===bs){if(t===0)return e;t-=1}else(r===ll||r===Aa)&&(t+=1)}var n=Bt(e);e.remove(),e=n}}function Wh(t){if(!t||t.nodeType!==ln)throw Ss(),Di;return t.data}p();p();p();p();function Yh(t){return t===this.v}function Xh(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Zh(t){return!Xh(t,this.v)}p();var An=!1,Li=!1,ii=!1;p();p();p();var hu=null;function ai(t){let e=Error(),r=e.stack;if(!r)return null;let n=r.split(`
`),i=[`
`];for(let a=0;a<n.length;a++){let s=n[a];if(s!=="Error"){if(s.includes("validate_each_keys"))return null;s.includes("svelte/src/internal")||i.push(s)}}return i.length===1?null:(Wt(e,"stack",{value:i.join(`
`)}),Wt(e,"name",{value:`${t}Error`}),e)}function cn(t,e){return t.label=e,Kh(t.v,e),t}function Kh(t,e){var r;return(r=t==null?void 0:t[zh])==null||r.call(t,e),t}p();var ve=null;function Ca(t){ve=t}var Bi=null;function Jh(t){Bi=t}var Tn=null;function pu(t){Tn=t}function tt(t,e=!1,r){ve={p:ve,c:null,e:null,s:t,x:null,l:Li&&!e?{s:null,u:null,$:[]}:null},D&&(ve.function=r,Tn=r)}function rt(t){var i;var e=ve,r=e.e;if(r!==null){e.e=null;for(var n of r)U0(n)}return t!==void 0&&(e.x=t),ve=e.p,D&&(Tn=(i=ve==null?void 0:ve.function)!=null?i:null),t!=null?t:{}}function un(){return!Li||ve!==null&&ve.l===null}p();p();p();var j0=new WeakMap;function G0(t){var e=Q;if(e===null)return se.f|=8388608,t;if(D&&t instanceof Error&&!j0.has(t)&&j0.set(t,Gz(t,e)),e.f&32768)dl(t,e);else{if(!(e.f&128))throw!e.parent&&t instanceof Error&&pO(t),t;e.b.error(t)}}function dl(t,e){for(;e!==null;){if(e.f&128)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&pO(t),t}function Gz(t,e){var s,o,l;let r=xr(t,"message");if(!(r&&!r.configurable)){for(var n=mu?"  ":"	",i=`
${n}in ${((s=e.fn)==null?void 0:s.name)||"<unknown>"}`,a=e.ctx;a!==null;)i+=`
${n}in ${(o=a.function)==null?void 0:o[sn].split("/").pop()}`,a=a.p;return{message:t.message+`
${i}
`,stack:(l=t.stack)==null?void 0:l.split(`
`).filter(c=>!c.includes("svelte/src/internal")).join(`
`)}}}function pO(t){let e=j0.get(t);e&&(Wt(t,"message",{value:e.message}),Wt(t,"stack",{value:e.stack}))}p();var gu=[],q0=[];function mO(){var t=gu;gu=[],cu(t)}function qz(){var t=q0;q0=[],cu(t)}function Nr(t){gu.length===0&&queueMicrotask(mO),gu.push(t)}function gO(){gu.length>0&&mO(),q0.length>0&&qz()}p();var cie=589952;function ep(){for(var t=Q.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&WF(),t}p();p();var Ui=null;function Y0(t){Ui=t}var wu=new Set;function ks(t){var e=2050,r=se!==null&&se.f&2?se:null;Q===null||r!==null&&r.f&256?e|=256:Q.f|=524288;let n={ctx:ve,deps:null,effects:null,equals:Yh,f:e,fn:t,reactions:null,rv:0,v:Ve,wv:0,parent:r!=null?r:Q,ac:null};return D&&ii&&(n.created=ai("CreatedAt")),n}function X0(t,e){let r=Q;r===null&&YF();var n=r.b,i=void 0,a=Br(Ve),s=null,o=!se;return vO(()=>{var h;D&&(Ui=Q);try{var l=t()}catch(m){l=Promise.reject(m)}D&&(Ui=null);var c=()=>l;i=(h=s==null?void 0:s.then(c,c))!=null?h:Promise.resolve(l),s=i;var u=Se,f=n.pending;o&&(n.update_pending_count(1),f||u.increment());let d=(m,g=void 0)=>{s=null,Ui=null,f||u.activate(),g?g!==ul&&(a.f|=8388608,oi(a,g)):(a.f&8388608&&(a.f^=8388608),oi(a,m),D&&e!==void 0&&(wu.add(a),setTimeout(()=>{wu.has(a)&&(lO(a.label,e),wu.delete(a))}))),o&&(n.update_pending_count(-1),f||u.decrement()),np()};if(i.then(d,m=>d(null,m||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),D&&(a.f|=4194304),new Promise(l=>{function c(u){function f(){u===i?l(a):c(i)}u.then(f,f)}c(i)})}function Pt(t){let e=ks(t);return ip(e),e}function As(t){let e=ks(t);return e.equals=Zh,e}function tp(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)At(e[r])}}var V0=[];function zz(t){for(var e=t.parent;e!==null;){if(!(e.f&2))return e;e=e.parent}return null}function yu(t){var e,r=Q;if(Ht(zz(t)),D){let n=Ts;W0(new Set);try{V0.includes(t)&&XF(),V0.push(t),tp(t),e=rp(t)}finally{Ht(r),W0(n),V0.pop()}}else try{tp(t),e=rp(t)}finally{Ht(r)}return e}function Z0(t){var e=yu(t);if(t.equals(e)||(t.v=e,t.wv=bu()),!Cn)if(Pa!==null)Pa.set(t,t.v);else{var r=(ji||t.f&256)&&t.deps!==null?4096:1024;mt(t,r)}}function ap(t,e,r){let n=un()?ks:As;if(e.length===0){r(t.map(n));return}var i=Se,a=Q,s=Vz(),o=ep();Promise.all(e.map(l=>X0(l))).then(l=>{i==null||i.activate(),s();try{r([...t.map(n),...l])}catch(c){a.f&16384||dl(c,a)}i==null||i.deactivate(),np()}).catch(l=>{o.error(l)})}function Vz(){var t=Q,e=se,r=ve;return function(){Ht(t),Tt(e),Ca(r),D&&Y0(null)}}function np(){Ht(null),Tt(null),Ca(null),D&&Y0(null)}var _u=new Set,Se=null,xu=null,Pa=null,z0=new Set,lp=[];function yO(){let t=lp.shift();lp.length>0&&queueMicrotask(yO),t()}var Ps=[],fp=null,K0=!1,sp=!1,pl,ml,Ra,Su,Eu,Cs,gl,Ia,$a,vl,ku,Au,Rn,bO,op,J0,cp=class cp{constructor(){wt(this,Rn);vt(this,"current",new Map);wt(this,pl,new Map);wt(this,ml,new Set);wt(this,Ra,0);wt(this,Su,null);wt(this,Eu,!1);wt(this,Cs,[]);wt(this,gl,[]);wt(this,Ia,[]);wt(this,$a,[]);wt(this,vl,[]);wt(this,ku,[]);wt(this,Au,[]);vt(this,"skipped_effects",new Set)}process(e){var a;Ps=[],xu=null;var r=null;if(_u.size>1){r=new Map,Pa=new Map;for(let[s,o]of this.current)r.set(s,{v:s.v,wv:s.wv}),s.v=o;for(let s of _u)if(s!==this)for(let[o,l]of le(s,pl))r.has(o)||(r.set(o,{v:o.v,wv:o.wv}),o.v=l)}for(let s of e)vi(this,Rn,bO).call(this,s);if(le(this,Cs).length===0&&le(this,Ra)===0){vi(this,Rn,J0).call(this);var n=le(this,Ia),i=le(this,$a);Ot(this,Ia,[]),Ot(this,$a,[]),Ot(this,vl,[]),xu=Se,Se=null,wO(n),wO(i),Se===null?Se=this:_u.delete(this),(a=le(this,Su))==null||a.resolve()}else vi(this,Rn,op).call(this,le(this,Ia)),vi(this,Rn,op).call(this,le(this,$a)),vi(this,Rn,op).call(this,le(this,vl));if(r){for(let[s,{v:o,wv:l}]of r)s.wv<=l&&(s.v=o);Pa=null}for(let s of le(this,Cs))Gi(s);for(let s of le(this,gl))Gi(s);Ot(this,Cs,[]),Ot(this,gl,[])}capture(e,r){le(this,pl).has(e)||le(this,pl).set(e,r),this.current.set(e,e.v)}activate(){Se=this}deactivate(){Se=null,xu=null;for(let e of z0)if(z0.delete(e),e(),Se!==null)break}neuter(){Ot(this,Eu,!0)}flush(){Ps.length>0?Q0():vi(this,Rn,J0).call(this),Se===this&&(le(this,Ra)===0&&_u.delete(this),this.deactivate())}increment(){Ot(this,Ra,le(this,Ra)+1)}decrement(){if(Ot(this,Ra,le(this,Ra)-1),le(this,Ra)===0){for(let e of le(this,ku))mt(e,2048),ci(e);for(let e of le(this,Au))mt(e,4096),ci(e);Ot(this,Ia,[]),Ot(this,$a,[]),this.flush()}else this.deactivate()}add_callback(e){le(this,ml).add(e)}settled(){var e;return((e=le(this,Su))!=null?e:Ot(this,Su,zF())).promise}static ensure(){if(Se===null){let e=Se=new cp;_u.add(Se),sp||cp.enqueue(()=>{Se===e&&e.flush()})}return Se}static enqueue(e){lp.length===0&&queueMicrotask(yO),lp.unshift(e)}};pl=new WeakMap,ml=new WeakMap,Ra=new WeakMap,Su=new WeakMap,Eu=new WeakMap,Cs=new WeakMap,gl=new WeakMap,Ia=new WeakMap,$a=new WeakMap,vl=new WeakMap,ku=new WeakMap,Au=new WeakMap,Rn=new WeakSet,bO=function(e){var u;e.f^=1024;for(var r=e.first;r!==null;){var n=r.f,i=(n&96)!==0,a=i&&(n&1024)!==0,s=a||(n&8192)!==0||this.skipped_effects.has(r);if(!s&&r.fn!==null){if(i)r.f^=1024;else if(!(n&1024))if(n&4)le(this,$a).push(r);else if(An&&n&8)le(this,Ia).push(r);else if(n&4194304){var o=(u=r.b)!=null&&u.pending?le(this,gl):le(this,Cs);o.push(r)}else Fa(r)&&(r.f&16&&le(this,vl).push(r),Gi(r));var l=r.first;if(l!==null){r=l;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)r=c.next,c=c.parent}},op=function(e){for(let r of e)(r.f&2048?le(this,ku):le(this,Au)).push(r),mt(r,1024);e.length=0},J0=function(){if(!le(this,Eu))for(let e of le(this,ml))e();le(this,ml).clear()};var si=cp;function wl(t){An&&Q!==null&&eO();var e=sp;sp=!0;try{var r;for(t&&(Q0(),r=t());;){if(gO(),Ps.length===0&&(Se==null||Se.flush(),Ps.length===0))return fp=null,r;Q0()}}finally{sp=e}}function Q0(){var a;var t=Rs;K0=!0;try{var e=0;for(ey(!0);Ps.length>0;){var r=si.ensure();if(e++>1e3){if(D){var n=new Map;for(let s of r.current.keys())for(let[o,l]of(a=s.updated)!=null?a:[]){var i=n.get(o);i||(i={error:l.error,count:0},n.set(o,i)),i.count+=l.count}for(let s of n.values())console.error(s.error)}Wz()}r.process(Ps),qi.clear()}}finally{K0=!1,ey(t),fp=null}}function Wz(){try{QF()}catch(t){D&&Wt(t,"stack",{value:""}),dl(t,fp)}}function wO(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var n=t[r++];if(!(n.f&24576)&&Fa(n)){var i=Se?Se.current.size:0;if(Gi(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?ry(n):n.fn=null),Se!==null&&Se.current.size>i&&n.f&1048576)break}}for(;r<e;)ci(t[r++])}}function ci(t){for(var e=fp=t;e.parent!==null;){e=e.parent;var r=e.f;if(K0&&e===Q&&r&16)return;if(r&96){if(!(r&1024))return;e.f^=1024}}Ps.push(e)}var Ts=new Set,qi=new Map;function W0(t){Ts=t}var ny=!1;function _O(){ny=!0}function Br(t,e){var r={f:0,v:t,reactions:null,equals:Yh,rv:0,wv:0};return D&&ii&&(r.created=e!=null?e:ai("CreatedAt"),r.updated=null,r.set_during_effect=!1,r.trace=null),r}function Ce(t,e){let r=Br(t,e);return ip(r),r}function Is(t,e=!1,r=!0){var i,a;let n=Br(t);return e||(n.equals=Zh),Li&&r&&ve!==null&&ve.l!==null&&((a=(i=ve.l).s)!=null?a:i.s=[]).push(n),n}function ne(t,e,r=!1){var i;se!==null&&(!kr||se.f&131072)&&un()&&se.f&4325394&&!((i=Ar)!=null&&i.includes(t))&&sO();let n=r?Ne(e):e;return D&&Kh(n,t.label),oi(t,n)}function oi(t,e){var i;if(!t.equals(e)){var r=t.v;Cn?qi.set(t,e):qi.set(t,r),t.v=e;var n=si.ensure();if(n.capture(t,r),D){if(ii||Q!==null){let a=ai("UpdatedAt");if(a!==null){(i=t.updated)!=null||(t.updated=new Map);let s=t.updated.get(a.stack);s||(s={error:a,count:0},t.updated.set(a.stack,s)),s.count++}}Q!==null&&(t.set_during_effect=!0)}t.f&2&&(t.f&2048&&yu(t),mt(t,t.f&256?4096:1024)),t.wv=bu(),xO(t,2048),un()&&Q!==null&&Q.f&1024&&!(Q.f&96)&&(Ur===null?SO([t]):Ur.push(t)),D&&Ts.size>0&&!ny&&iy()}return e}function iy(){ny=!1;let t=Array.from(Ts);for(let e of t)e.f&1024&&mt(e,4096),Fa(e)&&Gi(e);Ts.clear()}function vu(t){ne(t,t.v+1)}function xO(t,e){var r=t.reactions;if(r!==null)for(var n=un(),i=r.length,a=0;a<i;a++){var s=r[a],o=s.f;if(!(!n&&s===Q)){if(D&&o&131072){Ts.add(s);continue}var l=(o&2048)===0;l&&mt(s,e),o&2?xO(s,4096):l&&ci(s)}}}var Yz=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Ne(t){if(typeof t!="object"||t===null||Sr in t)return t;let e=cl(t);if(e!==D0&&e!==qF)return t;var r=new Map,n=on(t),i=Ce(0),a=D&&ii?ai("CreatedAt"):null,s=Oa,o=u=>{if(Oa===s)return u();var f=se,d=Oa;Tt(null),ay(s);var h=u();return Tt(f),ay(d),h};n&&(r.set("length",Ce(t.length,a)),D&&(t=Zz(t)));var l="";function c(u){l=u,cn(i,`${l} version`);for(let[f,d]of r)cn(d,$s(l,f))}return new Proxy(t,{defineProperty(u,f,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&iO();var h=r.get(f);return h===void 0?h=o(()=>{var m=Ce(d.value,a);return r.set(f,m),D&&typeof f=="string"&&cn(m,$s(l,f)),m}):ne(h,d.value,!0),!0},deleteProperty(u,f){var d=r.get(f);if(d===void 0){if(f in u){let h=o(()=>Ce(Ve,a));r.set(f,h),vu(i),D&&cn(h,$s(l,f))}}else ne(d,Ve),vu(i);return!0},get(u,f,d){var v;if(f===Sr)return t;if(D&&f===zh)return c;var h=r.get(f),m=f in u;if(h===void 0&&(!m||(v=xr(u,f))!=null&&v.writable)&&(h=o(()=>{var w=Ne(m?u[f]:Ve),b=Ce(w,a);return D&&cn(b,$s(l,f)),b}),r.set(f,h)),h!==void 0){var g=R(h);return g===Ve?void 0:g}return Reflect.get(u,f,d)},getOwnPropertyDescriptor(u,f){var d=Reflect.getOwnPropertyDescriptor(u,f);if(d&&"value"in d){var h=r.get(f);h&&(d.value=R(h))}else if(d===void 0){var m=r.get(f),g=m==null?void 0:m.v;if(m!==void 0&&g!==Ve)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return d},has(u,f){var g;if(f===Sr)return!0;var d=r.get(f),h=d!==void 0&&d.v!==Ve||Reflect.has(u,f);if(d!==void 0||Q!==null&&(!h||(g=xr(u,f))!=null&&g.writable)){d===void 0&&(d=o(()=>{var v=h?Ne(u[f]):Ve,w=Ce(v,a);return D&&cn(w,$s(l,f)),w}),r.set(f,d));var m=R(d);if(m===Ve)return!1}return h},set(u,f,d,h){var A;var m=r.get(f),g=f in u;if(n&&f==="length")for(var v=d;v<m.v;v+=1){var w=r.get(v+"");w!==void 0?ne(w,Ve):v in u&&(w=o(()=>Ce(Ve,a)),r.set(v+"",w),D&&cn(w,$s(l,v)))}if(m===void 0)(!g||(A=xr(u,f))!=null&&A.writable)&&(m=o(()=>Ce(void 0,a)),ne(m,Ne(d)),r.set(f,m),D&&cn(m,$s(l,f)));else{g=m.v!==Ve;var b=o(()=>Ne(d));ne(m,b)}var S=Reflect.getOwnPropertyDescriptor(u,f);if(S!=null&&S.set&&S.set.call(h,d),!g){if(n&&typeof f=="string"){var E=r.get("length"),k=Number(f);Number.isInteger(k)&&k>=E.v&&ne(E,k+1)}vu(i)}return!0},ownKeys(u){R(i);var f=Reflect.ownKeys(u).filter(m=>{var g=r.get(m);return g===void 0||g.v!==Ve});for(var[d,h]of r)h.v!==Ve&&!(d in u)&&f.push(d);return f},setPrototypeOf(){aO()}})}function $s(t,e){var r;return typeof e=="symbol"?`${t}[Symbol(${(r=e.description)!=null?r:""})]`:Yz.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function dp(t){try{if(t!==null&&typeof t=="object"&&Sr in t)return t[Sr]}catch(e){}return t}var Xz=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Zz(t){return new Proxy(t,{get(e,r,n){var i=Reflect.get(e,r,n);return Xz.has(r)?function(...a){_O();var s=i.apply(this,a);return iy(),s}:i}})}function EO(){let t=Array.prototype,e=Array.__svelte_cleanup;e&&e();let{indexOf:r,lastIndexOf:n,includes:i}=t;t.indexOf=function(a,s){let o=r.call(this,a,s);if(o===-1){for(let l=s!=null?s:0;l<this.length;l+=1)if(dp(this[l])===a){Vh("array.indexOf(...)");break}}return o},t.lastIndexOf=function(a,s){let o=n.call(this,a,s!=null?s:this.length-1);if(o===-1){for(let l=0;l<=(s!=null?s:this.length-1);l+=1)if(dp(this[l])===a){Vh("array.lastIndexOf(...)");break}}return o},t.includes=function(a,s){let o=i.call(this,a,s);if(!o){for(let l=0;l<this.length;l+=1)if(dp(this[l])===a){Vh("array.includes(...)");break}}return o},Array.__svelte_cleanup=()=>{t.indexOf=r,t.lastIndexOf=n,t.includes=i}}var sy,kO,mu,AO,TO;function hp(){if(sy===void 0){sy=window,kO=document,mu=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;AO=xr(e,"firstChild").get,TO=xr(e,"nextSibling").get,L0(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),L0(r)&&(r.__t=void 0),D&&(t.__svelte_meta=null,EO())}}function Ut(t=""){return document.createTextNode(t)}function jt(t){return AO.call(t)}function Bt(t){return TO.call(t)}function q(t,e){if(!ae)return jt(t);var r=jt(pe);if(r===null)r=pe.appendChild(Ut());else if(e&&r.nodeType!==fu){var n=Ut();return r==null||r.before(n),et(n),n}return et(r),r}function Tr(t,e){var i,a;if(!ae){var r=jt(t);return r instanceof Comment&&r.data===""?Bt(r):r}if(e&&((i=pe)==null?void 0:i.nodeType)!==fu){var n=Ut();return(a=pe)==null||a.before(n),et(n),n}return pe}function ee(t,e=1,r=!1){let n=ae?pe:t;for(var i;e--;)i=n,n=Bt(n);if(!ae)return n;if(r&&(n==null?void 0:n.nodeType)!==fu){var a=Ut();return n===null?i==null||i.after(a):n.before(a),et(a),a}return et(n),n}function yl(t){t.textContent=""}function bl(){if(!An)return!1;var t=Q.f;return(t&32768)!==0}function PO(t){Q===null&&se===null&&JF(t),se!==null&&se.f&256&&Q===null&&KF(),Cn&&ZF(t)}function Kz(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function fi(t,e,r,n=!0){var l;var i=Q;if(D)for(;i!==null&&i.f&131072;)i=i.parent;i!==null&&i.f&8192&&(t|=8192);var a={ctx:ve,deps:null,nodes_start:null,nodes_end:null,f:t|2048,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(D&&(a.component_function=Tn),r)try{Gi(a),a.f|=32768}catch(c){throw At(a),c}else e!==null&&ci(a);var s=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&524288)===0;if(!s&&n&&(i!==null&&Kz(a,i),se!==null&&se.f&2&&!(t&64))){var o=se;((l=o.effects)!=null?l:o.effects=[]).push(a)}return a}function jr(t){let e=fi(8,null,!1);return mt(e,1024),e.teardown=t,e}function Jt(t){var i;PO("$effect"),D&&Wt(t,"name",{value:"$effect"});var e=Q.f,r=!se&&(e&32)!==0&&(e&32768)===0;if(r){var n=ve;((i=n.e)!=null?i:n.e=[]).push(t)}else return U0(t)}function U0(t){return fi(1048580,t,!1)}function ly(t){si.ensure();let e=fi(64,t,!0);return()=>{At(e)}}function RO(t){si.ensure();let e=fi(64,t,!0);return(r={})=>new Promise(n=>{r.outro?li(e,()=>{At(e),n(void 0)}):(At(e),n(void 0))})}function Cr(t){return fi(4,t,!1)}function vO(t){return fi(4718592,t,!0)}function Kt(t,e=0){return fi(8|e,t,!0)}function Fe(t,e=[],r=[]){ap(e,r,n=>{fi(8,()=>t(...n.map(R)),!0)})}function Er(t,e=0){var r=fi(16|e,t,!0);return D&&(r.dev_stack=Bi),r}function kt(t,e=!0){return fi(32,t,!0,e)}function cy(t){var e=t.teardown;if(e!==null){let r=Cn,n=se;oy(!0),Tt(null);try{e.call(null)}finally{oy(r),Tt(n)}}}function uy(t,e=!1){var i;var r=t.first;for(t.first=t.last=null;r!==null;){(i=r.ac)==null||i.abort(ul);var n=r.next;r.f&64?r.parent=null:At(r,e),r=n}}function IO(t){for(var e=t.first;e!==null;){var r=e.next;e.f&32||At(e),e=r}}function At(t,e=!0){var r=!1;(e||t.f&262144)&&t.nodes_start!==null&&t.nodes_end!==null&&($O(t.nodes_start,t.nodes_end),r=!0),uy(t,e&&!r),Pu(t,0),mt(t,16384);var n=t.transitions;if(n!==null)for(let a of n)a.stop();cy(t);var i=t.parent;i!==null&&i.first!==null&&ry(t),D&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function $O(t,e){for(;t!==null;){var r=t===e?null:Bt(t);t.remove(),t=r}}function ry(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function li(t,e){var r=[];pp(t,r,!0),fy(r,()=>{At(t),e&&e()})}function fy(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var i of t)i.out(n)}else e()}function pp(t,e,r){if(!(t.f&8192)){if(t.f^=8192,t.transitions!==null)for(let s of t.transitions)(s.is_global||r)&&e.push(s);for(var n=t.first;n!==null;){var i=n.next,a=(n.f&65536)!==0||(n.f&32)!==0;pp(n,e,a?r:!1),n=i}}}function Fs(t){FO(t,!0)}function FO(t,e){if(t.f&8192){t.f^=8192,t.f&1024||(mt(t,2048),ci(t));for(var r=t.first;r!==null;){var n=r.next,i=(r.f&65536)!==0||(r.f&32)!==0;FO(r,i?e:!1),r=n}if(t.transitions!==null)for(let a of t.transitions)(a.is_global||e)&&a.in()}}p();var OO=null;var Rs=!1;function ey(t){Rs=t}var Cn=!1;function oy(t){Cn=t}var se=null,kr=!1;function Tt(t){se=t}var Q=null;function Ht(t){Q=t}var Ar=null;function ip(t){se!==null&&(!An||se.f&2)&&(Ar===null?Ar=[t]:Ar.push(t))}var lr=null,Gr=0,Ur=null;function SO(t){Ur=t}var MO=1,Ru=0,Oa=Ru;function ay(t){Oa=t}var ji=!1;function bu(){return++MO}function Fa(t){var f,d;var e=t.f;if(e&2048)return!0;if(e&4096){var r=t.deps,n=(e&256)!==0;if(r!==null){var i,a,s=(e&512)!==0,o=n&&Q!==null&&!ji,l=r.length;if((s||o)&&(Q===null||!(Q.f&16384))){var c=t,u=c.parent;for(i=0;i<l;i++)a=r[i],(s||!((f=a==null?void 0:a.reactions)!=null&&f.includes(c)))&&((d=a.reactions)!=null?d:a.reactions=[]).push(c);s&&(c.f^=512),o&&u!==null&&!(u.f&256)&&(c.f^=256)}for(i=0;i<l;i++)if(a=r[i],Fa(a)&&Z0(a),a.wv>t.wv)return!0}(!n||Q!==null&&!ji)&&mt(t,1024)}return!1}function DO(t,e,r=!0){var n=t.reactions;if(n!==null&&!(!An&&(Ar!=null&&Ar.includes(t))))for(var i=0;i<n.length;i++){var a=n[i];a.f&2?DO(a,e,!1):e===a&&(r?mt(a,2048):a.f&1024&&mt(a,4096),ci(a))}}function rp(t){var m,g;var e=lr,r=Gr,n=Ur,i=se,a=ji,s=Ar,o=ve,l=kr,c=Oa,u=t.f;lr=null,Gr=0,Ur=null,ji=(u&256)!==0&&(kr||!Rs||se===null),se=u&96?null:t,Ar=null,Ca(t.ctx),kr=!1,Oa=++Ru,t.ac!==null&&(t.ac.abort(ul),t.ac=null);try{t.f|=2097152;var f=(0,t.fn)(),d=t.deps;if(lr!==null){var h;if(Pu(t,Gr),d!==null&&Gr>0)for(d.length=Gr+lr.length,h=0;h<lr.length;h++)d[Gr+h]=lr[h];else t.deps=d=lr;if(!ji||u&2&&t.reactions!==null)for(h=Gr;h<d.length;h++)((g=(m=d[h]).reactions)!=null?g:m.reactions=[]).push(t)}else d!==null&&Gr<d.length&&(Pu(t,Gr),d.length=Gr);if(un()&&Ur!==null&&!kr&&d!==null&&!(t.f&6146))for(h=0;h<Ur.length;h++)DO(Ur[h],t);return i!==null&&i!==t&&(Ru++,Ur!==null&&(n===null?n=Ur:n.push(...Ur))),t.f&8388608&&(t.f^=8388608),f}catch(v){return G0(v)}finally{t.f^=2097152,lr=e,Gr=r,Ur=n,se=i,ji=a,Ar=s,Ca(o),kr=l,Oa=c}}function Jz(t,e){let r=e.reactions;if(r!==null){var n=GF.call(r,t);if(n!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[n]=r[i],r.pop())}}r===null&&e.f&2&&(lr===null||!lr.includes(e))&&(mt(e,4096),e.f&768||(e.f^=512),tp(e),Pu(e,0))}function Pu(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Jz(t,r[n])}function Gi(t){var l;var e=t.f;if(!(e&16384)){mt(t,1024);var r=Q,n=Rs;if(Q=t,Rs=!0,D){var i=Tn;pu(t.component_function);var a=Bi;Jh((l=t.dev_stack)!=null?l:Bi)}try{e&16?IO(t):uy(t),cy(t);var s=rp(t);if(t.teardown=typeof s=="function"?s:null,t.wv=MO,D&&ii&&t.f&2048&&t.deps!==null)for(var o of t.deps)o.set_during_effect&&(o.wv=bu(),o.set_during_effect=!1)}finally{Rs=n,Q=r,D&&(pu(i),Jh(a))}}}function R(t){var m,g,v,w;var e=t.f,r=(e&2)!==0;if((m=OO)==null||m.add(t),se!==null&&!kr){var n=Q!==null&&(Q.f&16384)!==0;if(!n&&!(Ar!=null&&Ar.includes(t))){var i=se.deps;if(se.f&2097152)t.rv<Ru&&(t.rv=Ru,lr===null&&i!==null&&i[Gr]===t?Gr++:lr===null?lr=[t]:(!ji||!lr.includes(t))&&lr.push(t));else{((g=se.deps)!=null?g:se.deps=[]).push(t);var a=t.reactions;a===null?t.reactions=[se]:a.includes(se)||a.push(se)}}}else if(r&&t.deps===null&&t.effects===null){var s=t,o=s.parent;o!==null&&!(o.f&256)&&(s.f^=256)}if(D){if(Ui){var l=(Ui.f&2097152)!==0,c=(v=Ui.deps)==null?void 0:v.includes(t);if(!l&&!kr&&!c){oO(t.label);var u=ai("TracedAt");u&&console.warn(u)}}if(wu.delete(t),ii&&!kr&&hu!==null&&se!==null&&hu.reaction===se){if(t.trace)t.trace();else if(u=ai("TracedAt"),u){var f=hu.entries.get(t);f===void 0&&(f={traces:[]},hu.entries.set(t,f));var d=f.traces[f.traces.length-1];u.stack!==(d==null?void 0:d.stack)&&f.traces.push(u)}}}if(Cn){if(qi.has(t))return qi.get(t);if(r){s=t;var h=s.v;return(!(s.f&1024)&&s.reactions!==null||LO(s))&&(h=yu(s)),qi.set(s,h),h}}else if(r){if(s=t,(w=Pa)!=null&&w.has(s))return Pa.get(s);Fa(s)&&Z0(s)}if(t.f&8388608)throw t.v;return t.v}function LO(t){if(t.v===Ve)return!0;if(t.deps===null)return!1;for(let e of t.deps)if(qi.has(e)||e.f&2&&LO(e))return!0;return!1}function je(t){var e=kr;try{return kr=!0,t()}finally{kr=e}}var Qz=-7169;function mt(t,e){t.f=t.f&Qz|e}p();p();p();p();function dy(t){ae&&jt(t)!==null&&yl(t)}var NO=!1;function hy(){NO||(NO=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(let r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Os(t){var e=se,r=Q;Tt(null),Ht(null);try{return t()}finally{Tt(e),Ht(r)}}function py(t,e,r,n=r){t.addEventListener(e,()=>Os(r));let i=t.__on_r;i?t.__on_r=()=>{i(),n(!0)}:t.__on_r=()=>n(!0),hy()}var my=new Set,vp=new Set;function BO(t,e,r,n={}){function i(a){if(n.capture||_l.call(e,a),!a.cancelBubble)return Os(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Nr(()=>{e.addEventListener(t,i,n)}):e.addEventListener(t,i,n),i}function qr(t,e,r,n,i){var a={capture:n,passive:i},s=BO(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&jr(()=>{e.removeEventListener(t,s,a)})}function gt(t){for(var e=0;e<t.length;e++)my.add(t[e]);for(var r of vp)r(t)}function _l(t){var b;var e=this,r=e.ownerDocument,n=t.type,i=((b=t.composedPath)==null?void 0:b.call(t))||[],a=i[0]||t.target,s=0,o=t.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=i.indexOf(e);if(c===-1)return;l<=c&&(s=l)}if(a=i[s]||t.target,a!==e){Wt(t,"currentTarget",{configurable:!0,get(){return a||r}});var u=se,f=Q;Tt(null),Ht(null);try{for(var d,h=[];a!==null;){var m=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+n];if(g!=null&&(!a.disabled||t.target===a))if(on(g)){var[v,...w]=g;v.apply(a,[t,...w])}else g.call(a,t)}catch(S){d?h.push(S):d=S}if(t.cancelBubble||m===e||m===null)break;a=m}if(d){for(let S of h)queueMicrotask(()=>{throw S});throw d}}finally{t.__root=e,delete t.currentTarget,Tt(u),Ht(f)}}}p();var eV;function HO(){eV=void 0}p();p();function wp(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function di(t,e){var r=Q;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function ce(t,e){var r=(e&1)!==0,n=(e&2)!==0,i,a=!t.startsWith("<!>");return()=>{if(ae)return di(pe,null),pe;i===void 0&&(i=wp(a?t:"<!>"+t),r||(i=jt(i)));var s=n||mu?document.importNode(i,!0):i.cloneNode(!0);if(r){var o=jt(s),l=s.lastChild;di(o,l)}else di(s,s);return s}}function zi(){if(ae)return di(pe,null),pe;var t=document.createDocumentFragment(),e=document.createComment(""),r=Ut();return t.append(e,r),di(e,r),t}function ie(t,e){if(ae){Q.nodes_end=pe,Zt();return}t!==null&&t.before(e)}p();var iV=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];var Jse=[...iV,"formNoValidate","isMap","noModule","playsInline","readOnly","value","volume","defaultValue","defaultChecked","srcObject","noValidate","allowFullscreen","disablePictureInPicture","disableRemotePlayback"];var aV=["touchstart","touchmove"];function jO(t){return aV.includes(t)}var sV=["$state","$state.raw","$derived","$derived.by"],Qse=[...sV,"$state.snapshot","$props","$props.id","$bindable","$effect","$effect.pre","$effect.tracking","$effect.root","$effect.pending","$inspect","$inspect().with","$inspect.trace","$host"];var yp=!0;function Be(t,e){var n;var r=e==null?"":typeof e=="object"?e+"":e;r!==((n=t.__t)!=null?n:t.__t=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function Ma(t,e){return GO(t,e)}function vy(t,e){var s;hp(),e.intro=(s=e.intro)!=null?s:!1;let r=e.target,n=ae,i=pe;try{for(var a=jt(r);a&&(a.nodeType!==ln||a.data!==ll);)a=Bt(a);if(!a)throw Di;Xt(!0),et(a),Zt();let o=GO(t,{...e,anchor:a});if(pe===null||pe.nodeType!==ln||pe.data!==bs)throw Ss(),Di;return Xt(!1),o}catch(o){if(o===Di)return e.recover===!1&&tO(),hp(),yl(r),Xt(!1),Ma(t,e);throw o}finally{Xt(n),et(i),HO()}}var xl=new Map;function GO(t,{target:e,anchor:r,props:n={},events:i,context:a,intro:s=!0}){hp();var o=new Set,l=f=>{for(var d=0;d<f.length;d++){var h=f[d];if(!o.has(h)){o.add(h);var m=jO(h);e.addEventListener(h,_l,{passive:m});var g=xl.get(h);g===void 0?(document.addEventListener(h,_l,{passive:m}),xl.set(h,1)):xl.set(h,g+1)}}};l(lu(my)),vp.add(l);var c=void 0,u=RO(()=>{var f=r!=null?r:e.appendChild(Ut());return kt(()=>{if(a){tt({});var d=ve;d.c=a}i&&(n.$$events=i),ae&&di(f,null),yp=s,c=t(f,n)||{},yp=!0,ae&&(Q.nodes_end=pe),a&&rt()}),()=>{var m;for(var d of o){e.removeEventListener(d,_l);var h=xl.get(d);--h===0?(document.removeEventListener(d,_l),xl.delete(d)):xl.set(d,h)}vp.delete(l),f!==r&&((m=f.parentNode)==null||m.removeChild(f))}});return gy.set(c,u),c}var gy=new WeakMap;function Vi(t,e){let r=gy.get(t);return r?(gy.delete(t),r(e)):(D&&uO(),Promise.resolve())}p();p();if(D){let t=function(e){if(!(e in globalThis)){let r;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(r!==void 0)return r;nO(e)},set:n=>{r=n}})}};t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function wy(t){ve===null&&du("onMount"),Li&&ve.l!==null?uV(ve).m.push(t):Jt(()=>{let e=je(t);if(typeof e=="function")return e})}function zO(t){ve===null&&du("onDestroy"),wy(()=>()=>je(t))}function uV(t){var r;var e=t.l;return(r=e.u)!=null?r:e.u={a:[],b:[],m:[]}}p();p();var WO=new Map;function YO(t,e){var r=WO.get(t);r||(r=new Set,WO.set(t,r)),r.add(e)}p();p();p();p();p();p();p();p();p();function xe(t,e,r=!1){ae&&Zt();var n=t,i=null,a=null,s=Ve,o=r?65536:0,l=!1;let c=(h,m=!0)=>{l=!0,d(m,h)};var u=null;function f(){u!==null&&(u.lastChild.remove(),n.before(u),u=null);var h=s?i:a,m=s?a:i;h&&Fs(h),m&&li(m,()=>{s?a=null:i=null})}let d=(h,m)=>{if(s===(s=h))return;let g=!1;if(ae){let k=Wh(n)===Aa;!!s===k&&(n=Es(),et(n),Xt(!1),g=!0)}var v=bl(),w=n;if(v&&(u=document.createDocumentFragment(),u.append(w=Ut())),s?i!=null||(i=m&&kt(()=>m(w))):a!=null||(a=m&&kt(()=>m(w))),v){var b=Se,S=s?i:a,E=s?a:i;S&&b.skipped_effects.delete(S),E&&b.skipped_effects.add(E),b.add_callback(f)}else f();g&&Xt(!0)};Er(()=>{l=!1,e(c),l||d(null,null)},o),ae&&(n=pe)}p();p();p();var Iu=null;function zr(t,e){return e}function mV(t,e,r){for(var n=t.items,i=[],a=e.length,s=0;s<a;s++)pp(e[s].e,i,!0);var o=a>0&&i.length===0&&r!==null;if(o){var l=r.parentNode;yl(l),l.append(r),n.clear(),hi(t,e[0].prev,e[a-1].next)}fy(i,()=>{for(var c=0;c<a;c++){var u=e[c];o||(n.delete(u.k),hi(t,u.prev,u.next)),At(u.e,!o)}})}function Vr(t,e,r,n,i,a=null){var s=t,o={flags:e,items:new Map,first:null},l=(e&4)!==0;if(l){var c=t;s=ae?et(jt(c)):c.appendChild(Ut())}ae&&Zt();var u=null,f=!1,d=new Map,h=As(()=>{var w=r();return on(w)?w:w==null?[]:lu(w)}),m,g;function v(){gV(g,m,o,d,s,i,e,n,r),a!==null&&(m.length===0?u?Fs(u):u=kt(()=>a(s)):u!==null&&li(u,()=>{u=null}))}Er(()=>{var F;g!=null||(g=Q),m=R(h);var w=m.length;if(f&&w===0)return;f=w===0;let b=!1;if(ae){var S=Wh(s)===Aa;S!==(w===0)&&(s=Es(),et(s),Xt(!1),b=!0)}if(ae){for(var E=null,k,A=0;A<w;A++){if(pe.nodeType===ln&&pe.data===bs){s=pe,b=!0,Xt(!1);break}var y=m[A],_=n(y,A);k=by(pe,o,E,null,y,_,A,i,e,r),o.items.set(_,k),E=k}w>0&&et(Es())}if(ae)w===0&&a&&(u=kt(()=>a(s)));else if(bl()){var x=new Set,T=Se;for(A=0;A<w;A+=1){y=m[A],_=n(y,A);var P=(F=o.items.get(_))!=null?F:d.get(_);P?e&3&&ZO(P,y,A,e):(k=by(null,o,null,null,y,_,A,i,e,r,!0),d.set(_,k)),x.add(_)}for(let[N,M]of o.items)x.has(N)||T.skipped_effects.add(M.e);T.add_callback(v)}else v();b&&Xt(!0),R(h)}),ae&&(s=pe)}function gV(t,e,r,n,i,a,s,o,l){var Ge,oe,B,Z;var c=(s&8)!==0,u=(s&3)!==0,f=e.length,d=r.items,h=r.first,m=h,g,v=null,w,b=[],S=[],E,k,A,y;if(c)for(y=0;y<f;y+=1)E=e[y],k=o(E,y),A=d.get(k),A!==void 0&&((Ge=A.a)==null||Ge.measure(),(w!=null?w:w=new Set).add(A));for(y=0;y<f;y+=1){if(E=e[y],k=o(E,y),A=d.get(k),A===void 0){var _=n.get(k);if(_!==void 0){n.delete(k),d.set(k,_);var x=v?v.next:m;hi(r,v,_),hi(r,_,x),yy(_,x,i),v=_}else{var T=m?m.e.nodes_start:i;v=by(T,r,v,v===null?r.first:v.next,E,k,y,a,s,l)}d.set(k,v),b=[],S=[],m=v.next;continue}if(u&&ZO(A,E,y,s),A.e.f&8192&&(Fs(A.e),c&&((oe=A.a)==null||oe.unfix(),(w!=null?w:w=new Set).delete(A))),A!==m){if(g!==void 0&&g.has(A)){if(b.length<S.length){var P=S[0],F;v=P.prev;var N=b[0],M=b[b.length-1];for(F=0;F<b.length;F+=1)yy(b[F],P,i);for(F=0;F<S.length;F+=1)g.delete(S[F]);hi(r,N.prev,M.next),hi(r,v,N),hi(r,M,P),m=P,v=M,y-=1,b=[],S=[]}else g.delete(A),yy(A,m,i),hi(r,A.prev,A.next),hi(r,A,v===null?r.first:v.next),hi(r,v,A),v=A;continue}for(b=[],S=[];m!==null&&m.k!==k;)m.e.f&8192||(g!=null?g:g=new Set).add(m),S.push(m),m=m.next;if(m===null)continue;A=m}b.push(A),v=A,m=A.next}if(m!==null||g!==void 0){for(var re=g===void 0?[]:lu(g);m!==null;)m.e.f&8192||re.push(m),m=m.next;var ye=re.length;if(ye>0){var me=s&4&&f===0?i:null;if(c){for(y=0;y<ye;y+=1)(B=re[y].a)==null||B.measure();for(y=0;y<ye;y+=1)(Z=re[y].a)==null||Z.fix()}mV(r,re,me)}}c&&Nr(()=>{var H;if(w!==void 0)for(A of w)(H=A.a)==null||H.apply()}),t.first=r.first&&r.first.e,t.last=v&&v.e;for(var fe of n.values())At(fe.e);n.clear()}function ZO(t,e,r,n){n&1&&oi(t.v,e),n&2?oi(t.i,r):t.i=r}function by(t,e,r,n,i,a,s,o,l,c,u){var f=Iu,d=(l&1)!==0,h=(l&16)===0,m=d?h?Is(i,!1,!1):Br(i):i,g=l&2?Br(s):s;D&&d&&(m.trace=()=>{var b=typeof g=="number"?s:g.v;c()[b]});var v={i:g,v:m,k:a,a:null,e:null,prev:r,next:n};Iu=v;try{if(t===null){var w=document.createDocumentFragment();w.append(t=Ut())}return v.e=kt(()=>o(t,m,g,c),ae),v.e.prev=r&&r.e,v.e.next=n&&n.e,r===null?u||(e.first=v):(r.next=v,r.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{Iu=f}}function yy(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,i=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==null&&a!==n;){var s=Bt(a);i.before(a),a=s}}function hi(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}p();p();p();p();p();function $n(t,e){Cr(()=>{var i;var r=t.getRootNode(),n=r.host?r:(i=r.head)!=null?i:r.ownerDocument.head;if(!n.querySelector("#"+e.hash)){let a=document.createElement("style");a.id=e.hash,a.textContent=e.code,n.appendChild(a),D&&YO(e.hash,a)}})}p();p();p();p();p();p();var JO=[...` 	
\r\f\xA0\v\uFEFF`];function QO(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,s=0;(s=n.indexOf(i,s))>=0;){var o=s+a;(s===0||JO.includes(n[s-1]))&&(o===n.length||JO.includes(n[o]))?n=(s===0?"":n.substring(0,s))+n.substring(o+1):s=o}}return n===""?null:n}p();function ot(t,e,r,n,i,a){var s=t.__className;if(ae||s!==r||s===void 0){var o=QO(r,n,a);(!ae||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o)),t.__className=r}else if(a&&i!==a)for(var l in a){var c=!!a[l];(i==null||c!==!!i[l])&&t.classList.toggle(l,c)}return a}p();p();var EV=Symbol("class"),kV=Symbol("style"),AV=Symbol("is custom element"),TV=Symbol("is html");function ge(t,e,r,n){var i=CV(t);if(ae&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")){n||RV(t,e,r!=null?r:"");return}i[e]!==(i[e]=r)&&(e==="loading"&&(t[VF]=r),r==null?t.removeAttribute(e):typeof r!="string"&&PV(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function CV(t){var e;return(e=t.__attributes)!=null?e:t.__attributes={[AV]:t.nodeName.includes("-"),[TV]:t.namespaceURI===jF}}var eM=new Map;function PV(t){var e=eM.get(t.nodeName);if(e)return e;eM.set(t.nodeName,e=[]);for(var r,n=t,i=Element.prototype;i!==n;){r=M0(n);for(var a in r)r[a].set&&e.push(a);n=cl(n)}return e}function RV(t,e,r){var n;D&&(e==="srcset"&&IV(t,r)||_y((n=t.getAttribute(e))!=null?n:"",r)||cO(e,t.outerHTML.replace(t.innerHTML,t.innerHTML&&"..."),String(r)))}function _y(t,e){return t===e?!0:new URL(t,document.baseURI).href===new URL(e,document.baseURI).href}function tM(t){return t.split(",").map(e=>e.trim().split(" ").filter(Boolean))}function IV(t,e){var r=tM(t.srcset),n=tM(e);return n.length===r.length&&n.every(([i,a],s)=>a===r[s][1]&&(_y(r[s][0],i)||_y(i,r[s][0])))}p();p();p();var $V=qh?()=>performance.now():()=>Date.now(),Fn={tick:t=>(qh?requestAnimationFrame:ar)(t),now:()=>$V(),tasks:new Set};function rM(){let t=Fn.now();Fn.tasks.forEach(e=>{e.c(t)||(Fn.tasks.delete(e),e.f())}),Fn.tasks.size!==0&&Fn.tick(rM)}function nM(t){let e;return Fn.tasks.size===0&&Fn.tick(rM),{promise:new Promise(r=>{Fn.tasks.add(e={c:t,f:r})}),abort(){Fn.tasks.delete(e)}}}function xp(t,e){Os(()=>{t.dispatchEvent(new CustomEvent(e))})}function DV(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;let e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function iM(t){let e={},r=t.split(";");for(let n of r){let[i,a]=n.split(":");if(!i||a===void 0)break;let s=DV(i.trim());e[s]=a.trim()}return e}var LV=t=>t;function On(t,e,r,n){var S;var i=(t&1)!==0,a=(t&2)!==0,s=i&&a,o=(t&4)!==0,l=s?"both":i?"in":"out",c,u=e.inert,f=e.style.overflow,d,h;function m(){return Os(()=>{var E;return c!=null?c:c=r()(e,(E=n==null?void 0:n())!=null?E:{},{direction:l})})}var g={is_global:o,in(){var E;if(e.inert=u,!i){h==null||h.abort(),(E=h==null?void 0:h.reset)==null||E.call(h);return}a||d==null||d.abort(),xp(e,"introstart"),d=xy(e,m(),h,1,()=>{xp(e,"introend"),d==null||d.abort(),d=c=void 0,e.style.overflow=f})},out(E){if(!a){E==null||E(),c=void 0;return}e.inert=!0,xp(e,"outrostart"),h=xy(e,m(),d,0,()=>{xp(e,"outroend"),E==null||E()})},stop:()=>{d==null||d.abort(),h==null||h.abort()}},v=Q;if(((S=v.transitions)!=null?S:v.transitions=[]).push(g),i&&yp){var w=o;if(!w){for(var b=v.parent;b&&b.f&65536;)for(;(b=b.parent)&&!(b.f&16););w=!b||(b.f&32768)!==0}w&&Cr(()=>{je(()=>g.in())})}}function xy(t,e,r,n,i){var a=n===1;if(N0(e)){var s,o=!1;return Nr(()=>{if(!o){var v=e({direction:a?"in":"out"});s=xy(t,v,r,n,i)}}),{abort:()=>{o=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return i(),{abort:ar,deactivate:ar,reset:ar,t:()=>n};let{delay:l=0,css:c,tick:u,easing:f=LV}=e;var d=[];if(a&&r===void 0&&(u&&u(0,1),c)){var h=iM(c(0,1));d.push(h,h)}var m=()=>1-n,g=t.animate(d,{duration:l,fill:"forwards"});return g.onfinish=()=>{var x;g.cancel();var v=(x=r==null?void 0:r.t())!=null?x:1-n;r==null||r.abort();var w=n-v,b=e.duration*Math.abs(w),S=[];if(b>0){var E=!1;if(c)for(var k=Math.ceil(b/16.666666666666668),A=0;A<=k;A+=1){var y=v+w*f(A/k),_=iM(c(y,1-y));S.push(_),E||(E=_.overflow==="hidden")}E&&(t.style.overflow="hidden"),m=()=>{var T=g.currentTime;return v+w*f(T/b)},u&&nM(()=>{if(g.playState!=="running")return!1;var T=m();return u(T,1-T),!0})}g=t.animate(S,{duration:b,fill:"forwards"}),g.onfinish=()=>{m=()=>n,u==null||u(n,1-n),i()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=ar)},deactivate:()=>{i=ar},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>m()}}p();p();function ky(t,e,r=e){var n=un(),i=new WeakSet;py(t,"input",a=>{D&&t.type==="checkbox"&&B0();var s=a?t.defaultValue:t.value;if(s=Sy(t)?Ey(s):s,r(s),Se!==null&&i.add(Se),n&&s!==(s=e())){var o=t.selectionStart,l=t.selectionEnd;t.value=s!=null?s:"",l!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(l,t.value.length))}}),(ae&&t.defaultValue!==t.value||je(e)==null&&t.value)&&(r(Sy(t)?Ey(t.value):t.value),Se!==null&&i.add(Se)),Kt(()=>{var o;D&&t.type==="checkbox"&&B0();var a=e();if(t===document.activeElement){var s=(o=xu)!=null?o:Se;if(i.has(s))return}Sy(t)&&a===Ey(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a!=null?a:"")})}function Sy(t){var e=t.type;return e==="number"||e==="range"}function Ey(t){return t===""?null:+t}p();p();p();p();p();function aM(t,e){return t===e||(t==null?void 0:t[Sr])===e}function Ke(t={},e,r,n){return Cr(()=>{var i,a;return Kt(()=>{i=a,a=(n==null?void 0:n())||[],je(()=>{t!==r(...a)&&(e(t,...a),i&&aM(r(...i),t)&&e(null,...i))})}),()=>{Nr(()=>{a&&aM(r(...a),t)&&e(null,...a)})}}),t}p();p();p();p();p();p();p();p();p();var Ep=!1,Khe=Symbol();function Ty(t){var e=Ep;try{return Ep=!1,[t(),Ep]}finally{Ep=e}}function dn(t,e,r,n){var S,E;var i=!Li||(r&2)!==0,a=(r&8)!==0,s=(r&16)!==0,o=n,l=!0,c=()=>(l&&(l=!1,o=s?je(n):n),o),u;if(a){var f=Sr in t||uu in t;u=(E=(S=xr(t,e))==null?void 0:S.set)!=null?E:f&&e in t?k=>t[e]=k:void 0}var d,h=!1;a?[d,h]=Ty(()=>t[e]):d=t[e],d===void 0&&n!==void 0&&(d=c(),u&&(i&&rO(e),u(d)));var m;if(i?m=()=>{var k=t[e];return k===void 0?c():(l=!0,k)}:m=()=>{var k=t[e];return k!==void 0&&(o=void 0),k===void 0?o:k},i&&!(r&4))return m;if(u){var g=t.$$legacy;return function(k,A){return arguments.length>0?((!i||!A||g||h)&&u(A?m():k),k):m()}}var v=!1,w=(r&1?ks:As)(()=>(v=!1,m()));D&&(w.label=e),a&&R(w);var b=Q;return function(k,A){if(arguments.length>0){let y=A?R(w):i&&a?Ne(k):k;return ne(w,y),v=!0,o!==void 0&&(o=y),k}return Cn&&v||b.f&16384?w.v:R(w)}}p();p();p();function sM(t){return new Cy(t)}var Wi,hn,Cy=class{constructor(e){wt(this,Wi);wt(this,hn);var a,s;var r=new Map,n=(o,l)=>{var c=Is(l,!1,!1);return r.set(o,c),c};let i=new Proxy({...e.props||{},$$events:{}},{get(o,l){var c;return R((c=r.get(l))!=null?c:n(l,Reflect.get(o,l)))},has(o,l){var c;return l===uu?!0:(R((c=r.get(l))!=null?c:n(l,Reflect.get(o,l))),Reflect.has(o,l))},set(o,l,c){var u;return ne((u=r.get(l))!=null?u:n(l,c),c),Reflect.set(o,l,c)}});Ot(this,hn,(e.hydrate?vy:Ma)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:(a=e.intro)!=null?a:!1,recover:e.recover})),!An&&(!((s=e==null?void 0:e.props)!=null&&s.$$host)||e.sync===!1)&&wl(),Ot(this,Wi,i.$$events);for(let o of Object.keys(le(this,hn)))o==="$set"||o==="$destroy"||o==="$on"||Wt(this,o,{get(){return le(this,hn)[o]},set(l){le(this,hn)[o]=l},enumerable:!0});le(this,hn).$set=o=>{Object.assign(i,o)},le(this,hn).$destroy=()=>{Vi(le(this,hn))}}$set(e){le(this,hn).$set(e)}$on(e,r){le(this,Wi)[e]=le(this,Wi)[e]||[];let n=(...i)=>r.call(this,...i);return le(this,Wi)[e].push(n),()=>{le(this,Wi)[e]=le(this,Wi)[e].filter(i=>i!==n)}}$destroy(){le(this,hn).$destroy()}};Wi=new WeakMap,hn=new WeakMap;var KV;typeof HTMLElement=="function"&&(KV=class extends HTMLElement{constructor(e,r,n){super();vt(this,"$$ctor");vt(this,"$$s");vt(this,"$$c");vt(this,"$$cn",!1);vt(this,"$$d",{});vt(this,"$$r",!1);vt(this,"$$p_d",{});vt(this,"$$l",{});vt(this,"$$l_u",new Map);vt(this,"$$me");this.$$ctor=e,this.$$s=r,n&&this.attachShadow({mode:"open"})}addEventListener(e,r,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(r),this.$$c){let i=this.$$c.$on(e,r);this.$$l_u.set(r,i)}super.addEventListener(e,r,n)}removeEventListener(e,r,n){if(super.removeEventListener(e,r,n),this.$$c){let i=this.$$l_u.get(r);i&&(i(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(i){return a=>{let s=document.createElement("slot");i!=="default"&&(s.name=i),ie(a,s)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let r={},n=JV(this);for(let i of this.$$s)i in n&&(i==="default"&&!this.$$d.children?(this.$$d.children=e(i),r.default=!0):r[i]=e(i));for(let i of this.attributes){let a=this.$$g_p(i.name);a in this.$$d||(this.$$d[a]=Py(a,i.value,this.$$p_d,"toProp"))}for(let i in this.$$p_d)!(i in this.$$d)&&this[i]!==void 0&&(this.$$d[i]=this[i],delete this[i]);this.$$c=sM({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$host:this}}),this.$$me=ly(()=>{Kt(()=>{var i;this.$$r=!0;for(let a of O0(this.$$c)){if(!((i=this.$$p_d[a])!=null&&i.reflect))continue;this.$$d[a]=this.$$c[a];let s=Py(a,this.$$d[a],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[a].attribute||a):this.setAttribute(this.$$p_d[a].attribute||a,s)}this.$$r=!1})});for(let i in this.$$l)for(let a of this.$$l[i]){let s=this.$$c.$on(i,a);this.$$l_u.set(a,s)}this.$$l={}}}attributeChangedCallback(e,r,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Py(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(e){return O0(this.$$p_d).find(r=>this.$$p_d[r].attribute===e||!this.$$p_d[r].attribute&&r.toLowerCase()===e)||e}});function Py(t,e,r,n){var a;let i=(a=r[t])==null?void 0:a.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!r[t])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function JV(t){let e={};return t.childNodes.forEach(r=>{e[r.slot||"default"]=!0}),e}p();p();function Ms(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(f){s(f)}}function l(u){try{c(n.throw(u))}catch(f){s(f)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})}var Fy=require("obsidian");p();var Iy=require("obsidian");p();function QV(t){let e=t-1;return e*e*e+1}var Ry=!1;function mi(t,{delay:e=0,duration:r=400,easing:n=QV,axis:i="y"}={}){let a=getComputedStyle(t);D&&!Ry&&/(contents|inline|table)/.test(a.display)&&(Ry=!0,Promise.resolve().then(()=>Ry=!1),fO(a.display));let s=+a.opacity,o=i==="y"?"height":"width",l=parseFloat(a[o]),c=i==="y"?["top","bottom"]:["left","right"],u=c.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),f=parseFloat(a[`padding${u[0]}`]),d=parseFloat(a[`padding${u[1]}`]),h=parseFloat(a[`margin${u[0]}`]),m=parseFloat(a[`margin${u[1]}`]),g=parseFloat(a[`border${u[0]}Width`]),v=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:r,easing:n,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*s};${o}: ${w*l}px;padding-${c[0]}: ${w*f}px;padding-${c[1]}: ${w*d}px;margin-${c[0]}: ${w*h}px;margin-${c[1]}: ${w*m}px;border-${c[0]}-width: ${w*g}px;border-${c[1]}-width: ${w*v}px;min-${o}: 0`}}p();var kp=require("obsidian");var eW=ce('<div data-icon="go-to-file" aria-label="Open File" class="clickable-icon"></div>'),tW=ce('<main class="tree-item nav-file svelte-1wbh8tp"><div class="tree-item-self is-clickable nav-file-title svelte-1wbh8tp"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><div class="buttons"><!></div> <span class="type"> </span></div></div></main>'),rW={hash:"svelte-1wbh8tp",code:"main.svelte-1wbh8tp .nav-file-title:where(.svelte-1wbh8tp) {align-items:center;}"};function $u(t,e){tt(e,!0),$n(t,rW);let r=Ne([]),n=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left");Jt(()=>{for(let w of r)w&&(0,kp.setIcon)(w,w.getAttr("data-icon"))});function i(w){w.stopPropagation(),Mo(e.diff.path)?a(w):s(w)}function a(w){var b;w.stopPropagation();let S=e.view.app.vault.getAbstractFileByPath(e.diff.vaultPath);S instanceof kp.TFile&&((b=bn(e.view.app,w))===null||b===void 0||b.openFile(S).catch(E=>e.view.plugin.displayError(E)))}function s(w){var b;e.view.plugin.tools.openDiff({event:w,aFile:(b=e.diff.fromPath)!==null&&b!==void 0?b:e.diff.path,aRef:`${e.diff.hash}^`,bFile:e.diff.path,bRef:e.diff.hash})}var o=tW();o.__click=i;var l=q(o),c=q(l),u=q(c,!0);U(c);var f=ee(c,2),d=q(f),h=q(d);{var m=w=>{var b=eW();b.__click=a,Ke(b,S=>r[0]=S,()=>r==null?void 0:r[0]),qr("auxclick",b,a),ie(w,b)};xe(h,w=>{Do(e.diff.vaultPath,e.view.app)&&w(m)})}U(d);var g=ee(d,2),v=q(g,!0);U(g),U(f),U(l),U(o),Fe(w=>{ge(l,"data-path",e.diff.vaultPath),ge(l,"data-tooltip-position",R(n)),ge(l,"aria-label",e.diff.vaultPath),Be(u,w),ge(g,"data-type",e.diff.status),Be(v,e.diff.status)},[()=>ei(e.diff.vaultPath)]),qr("auxclick",o,w=>{w.stopPropagation(),w.button==2?Qn(e.view.app,w,e.diff.vaultPath,e.view.leaf,"git-history"):i(w)}),ie(t,o),rt()}gt(["click"]);p();var nW=ce("<div><!></div>"),iW=(t,e,r)=>e(t,R(r)),aW=ce('<div class="tree-item-children nav-folder-children"><!></div>'),sW=ce('<div><div class="tree-item-self is-clickable nav-folder-title"><div data-icon="folder" style="padding-right: 5px; display: flex; "></div> <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content svelte-1lnl15d"> </div></div> <!></div>'),oW=ce("<main></main>"),lW={hash:"svelte-1lnl15d",code:"main.svelte-1lnl15d .nav-folder-title-content:where(.svelte-1lnl15d) {display:flex;align-items:center;}"};function Fu(t,e){tt(e,!0),$n(t,lW);let r=dn(e,"topLevel",3,!1),n=dn(e,"closed",15),i=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left");function a(l,c){l.stopPropagation(),n(n()[c.path]=!n()[c.path],!0)}var s=oW();let o;Vr(s,21,()=>e.hierarchy.children,zr,(l,c)=>{var u=zi(),f=Tr(u);{var d=m=>{var g=nW(),v=q(g);$u(v,{get diff(){return R(c).data},get view(){return e.view}}),U(g),ie(m,g)},h=m=>{var g=sW();let v;var w=q(g);w.__click=[iW,a,c];var b=ee(q(w),2);let S;var E=ee(b,2),k=q(E,!0);U(E),U(w);var A=ee(w,2);{var y=_=>{var x=aW(),T=q(x);Fu(T,{get hierarchy(){return R(c)},get plugin(){return e.plugin},get view(){return e.view},get closed(){return n()},set closed(P){n(P)}}),U(x),On(3,x,()=>mi,()=>({duration:150})),ie(_,x)};xe(A,_=>{n()[R(c).path]||_(y)})}U(g),Fe((_,x)=>{v=ot(g,1,"tree-item nav-folder",null,v,_),ge(w,"data-tooltip-position",R(i)),ge(w,"aria-label",R(c).vaultPath),S=ot(b,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,S,x),Be(k,R(c).title)},[()=>({"is-collapsed":n()[R(c).path]}),()=>({"is-collapsed":n()[R(c).path]})]),ie(m,g)};xe(f,m=>{R(c).data?m(d):m(h,!1)})}ie(l,u)}),U(s),Fe(l=>o=ot(s,1,"svelte-1lnl15d",null,o,l),[()=>({topLevel:r()})]),ie(t,s),rt()}gt(["click"]);var cW=(t,e)=>ne(e,!R(e)),uW=ce('<div class="git-ref"> </div>'),fW=ce('<div class="git-author"> </div>'),dW=ce('<div class="git-date"> </div>'),hW=ce('<div class="tree-item-children nav-folder-children"><!></div>'),pW=ce('<main><div><div class="tree-item-self is-clickable nav-folder-title"><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div><!> <!> <!> <div class="tree-item-inner nav-folder-title-content"> </div></div></div> <!></div></main>'),mW={hash:"svelte-45h",code:""};function $y(t,e){tt(e,!0),$n(t,mW);let r=Pt(()=>({title:"",path:"",vaultPath:"",children:e.plugin.gitManager.getTreeStructure(e.log.diff.files)})),n=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left"),i=Ce(!0),a=Ce(Ne({}));function s(_){let x=_.author.name;if(e.plugin.settings.authorInHistoryView=="full")return x;if(e.plugin.settings.authorInHistoryView=="initials")return x.split(" ").filter(P=>P.length>0).map(P=>P[0].toUpperCase()).join("")}var o=pW(),l=q(o);let c;var u=q(l);u.__click=[cW,i];var f=q(u);let d;var h=ee(f,2),m=q(h);{var g=_=>{var x=uW(),T=q(x,!0);U(x),Fe(P=>Be(T,P),[()=>e.log.refs.join(", ")]),ie(_,x)};xe(m,_=>{e.log.refs.length>0&&_(g)})}var v=ee(m,2);{var w=_=>{var x=fW(),T=q(x,!0);U(x),Fe(P=>Be(T,P),[()=>s(e.log)]),ie(_,x)};xe(v,_=>{var x;e.plugin.settings.authorInHistoryView!="hide"&&((x=e.log.author)!=null&&x.name)&&_(w)})}var b=ee(v,2);{var S=_=>{var x=dW(),T=q(x,!0);U(x),Fe(P=>Be(T,P),[()=>(0,Iy.moment)(e.log.date).format(e.plugin.settings.commitDateFormat)]),ie(_,x)};xe(b,_=>{e.plugin.settings.dateInHistoryView&&_(S)})}var E=ee(b,2),k=q(E,!0);U(E),U(h),U(u);var A=ee(u,2);{var y=_=>{var x=hW(),T=q(x);{var P=N=>{Fu(N,{get hierarchy(){return R(r)},get plugin(){return e.plugin},get view(){return e.view},topLevel:!0,get closed(){return R(a)},set closed(M){ne(a,M,!0)}})},F=N=>{var M=zi(),re=Tr(M);Vr(re,17,()=>e.log.diff.files,zr,(ye,me)=>{$u(ye,{get view(){return e.view},get diff(){return R(me)}})}),ie(N,M)};xe(T,N=>{e.showTree?N(P):N(F,!1)})}U(x),On(3,x,()=>mi,()=>({duration:150})),ie(_,x)};xe(A,_=>{R(i)||_(y)})}U(l),U(o),Fe((_,x,T)=>{c=ot(l,1,"tree-item nav-folder",null,c,_),ge(u,"aria-label",x),ge(u,"data-tooltip-position",R(n)),d=ot(f,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,d,T),Be(k,e.log.message)},[()=>({"is-collapsed":R(i)}),()=>{var _;return`${e.log.refs.length>0?e.log.refs.join(", ")+`
`:""}${(_=e.log.author)==null?void 0:_.name}
${(0,Iy.moment)(e.log.date).format(e.plugin.settings.commitDateFormat)}
${e.log.message}`},()=>({"is-collapsed":R(i)})]),ie(t,o),rt()}gt(["click"]);function gW(t,e){e().catch(console.error)}var vW=(t,e,r,n)=>{ne(e,!R(e)),(0,Fy.setIcon)(r[0],R(e)?"list":"folder"),n(n().settings.treeStructure=R(e),!0),n().saveSettings()},wW=ce('<div class="tree-item nav-folder mod-root"></div>'),yW=ce('<main class="git-view"><div class="nav-header"><div class="nav-buttons-container"><div id="layoutChange" class="clickable-icon nav-action-button" aria-label="Change Layout"></div> <div id="refresh" data-icon="refresh-cw" aria-label="Refresh"></div></div></div> <div class="nav-files-container" style="position: relative;"><!> <div id="sentinel"></div> <div style="margin-bottom:40px"></div></div></main>'),bW={hash:"svelte-45h",code:""};function Oy(t,e){tt(e,!0),$n(t,bW);let r=dn(e,"plugin",15),n=Ce(!1),i=Ne([]),a=Ce(void 0),s=Ce(Ne(r().settings.treeStructure)),o,l;Jt(()=>{l&&l.empty()}),o=e.view.app.workspace.on("obsidian-git:head-change",()=>void c().catch(console.error)),Jt(()=>{i.forEach(E=>(0,Fy.setIcon)(E,E.getAttr("data-icon")))}),zO(()=>{e.view.app.workspace.offref(o)}),wy(()=>{let E=new IntersectionObserver(A=>{A[0].isIntersecting&&!R(n)&&u().catch(console.error)}),k=document.querySelector("#sentinel");return k&&E.observe(k),()=>{E.disconnect()}}),c().catch(console.error);function c(){return Ms(this,void 0,void 0,function*(){var E;if(!r().gitReady){ne(a,void 0);return}ne(n,!0);let k=r().gitManager instanceof _e,A;((E=R(a)===null||R(a)===void 0?void 0:R(a).length)!==null&&E!==void 0?E:0)==0?A=k?50:10:A=R(a).length,ne(a,yield r().gitManager.log(void 0,!1,A),!0),ne(n,!1)})}function u(){return Ms(this,void 0,void 0,function*(){var E;if(!r().gitReady||R(a)===void 0)return;ne(n,!0);let A=r().gitManager instanceof _e?50:10,y=yield r().gitManager.log(void 0,!1,A,(E=R(a).last())===null||E===void 0?void 0:E.hash);R(a).push(...y.slice(1)),ne(n,!1)})}var f=yW(),d=q(f),h=q(d),m=q(h);m.__click=[vW,s,i,r],Ke(m,E=>i[0]=E,()=>i==null?void 0:i[0]);var g=ee(m,2);let v;g.__click=[gW,c],Ke(g,E=>i[1]=E,()=>i==null?void 0:i[1]),U(h),U(d);var w=ee(d,2),b=q(w);{var S=E=>{var k=wW();Vr(k,21,()=>R(a),zr,(A,y)=>{$y(A,{get view(){return e.view},get showTree(){return R(s)},get log(){return R(y)},get plugin(){return r()}})}),U(k),ie(E,k)};xe(b,E=>{R(a)&&E(S)})}fl(4),U(w),U(f),Fe(E=>{ge(m,"data-icon",R(s)?"list":"folder"),v=ot(g,1,"clickable-icon nav-action-button",null,v,E)},[()=>({loading:R(n)})]),ie(t,f),rt()}gt(["click"]);var Ou=class extends oM.ItemView{constructor(e,r){super(e),this.plugin=r,this.hoverPopover=null}getViewType(){return Jr.type}getDisplayText(){return Jr.name}getIcon(){return Jr.icon}onClose(){return this._view&&Vi(this._view),super.onClose()}reload(){this._view&&Vi(this._view),this._view=Ma(Oy,{target:this.contentEl,props:{plugin:this.plugin,view:this}})}onOpen(){return this.reload(),super.onOpen()}};p();var lM=require("obsidian"),Ap=class extends lM.FuzzySuggestModal{constructor(r,n){super(r.app);this.branches=n;this.setPlaceholder("Select branch to checkout")}getItems(){return this.branches}getItemText(r){return r}onChooseItem(r,n){this.resolve(r)}openAndGetReslt(){return new Promise(r=>{this.resolve=r,this.open()})}onClose(){new Promise(r=>setTimeout(r,10)).then(()=>{this.resolve&&this.resolve(void 0)})}};p();var hM=require("obsidian");p();var Ns=require("obsidian");p();var Mu=require("obsidian");p();var cM=require("obsidian");var Sl=class extends cM.Modal{constructor({app:r,path:n,filesToDeleteCount:i,filesToDiscardCount:a}){super(r);this.resolve=null;this.path=n,this.deleteCount=i,this.discardCount=a}openAndGetResult(){return this.open(),new Promise(r=>{this.resolve=r})}onOpen(){let r=this.deleteCount+this.discardCount,{contentEl:n,titleEl:i}=this,a="";this.path!=""&&(r>1?a=`files in "${this.path}"`:a=`"${this.path}"`),i.setText(`${this.discardCount==0?"Delete":"Discard"} ${a}`),this.deleteCount>0&&n.createEl("p").setText(`Are you sure you want to DELETE the ${Oc(this.deleteCount,"untracked file")}? They are deleted according to your Obsidian trash settting.`),this.discardCount>0&&n.createEl("p").setText(`Are you sure you want to discard ALL changes in ${Oc(this.discardCount,"tracked file")}?`);let s=n.createDiv({cls:"modal-button-container"});if(this.deleteCount>0){let l=s.createEl("button",{cls:"mod-warning",text:`${this.discardCount>0?"Discard":"Delete"} all ${Oc(r,"file")}`});l.addEventListener("click",()=>{this.resolve&&this.resolve("delete"),this.close()}),l.addEventListener("keypress",()=>{this.resolve&&this.resolve("delete"),this.close()})}if(this.discardCount>0){let l=s.createEl("button",{cls:"mod-warning",text:`Discard all ${Oc(this.discardCount,"tracked file")}`});l.addEventListener("click",()=>{this.resolve&&this.resolve("discard"),this.close()}),l.addEventListener("keypress",()=>{this.resolve&&this.resolve("discard"),this.close()})}let o=s.createEl("button",{text:"Cancel"});o.addEventListener("click",()=>(this.resolve&&this.resolve(!1),this.close())),o.addEventListener("keypress",()=>(this.resolve&&this.resolve(!1),this.close()))}onClose(){let{contentEl:r}=this;r.empty()}};function _W(t,e){e.view.app.vault.getAbstractFileByPath(e.change.vaultPath)&&Lo(e.view.app,t,e.view,e.change.vaultPath)}function xW(t,e){t.stopPropagation(),e.manager.stage(e.change.path,!1).catch(r=>e.view.plugin.displayError(r)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}function SW(t,e){t.stopPropagation();let r=e.change.workingDir=="U";new Sl({app:e.view.app,filesToDeleteCount:r?1:0,filesToDiscardCount:r?0:1,path:e.change.vaultPath}).openAndGetResult().then(n=>Ms(this,void 0,void 0,function*(){if(n=="delete"){let i=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);i instanceof Mu.TFile?yield e.view.app.fileManager.trashFile(i):yield e.view.app.vault.adapter.remove(e.change.vaultPath)}else n=="discard"&&(yield e.manager.discard(e.change.path).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")}));e.view.app.workspace.trigger("obsidian-git:refresh")}),n=>e.view.plugin.displayError(n))}var EW=ce('<div data-icon="go-to-file" aria-label="Open File" class="clickable-icon"></div>'),kW=ce('<main class="tree-item nav-file"><div class="tree-item-self is-clickable nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><div class="buttons"><!> <div data-icon="undo" aria-label="Discard" class="clickable-icon"></div> <div data-icon="plus" aria-label="Stage" class="clickable-icon"></div></div> <div class="type"> </div></div></div></main>');function Du(t,e){tt(e,!0);let r=Ne([]),n=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left");Jt(()=>{for(let S of r)S&&(0,Mu.setIcon)(S,S.getAttr("data-icon"))});function i(S){S.stopPropagation(),Mo(e.change.path)?a(S):s(S)}function a(S){var E;S.stopPropagation();let k=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);k instanceof Mu.TFile&&((E=bn(e.view.app,S))===null||E===void 0||E.openFile(k).catch(A=>e.view.plugin.displayError(A)))}function s(S){S.stopPropagation(),e.view.plugin.tools.openDiff({aFile:e.change.path,aRef:"",event:S})}var o=kW();o.__mouseover=[_W,e],o.__click=i;var l=q(o),c=q(l),u=q(c,!0);U(c);var f=ee(c,2),d=q(f),h=q(d);{var m=S=>{var E=EW();E.__click=a,Ke(E,k=>r[0]=k,()=>r==null?void 0:r[0]),qr("auxclick",E,a),ie(S,E)};xe(h,S=>{Do(e.change.vaultPath,e.view.app)&&S(m)})}var g=ee(h,2);g.__click=[SW,e],Ke(g,S=>r[1]=S,()=>r==null?void 0:r[1]);var v=ee(g,2);v.__click=[xW,e],Ke(v,S=>r[2]=S,()=>r==null?void 0:r[2]),U(d);var w=ee(d,2),b=q(w,!0);U(w),U(f),U(l),U(o),Fe(S=>{ge(l,"data-path",e.change.vaultPath),ge(l,"data-tooltip-position",R(n)),ge(l,"aria-label",e.change.vaultPath),Be(u,S),ge(w,"data-type",e.change.workingDir),Be(b,e.change.workingDir)},[()=>ei(e.change.vaultPath)]),qr("auxclick",o,S=>{S.stopPropagation(),S.button==2?Qn(e.view.app,S,e.change.vaultPath,e.view.leaf,"git-source-control"):i(S)}),ie(t,o),rt()}gt(["mouseover","click"]);p();var uM=require("obsidian");function AW(t,e){e.view.app.vault.getAbstractFileByPath(e.change.vaultPath)&&Lo(e.view.app,t,e.view,e.change.vaultPath)}var TW=ce('<main class="tree-item nav-file"><div class="tree-item-self is-clickable nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><span class="type"> </span></div></div></main>');function Lu(t,e){tt(e,!0);let r=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left");function n(f){var d;f.stopPropagation();let h=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);h instanceof uM.TFile&&((d=bn(e.view.app,f))===null||d===void 0||d.openFile(h).catch(m=>e.view.plugin.displayError(m)))}var i=TW();i.__mouseover=[AW,e],i.__click=n;var a=q(i),s=q(a),o=q(s,!0);U(s);var l=ee(s,2),c=q(l),u=q(c,!0);U(c),U(l),U(a),U(i),Fe(f=>{ge(a,"data-path",e.change.vaultPath),ge(a,"data-tooltip-position",R(r)),ge(a,"aria-label",e.change.vaultPath),Be(o,f),ge(c,"data-type",e.change.workingDir),Be(u,e.change.workingDir)},[()=>ei(e.change.vaultPath)]),qr("auxclick",i,f=>{f.stopPropagation(),f.button==2?Qn(e.view.app,f,e.change.vaultPath,e.view.leaf,"git-source-control"):n(f)}),ie(t,i),rt()}gt(["mouseover","click"]);p();var Tp=require("obsidian");function CW(t,e){e.view.app.vault.getFileByPath(e.change.vaultPath)&&Lo(e.view.app,t,e.view,e.change.vaultPath)}function PW(t,e){t.stopPropagation(),e.manager.unstage(e.change.path,!1).catch(r=>e.view.plugin.displayError(r)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}var RW=ce('<div data-icon="go-to-file" aria-label="Open File" class="clickable-icon"></div>'),IW=ce('<main class="tree-item nav-file"><div class="tree-item-self is-clickable nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><div class="buttons"><!> <div data-icon="minus" aria-label="Unstage" class="clickable-icon"></div></div> <div class="type"> </div></div></div></main>');function Nu(t,e){tt(e,!0);let r=Ne([]),n=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left");Jt(()=>{for(let b of r)b&&(0,Tp.setIcon)(b,b.getAttr("data-icon"))});function i(b){b.stopPropagation(),Mo(e.change.path)?a(b):s(b)}function a(b){var S;b.stopPropagation();let E=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);E instanceof Tp.TFile&&((S=bn(e.view.app,b))===null||S===void 0||S.openFile(E).catch(k=>e.view.plugin.displayError(k)))}function s(b){var S;b.stopPropagation(),e.view.plugin.tools.openDiff({aFile:(S=e.change.from)!==null&&S!==void 0?S:e.change.path,bFile:e.change.path,aRef:"HEAD",bRef:"",event:b})}var o=IW();o.__mouseover=[CW,e],o.__click=i;var l=q(o),c=q(l),u=q(c,!0);U(c);var f=ee(c,2),d=q(f),h=q(d);{var m=b=>{var S=RW();S.__click=a,Ke(S,E=>r[0]=E,()=>r==null?void 0:r[0]),ie(b,S)};xe(h,b=>{Do(e.change.vaultPath,e.view.app)&&b(m)})}var g=ee(h,2);g.__click=[PW,e],Ke(g,b=>r[1]=b,()=>r==null?void 0:r[1]),U(d);var v=ee(d,2),w=q(v,!0);U(v),U(f),U(l),U(o),Fe(b=>{ge(l,"data-path",e.change.vaultPath),ge(l,"data-tooltip-position",R(n)),ge(l,"aria-label",e.change.vaultPath),Be(u,b),ge(v,"data-type",e.change.index),Be(w,e.change.index)},[()=>ei(e.change.vaultPath)]),qr("auxclick",o,b=>{b.stopPropagation(),b.button==2?Qn(e.view.app,b,e.change.vaultPath,e.view.leaf,"git-source-control"):i(b)}),ie(t,o),rt()}gt(["mouseover","click"]);p();p();var $W=ce('<div class="tree-item nav-file"><div class="tree-item-self nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div></div></div>'),FW=ce("<main><!></main>");function Ds(t,e){tt(e,!0);var r=FW(),n=q(r);{var i=a=>{var s=$W(),o=q(s),l=q(o),c=q(l,!0);U(l),U(o),U(s),Fe(()=>{ge(o,"aria-label","And "+(e.files.length-500)+" more files"),Be(c,"And "+(e.files.length-500)+" more files")}),ie(a,s)};xe(n,a=>{e.files.length>500&&a(i)})}U(r),ie(t,r),rt()}var MW=ce("<div><!></div>"),DW=(t,e,r)=>e(t,R(r)),LW=(t,e,r)=>e(t,R(r).path),NW=ce('<div data-icon="minus" aria-label="Unstage" class="clickable-icon"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-minus"><line x1="4" y1="9" x2="14" y2="9"></line></svg></div>'),BW=(t,e,r)=>e(t,R(r)),HW=(t,e,r)=>e(t,R(r).path),UW=ce('<div data-icon="undo" aria-label="Discard" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-undo"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg></div> <div data-icon="plus" aria-label="Stage" class="clickable-icon"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-plus"><line x1="9" y1="4" x2="9" y2="14"></line><line x1="4" y1="9" x2="14" y2="9"></line></svg></div>',1),jW=ce('<div class="tree-item-children nav-folder-children"><!></div>'),GW=ce('<div><div class="tree-item-self is-clickable nav-folder-title"><div data-icon="folder" style="padding-right: 5px; display: flex; "></div> <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content"> </div> <div class="git-tools"><div class="buttons"><!> <div style="width:11px"></div></div></div></div> <!></div>'),qW=ce("<main><!> <!></main>");function Ls(t,e){tt(e,!0);var r,n;let i=dn(e,"topLevel",3,!1),a=dn(e,"closed",15);for(let g of e.hierarchy.children)((n=(r=g.children)===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0)>100&&a(a()[g.title]=!0,!0);let s=Pt(()=>e.view.leaf.getRoot().side=="left"?"right":"left");function o(g,v){g.stopPropagation(),e.plugin.gitManager.stageAll({dir:v}).catch(w=>e.plugin.displayError(w)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}function l(g,v){g.stopPropagation(),e.plugin.gitManager.unstageAll({dir:v}).catch(w=>e.plugin.displayError(w)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}function c(g,v){g.stopPropagation(),e.plugin.discardAll(v.vaultPath)}function u(g,v){g.stopPropagation(),a(a()[v.path]=!a()[v.path],!0)}var f=qW();let d;var h=q(f);Vr(h,17,()=>Mc(e.hierarchy.children,500),zr,(g,v)=>{var w=zi(),b=Tr(w);{var S=k=>{var A=MW(),y=q(A);{var _=T=>{Nu(T,{get change(){return R(v).data},get manager(){return e.plugin.gitManager},get view(){return e.view}})},x=T=>{var P=zi(),F=Tr(P);{var N=re=>{Du(re,{get change(){return R(v).data},get manager(){return e.plugin.gitManager},get view(){return e.view}})},M=re=>{var ye=zi(),me=Tr(ye);{var fe=Ge=>{Lu(Ge,{get change(){return R(v).data},get view(){return e.view}})};xe(me,Ge=>{e.fileType==2&&Ge(fe)},!0)}ie(re,ye)};xe(F,re=>{e.fileType==1?re(N):re(M,!1)},!0)}ie(T,P)};xe(y,T=>{e.fileType==0?T(_):T(x,!1)})}U(A),ie(k,A)},E=k=>{var A=GW();A.__click=[DW,u,v];let y;var _=q(A),x=ee(q(_),2);let T;var P=ee(x,2),F=q(P,!0);U(P);var N=ee(P,2),M=q(N),re=q(M);{var ye=oe=>{var B=NW();B.__click=[LW,l,v],ie(oe,B)},me=oe=>{var B=UW(),Z=Tr(B);Z.__click=[BW,c,v];var H=ee(Z,2);H.__click=[HW,o,v],ie(oe,B)};xe(re,oe=>{e.fileType==0?oe(ye):oe(me,!1)})}fl(2),U(M),U(N),U(_);var fe=ee(_,2);{var Ge=oe=>{var B=jW(),Z=q(B);Ls(Z,{get hierarchy(){return R(v)},get plugin(){return e.plugin},get view(){return e.view},get fileType(){return e.fileType},get closed(){return a()},set closed(H){a(H)}}),U(B),On(3,B,()=>mi,()=>({duration:150})),ie(oe,B)};xe(fe,oe=>{a()[R(v).path]||oe(Ge)})}U(A),Fe((oe,B)=>{y=ot(A,1,"tree-item nav-folder",null,y,oe),ge(_,"data-tooltip-position",R(s)),ge(_,"aria-label",R(v).vaultPath),T=ot(x,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,T,B),Be(F,R(v).title)},[()=>({"is-collapsed":a()[R(v).path]}),()=>({"is-collapsed":a()[R(v).path]})]),qr("auxclick",A,oe=>Qn(e.view.app,oe,R(v).vaultPath,e.view.leaf,"git-source-control")),ie(k,A)};xe(b,k=>{R(v).data?k(S):k(E,!1)})}ie(g,w)});var m=ee(h,2);Ds(m,{get files(){return e.hierarchy.children}}),U(f),Fe(g=>d=ot(f,1,"",null,d,g),[()=>({topLevel:i()})]),ie(t,f),rt()}gt(["click"]);function zW(t,e,r,n,i,a){if(ne(e,!0),R(r)){let s=R(r).staged.length>0;n().promiseQueue.addTask(()=>n().commit({fromAuto:!1,commitMessage:R(i),onlyStaged:s}).then(()=>ne(i,n().settings.commitMessage,!0)).finally(a))}}function fM(t,e,r,n,i){t.stopPropagation(),ne(e,!0),r().promiseQueue.addTask(()=>r().gitManager.stageAll({status:R(n)}).finally(i))}function dM(t,e,r,n,i){t.stopPropagation(),ne(e,!0),r().promiseQueue.addTask(()=>r().gitManager.unstageAll({status:R(n)}).finally(i))}function VW(t,e,r,n){ne(e,!0),r().promiseQueue.addTask(()=>r().push().finally(n))}function WW(t,e,r,n){ne(e,!0),r().promiseQueue.addTask(()=>r().pullChangesFromRemote().finally(n))}function YW(t,e){t.stopPropagation(),e().discardAll()}var XW=(t,e,r,n)=>{ne(e,!R(e)),(0,Ns.setIcon)(r[6],R(e)?"list":"folder"),n().settings.treeStructure=R(e),n().saveSettings()},ZW=(t,e)=>ne(e,""),KW=ce('<div class="git-commit-msg-clear-button svelte-11adhly"></div>'),JW=(t,e)=>ne(e,!R(e)),QW=ce("<!> <!>",1),e9=ce('<div class="tree-item-children nav-folder-children"><!></div>'),t9=(t,e)=>ne(e,!R(e)),r9=ce("<!> <!>",1),n9=ce('<div class="tree-item-children nav-folder-children"><!></div>'),i9=(t,e)=>ne(e,!R(e)),a9=ce("<!> <!>",1),s9=ce('<div class="tree-item-children nav-folder-children"><!></div>'),o9=ce('<div><div class="tree-item-self is-clickable nav-folder-title svelte-11adhly"><div class="tree-item-icon nav-folder-collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content">Recently Pulled Files</div> <span class="tree-item-flair"> </span></div> <!></div>'),l9=ce('<div class="tree-item nav-folder mod-root"><div><div class="tree-item-self is-clickable nav-folder-title svelte-11adhly"><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content">Staged Changes</div> <div class="git-tools svelte-11adhly"><div class="buttons"><div data-icon="minus" aria-label="Unstage" class="clickable-icon"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-minus"><line x1="4" y1="9" x2="14" y2="9"></line></svg></div></div> <div class="files-count svelte-11adhly"> </div></div></div> <!></div> <div><div class="tree-item-self is-clickable nav-folder-title svelte-11adhly"><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content">Changes</div> <div class="git-tools svelte-11adhly"><div class="buttons"><div data-icon="undo" aria-label="Discard" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-undo"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg></div> <div data-icon="plus" aria-label="Stage" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></div></div> <div class="files-count svelte-11adhly"> </div></div></div> <!></div> <!></div>'),c9=ce('<main class="git-view svelte-11adhly"><div class="nav-header"><div class="nav-buttons-container"><div id="backup-btn" data-icon="arrow-up-circle" class="clickable-icon nav-action-button" aria-label="Commit-and-sync"></div> <div id="commit-btn" data-icon="check" class="clickable-icon nav-action-button" aria-label="Commit"></div> <div id="stage-all" class="clickable-icon nav-action-button" data-icon="plus-circle" aria-label="Stage all"></div> <div id="unstage-all" class="clickable-icon nav-action-button" data-icon="minus-circle" aria-label="Unstage all"></div> <div id="push" class="clickable-icon nav-action-button" data-icon="upload" aria-label="Push"></div> <div id="pull" class="clickable-icon nav-action-button" data-icon="download" aria-label="Pull"></div> <div id="layoutChange" class="clickable-icon nav-action-button" aria-label="Change Layout"></div> <div id="refresh" data-icon="refresh-cw" aria-label="Refresh"></div></div></div> <div class="git-commit-msg svelte-11adhly"><textarea class="commit-msg-input svelte-11adhly" spellcheck="true" placeholder="Commit Message"></textarea> <!></div> <div class="nav-files-container" style="position: relative;"><!></div></main>'),u9={hash:"svelte-11adhly",code:`.commit-msg-input.svelte-11adhly {width:100%;overflow:hidden;resize:none;padding:7px 5px;background-color:var(--background-modifier-form-field);}.git-commit-msg.svelte-11adhly {position:relative;padding:0;width:calc(100% - var(--size-4-8));margin:4px auto;}main.svelte-11adhly .git-tools:where(.svelte-11adhly) .files-count:where(.svelte-11adhly) {padding-left:var(--size-2-1);width:11px;display:flex;align-items:center;justify-content:center;}.nav-folder-title.svelte-11adhly {align-items:center;}.git-commit-msg-clear-button.svelte-11adhly {position:absolute;background:transparent;border-radius:50%;color:var(--search-clear-button-color);cursor:var(--cursor);top:-4px;right:2px;bottom:0px;line-height:0;height:var(--input-height);width:28px;margin:auto;padding:0 0;text-align:center;display:flex;justify-content:center;align-items:center;transition:color 0.15s ease-in-out;}.git-commit-msg-clear-button.svelte-11adhly:after {content:"";height:var(--search-clear-button-size);width:var(--search-clear-button-size);display:block;background-color:currentColor;mask-image:url("data:image/svg+xml,<svg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM3.8705 3.09766L6.00003 5.22718L8.12955 3.09766L8.9024 3.8705L6.77287 6.00003L8.9024 8.12955L8.12955 8.9024L6.00003 6.77287L3.8705 8.9024L3.09766 8.12955L5.22718 6.00003L3.09766 3.8705L3.8705 3.09766Z' fill='currentColor'/></svg>");mask-repeat:no-repeat;-webkit-mask-image:url("data:image/svg+xml,<svg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM3.8705 3.09766L6.00003 5.22718L8.12955 3.09766L8.9024 3.8705L6.77287 6.00003L8.9024 8.12955L8.12955 8.9024L6.00003 6.77287L3.8705 8.9024L3.09766 8.12955L5.22718 6.00003L3.09766 3.8705L3.8705 3.09766Z' fill='currentColor'/></svg>");-webkit-mask-repeat:no-repeat;}`};function My(t,e){tt(e,!0),$n(t,u9);let r=dn(e,"plugin",7),n=dn(e,"view",7),i=Ce(!1),a=Ce(void 0),s=Ce(Ne([])),o=Ce(Ne(r().settings.commitMessage)),l=Ne([]),c=Ce(void 0),u=Ce(void 0),f=Ce(void 0),d=Ce(!0),h=Ce(!0),m=Ce(!0),g=Ce(0),v=Ce(Ne({})),w=Ce(Ne({})),b=Ce(Ne({})),S=Ce(Ne(r().settings.treeStructure));n().registerEvent(n().app.workspace.on("obsidian-git:loading-status",()=>ne(i,!0))),n().registerEvent(n().app.workspace.on("obsidian-git:status-changed",()=>void k().catch(console.error))),n().plugin.cachedStatus==null?n().plugin.refresh().catch(console.error):k().catch(console.error),Jt(()=>{l.forEach(Y=>(0,Ns.setIcon)(Y,Y.getAttr("data-icon")))}),Jt(()=>{l.forEach(Y=>{var Ie,Me;!Y||Y.id!="push"||(Ns.Platform.isMobile?(Y.removeClass("button-border"),R(g)>0&&Y.addClass("button-border")):((Ie=Y.firstElementChild)===null||Ie===void 0||Ie.removeAttribute("color"),R(g)>0&&((Me=Y.firstElementChild)===null||Me===void 0||Me.setAttr("color","var(--text-accent)"))))})}),n().scope=new Ns.Scope(r().app.scope),n().scope.register(["Ctrl"],"Enter",Y=>E());function E(){if(ne(i,!0),R(a)){let Y=R(a).staged.length>0;r().promiseQueue.addTask(()=>r().commitAndSync({fromAutoBackup:!1,commitMessage:R(o),onlyStaged:Y}).then(()=>{ne(o,r().settings.commitMessage,!0)}).finally(A))}}function k(){return Ms(this,void 0,void 0,function*(){if(!r().gitReady){ne(a,void 0);return}if(ne(g,yield r().gitManager.getUnpushedCommits(),!0),ne(a,r().cachedStatus,!0),ne(i,!1),r().lastPulledFiles&&r().lastPulledFiles!=R(s)&&(ne(s,r().lastPulledFiles,!0),ne(f,{title:"",path:"",vaultPath:"",children:r().gitManager.getTreeStructure(R(s))},!0)),R(a)){let Y=(Ie,Me)=>Ie.vaultPath.split("/").last().localeCompare(ei(Me.vaultPath));R(a).changed.sort(Y),R(a).staged.sort(Y),ne(c,{title:"",path:"",vaultPath:"",children:r().gitManager.getTreeStructure(R(a).changed)},!0),ne(u,{title:"",path:"",vaultPath:"",children:r().gitManager.getTreeStructure(R(a).staged)},!0)}else ne(c,void 0),ne(u,void 0)})}function A(){n().app.workspace.trigger("obsidian-git:refresh")}let y=Pt(()=>(R(o).match(/\n/g)||[]).length+1||1);var _=c9(),x=q(_),T=q(x),P=q(T);P.__click=E,Ke(P,Y=>l[0]=Y,()=>l==null?void 0:l[0]);var F=ee(P,2);F.__click=[zW,i,a,r,o,A],Ke(F,Y=>l[1]=Y,()=>l==null?void 0:l[1]);var N=ee(F,2);N.__click=[fM,i,r,a,A],Ke(N,Y=>l[2]=Y,()=>l==null?void 0:l[2]);var M=ee(N,2);M.__click=[dM,i,r,a,A],Ke(M,Y=>l[3]=Y,()=>l==null?void 0:l[3]);var re=ee(M,2);re.__click=[VW,i,r,A],Ke(re,Y=>l[4]=Y,()=>l==null?void 0:l[4]);var ye=ee(re,2);ye.__click=[WW,i,r,A],Ke(ye,Y=>l[5]=Y,()=>l==null?void 0:l[5]);var me=ee(ye,2);me.__click=[XW,S,l,r],Ke(me,Y=>l[6]=Y,()=>l==null?void 0:l[6]);var fe=ee(me,2);let Ge;fe.__click=A,Ke(fe,Y=>l[7]=Y,()=>l==null?void 0:l[7]),U(T),U(x);var oe=ee(x,2),B=q(oe);dy(B);var Z=ee(B,2);{var H=Y=>{var Ie=KW();Ie.__click=[ZW,o],ge(Ie,"aria-label","Clear"),ie(Y,Ie)};xe(Z,Y=>{R(o)&&Y(H)})}U(oe);var Oe=ee(oe,2),cr=q(Oe);{var Gt=Y=>{var Ie=l9(),Me=q(Ie);let Rt;var De=q(Me);De.__click=[JW,h];var G=q(De);let Je;var L=ee(G,4),X=q(L),Ee=q(X);Ee.__click=[dM,i,r,a,A],Ke(Ee,$t=>l[8]=$t,()=>l==null?void 0:l[8]),U(X);var We=ee(X,2),It=q(We,!0);U(We),U(L),U(De);var kl=ee(De,2);{var xM=$t=>{var qt=e9(),Yi=q(qt);{var Mn=Qt=>{Ls(Qt,{get hierarchy(){return R(u)},get plugin(){return r()},get view(){return n()},get fileType(){return 0},topLevel:!0,get closed(){return R(v)},set closed(pn){ne(v,pn,!0)}})},Us=Qt=>{var pn=QW(),Da=Tr(pn);Vr(Da,17,()=>Mc(R(a).staged,500),zr,(Xi,Al)=>{Nu(Xi,{get change(){return R(Al)},get view(){return n()},get manager(){return r().gitManager}})});var gi=ee(Da,2);Ds(gi,{get files(){return R(a).staged}}),ie(Qt,pn)};xe(Yi,Qt=>{R(S)?Qt(Mn):Qt(Us,!1)})}U(qt),On(3,qt,()=>mi,()=>({duration:150})),ie($t,qt)};xe(kl,$t=>{R(h)&&$t(xM)})}U(Me);var Hu=ee(Me,2);let Hy;var Uu=q(Hu);Uu.__click=[t9,d];var Uy=q(Uu);let jy;var Gy=ee(Uy,4),Bp=q(Gy),qy=q(Bp);qy.__click=[YW,r];var zy=ee(qy,2);zy.__click=[fM,i,r,a,A],Ke(zy,$t=>l[9]=$t,()=>l==null?void 0:l[9]),U(Bp);var Vy=ee(Bp,2),SM=q(Vy,!0);U(Vy),U(Gy),U(Uu);var EM=ee(Uu,2);{var kM=$t=>{var qt=n9(),Yi=q(qt);{var Mn=Qt=>{Ls(Qt,{get hierarchy(){return R(c)},get plugin(){return r()},get view(){return n()},get fileType(){return 1},topLevel:!0,get closed(){return R(w)},set closed(pn){ne(w,pn,!0)}})},Us=Qt=>{var pn=r9(),Da=Tr(pn);Vr(Da,17,()=>Mc(R(a).changed,500),zr,(Xi,Al)=>{Du(Xi,{get change(){return R(Al)},get view(){return n()},get manager(){return r().gitManager}})});var gi=ee(Da,2);Ds(gi,{get files(){return R(a).changed}}),ie(Qt,pn)};xe(Yi,Qt=>{R(S)?Qt(Mn):Qt(Us,!1)})}U(qt),On(3,qt,()=>mi,()=>({duration:150})),ie($t,qt)};xe(EM,$t=>{R(d)&&$t(kM)})}U(Hu);var AM=ee(Hu,2);{var TM=$t=>{var qt=o9();let Yi;var Mn=q(qt);Mn.__click=[i9,m];var Us=ee(q(Mn),4),Qt=q(Us,!0);U(Us),U(Mn);var pn=ee(Mn,2);{var Da=gi=>{var Xi=s9(),Al=q(Xi);{var CM=js=>{Ls(js,{get hierarchy(){return R(f)},get plugin(){return r()},get view(){return n()},get fileType(){return 2},topLevel:!0,get closed(){return R(b)},set closed(ju){ne(b,ju,!0)}})},PM=js=>{var ju=a9(),Wy=Tr(ju);Vr(Wy,17,()=>R(s),zr,(IM,$M)=>{Lu(IM,{get change(){return R($M)},get view(){return n()}})});var RM=ee(Wy,2);Ds(RM,{get files(){return R(s)}}),ie(js,ju)};xe(Al,js=>{R(S)?js(CM):js(PM,!1)})}U(Xi),On(3,Xi,()=>mi,()=>({duration:150})),ie(gi,Xi)};xe(pn,gi=>{R(m)&&gi(Da)})}U(qt),Fe(gi=>{Yi=ot(qt,1,"pulled nav-folder",null,Yi,gi),Be(Qt,R(s).length)},[()=>({"is-collapsed":!R(m)})]),ie($t,qt)};xe(AM,$t=>{R(s).length>0&&R(f)&&$t(TM)})}U(Ie),Fe(($t,qt,Yi,Mn)=>{Rt=ot(Me,1,"staged tree-item nav-folder",null,Rt,$t),Je=ot(G,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,Je,qt),Be(It,R(a).staged.length),Hy=ot(Hu,1,"changes tree-item nav-folder",null,Hy,Yi),jy=ot(Uy,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,jy,Mn),Be(SM,R(a).changed.length)},[()=>({"is-collapsed":!R(h)}),()=>({"is-collapsed":!R(h)}),()=>({"is-collapsed":!R(d)}),()=>({"is-collapsed":!R(d)})]),ie(Y,Ie)};xe(cr,Y=>{R(a)&&R(u)&&R(c)&&Y(Gt)})}U(Oe),U(_),Fe(Y=>{ge(_,"data-type",Dt.type),ge(me,"data-icon",R(S)?"list":"folder"),Ge=ot(fe,1,"clickable-icon nav-action-button",null,Ge,Y),ge(B,"rows",R(y))},[()=>({loading:R(i)})]),ky(B,()=>R(o),Y=>ne(o,Y)),ie(t,_),rt()}gt(["click"]);var Bu=class extends hM.ItemView{constructor(e,r){super(e),this.plugin=r,this.hoverPopover=null}getViewType(){return Dt.type}getDisplayText(){return Dt.name}getIcon(){return Dt.icon}onClose(){return this._view&&Vi(this._view),super.onClose()}reload(){this._view&&Vi(this._view),this._view=Ma(My,{target:this.contentEl,props:{plugin:this.plugin,view:this}})}onOpen(){return this.reload(),super.onOpen()}};p();var Cp=class{constructor(e,r){this.statusBarEl=e;this.plugin=r;this.statusBarEl.addClass("mod-clickable"),this.statusBarEl.onClickEvent(n=>{this.plugin.switchBranch().catch(i=>r.displayError(i))})}async display(){if(this.plugin.gitReady){let e=await this.plugin.gitManager.branchInfo();e.current!=null?this.statusBarEl.setText(e.current):this.statusBarEl.empty()}else this.statusBarEl.empty()}remove(){this.statusBarEl.remove()}};p();var pM=require("obsidian");var Pp=class{constructor(e){this.plugin=e}get editor(){var n;let e=(n=this.plugin.app.workspace.activeEditor)==null?void 0:n.editor,r=e==null?void 0:e.cm;if(!(!e||!Sn.hasHunksData(r.state)))return{editor:r,obEditor:e}}get gitManager(){return this.plugin.gitManager}resetHunk(e){if(!this.editor)return;let{editor:r,obEditor:n}=this.editor,i=Sn.getHunk(r.state,!1,e);if(i){let a,s;i.type==="delete"?(a=i.added.start+1,s=i.added.start+1):(a=i.added.start-0,s=i.added.start-1+i.added.count);let o=r.state.doc.line(a).from,l=i.type==="delete"?r.state.doc.line(s).from:r.state.doc.line(s).to+1,c=i.removed.lines.join(`
`);i.removed.lines.length>0&&!i.removed.no_nl_at_eof&&(c+=`
`),n.replaceRange(c,n.offsetToPos(o),n.offsetToPos(l)),n.setSelection(n.offsetToPos(o))}}async stageHunk(e){if(!await this.plugin.isAllInitialized()||!this.editor)return;let{editor:r}=this.editor,n=Sn.getHunk(r.state,!1,e),i=!1;if(n||(n=Sn.getHunk(r.state,!0,e),i=!0),!n)return;let a=r.state.field(pM.editorInfoField).file.path,s=St.createPatch(a,[n],"100644",i).join(`
`)+`
`;await this.gitManager.applyPatch(s),this.plugin.app.workspace.trigger("obsidian-git:refresh")}goToHunk(e){if(!this.editor)return;let{editor:r,obEditor:n}=this.editor,i=Sn.getHunks(r.state,!1),a=n.getCursor().line+1,s=St.findNearestHunk(a,i,e,!0);if(s==null)return;let o=i[s];if(o){let l=o.added.start-1;n.setCursor(l,0),n.scrollIntoView({from:{line:l,ch:0},to:{line:l+1,ch:0}},!0)}}};p();p();var Bs=require("obsidian");var Rp=class{constructor(e){this.plg=e;this.codeMirrorExtensions=[];this.handleWorkspaceLeaf=e=>{if(!this.lineAuthorInfoProvider){console.warn("Git: undefined lineAuthorInfoProvider. Unexpected situation.");return}let r=e==null?void 0:e.view;!(r instanceof Bs.MarkdownView)||r.file==null||(r==null?void 0:r.allowNoFile)===!0||this.lineAuthorInfoProvider.trackChanged(r.file).catch(console.error)}}onLoadPlugin(){this.plg.registerEditorExtension(this.codeMirrorExtensions),XI(()=>this.plg.settings.lineAuthor,e=>{this.plg.settings.lineAuthor=e,this.plg.saveSettings()})}conditionallyActivateBySettings(){this.plg.settings.lineAuthor.show&&this.activateFeature()}activateFeature(){try{if(!this.isAvailableOnCurrentPlatform().available)return;a$(this.plg.settings.lineAuthor),this.lineAuthorInfoProvider=new ph(this.plg),this.createEventHandlers(),this.activateCodeMirrorExtensions(),console.log(this.plg.manifest.name+": Enabled line authoring.")}catch(e){console.warn("Git: Error while loading line authoring feature.",e),this.deactivateFeature()}}deactivateFeature(){var e;this.destroyEventHandlers(),this.deactivateCodeMirrorExtensions(),(e=this.lineAuthorInfoProvider)==null||e.destroy(),this.lineAuthorInfoProvider=void 0,console.log(this.plg.manifest.name+": Disabled line authoring.")}isAvailableOnCurrentPlatform(){return{available:this.plg.useSimpleGit&&Bs.Platform.isDesktopApp,gitManager:this.plg.gitManager instanceof _e?this.plg.gitManager:void 0}}refreshLineAuthorViews(){this.plg.settings.lineAuthor.show&&(this.deactivateFeature(),this.activateFeature())}activateCodeMirrorExtensions(){this.codeMirrorExtensions.push(g$),this.plg.app.workspace.updateOptions(),this.plg.app.workspace.iterateAllLeaves(this.handleWorkspaceLeaf)}deactivateCodeMirrorExtensions(){for(let e of this.codeMirrorExtensions)this.codeMirrorExtensions.remove(e);this.plg.app.workspace.updateOptions()}createEventHandlers(){this.gutterContextMenuEvent=this.createGutterContextMenuHandler(),this.fileOpenEvent=this.createFileOpenEvent(),this.workspaceLeafChangeEvent=this.createWorkspaceLeafChangeEvent(),this.fileModificationEvent=this.createVaultFileModificationHandler(),this.headChangeEvent=this.createHeadChangeEvent(),this.refreshOnCssChangeEvent=this.createCssRefreshHandler(),this.fileRenameEvent=this.createFileRenameEvent(),e$(),this.plg.registerEvent(this.gutterContextMenuEvent),this.plg.registerEvent(this.refreshOnCssChangeEvent),this.plg.registerEvent(this.fileOpenEvent),this.plg.registerEvent(this.workspaceLeafChangeEvent),this.plg.registerEvent(this.fileModificationEvent),this.plg.registerEvent(this.headChangeEvent),this.plg.registerEvent(this.fileRenameEvent)}destroyEventHandlers(){this.plg.app.workspace.offref(this.gutterContextMenuEvent),this.plg.app.workspace.offref(this.refreshOnCssChangeEvent),this.plg.app.workspace.offref(this.fileOpenEvent),this.plg.app.workspace.offref(this.workspaceLeafChangeEvent),this.plg.app.workspace.offref(this.refreshOnCssChangeEvent),this.plg.app.vault.offref(this.fileModificationEvent),this.plg.app.workspace.offref(this.headChangeEvent),this.plg.app.vault.offref(this.fileRenameEvent)}createFileOpenEvent(){return this.plg.app.workspace.on("file-open",e=>{var r;return void((r=this.lineAuthorInfoProvider)==null?void 0:r.trackChanged(e).catch(console.error))})}createWorkspaceLeafChangeEvent(){return this.plg.app.workspace.on("active-leaf-change",this.handleWorkspaceLeaf)}createFileRenameEvent(){return this.plg.app.vault.on("rename",(e,r)=>{var n;return e instanceof Bs.TFile&&((n=this.lineAuthorInfoProvider)==null?void 0:n.trackChanged(e))})}createVaultFileModificationHandler(){return this.plg.app.vault.on("modify",e=>{var r;return e instanceof Bs.TFile&&((r=this.lineAuthorInfoProvider)==null?void 0:r.trackChanged(e))})}createHeadChangeEvent(){return this.plg.app.workspace.on("obsidian-git:head-change",()=>{this.refreshLineAuthorViews()})}createCssRefreshHandler(){return this.plg.app.workspace.on("css-change",()=>this.refreshLineAuthorViews())}createGutterContextMenuHandler(){return this.plg.app.workspace.on("editor-menu",n$)}};p();var El=require("obsidian");p();p();var Hs=require("@codemirror/state"),$p=require("@codemirror/view");var Ip=class extends $p.GutterMarker{constructor(r,n){super();this.type=r;this.staged=n}toDOM(r){let n=document.createElement("div");return n.className=`git-gutter-marker git-${this.type} ${this.staged?"staged":"unstaged"}`,this.type=="changedelete"&&n.setText("~"),n}},Dy=Hs.StateField.define({create:()=>Hs.RangeSet.empty,update:(t,e)=>{let r=e.state.field(tn,!1);if(!r)return Hs.RangeSet.empty;let n=e.effects.some(i=>i.is(Jo));if(e.docChanged||n){let i=new Set,a=mM(e,r.hunks,!1,i),s=mM(e,r.stagedHunks,!0,i);return t=Hs.RangeSet.of([...a,...s],!0),t}return t}});function mM(t,e,r,n){let i=[];for(let s=0;s<e.length;s++){let o=s>0?e[s-1]:void 0,l=s<e.length-1?e[s+1]:void 0,c=e[s];i.push(...St.calcSigns(o,c,l))}let a=[];for(let s of i){if(n.has(s.lnum))continue;let o=t.state.doc.line(s.lnum);n.add(s.lnum),a.push(new Ip(s.type,r).range(o.from,o.to))}return a}var gM=(0,$p.gutter)({class:"git-signs-gutter",markers:t=>{var e;return(e=t.state.field(Dy,!1))!=null?e:Hs.RangeSet.empty},initialSpacer:t=>new Ip("delete",!1),domEventHandlers:{click:(t,e,r)=>{var i;return((i=Sn.getHunkAtPos(t.state,e.from,!1))!=null?i:Sn.getHunkAtPos(t.state,e.from,!0))&&(vs(t,e.from),r.preventDefault()),!1}}});var Fp=class{constructor(e){this.plugin=e}async trackChanged(e){return this.trackChangedHelper(e).catch(r=>(console.warn("Git: Error in trackChanged."+r),Promise.reject(r)))}async trackChangedHelper(e){if(e){if(e.path===void 0){console.warn("Git: Attempted to track change of undefined filepath. Unforeseen situation.");return}return this.computeSigns(e.path)}}destroy(){}async computeSigns(e){let n=await this.plugin.editorIntegration.lineAuthoringFeature.isAvailableOnCurrentPlatform().gitManager.show("",e).catch(()=>{});this.notifySignComputationResultToSubscribers(e,{compareText:n,compareTextHead:void 0})}notifySignComputationResultToSubscribers(e,r){Fi.ifFilepathDefinedTransformSubscribers(e,n=>n.forEach(i=>i.notifyGitCompare(r)))}},vM=[OF,MF,gM,Dy,Hh],wM=tn;p();var Ly=require("obsidian"),Op=class{constructor(e,r){this.statusBarEl=e;this.plugin=r;e.addClass("git-changes-status-bar"),r.settings.hunks.statusBar==="colored"&&e.addClass("git-changes-status-bar-colored"),r.app.workspace.on("active-leaf-change",n=>{(!n||n.getRoot()==r.app.workspace.rootSplit&&!(n.view instanceof Ly.MarkdownView))&&this.statusBarEl.empty()})}display(e,r){var n;if(this.plugin.gitReady){let i=this.plugin.app.workspace.getActiveViewOfType(Ly.MarkdownView);if(!i||((n=i.file)==null?void 0:n.path)!==(r==null?void 0:r.path))return;let a=0,s=0,o=0;for(let l of e)a+=Math.max(0,l.added.count-l.removed.count),s+=Math.min(l.added.count,l.removed.count),o+=Math.max(0,l.removed.count-l.added.count);this.statusBarEl.empty(),this.statusBarEl.createSpan({text:`+${a} `,cls:"git-add"}),this.statusBarEl.createSpan({text:`~${s} `,cls:"git-change"}),this.statusBarEl.createSpan({text:`-${o}`,cls:"git-delete"})}else this.statusBarEl.empty()}remove(){this.statusBarEl.remove()}};var Mp=class{constructor(e){this.plg=e;this.codeMirrorExtensions=[];this.handleWorkspaceLeaf=e=>{if(!this.signsProvider){console.warn("Git: undefined lineAuthorInfoProvider. Unexpected situation.");return}let r=e==null?void 0:e.view;!(r instanceof El.MarkdownView)||r.file==null||(r==null?void 0:r.allowNoFile)===!0||this.signsProvider.trackChanged(r.file).catch(console.error)}}onLoadPlugin(){this.plg.registerEditorExtension(this.codeMirrorExtensions)}conditionallyActivateBySettings(){(this.plg.settings.hunks.showSigns||this.plg.settings.hunks.statusBar!="disabled"||this.plg.settings.hunks.hunkCommands)&&this.activateFeature()}activateFeature(){try{if(!this.isAvailableOnCurrentPlatform().available)return;if(this.signsProvider=new Fp(this.plg),this.createEventHandlers(),this.activateCodeMirrorExtensions(),this.plg.settings.hunks.statusBar!="disabled"){let e=this.plg.addStatusBarItem();this.changeStatusBar=new Op(e,this.plg)}}catch(e){console.warn("Git: Error while loading signs feature.",e),this.deactivateFeature()}}deactivateFeature(){var e,r;this.destroyEventHandlers(),this.deactivateCodeMirrorExtensions(),(e=this.signsProvider)==null||e.destroy(),this.signsProvider=void 0,(r=this.changeStatusBar)==null||r.remove(),this.changeStatusBar=void 0}isAvailableOnCurrentPlatform(){return{available:this.plg.useSimpleGit&&El.Platform.isDesktopApp,gitManager:this.plg.gitManager instanceof _e?this.plg.gitManager:void 0}}refresh(){this.plg.settings.hunks.showSigns&&this.plg.app.workspace.iterateAllLeaves(this.handleWorkspaceLeaf)}activateCodeMirrorExtensions(){this.codeMirrorExtensions.push(wM),this.plg.settings.hunks.showSigns&&this.codeMirrorExtensions.push(...vM),this.plg.app.workspace.updateOptions(),this.plg.app.workspace.iterateAllLeaves(this.handleWorkspaceLeaf)}deactivateCodeMirrorExtensions(){for(let e of this.codeMirrorExtensions)this.codeMirrorExtensions.remove(e);this.plg.app.workspace.updateOptions()}createEventHandlers(){this.workspaceLeafChangeEvent=this.createWorkspaceLeafChangeEvent(),this.fileRenameEvent=this.createFileRenameEvent(),this.pluginRefreshedEvent=this.createPluginRefreshedEvent(),this.plg.registerEvent(this.workspaceLeafChangeEvent),this.plg.registerEvent(this.fileRenameEvent),this.plg.registerEvent(this.pluginRefreshedEvent)}destroyEventHandlers(){this.plg.app.workspace.offref(this.workspaceLeafChangeEvent),this.plg.app.vault.offref(this.fileRenameEvent),this.plg.app.workspace.offref(this.pluginRefreshedEvent),this.plg.app.workspace.offref(this.gutterContextMenuEvent)}createWorkspaceLeafChangeEvent(){return this.plg.app.workspace.on("active-leaf-change",this.handleWorkspaceLeaf)}createFileRenameEvent(){return this.plg.app.vault.on("rename",(e,r)=>{var n;return Fi.ifFilepathDefinedTransformSubscribers(r,i=>i.forEach(a=>{a.changeToNewFilepath(e.path)})),e instanceof El.TFile&&((n=this.signsProvider)==null?void 0:n.trackChanged(e))})}createPluginRefreshedEvent(){return this.plg.app.workspace.on("obsidian-git:refreshed",()=>{this.refresh()})}createHeadChangeEvent(){return this.plg.app.workspace.on("obsidian-git:head-change",()=>{this.refresh()})}};p();var yM=require("@codemirror/state"),Dp=require("obsidian");var Ny=class{constructor(e){this.state=e;this.subscribeMe()}notifyLineAuthoring(e,r){if(this.view===void 0){console.warn(`Git: View is not defined for editor cache key. Unforeseen situation. id: ${e}`);return}let n=this.view.state,i=YI(e,r,n);this.view.dispatch(i)}notifyGitCompare(e){if(this.view===void 0){console.warn("Git: View is not defined for editor cache key. Unforeseen situation. id: ");return}if(this.removeIfStale())return;let r=this.view.state,n=aF(e,r);this.view.dispatch(n)}updateToNewState(e){return this.state=e,!this.lastSeenPath&&this.filepath&&this.subscribeMe(),this}removeIfStale(){var e;return((e=this.view)==null?void 0:e.state.field(By,!1))!=this||this.view.destroyed?(this.unsubscribeMe(this.lastSeenPath),!0):!1}changeToNewFilepath(e){this.unsubscribeMe(this.lastSeenPath),this.subscribeMe(e)}subscribeMe(e){e!=null||(e=this.filepath),e!==void 0&&(Fi.ifFilepathDefinedTransformSubscribers(e,r=>r.add(this)),this.lastSeenPath=e)}unsubscribeMe(e){Fi.ifFilepathDefinedTransformSubscribers(e,r=>r.delete(this))}get filepath(){var e,r;return(r=(e=this.state.field(Dp.editorInfoField))==null?void 0:e.file)==null?void 0:r.path}get view(){return this.state.field(Dp.editorEditorField)}},By=yM.StateField.define({create:t=>new Ny(t),update:(t,e)=>t.updateToNewState(e.state),compare:(t,e)=>t===e});var Lp=class{constructor(e){this.plg=e;this.lineAuthoringFeature=new Rp(this.plg);this.signsFeature=new Mp(this.plg)}onUnloadPlugin(){this.lineAuthoringFeature.deactivateFeature(),this.signsFeature.deactivateFeature()}onLoadPlugin(){this.plg.registerEditorExtension(By),this.lineAuthoringFeature.onLoadPlugin(),this.signsFeature.onLoadPlugin()}onReady(){this.lineAuthoringFeature.conditionallyActivateBySettings(),this.signsFeature.conditionallyActivateBySettings()}activateLineAuthoring(){this.lineAuthoringFeature.activateFeature()}deactiveLineAuthoring(){this.lineAuthoringFeature.deactivateFeature()}refreshSignsSettings(){let e=this.plg.settings.hunks;e.showSigns||e.statusBar!="disabled"||e.hunkCommands?(this.signsFeature.deactivateFeature(),this.signsFeature.activateFeature()):this.signsFeature.deactivateFeature()}};var Np=class extends we.Plugin{constructor(){super(...arguments);this.automaticsManager=new Wc(this);this.tools=new ou(this);this.localStorage=new Uh(this);this.state={gitAction:0,offlineMode:!1};this.gitReady=!1;this.promiseQueue=new Kf(this);this.intervalsToClear=[];this.editorIntegration=new Lp(this);this.hunkActions=new Pp(this)}setPluginState(r){var n;this.state=Object.assign(this.state,r),(n=this.statusBar)==null||n.display()}async updateCachedStatus(){var r,n;return this.app.workspace.trigger("obsidian-git:loading-status"),this.cachedStatus=await this.gitManager.status(),this.cachedStatus.conflicted.length>0?(this.localStorage.setConflict(!0),await((r=this.branchBar)==null?void 0:r.display())):(this.localStorage.setConflict(!1),await((n=this.branchBar)==null?void 0:n.display())),this.app.workspace.trigger("obsidian-git:status-changed",this.cachedStatus),this.cachedStatus}async refresh(){if(!this.gitReady)return;let r=this.app.workspace.getLeavesOfType(Dt.type),n=this.app.workspace.getLeavesOfType(Jr.type);(this.settings.changedFilesInStatusBar||r.some(i=>{var a;return!((a=i.isDeferred)!=null&&a)})||n.some(i=>{var a;return!((a=i.isDeferred)!=null&&a)}))&&await this.updateCachedStatus().catch(i=>this.displayError(i)),this.app.workspace.trigger("obsidian-git:refreshed")}refreshUpdatedHead(){}async onload(){console.log("loading "+this.manifest.name+" plugin: v"+this.manifest.version),Zn.plugin=this,this.localStorage.migrate(),await this.loadSettings(),await this.migrateSettings(),this.settingsTab=new mh(this.app,this),this.addSettingTab(this.settingsTab),this.localStorage.getPluginDisabled()||(this.registerStuff(),this.app.workspace.onLayoutReady(()=>this.init({fromReload:!1}).catch(r=>this.displayError(r))))}onExternalSettingsChange(){this.reloadSettings().catch(r=>this.displayError(r))}async reloadSettings(){let r=JSON.stringify(this.settings);await this.loadSettings();let n=JSON.stringify(this.settings);r!==n&&(this.log("Reloading settings"),this.unloadPlugin(),await this.init({fromReload:!0}),this.app.workspace.getLeavesOfType(Dt.type).forEach(i=>{var a;if(!((a=i.isDeferred)!=null&&a))return i.view.reload()}),this.app.workspace.getLeavesOfType(Jr.type).forEach(i=>{var a;if(!((a=i.isDeferred)!=null&&a))return i.view.reload()}))}registerStuff(){this.registerEvent(this.app.workspace.on("obsidian-git:refresh",()=>{this.refresh().catch(r=>this.displayError(r))})),this.registerEvent(this.app.workspace.on("obsidian-git:head-change",()=>{this.refreshUpdatedHead()})),this.registerEvent(this.app.workspace.on("file-menu",(r,n,i)=>{this.handleFileMenu(r,n,i,"file-manu")})),this.registerEvent(this.app.workspace.on("obsidian-git:menu",(r,n,i)=>{this.handleFileMenu(r,n,i,"obsidian-git:menu")})),this.registerEvent(this.app.workspace.on("active-leaf-change",r=>{this.onActiveLeafChange(r)})),this.registerEvent(this.app.vault.on("modify",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerEvent(this.app.vault.on("delete",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerEvent(this.app.vault.on("create",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerEvent(this.app.vault.on("rename",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerView(Dt.type,r=>new Bu(r,this)),this.registerView(Jr.type,r=>new Ou(r,this)),this.registerView(ga.type,r=>new ws(r,this)),this.registerView(ma.type,r=>new ys(r,this)),this.addRibbonIcon("git-pull-request","Open Git source control",async()=>{var i;let r=this.app.workspace.getLeavesOfType(Dt.type),n;r.length===0?(n=(i=this.app.workspace.getRightLeaf(!1))!=null?i:this.app.workspace.getLeaf(),await n.setViewState({type:Dt.type})):n=r.first(),await this.app.workspace.revealLeaf(n)}),this.registerHoverLinkSource(Dt.type,{display:"Git View",defaultMod:!0}),this.editorIntegration.onLoadPlugin(),this.setRefreshDebouncer(),DF(this)}setRefreshDebouncer(){var r;(r=this.debRefresh)==null||r.cancel(),this.debRefresh=(0,we.debounce)(()=>{this.settings.refreshSourceControl&&this.refresh().catch(console.error)},this.settings.refreshSourceControlTimer,!0)}async addFileToGitignore(r,n){let i=this.gitManager.getRelativeRepoPath(r,!0),a=J2({isFolder:n,gitRelativePath:i});return await this.app.vault.adapter.append(this.gitManager.getRelativeVaultPath(".gitignore"),`
`+a),this.refresh()}handleFileMenu(r,n,i,a){if(!this.gitReady||!this.settings.showFileMenu||!n)return;let s;if(typeof n=="string"?s=n:s=n.path,i=="file-explorer-context-menu"&&(r.addItem(o=>{o.setTitle("Git: Stage").setIcon("plus-circle").setSection("action").onClick(l=>{this.promiseQueue.addTask(async()=>{n instanceof we.TFile?await this.stageFile(n):(await this.gitManager.stageAll({dir:this.gitManager.getRelativeRepoPath(s,!0)}),this.app.workspace.trigger("obsidian-git:refresh"))})})}),r.addItem(o=>{o.setTitle("Git: Unstage").setIcon("minus-circle").setSection("action").onClick(l=>{this.promiseQueue.addTask(async()=>{n instanceof we.TFile?await this.unstageFile(n):(await this.gitManager.unstageAll({dir:this.gitManager.getRelativeRepoPath(s,!0)}),this.app.workspace.trigger("obsidian-git:refresh"))})})}),r.addItem(o=>{o.setTitle("Git: Add to .gitignore").setIcon("file-x").setSection("action").onClick(l=>{this.addFileToGitignore(s,n instanceof we.TFolder).catch(c=>this.displayError(c))})})),i=="git-source-control"){r.addItem(l=>{l.setTitle("Git: Add to .gitignore").setIcon("file-x").setSection("action").onClick(c=>{this.addFileToGitignore(s,n instanceof we.TFolder).catch(u=>this.displayError(u))})});let o=this.app.vault.adapter;a==="obsidian-git:menu"&&o instanceof we.FileSystemAdapter&&(r.addItem(l=>{l.setTitle("Open in default app").setIcon("arrow-up-right").setSection("action").onClick(c=>{this.app.openWithDefaultApp(s)})}),r.addItem(l=>{l.setTitle("Show in system explorer").setIcon("arrow-up-right").setSection("action").onClick(c=>{window.electron.shell.showItemInFolder(_M.join(o.getBasePath(),s))})}))}}async migrateSettings(){this.settings.mergeOnPull!=null&&(this.settings.syncMethod=this.settings.mergeOnPull?"merge":"rebase",this.settings.mergeOnPull=void 0,await this.saveSettings()),this.settings.autoCommitMessage===void 0&&(this.settings.autoCommitMessage=this.settings.commitMessage,await this.saveSettings()),this.settings.gitPath!=null&&(this.localStorage.setGitPath(this.settings.gitPath),this.settings.gitPath=void 0,await this.saveSettings()),this.settings.username!=null&&(this.localStorage.setPassword(this.settings.username),this.settings.username=void 0,await this.saveSettings())}unloadPlugin(){var r,n;this.gitReady=!1,this.editorIntegration.onUnloadPlugin(),this.automaticsManager.unload(),(r=this.branchBar)==null||r.remove(),(n=this.statusBar)==null||n.remove(),this.statusBar=void 0,this.branchBar=void 0,this.gitManager.unload(),this.promiseQueue.clear();for(let i of this.intervalsToClear)window.clearInterval(i);this.intervalsToClear=[],this.debRefresh.cancel()}onunload(){this.unloadPlugin(),console.log("unloading "+this.manifest.name+" plugin")}async loadSettings(){let r=await this.loadData();r==null&&(r={showedMobileNotice:!0}),this.settings=nA(Xe,r)}async saveSettings(){var r;(r=this.settingsTab)==null||r.beforeSaveSettings(),await this.saveData(this.settings)}get useSimpleGit(){return we.Platform.isDesktopApp}async init({fromReload:r=!1}){var n;if(this.settings.showStatusBar&&!this.statusBar){let i=this.addStatusBarItem();this.statusBar=new gh(i,this),this.intervalsToClear.push(window.setInterval(()=>{var a;return(a=this.statusBar)==null?void 0:a.display()},1e3))}try{this.useSimpleGit?(this.gitManager=new _e(this),await this.gitManager.setGitInstance()):this.gitManager=new _n(this);let i=await this.gitManager.checkRequirements(),a=this.localStorage.getPausedAutomatics();switch(i){case"missing-git":this.displayError(`Cannot run git command. Trying to run: '${this.localStorage.getGitPath()||"git"}' .`);break;case"missing-repo":new we.Notice("Can't find a valid git repository. Please create one via the given command or clone an existing repo.",1e4);break;case"valid":if(this.gitReady=!0,this.setPluginState({gitAction:0}),we.Platform.isDesktop&&this.settings.showBranchStatusBar&&!this.branchBar){let s=this.addStatusBarItem();this.branchBar=new Cp(s,this),this.intervalsToClear.push(window.setInterval(()=>{var o;return void((o=this.branchBar)==null?void 0:o.display().catch(console.error))},6e4))}await((n=this.branchBar)==null?void 0:n.display()),this.editorIntegration.onReady(),this.app.workspace.trigger("obsidian-git:refresh"),this.app.workspace.trigger("obsidian-git:head-change"),!r&&this.settings.autoPullOnBoot&&!a&&this.promiseQueue.addTask(()=>this.pullChangesFromRemote()),a||await this.automaticsManager.init(),a&&new we.Notice("Automatic routines are currently paused.");break;default:this.log("Something weird happened. The 'checkRequirements' result is "+i)}}catch(i){this.displayError(i),console.error(i)}}async createNewRepo(){try{await this.gitManager.init(),new we.Notice("Initialized new repo"),await this.init({fromReload:!0})}catch(r){this.displayError(r)}}async cloneNewRepo(){let n=await new ze(this,{placeholder:"Enter remote URL"}).openAndGetResult();if(n){let i="Vault Root",a=await new ze(this,{options:this.gitManager instanceof _n?[i]:[],placeholder:"Enter directory for clone. It needs to be empty or not existent.",allowEmpty:this.gitManager instanceof _n}).openAndGetResult();if(a==null)return;if(a===i&&(a="."),a=(0,we.normalizePath)(a),a==="/"&&(a="."),a==="."){let f=await new ze(this,{options:["NO","YES"],placeholder:`Does your remote repo contain a ${this.app.vault.configDir} directory at the root?`,onlySelection:!0}).openAndGetResult();if(f===void 0){new we.Notice("Aborted clone");return}else if(f==="YES"){let d="DELETE ALL YOUR LOCAL CONFIG AND PLUGINS";if(await new ze(this,{options:["Abort clone",d],placeholder:`To avoid conflicts, the local ${this.app.vault.configDir} directory needs to be deleted.`,onlySelection:!0}).openAndGetResult()===d)await this.app.vault.adapter.rmdir(this.app.vault.configDir,!0);else{new we.Notice("Aborted clone");return}}}let s=await new ze(this,{placeholder:"Specify depth of clone. Leave empty for full clone.",allowEmpty:!0}).openAndGetResult(),o;if(s===void 0){new we.Notice("Aborted clone");return}if(s!==""&&(o=parseInt(s),isNaN(o))){new we.Notice("Invalid depth. Aborting clone.");return}new we.Notice(`Cloning new repo into "${a}"`);let l=this.settings.basePath,c=a&&a!==".";c&&(this.settings.basePath=a);try{await this.gitManager.clone(Kv(n),a,o),new we.Notice("Cloned new repo."),new we.Notice("Please restart Obsidian"),c&&await this.saveSettings()}catch(u){this.displayError(u),this.settings.basePath=l,await this.saveSettings()}}}async isAllInitialized(){return this.gitReady||await this.init({fromReload:!0}),this.gitReady}async pullChangesFromRemote(){if(!await this.isAllInitialized())return;let r=await this.pull();if(r!==!1){if(r||this.displayMessage("Pull: Everything is up-to-date"),this.gitManager instanceof _e){let n=await this.updateCachedStatus();n.conflicted.length>0&&(this.displayError(`You have conflicts in ${n.conflicted.length} ${n.conflicted.length==1?"file":"files"}`),await this.handleConflict(n.conflicted))}this.app.workspace.trigger("obsidian-git:refresh"),this.setPluginState({gitAction:0})}}async commitAndSync({fromAutoBackup:r,requestCustomMessage:n=!1,commitMessage:i,onlyStaged:a=!1}){!await this.isAllInitialized()||(this.settings.syncMethod=="reset"&&this.settings.pullBeforePush&&await this.pull(),!await this.commit({fromAuto:r,requestCustomMessage:n,commitMessage:i,onlyStaged:a}))||(this.settings.syncMethod!="reset"&&this.settings.pullBeforePush&&await this.pull(),this.settings.disablePush||(await this.remotesAreSet()&&await this.gitManager.canPush()?await this.push():this.displayMessage("No commits to push")),this.setPluginState({gitAction:0}))}async commit({fromAuto:r,requestCustomMessage:n=!1,onlyStaged:i=!1,commitMessage:a,amend:s=!1}){if(!await this.isAllInitialized())return!1;try{let o=this.localStorage.getConflict(),l,c=[],u=[];if(this.gitManager instanceof _e){if(await this.mayDeleteConflictFile(),l=await this.updateCachedStatus(),l.conflicted.length==0&&(o=!1),r&&l.conflicted.length>0)return this.displayError(`Did not commit, because you have conflicts in ${l.conflicted.length} ${l.conflicted.length==1?"file":"files"}. Please resolve them and commit per command.`),await this.handleConflict(l.conflicted),!1;c=l.staged,u=l.changed}else{if(r&&o)return this.displayError("Did not commit, because you have conflicts. Please resolve them and commit per command."),!1;{o&&await this.mayDeleteConflictFile();let f=this.gitManager;i?c=await f.getStagedFiles():u=(await f.getUnstagedFiles()).map(({path:h,type:m})=>({vaultPath:this.gitManager.getRelativeVaultPath(h),path:h,type:m}))}}if(await this.tools.hasTooBigFiles(i?c:[...c,...u]))return this.setPluginState({gitAction:0}),!1;if(u.length+c.length!==0||o){let f=a!=null?a:a=r?this.settings.autoCommitMessage:this.settings.commitMessage;if(r&&this.settings.customMessageOnAutoBackup||n){!this.settings.disablePopups&&r&&new we.Notice("Auto backup: Please enter a custom commit message. Leave empty to abort");let m=await new vh(this).openAndGetResult();if(m!=null&&m!=""&&m!="...")f=m;else return this.setPluginState({gitAction:0}),!1}else if(this.gitManager instanceof _e&&this.settings.commitMessageScript){let m=this.settings.commitMessageScript,g=this.localStorage.getHostname()||"",v=m.replace("{{hostname}}",g);v=v.replace("{{date}}",(0,we.moment)().format(this.settings.commitDateFormat));let w=await Dc("sh",["-c",v],{cwd:this.gitManager.absoluteRepoPath});w.code!=0?this.displayError(w.stderr):w.stdout.trim().length==0?this.displayMessage("Stdout from commit message script is empty. Using default message."):f=w.stdout}let d;i?d=await this.gitManager.commit({message:f,amend:s}):d=await this.gitManager.commitAll({message:f,status:l,unstagedFiles:u,amend:s}),this.gitManager instanceof _e&&await this.updateCachedStatus();let h=!1;d===void 0&&(h=!0,d=u.length+c.length||0),this.displayMessage(`Committed${h?" approx.":""} ${d} ${d==1?"file":"files"}`)}else this.displayMessage("No changes to commit");return this.app.workspace.trigger("obsidian-git:refresh"),!0}catch(o){return this.displayError(o),!1}}async push(){if(!await this.isAllInitialized()||!await this.remotesAreSet())return!1;let r=this.localStorage.getConflict();try{this.gitManager instanceof _e&&await this.mayDeleteConflictFile();let n;if(this.gitManager instanceof _e&&(n=await this.updateCachedStatus()).conflicted.length>0)return this.displayError(`Cannot push. You have conflicts in ${n.conflicted.length} ${n.conflicted.length==1?"file":"files"}`),await this.handleConflict(n.conflicted),!1;if(this.gitManager instanceof _n&&r)return this.displayError("Cannot push. You have conflicts"),!1;this.log("Pushing....");let i=await this.gitManager.push();return i!==void 0&&(i>0?this.displayMessage(`Pushed ${i} ${i==1?"file":"files"} to remote`):this.displayMessage("No commits to push")),this.setPluginState({offlineMode:!1}),this.app.workspace.trigger("obsidian-git:refresh"),!0}catch(n){return n instanceof Ro?this.handleNoNetworkError(n):this.displayError(n),!1}}async pull(){if(!await this.remotesAreSet())return!1;try{this.log("Pulling....");let r=await this.gitManager.pull()||[];return this.setPluginState({offlineMode:!1}),r.length>0&&(this.displayMessage(`Pulled ${r.length} ${r.length==1?"file":"files"} from remote`),this.lastPulledFiles=r),r.length}catch(r){return this.displayError(r),!1}}async fetch(){if(await this.remotesAreSet())try{await this.gitManager.fetch(),this.displayMessage("Fetched from remote"),this.setPluginState({offlineMode:!1}),this.app.workspace.trigger("obsidian-git:refresh")}catch(r){this.displayError(r)}}async mayDeleteConflictFile(){let r=this.app.vault.getAbstractFileByPath(Po);r&&(this.app.workspace.iterateAllLeaves(n=>{var i;n.view instanceof we.MarkdownView&&((i=n.view.file)==null?void 0:i.path)==r.path&&n.detach()}),await this.app.vault.delete(r))}async stageFile(r){return await this.isAllInitialized()?(await this.gitManager.stage(r.path,!0),this.app.workspace.trigger("obsidian-git:refresh"),this.setPluginState({gitAction:0}),!0):!1}async unstageFile(r){return await this.isAllInitialized()?(await this.gitManager.unstage(r.path,!0),this.app.workspace.trigger("obsidian-git:refresh"),this.setPluginState({gitAction:0}),!0):!1}async switchBranch(){var i;if(!await this.isAllInitialized())return;let r=await this.gitManager.branchInfo(),n=await new Ap(this,r.branches).openAndGetReslt();if(n!=null)return await this.gitManager.checkout(n),this.displayMessage(`Switched to ${n}`),this.app.workspace.trigger("obsidian-git:refresh"),await((i=this.branchBar)==null?void 0:i.display()),n}async switchRemoteBranch(){var a;if(!await this.isAllInitialized())return;let r=await this.selectRemoteBranch()||"",[n,i]=Ri(r);if(i!=null&&n!=null)return await this.gitManager.checkout(i,n),this.displayMessage(`Switched to ${r}`),await((a=this.branchBar)==null?void 0:a.display()),r}async createBranch(){var n;if(!await this.isAllInitialized())return;let r=await new ze(this,{placeholder:"Create new branch"}).openAndGetResult();if(r!=null)return await this.gitManager.createBranch(r),this.displayMessage(`Created new branch ${r}`),await((n=this.branchBar)==null?void 0:n.display()),r}async deleteBranch(){var i;if(!await this.isAllInitialized())return;let r=await this.gitManager.branchInfo();r.current&&r.branches.remove(r.current);let n=await new ze(this,{options:r.branches,placeholder:"Delete branch",onlySelection:!0}).openAndGetResult();if(n!=null){let a=!1;if(!await this.gitManager.branchIsMerged(n)){let o=await new ze(this,{options:["YES","NO"],placeholder:"This branch isn't merged into HEAD. Force delete?",onlySelection:!0}).openAndGetResult();if(o!=="YES")return;a=o==="YES"}return await this.gitManager.deleteBranch(n,a),this.displayMessage(`Deleted branch ${n}`),await((i=this.branchBar)==null?void 0:i.display()),n}}async remotesAreSet(){return this.settings.updateSubmodules||(await this.gitManager.branchInfo()).tracking?!0:(new we.Notice("No upstream branch is set. Please select one."),await this.setUpstreamBranch())}async setUpstreamBranch(){let r=await this.selectRemoteBranch();return r==null?(this.displayError("Aborted. No upstream-branch is set!",1e4),this.setPluginState({gitAction:0}),!1):(await this.gitManager.updateUpstreamBranch(r),this.displayMessage(`Set upstream branch to ${r}`),this.setPluginState({gitAction:0}),!0)}async discardAll(r){if(!await this.isAllInitialized())return!1;let n=await this.gitManager.status({path:r}),i=0,a=0;for(let o of n.changed)o.workingDir=="U"?i++:a++;if(i+a==0)return!1;let s=await new Sl({app:this.app,filesToDeleteCount:i,filesToDiscardCount:a,path:r!=null?r:""}).openAndGetResult();switch(s){case!1:return s;case"discard":await this.gitManager.discardAll({dir:r,status:this.cachedStatus});break;case"delete":{await this.gitManager.discardAll({dir:r,status:this.cachedStatus});let o=await this.gitManager.getUntrackedPaths({path:r,status:this.cachedStatus});for(let l of o){let c=this.gitManager.getRelativeVaultPath(l),u=this.app.vault.getAbstractFileByPath(c);u?await this.app.fileManager.trashFile(u):l.endsWith("/")?await this.app.vault.adapter.rmdir(c,!0):await this.app.vault.adapter.remove(c)}break}default:Rd(s)}return this.app.workspace.trigger("obsidian-git:refresh"),s}async handleConflict(r){this.localStorage.setConflict(!0);let n;r!==void 0&&(n=["# Conflicts","Please resolve them and commit them using the commands `Git: Commit all changes` followed by `Git: Push`","(This file will automatically be deleted before commit)","[[#Additional Instructions]] available below file list","",...r.map(i=>{let a=this.app.vault.getAbstractFileByPath(i);return a instanceof we.TFile?`- [[${this.app.metadataCache.fileToLinktext(a,"/")}]]`:`- Not a file: ${i}`}),`
# Additional Instructions
I strongly recommend to use "Source mode" for viewing the conflicted files. For simple conflicts, in each file listed above replace every occurrence of the following text blocks with the desired text.

\`\`\`diff
<<<<<<< HEAD
    File changes in local repository
=======
    File changes in remote repository
>>>>>>> origin/main
\`\`\``]),await this.tools.writeAndOpenFile(n==null?void 0:n.join(`
`))}async editRemotes(){if(!await this.isAllInitialized())return;let r=await this.gitManager.getRemotes(),i=await new ze(this,{options:r,placeholder:"Select or create a new remote by typing its name and selecting it"}).openAndGetResult();if(i){let a=await this.gitManager.getRemoteUrl(i),o=await new ze(this,{initialValue:a,placeholder:"Enter remote URL"}).openAndGetResult();if(o)return await this.gitManager.setRemote(i,Kv(o)),i}}async selectRemoteBranch(){let r=await this.gitManager.getRemotes(),n;r.length===0&&(n=await this.editRemotes(),n==null&&(r=await this.gitManager.getRemotes()));let i=new ze(this,{options:r,placeholder:"Select or create a new remote by typing its name and selecting it"}),a=n!=null?n:await i.openAndGetResult();if(a){this.displayMessage("Fetching remote branches"),await this.gitManager.fetch(a);let s=await this.gitManager.getRemoteBranches(a),l=await new ze(this,{options:s,placeholder:"Select or create a new remote branch by typing its name and selecting it"}).openAndGetResult();return l==null?void 0:l.startsWith(a+"/")?l:`${a}/${l}`}}async removeRemote(){if(!await this.isAllInitialized())return;let r=await this.gitManager.getRemotes(),i=await new ze(this,{options:r,placeholder:"Select a remote"}).openAndGetResult();i&&await this.gitManager.removeRemote(i)}onActiveLeafChange(r){var s,o;let n=r==null?void 0:r.view;if(!(n!=null&&n.getState().file)&&!(n instanceof ws||n instanceof ys))return;let i=this.app.workspace.getLeavesOfType(Dt.type).first(),a=this.app.workspace.getLeavesOfType(Jr.type).first();if((s=i==null?void 0:i.view.containerEl.querySelector("div.tree-item-self.is-active"))==null||s.removeClass("is-active"),(o=a==null?void 0:a.view.containerEl.querySelector("div.tree-item-self.is-active"))==null||o.removeClass("is-active"),(r==null?void 0:r.view)instanceof ws||(r==null?void 0:r.view)instanceof ys){let l=r.view.state.bFile;this.lastDiffViewState=r.view.getState();let c;i&&r.view.state.aRef=="HEAD"?c=i.view.containerEl.querySelector(`div.staged div.tree-item-self[data-path='${l}']`):i&&r.view.state.aRef==""?c=i.view.containerEl.querySelector(`div.changes div.tree-item-self[data-path='${l}']`):a&&(c=a.view.containerEl.querySelector(`div.tree-item-self[data-path='${l}']`)),c==null||c.addClass("is-active")}else this.lastDiffViewState=void 0}handleNoNetworkError(r){this.state.offlineMode?this.log("Encountered network error, but already in offline mode"):this.displayError("Git: Going into offline mode. Future network errors will no longer be displayed.",2e3),this.setPluginState({gitAction:0,offlineMode:!0})}displayMessage(r,n=4*1e3){var i;(i=this.statusBar)==null||i.displayMessage(r.toLowerCase(),n),this.settings.disablePopups||(!this.settings.disablePopupsForNoChanges||!r.startsWith("No changes"))&&new we.Notice(r,5*1e3),this.log(r)}displayError(r,n=10*1e3){var a;if(r instanceof bM.Errors.UserCanceledError){new we.Notice("Aborted");return}let i;r instanceof Error?i=r:i=new Error(String(r)),this.setPluginState({gitAction:0}),this.settings.showErrorNotices&&new we.Notice(i.message,n),console.error(`${this.manifest.id}:`,i.stack),(a=this.statusBar)==null||a.displayMessage(i.message.toLowerCase(),n)}log(...r){console.log(`${this.manifest.id}:`,...r)}};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

js-sha256/src/sha256.js:
  (**
   * [js-sha256]{@link https://github.com/emn178/js-sha256}
   *
   * @version 0.9.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)
*/
