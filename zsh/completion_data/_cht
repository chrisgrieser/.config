#compdef cht.sh
# SOURCE https://github.com/chubin/cheat.sh#zsh-tab-completion

__CHTSH_LANGS=($(curl -s cheat.sh/:list))
_arguments -C \
  '--help[show this help message and exit]: :->noargs' \
  '--shell[enter shell repl]: :->noargs' \
  '1:Cheat Sheet:->lang' \
  '*::: :->noargs' && return 0

if [[ CURRENT -ge 1 ]]; then
   case $state in
   noargs)
      _message "nothing to complete";;
   lang)
      # slightly modified to add proper styling for the group description
      local expl
      _description -V conventional-commit expl 'Cheat Sheet'
      compadd "${expl[@]}" -- ${__CHTSH_LANGS[@]}
      ;;
   *)
      _message "Unknown state, error in autocomplete";;
   esac

   return
fi
